import{_ as t,c as e,o as p,a,b as n,e as s}from"./app.14440598.js";const T=`{"title":"v5.9 Release Notes","description":"","frontmatter":{"title":"v5.9 Release Notes","slug":"v5-9"},"headers":[{"level":3,"title":"v5.9.2 Patch Release Notes","slug":"v5-9-2-patch-release-notes"},{"level":2,"title":"Introducing ServiceStack Studio!","slug":"introducing-servicestack-studio"},{"level":2,"title":"Instantly Servicify existing Systems!","slug":"instantly-servicify-existing-systems"},{"level":3,"title":"gRPC's Typed protoc Universe","slug":"grpc-s-typed-protoc-universe"},{"level":3,"title":"Dart gRPC Script Playground","slug":"dart-grpc-script-playground"},{"level":3,"title":"Flutter gRPC Android App","slug":"flutter-grpc-android-app"},{"level":3,"title":"React Native Typed Client","slug":"react-native-typed-client"},{"level":3,"title":"autodto - Generate Types for RDBMS Tables","slug":"autodto-generate-types-for-rdbms-tables"},{"level":2,"title":"Introducing SharpData!","slug":"introducing-sharpdata"},{"level":3,"title":"https://sharpdata.netcore.io","slug":"https-sharpdata-netcore-io"},{"level":3,"title":"Tiny footprint","slug":"tiny-footprint"},{"level":3,"title":"AutoQuery Script","slug":"autoquery-script"},{"level":3,"title":"Instant Customizable RDBMS UI","slug":"instant-customizable-rdbms-ui"},{"level":3,"title":"Quick Tour","slug":"quick-tour"},{"level":3,"title":"Launching SharpData","slug":"launching-sharpdata"},{"level":3,"title":"app URL Schemes","slug":"app-url-schemes"},{"level":3,"title":"app local aliases","slug":"app-local-aliases"},{"level":3,"title":"Open in Excel","slug":"open-in-excel"},{"level":3,"title":"Custom SharpData UI","slug":"custom-sharpdata-ui"},{"level":3,"title":"Advanced Customizations","slug":"advanced-customizations"},{"level":3,"title":"Deploying Customizations","slug":"deploying-customizations"},{"level":3,"title":"/dist-mix","slug":"dist-mix"},{"level":3,"title":"Viewing Customizations","slug":"viewing-customizations"},{"level":3,"title":"Custom Row Components","slug":"custom-row-components"},{"level":3,"title":"SharpData .NET Core Project","slug":"sharpdata-net-core-project"},{"level":3,"title":"sharpdata.netcore.io","slug":"sharpdata-netcore-io"},{"level":3,"title":"Publish to Gist Desktop App","slug":"publish-to-gist-desktop-app"},{"level":3,"title":"RDBMS Configuration","slug":"rdbms-configuration"},{"level":3,"title":"Feedback","slug":"feedback"},{"level":2,"title":"AutoQuery CRUD!","slug":"autoquery-crud"},{"level":3,"title":"Limitations of typical Auto querying Solutions","slug":"limitations-of-typical-auto-querying-solutions"},{"level":3,"title":"Creating AutoQuery CRUD Services","slug":"creating-autoquery-crud-services"},{"level":3,"title":"Advanced CRUD Example","slug":"advanced-crud-example"},{"level":3,"title":"AutoPopulate","slug":"autopopulate"},{"level":3,"title":"Multi RDBMS Services","slug":"multi-rdbms-services"},{"level":3,"title":"AutoFilter","slug":"autofilter"},{"level":3,"title":"AutoMap and AutoDefault","slug":"automap-and-autodefault"},{"level":3,"title":"Custom Complex Mapping","slug":"custom-complex-mapping"},{"level":3,"title":"Auto Guid's","slug":"auto-guid-s"},{"level":3,"title":"Optimistic Concurrency","slug":"optimistic-concurrency"},{"level":3,"title":"MQ Auto Crud Requests","slug":"mq-auto-crud-requests"},{"level":2,"title":"Declarative Validation","slug":"declarative-validation"},{"level":3,"title":"Property Validators","slug":"property-validators"},{"level":3,"title":"Validated Validator Expressions","slug":"validated-validator-expressions"},{"level":3,"title":"Defining Multiple Validators","slug":"defining-multiple-validators"},{"level":3,"title":"Registering Custom Declarative Validators","slug":"registering-custom-declarative-validators"},{"level":3,"title":"Custom Script Validation","slug":"custom-script-validation"},{"level":3,"title":"Custom Error Codes and Messages","slug":"custom-error-codes-and-messages"},{"level":3,"title":"Type Validators","slug":"type-validators"},{"level":3,"title":"Type Script Conditions","slug":"type-script-conditions"},{"level":3,"title":"DB Validation Rules","slug":"db-validation-rules"},{"level":2,"title":"Executable Audit Log","slug":"executable-audit-log"},{"level":3,"title":"Executable Crud Audit Events","slug":"executable-crud-audit-events"},{"level":3,"title":"Full Executable Audit History","slug":"full-executable-audit-history"},{"level":3,"title":"Replay AutoCrud Requests","slug":"replay-autocrud-requests"},{"level":2,"title":"AutoGen AutoQuery & Crud Services","slug":"autogen-autoquery-crud-services"},{"level":3,"title":"Code Generation of AutoQuery & Crud Services","slug":"code-generation-of-autoquery-crud-services"},{"level":2,"title":"AutoRegister AutoGen AutoQuery Services!","slug":"autoregister-autogen-autoquery-services"},{"level":3,"title":"Instantly Servicify Northwind DB with gRPC","slug":"instantly-servicify-northwind-db-with-grpc"},{"level":3,"title":"Calling gRPC SSL Services","slug":"calling-grpc-ssl-services"},{"level":3,"title":"AutoGen's AutoRegister Implementation","slug":"autogen-s-autoregister-implementation"},{"level":3,"title":"CreateCrudServices Instructions","slug":"createcrudservices-instructions"},{"level":3,"title":"Customize Code Generation to include App Conventions","slug":"customize-code-generation-to-include-app-conventions"},{"level":3,"title":"Mixing generated AutoQuery Services & existing code-first Services","slug":"mixing-generated-autoquery-services-existing-code-first-services"},{"level":3,"title":"Trying it out","slug":"trying-it-out"},{"level":3,"title":"Open in ServiceStack Studio","slug":"open-in-servicestack-studio"},{"level":3,"title":"Retrying Dart gRPC Example","slug":"retrying-dart-grpc-example"},{"level":2,"title":"ServiceStack Studio","slug":"servicestack-studio"},{"level":3,"title":"Studio Desktop App vs ServiceStack.Admin","slug":"studio-desktop-app-vs-servicestack-admin"},{"level":3,"title":"Frequent out-of-band release cadence","slug":"frequent-out-of-band-release-cadence"},{"level":3,"title":"Light Footprint + Always use latest version","slug":"light-footprint-always-use-latest-version"},{"level":3,"title":"Desktop Features","slug":"desktop-features"},{"level":3,"title":"ServiceStack.Desktop","slug":"servicestack-desktop"},{"level":3,"title":"win32 demo","slug":"win32-demo"},{"level":3,"title":"Highly productive live-reloading Development experience","slug":"highly-productive-live-reloading-development-experience"},{"level":3,"title":"Starting ServiceStack Studio","slug":"starting-servicestack-studio"},{"level":3,"title":"Home Page","slug":"home-page"},{"level":3,"title":"AutoQuery UI","slug":"autoquery-ui"},{"level":3,"title":"Integrated Auth Component","slug":"integrated-auth-component"},{"level":3,"title":"Desktop User State & Preferences","slug":"desktop-user-state-preferences"},{"level":3,"title":"AutoCrud Querying","slug":"autocrud-querying"},{"level":3,"title":"Export to Excel","slug":"export-to-excel"},{"level":3,"title":"AutoCrud Partial Updates","slug":"autocrud-partial-updates"},{"level":3,"title":"AutoCrud Create","slug":"autocrud-create"},{"level":3,"title":"AutoCrud Update and Delete","slug":"autocrud-update-and-delete"},{"level":3,"title":"API Log Viewer","slug":"api-log-viewer"},{"level":3,"title":"Executable Audit History","slug":"executable-audit-history"},{"level":3,"title":"Validators UI","slug":"validators-ui"},{"level":3,"title":"Future Updates","slug":"future-updates"},{"level":3,"title":"Metadata App Export / Discovery","slug":"metadata-app-export-discovery"},{"level":2,"title":"AutoQuery","slug":"autoquery"},{"level":3,"title":"New AutoQuery Conventions","slug":"new-autoquery-conventions"},{"level":3,"title":"CsvFormat","slug":"csvformat"},{"level":2,"title":"gRPC code-first Development","slug":"grpc-code-first-development"},{"level":3,"title":"Flattened Request Hierarchy's","slug":"flattened-request-hierarchy-s"},{"level":2,"title":"Single Page App Templates","slug":"single-page-app-templates"},{"level":3,"title":"Vue & React \\"Lite\\" Project Templates","slug":"vue-react-lite-project-templates"},{"level":2,"title":"#Script","slug":"script"},{"level":3,"title":"Reclaiming = operator for assignment expressions","slug":"reclaiming-operator-for-assignment-expressions"},{"level":3,"title":"Breaking Change","slug":"breaking-change"},{"level":3,"title":"JS familiarity over enhanced human-friendly syntax","slug":"js-familiarity-over-enhanced-human-friendly-syntax"},{"level":3,"title":"Local Variables","slug":"local-variables"},{"level":3,"title":"Global Variables","slug":"global-variables"},{"level":3,"title":"Assignment Expressions","slug":"assignment-expressions"},{"level":3,"title":"New #Script Script Methods","slug":"new-script-script-methods"},{"level":3,"title":"Modified if* methods behavior","slug":"modified-if-methods-behavior"},{"level":3,"title":"init.ss Startup Scripts","slug":"init-ss-startup-scripts"},{"level":3,"title":"Lisp","slug":"lisp"},{"level":2,"title":"ServiceStack","slug":"servicestack"},{"level":3,"title":"Embedded UMD build of @servicestack/client","slug":"embedded-umd-build-of-servicestack-client"},{"level":3,"title":"TypeScript Nullable properties","slug":"typescript-nullable-properties"},{"level":3,"title":"Embedded Login Page fallback","slug":"embedded-login-page-fallback"},{"level":3,"title":"Lightweight Customizable HTML Templates","slug":"lightweight-customizable-html-templates"},{"level":3,"title":"Hosting ASP.NET Core Apps on Custom Path","slug":"hosting-asp-net-core-apps-on-custom-path"},{"level":3,"title":"Pluralize and Singularize","slug":"pluralize-and-singularize"},{"level":3,"title":"AuthSecret Admin Session","slug":"authsecret-admin-session"},{"level":3,"title":"Exception Handling","slug":"exception-handling"},{"level":3,"title":"GatewayExceptionHandlers","slug":"gatewayexceptionhandlers"},{"level":3,"title":"System.Web Shims removed","slug":"system-web-shims-removed"},{"level":3,"title":"XmlSerializerFormat Plugin","slug":"xmlserializerformat-plugin"},{"level":3,"title":"Cache Client","slug":"cache-client"},{"level":3,"title":"Other features","slug":"other-features-1"},{"level":3,"title":"Server Sent Events","slug":"server-sent-events"},{"level":3,"title":"Stand-alone Razor Views","slug":"stand-alone-razor-views"},{"level":3,"title":"OpenApi","slug":"openapi"},{"level":2,"title":"OrmLite","slug":"ormlite"},{"level":3,"title":"Ensure","slug":"ensure"},{"level":3,"title":"Dictionary APIs","slug":"dictionary-apis"},{"level":3,"title":"Custom Insert and Update Expressions","slug":"custom-insert-and-update-expressions"},{"level":3,"title":"DbScripts","slug":"dbscripts"},{"level":3,"title":"DbScriptsAsync sync APIs","slug":"dbscriptsasync-sync-apis"},{"level":3,"title":"Spread Util","slug":"spread-util"},{"level":3,"title":"PostgreSQL Array","slug":"postgresql-array"},{"level":3,"title":"PostgreSQL Params","slug":"postgresql-params"}],"relativePath":"releases/v5.9.md","lastUpdated":1634495308446}`,o={},c=a(`<p>We&#39;re excited to announce the culmination of many high-level productivity features ServiceStack gained in this release that makes it vastly more productive to rapidly develop data-driven APIs which has seen AutoQuery gain full CRUD support where it&#39;s now able to declaratively implement Create, Updates, Partial Updates and Deletes APIs.</p><p>To maximize their utility AutoQuery/CRUD Services gain additional declarative powers whereby most common operations can continue to be implemented entirely from just their declarative Request DTO definition which is able to apply mandatory filters to limit Multitenant &amp; Soft Deleted records, populate internal data models with Audit info &amp; Complex Expressions, Auto Mapping between different DTO &amp; Data Model properties, support for Optimistic concurrency &amp; the ability to easily enable high-end App-level features like full Executable Audit History for all CRUD operations enabling EventSourcing-like capabilities in being able to re-create entity state by re-running their Audit History.</p><p>Whilst all Services benefit from the new enhanced Fluent Validation capabilities where all built-in validators can now be applied declaratively, including new support for top-level &quot;Type Validators&quot; which can be used to enforce Type Authorization rules directly on DTOs without implementation dependencies. Declarative validation rules can also sourced from dynamic sources like an RDBMS where they&#39;re both instantly applied at runtime &amp; cached locally for max performance.</p><p>If time constrained, skim the ToC below to get a quick overview of what&#39;s in this release and jump directly to features you&#39;re interested in:</p><h1 id="table-of-contents" tabindex="-1">Table of Contents <a class="header-anchor" href="#table-of-contents" aria-hidden="true">#</a></h1><ul><li><a href="#introducing-servicestack-studio">Introducing ServiceStack Studio!</a></li><li><a href="#instantly-servicify-existing-systems">Instantly Servicify existing Systems!</a><ul><li><a href="#grpcs-typed-protoc-universe">gRPC&#39;s Typed protoc Universe</a></li><li><a href="#dart-grpc-script-playground">Dart gRPC Script Playground</a></li><li><a href="#flutter-grpc-android-app">Flutter gRPC Android App</a></li><li><a href="#react-native-typed-client">React Native Typed Client</a></li></ul></li><li><a href="#autodto---generate-types-for-rdbms-tables">autodto - Generate Types for RDBMS Tables</a></li><li><a href="#introducing-sharpdata">Introducing SharpData!</a><ul><li><a href="#autoquery-script">AutoQuery Script</a></li><li><a href="#instant-customizable-rdbms-ui">Instant Customizable RDBMS UI</a></li><li><a href="#quick-tour">Quick Tour!</a><ul><li><a href="#filters">Filters</a></li><li><a href="#custom-field-selection">Custom Field Selection</a></li><li><a href="#multiple-orderbys">Multiple OrderBy&#39;s</a></li><li><a href="#paging">Paging</a></li><li><a href="#format">Format</a></li><li><a href="#multitenancy">Multitenancy</a></li></ul></li><li><a href="#launching-sharpdata">Launching SharpData</a><ul><li><a href="#configure-rdbms-from-command-line">Configure RDBMS from command-line</a></li></ul></li><li><a href="#app-url-schemes">app URL Schemes</a></li><li><a href="#app-local-aliases">app local aliases</a></li><li><a href="#custom-app-settings">Custom App Settings</a></li><li><a href="#open-in-excel">Open in Excel</a></li><li><a href="#custom-row-components">Custom Row Components</a></li><li><a href="#sharpdata-net-core-project">SharpData .NET Core Project</a></li><li><a href="#publish-to-gist-desktop-app">Publish to Gist Desktop App</a></li><li><a href="#rdbms-configuration">RDBMS Configuration</a></li><li><a href="#feedback">Feedback</a></li></ul></li><li><a href="#autoquery-crud">AutoQuery CRUD!</a><ul><li><a href="#limitations-of-typical-auto-querying-solutions">Limitations of typical Auto querying Solutions</a></li><li><a href="#creating-autoquery-crud-services">Creating AutoQuery CRUD Services</a></li><li><a href="#advanced-crud-example">Advanced CRUD Example</a></li><li><a href="#autopopulate">AutoPopulate</a></li><li><a href="#multi-rdbms-services">Multi RDBMS Services</a></li><li><a href="#autofilter">AutoFilter</a></li><li><a href="#automap-and-autodefault">AutoMap and AutoDefault</a></li><li><a href="#custom-complex-mapping">Custom Complex Mapping</a></li><li><a href="#auto-guids">Auto Guid&#39;s</a></li><li><a href="#optimistic-concurrency">Optimistic Concurrency</a></li><li><a href="#mq-auto-crud-requests">MQ Auto Crud Requests</a><ul><li><a href="#publishing-requests-to-oneway-endpoint">Publishing Requests to OneWay Endpoint</a></li></ul></li></ul></li><li><a href="#declarative-validation">Declarative Validation</a><ul><li><a href="#property-validators">Property Validators</a></li><li><a href="#defining-multiple-validators">Defining Multiple Validators</a></li><li><a href="#registering-custom-declarative-validators">Registering Custom Declarative Validators</a></li><li><a href="#custom-script-validation">Custom Script Validation</a></li><li><a href="#custom-error-codes-and-messages">Custom Error Codes and Messages</a></li><li><a href="#type-validators">Type Validators</a><ul><li><a href="#custom-type-attributes">Custom Type Attributes</a></li></ul></li><li><a href="#type-script-conditions">Type Script Conditions</a></li><li><a href="#db-validation-rules">DB Validation Rules</a></li></ul></li><li><a href="#executable-audit-log">Executable Audit Log</a><ul><li><a href="#full-executable-audit-history">Full Executable Audit History</a></li><li><a href="#replay-autocrud-requests">Replay AutoCrud Requests</a></li></ul></li><li><a href="#autogen-autoquery--crud-services">AutoGen AutoQuery &amp; Crud Services</a><ul><li><a href="#code-generation-of-autoquery--crud-services">Code Generation of AutoQuery &amp; Crud Services</a></li></ul></li><li><a href="#autoregister-autogen-autoquery-services">AutoRegister AutoGen AutoQuery Services!</a><ul><li><a href="#instantly-servicify-northwind-db-with-grpc">Instantly Servicify Northwind DB with gRPC</a><ul><li><a href="#step-by-step-guide">Step-by-step Guide</a></li></ul></li><li><a href="#create-dart-grpc-console-app">Create Dart gRPC Console App</a></li><li><a href="#calling-grpc-ssl-services">Calling gRPC SSL Services</a></li><li><a href="#autogens-autoregister-implementation">AutoGen&#39;s AutoRegister Implementation</a></li><li><a href="#createcrudservices-instructions">CreateCrudServices Instructions</a><ul><li><a href="#multiple-schemas-and-rdbms-connections">Multiple Schemas and RDBMS Connections</a></li></ul></li><li><a href="#customize-code-generation-to-include-app-conventions">Customize Code Generation to include App Conventions</a></li><li><a href="#mixing-generated-autoquery-services--existing-code-first-services">Mixing generated AutoQuery Services &amp; existing code-first Services</a></li><li><a href="#trying-it-out">Trying it out</a></li><li><a href="#open-in-servicestack-studio">Open in ServiceStack Studio</a></li></ul></li><li><a href="#servicestack-studio">ServiceStack Studio</a><ul><li><a href="#studio-desktop-app-vs-servicestackadmin">Studio Desktop App vs ServiceStack.Admin</a></li><li><a href="#frequent-out-of-band-release-cadence">Frequent out-of-band release cadence</a></li><li><a href="#light-footprint--always-use-latest-version">Light Footprint + Always use latest version</a></li><li><a href="#desktop-features">Desktop Features</a></li><li><a href="#servicestackdesktop">ServiceStack.Desktop</a></li><li><a href="#win32-demo">win32 demo</a></li><li><a href="#highly-productive-live-reloading-development-experience">Highly productive live-reloading Development experience</a></li><li><a href="#starting-servicestack-studio">Starting ServiceStack Studio</a><ul><li><a href="#desktop-less-x-plat-app">Desktop-less x-plat app</a></li></ul></li><li><a href="#home-page">Home Page</a></li><li><a href="#autoquery-ui">AutoQuery UI</a></li><li><a href="#integrated-auth-component">Integrated Auth Component</a></li><li><a href="#desktop-user-state--preferences">Desktop User State &amp; Preferences</a></li><li><a href="#autocrud-querying">AutoCrud Querying</a></li><li><a href="#export-to-excel">Export to Excel</a></li><li><a href="#autocrud-partial-updates">AutoCrud Partial Updates</a></li><li><a href="#autocrud-create">AutoCrud Create</a></li><li><a href="#autocrud-update-and-delete">AutoCrud Update and Delete</a></li><li><a href="#api-log-viewer">API Log Viewer</a></li><li><a href="#executable-audit-history">Executable Audit History</a></li><li><a href="#validators-ui">Validators UI</a></li><li><a href="#future-updates">Future Updates</a></li><li><a href="#metadata-app-export--discovery">Metadata App Export / Discovery</a></li></ul></li><li><a href="#autoquery">AutoQuery</a><ul><li><a href="#new-autoquery-conventions">New AutoQuery Conventions</a></li><li><a href="#csvformat">CsvFormat</a></li></ul></li><li><a href="#grpc-code-first-development">gRPC code-first Development</a><ul><li><a href="#flattened-request-hierarchys">Flattened Request Hierarchy&#39;s</a></li></ul></li><li><a href="#single-page-app-templates">Single Page App Templates</a><ul><li><a href="#vue--react-lite-project-templates">Vue &amp; React &quot;Lite&quot; Project Templates</a></li></ul></li><li><a href="#script">#Script</a><ul><li><a href="#reclaiming--operator-for-assignment-expressions">Reclaiming = operator for assignment expressions</a><ul><li><a href="#breaking-change">Breaking Change</a></li></ul></li><li><a href="#js-familiarity-over-enhanced-human-friendly-syntax">JS familiarity over enhanced human-friendly syntax</a></li><li><a href="#local-variables">Local Variables</a></li><li><a href="#global-variables">Global Variables</a></li><li><a href="#assignment-expressions">Assignment Expressions</a></li><li><a href="#new-script-script-methods">New #Script Script Methods</a></li><li><a href="#modified-if-methods-behavior">Modified if* methods behavior</a></li><li><a href="#initss-startup-scripts">init.ss Startup Scripts</a></li><li><a href="#lisp">Lisp</a></li></ul></li><li><a href="#servicestack">ServiceStack</a><ul><li><a href="#embedded-umd-build-of-servicestackclient">Embedded UMD build of @servicestack/client</a></li><li><a href="#typescript-nullable-properties">TypeScript Nullable properties</a></li><li><a href="#embedded-login-page-fallback">Embedded Login Page fallback</a></li><li><a href="#lightweight-customizable-html-templates">Lightweight Customizable HTML Templates</a></li><li><a href="#hosting-aspnet-core-apps-on-custom-path">Hosting ASP.NET Core Apps on Custom Path</a></li><li><a href="#pluralize-and-singularize">Pluralize and Singularize</a></li><li><a href="#authsecret-admin-session">AuthSecret Admin Session</a></li><li><a href="#exception-handling">Exception Handling</a></li><li><a href="#gatewayexceptionhandlers">GatewayExceptionHandlers</a></li><li><a href="#systemweb-shims-removed">System.Web Shims removed</a></li><li><a href="#xmlserializerformat-plugin">XmlSerializerFormat Plugin</a></li><li><a href="#cache-client">Cache Client</a></li><li><a href="#server-sent-events">Server Sent Events</a></li><li><a href="#stand-alone-razor-views">Stand-alone Razor Views</a></li><li><a href="#openapi">OpenApi</a></li></ul></li><li><a href="#ormlite">OrmLite</a><ul><li><a href="#ensure">Ensure</a><ul><li><a href="#typed-api">Typed API</a></li><li><a href="#custom-parameterized-sql-expression">Custom Parameterized SQL Expression</a></li><li><a href="#custom-parameterized-sql-expression">Multiple Ensure expressions</a></li></ul></li><li><a href="#dictionary-apis">Dictionary APIs</a><ul><li><a href="#insert-by-dictionary">Insert by Dictionary</a></li><li><a href="#update-by-dictionary">Update by Dictionary</a></li><li><a href="#updateonly-by-dictionary">UpdateOnly by Dictionary</a></li><li><a href="#delete-by-dictionary">Delete by Dictionary</a></li></ul></li><li><a href="#custom-insert-and-update-expressions">Custom Insert and Update Expressions</a></li><li><a href="#dbscripts">DbScripts</a></li><li><a href="#dbscriptsasync-sync-apis">DbScriptsAsync sync APIs</a></li><li><a href="#spread-util">Spread Util</a></li><li><a href="#postgresql-array">PostgreSQL Array</a></li><li><a href="#postgresql-array">PostgreSQL Params</a></li></ul></li></ul><h3 id="v5-9-2-patch-release-notes" tabindex="-1">v5.9.2 Patch Release Notes <a class="header-anchor" href="#v5-9-2-patch-release-notes" aria-hidden="true">#</a></h3><p>If you&#39;re <a href="/jwt-authprovider.html#upgrade-to-v592">using JWT Auth please upgrade to v5.9.2</a> when possible to resolve a JWT signature verification issue.</p><h2 id="introducing-servicestack-studio" tabindex="-1">Introducing ServiceStack Studio! <a class="header-anchor" href="#introducing-servicestack-studio" aria-hidden="true">#</a></h2><p>Another exciting development in this release is the successor to <a href="https://github.com/ServiceStack/Admin" target="_blank" rel="noopener noreferrer">Admin UI</a>: <strong>ServiceStack Studio!</strong> - a capability-based UI to manage multiple remote ServiceStack instances from either a Chromium Desktop App or cross-platform .NET Core Web App.</p><p>The richer metadata in ServiceStack Services allows Studio to logically group Services around Data Models, enabling its high-level semantic features like its native data-grid like UX over all AutoQuery Services to quickly discover, search, create, update and delete entities based on the available AutoQuery APIs and whether Authenticated Users have access to them.</p><blockquote><p>YouTube: <a href="https://youtu.be/2FFRLxs7orU" target="_blank" rel="noopener noreferrer">youtu.be/2FFRLxs7orU</a></p></blockquote><p><a href="https://youtu.be/2FFRLxs7orU" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-home.png" alt=""></a></p><h2 id="instantly-servicify-existing-systems" tabindex="-1">Instantly Servicify existing Systems! <a class="header-anchor" href="#instantly-servicify-existing-systems" aria-hidden="true">#</a></h2><p>ServiceStack also reached maximum autonomy for a Services framework where in addition to <strong>AutoQuery</strong> automatically providing your Services implementations, <strong>Studio</strong> providing its instant UI, ServiceStack also gained the capability to <strong>generate your entire API!</strong> Including Typed API contracts, data models, implementations &amp; human-friendly pluralized HTTP API routes over an existing System RDBMS&#39;s tables!</p><p>ServiceStack&#39;s <strong>AutoGen</strong> enables a number of exciting possibilities, predominantly it&#39;s the fastest way to ServiceStack-ify an existing systems RDBMS where it will serve as an invaluable tool for anyone wanting to quickly migrate to ServiceStack and access its functionality ecosystem around ServiceStack Services:</p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/svg/servicify.svg" width="100%"><p><strong>AutoGen&#39;s</strong> code generation is programmatically customizable where the generated types can be easily augmented with additional declarative attributes to inject your App&#39;s conventions into the auto generated Services &amp; Types to apply custom behavior like Authorization &amp; additional validation rules. After codifying your system conventions the generated classes can optionally be &quot;ejected&quot; where code-first development can continue as normal.</p><p>This feature enables rewriting parts or modernizing legacy systems with the least amount of time &amp; effort, once Servicified you can take advantage of declarative features like Multitenancy, Optimistic Concurrency &amp; Validation, enable automatic features like Executable Audit History, allow business users to maintain validation rules in its RDBMS, manage them through <strong>Studio</strong> &amp; have them applied instantly at runtime and visibly surfaced through ServiceStack&#39;s myriad of <a href="/world-validation.html">client UI auto-binding options</a>. <strong>Studio</strong> can then enable stakeholders with an instant UI to quickly access and search through their data, import custom queries directly into Excel or access them in other registered Content Types through a custom UI where fine-grained app-level access can be applied to customize which tables &amp; operations different users have.</p><h3 id="grpc-s-typed-protoc-universe" tabindex="-1">gRPC&#39;s Typed protoc Universe <a class="header-anchor" href="#grpc-s-typed-protoc-universe" aria-hidden="true">#</a></h3><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/svg/grpc-icon-color.svg" height="100" align="right"><p><strong>AutoGen</strong> also enables access to ServiceStack&#39;s ecosystem of metadata services &amp; connectivity options where it&#39;s now become the <strong>fastest way to generate gRPC endpoints</strong> over an existing system. This is especially exciting as in addition to enabling high-performance connectivity to your Systems data, it opens it up to <a href="https://grpc.io/docs/languages/" target="_blank" rel="noopener noreferrer">all languages in gRPC&#39;s protoc universe</a>.</p><p>Whilst the Smart, Generic <a href="/grpc-generic.html">C# / F# / VB.NET Service Clients</a> continue to provide the best UX for consuming gRPC Services, one of the nicest <strong>protoc generated</strong> clients languages is <a href="http://dart.dev" target="_blank" rel="noopener noreferrer">Dart</a> - a modern high-level language with native class performance &amp; script-like productivity where individual source files can be run immediately without compilation, it&#39;s quality tooling, static analysis &amp; high-level features like async/await make it an ideal exploratory language for consuming gRPC endpoints.</p><h3 id="dart-grpc-script-playground" tabindex="-1">Dart gRPC Script Playground <a class="header-anchor" href="#dart-grpc-script-playground" aria-hidden="true">#</a></h3><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/svg/dart-logo.svg" height="75" align="right"><p>This quick demo shows an example of instantly Servicifying a database &amp; accesses it via gRPC in minutes, starting with a new <a href="https://github.com/NetCoreTemplates/grpc" target="_blank" rel="noopener noreferrer">grpc</a> project from scratch, it <a href="/mix-tool.html">mixes</a> in <a href="https://gist.github.com/gistlyn/464a80c15cb3af4f41db7810082dc00c" target="_blank" rel="noopener noreferrer">autocrudgen</a> to configure <strong>AutoGen</strong> to generate AutoQuery services for the registered <a href="https://gist.github.com/gistlyn/768d7b330b8c977f43310b954ceea668" target="_blank" rel="noopener noreferrer">sqlite</a> RDBMS that&#39;s copied into the project from the <a href="https://gist.github.com/gistlyn/97d0bcd3ebd582e06c85f8400683e037" target="_blank" rel="noopener noreferrer">northwind.sqlite</a> gist.</p><p>Once the servicified App is running it accesses the gRPC Services in a new Dart Console App using the UX-friendly <a href="/grpc-dart.html">Dart gRPC support in the x dotnet tool</a> to call the protoc generated Services:</p><blockquote><p>YouTube: <a href="https://youtu.be/5NNCaWMviXU" target="_blank" rel="noopener noreferrer">youtu.be/5NNCaWMviXU</a></p></blockquote><p><a href="https://youtu.be/5NNCaWMviXU" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/autogen-grpc.png" alt=""></a></p><h3 id="flutter-grpc-android-app" tabindex="-1">Flutter gRPC Android App <a class="header-anchor" href="#flutter-grpc-android-app" aria-hidden="true">#</a></h3><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/svg/flutter-logo.svg" height="75" align="right"><p>And if you can access it from Dart, you can access it from all platforms Dart runs on - the most exciting is Google&#39;s <a href="https://flutter.dev" target="_blank" rel="noopener noreferrer">Flutter</a> UI Kit for building beautiful, natively compiled applications for Mobile, Web, and Desktop from a single codebase:</p><blockquote><p>YouTube: <a href="https://youtu.be/3iz9aM1AlGA" target="_blank" rel="noopener noreferrer">youtu.be/3iz9aM1AlGA</a></p></blockquote><p><a href="https://youtu.be/3iz9aM1AlGA" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/autogen-grpc-flutter.jpg" alt=""></a></p><h3 id="react-native-typed-client" tabindex="-1">React Native Typed Client <a class="header-anchor" href="#react-native-typed-client" aria-hidden="true">#</a></h3><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/svg/react-native-logo.svg" width="300" align="right"><p>gRPC is just <a href="/why-servicestack.html#multiple-clients">one of the endpoints ServiceStack Services</a> can be accessed from, for an even richer &amp; more integrated development UX they&#39;re also available in all popular Mobile, Web &amp; Desktop languages <a href="/add-servicestack-reference.html">Add ServiceStack Reference</a> supports.</p><p>Like <a href="/typescript-add-servicestack-reference.html">TypeScript</a> which can be used in Browser &amp; Node TypeScript code-bases as well as JavaScript-only code-bases like <a href="https://reactnative.dev" target="_blank" rel="noopener noreferrer">React Native</a> - a highly productive Reactive UI for developing iOS and Android Apps:</p><blockquote><p>YouTube: <a href="https://youtu.be/6-SiLAbY63w" target="_blank" rel="noopener noreferrer">youtu.be/6-SiLAbY63w</a></p></blockquote><p><a href="https://youtu.be/6-SiLAbY63w" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/autogen-react-native.png" alt=""></a></p><h3 id="autodto-generate-types-for-rdbms-tables" tabindex="-1">autodto - Generate Types for RDBMS Tables <a class="header-anchor" href="#autodto-generate-types-for-rdbms-tables" aria-hidden="true">#</a></h3><p>An unintended consequence of <strong>AutoGen</strong> that&#39;s potentially universally appealing to even non .NET developers is that it&#39;s also a way to instantly generate Types for all RDBMS tables in all of ServiceStack <a href="/add-servicestack-reference.html">supported client languages</a>, which thanks to being configurable in a <a href="https://sharpscript.net/docs/sharp-apps" target="_blank" rel="noopener noreferrer">Sharp App</a> can be executed from the command-line using the <a href="/dotnet-tool.html">dotnet tools</a>:</p><div class="language-"><pre><code>$ dotnet tool install --global x
</code></pre></div><p>We can then use the <a href="/mix-tool.html">mix feature</a> to download the <a href="https://gist.github.com/gistlyn/c6567f32ba7de2eb760dc776f3067e78" target="_blank" rel="noopener noreferrer">autodto</a> gist containing a pre-configured <code>app.settings</code>, with the only configuration required is the RDBMS it should connect to, which you can specify in a single-command when writing the gist, e.g:</p><div class="language-"><pre><code>$ x mix autodto -replace DIALECT=&lt;dialect&gt; -replace CONNECTION_STRING=&quot;&lt;connection-string&gt;&quot;
</code></pre></div><blockquote><p>Dialect: sqlite, sqlserver, postgres, mysql</p></blockquote><p>Or if preferred the connection string can be referenced from an Environment variable with the <code>$</code> prefix, e.g:</p><div class="language-"><pre><code>$ x mix autodto -replace DIALECT=postgres -replace CONNECTION_STRING=$TECHSTACKS_DB
</code></pre></div><table class="table table-bordered" style="text-align:center;"><tr><td><a href="/csharp-add-servicestack-reference">C#</a></td><td><a href="/typescript-add-servicestack-reference">TypeScript</a></td><td><a href="/swift-add-servicestack-reference">Swift</a></td><td><a href="/java-add-servicestack-reference">Java</a></td><td><a href="/kotlin-add-servicestack-reference">Kotlin</a></td><td><a href="/dart-add-servicestack-reference">Dart</a></td><td><a href="/fsharp-add-servicestack-reference">F#</a></td><td><a href="/vbnet-add-servicestack-reference">VB.NET</a></td></tr></table><blockquote><p>YouTube: <a href="https://youtu.be/1dFqzrF1mV8" target="_blank" rel="noopener noreferrer">youtu.be/1dFqzrF1mV8</a></p></blockquote><p><a href="https://youtu.be/1dFqzrF1mV8" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/autodto-youtube.png" alt=""></a></p><p>If you don&#39;t have an RDBMS readily available to test this on, you can also mix in a copy of the <strong>northwind.sqlite</strong> database &amp; configure it with the same command:</p><div class="language-"><pre><code>$ x mix autodto northwind.sqlite -replace DIALECT=sqlite -replace CONNECTION_STRING=northwind.sqlite
</code></pre></div><p>Alternatively you can download and update separately with:</p><div class="language-"><pre><code>$ x mix autodto
</code></pre></div><p>Then use a text editor to update <code>app.settings</code> with your RDBMS configuration:</p><div class="language-"><pre><code>debug true
name Auto DTO
defaultRedirect /metadata
features AutoQueryFeature
AutoQueryFeature { MaxLimit: 100 }
AutoQueryFeature.GenerateCrudServices { }

# Configure below. Supported dialects: sqlite, sqlserver, postgres, mysql
db sqlite
db.connection northwind.sqlite
</code></pre></div><p>Once configured, start this ServiceStack App with:</p><div class="language-"><pre><code>$ x
</code></pre></div><p>Then in another terminal you can download just the generated <strong>Types</strong> in each language you want, by excluding their <strong>Services</strong>:</p><div class="language-"><pre><code>$ x csharp https://localhost:5001 -path /crud/all/csharp?ExcludeTypes=services
$ x typescript https://localhost:5001 -path /crud/all/typescript?ExcludeTypes=services
$ x dart https://localhost:5001 -path /crud/all/dart?ExcludeTypes=services
$ x java https://localhost:5001 -path /crud/all/java?ExcludeTypes=services
$ x kotlin https://localhost:5001 -path /crud/all/kotlin?ExcludeTypes=services
$ x swift https://localhost:5001 -path /crud/all/swift?ExcludeTypes=services
$ x vbnet https://localhost:5001 -path /crud/all/vbnet?ExcludeTypes=services
$ x fsharp https://localhost:5001 -path /crud/all/fsharp?ExcludeTypes=services
</code></pre></div><p>Every language is customizable using their <a href="/csharp-add-servicestack-reference.html#dto-customization-options">DTO Customization Options</a> so you could uncomment the <code>GlobalNamespace</code> option to generate types in your preferred namespace instead:</p><div class="language-"><pre><code>GlobalNamespace: TechStacks
</code></pre></div><p>Then regenerate it using the full language name above or their wrist-friendly 2-letter abbreviation:</p><div class="language-"><pre><code>x cs
x ts
x da
x ja
x kt
x sw
x vb
x fs
</code></pre></div><blockquote><p>Or put this in a <code>.bat</code> or <code>.sh</code> script to automate re-generation for all languages in a single command.</p></blockquote><h2 id="introducing-sharpdata" tabindex="-1">Introducing SharpData! <a class="header-anchor" href="#introducing-sharpdata" aria-hidden="true">#</a></h2><p>Before we delve into the typed world of AutoCrud, we&#39;d like to introduce the <a href="https://github.com/NetCoreApps/SharpData" target="_blank" rel="noopener noreferrer">SharpData</a> .NET Core project - another generic tool (useful for non .NET devs) for providing an instant UI around multiple RDBMS&#39;s:</p><blockquote><p>YouTube: <a href="https://youtu.be/GjVipOqwZMA" target="_blank" rel="noopener noreferrer">youtu.be/GjVipOqwZMA</a></p></blockquote><p><a href="https://youtu.be/GjVipOqwZMA" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/sharpdata-custom-appsettings.png" alt=""></a></p><p>It makes use of the <a href="/netcore-windows-desktop.html">app</a> dotnet tool for running Chromium <a href="https://sharpscript.net/sharp-apps/gist-desktop-apps" target="_blank" rel="noopener noreferrer">Gist Desktop Apps</a> on-the-fly without installation, from a single URL that can also <a href="/mix-tool.html">mix in additional gists</a> which can be used in SharpData to configure RDBMS&#39;s, copy SQLite databases and apply per-database customizations to add navigable deep links and customized UI Views to each table resultset.</p><p>Whilst SharpData supports <a href="https://github.com/ServiceStack/ServiceStack.OrmLite#8-flavours-of-ormlite-is-on-nuget" target="_blank" rel="noopener noreferrer">connecting to most popular RDBMS&#39;s</a>, it&#39;s especially useful for being able to deploy an instant stand-alone UI with an embedded SQLite databases which can be published independently in a gist and launched from a single URL.</p><p>For an example of this in action we&#39;ve published customized gists for the <a href="https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/sql/linq/downloading-sample-databases" target="_blank" rel="noopener noreferrer">Northwind</a> and <a href="https://www.sqlitetutorial.net/sqlite-sample-database/" target="_blank" rel="noopener noreferrer">Chinook</a> SQLite databases which after installing the latest <a href="/netcore-windows-desktop.html">app</a> dotnet tool:</p><div class="language-"><pre><code>$ dotnet tool install -g app    
</code></pre></div><p>Can be run from the link below in a Windows x64 Desktop App:</p><ul><li><strong><a name="app://sharpdata?mix=northwind.sharpdata">app://sharpdata?mix=northwind.sharpdata</a></strong></li><li><strong><a name="app://sharpdata?mix=chinook.sharpdata">app://sharpdata?mix=chinook.sharpdata</a></strong></li></ul><p>Or via command-line:</p><div class="language-"><pre><code>$ app open sharpdata mix northwind.sharpdata
$ app open sharpdata mix chinook.sharpdata
</code></pre></div><p>Cross platform using the <a href="/dotnet-tool.html">x dotnet tool</a> (in Default Browser):</p><div class="language-"><pre><code>$ x open sharpdata mix northwind.sharpdata
$ x open sharpdata mix chinook.sharpdata
</code></pre></div><p>Each of these options will download &amp; run the latest version of <a href="https://github.com/NetCoreApps/SharpData" target="_blank" rel="noopener noreferrer">SharpData</a> along with a copy of the <a href="https://gist.github.com/gistlyn/0ce0d5b828303f1cb4637450b563adbd" target="_blank" rel="noopener noreferrer">northwind.sharpdata</a> or <a href="https://gist.github.com/gistlyn/96b10369daf94897531810841cb097f2" target="_blank" rel="noopener noreferrer">chinook.sharpdata</a> gists on-the-fly containing the embedded SQLite DB along with any UI customizations.</p><h4 id="hosted-as-a-net-core-app" tabindex="-1">Hosted as a .NET Core App <a class="header-anchor" href="#hosted-as-a-net-core-app" aria-hidden="true">#</a></h4><p>As <a href="https://github.com/NetCoreApps/SharpData" target="_blank" rel="noopener noreferrer">NetCoreApps/SharpData</a> is also a standard .NET Core project, it can also be deployed as a normal stand-alone .NET Core Web App:</p><h3 id="https-sharpdata-netcore-io" tabindex="-1"><a href="https://sharpdata.netcore.io" target="_blank" rel="noopener noreferrer">https://sharpdata.netcore.io</a> <a class="header-anchor" href="#https-sharpdata-netcore-io" aria-hidden="true">#</a></h3><h3 id="tiny-footprint" tabindex="-1">Tiny footprint <a class="header-anchor" href="#tiny-footprint" aria-hidden="true">#</a></h3><p>An impressively capable .NET Core App that fits into a tiny <strong>20kb .zip</strong> footprint thanks to <a href="https://sharpscript.net/sharp-apps/gist-desktop-apps" target="_blank" rel="noopener noreferrer">Gist Desktop App&#39;s Architecture</a>. It&#39;s small dynamic <code>#Script</code> &amp; Vue TypeScript code-base also makes it highly customizable to tailor &amp; further extend with App-specific requirements - suitable for offering advanced system users a quick, capable customized read-only UI of your DBs.</p><p><strong>SharpData</strong> started as a demonstration showing how productive <a href="https://sharpscript.net" target="_blank" rel="noopener noreferrer">#Script</a> can be in the number of areas where dynamic languages offer far superior productivity then the typical .NET approach of using C# to type an entire code-base &amp; models.</p><p>For example a single <code>#Script</code> page provides a lot of the functionality in <a href="/autoquery-rdbms.html">AutoQuery</a> where it provides an instant HTTP API (in all registered ServiceStack formats) around all registered RDBMS tables, in all OrmLite supported RBDMS&#39;s, that includes support for custom fields, multiple querying options, paging, multi OrderBy&#39;s in a parameterized SQL query executed with OrmLite&#39;s SQL async DB APIs:</p><h3 id="autoquery-script" tabindex="-1">AutoQuery Script <a class="header-anchor" href="#autoquery-script" aria-hidden="true">#</a></h3><h4 id="db-db-table-index-html" tabindex="-1"><a href="https://github.com/NetCoreApps/SharpData/blob/master/wwwroot/db/_db/_table/index.html" target="_blank" rel="noopener noreferrer">/db/_db/_table/index.html</a> <a class="header-anchor" href="#db-db-table-index-html" aria-hidden="true">#</a></h4>`,90),l=n("div",null,[n("div",{class:"language-"},[n("pre",{"v-pre":""},[n("code",null,"    {{ {namedConnection:db} |> if (db && db != 'main') |> useDb }}\n\n    ```code|quiet\n    var ignore = ['db','fields','format','skip','take','orderBy']\n    var fields = qs.fields ? qs.fields.split(',').map(x => sqlQuote(x)).join(',') : '*'\n    var sql = `SELECT ${fields} FROM ${sqlQuote(table)}`\n    var filters = []\n    var queryMap = qs.toObjectDictionary().withoutKeys(ignore)\n    #each queryMap.Keys.toList()\n        var search = queryMap[it.sqlVerifyFragment()].sqlVerifyFragment();\n        #if search == '=null' || search == '!=null'\n            `${sqlQuote(it)} ${search=='=null' ? 'IS' : 'IS NOT'} NULL` |> addTo => filters\n            queryMap[it] = null\n        else if search.startsWith('=')\n            `${sqlQuote(it)} = @${it}` |> addTo => filters\n            queryMap[it] = search.substring(1).coerce()\n        else if search.startsWith('<=') || search.startsWith('>=') || search.startsWith('!=')\n            `${sqlQuote(it)} ${search.substring(0,2)} @${it}` |> addTo => filters\n            queryMap[it] = search.substring(2).coerce()\n        else if search.startsWith('<') || search.startsWith('>')\n            `${sqlQuote(it)} ${search.substring(0,1)} @${it}` |> addTo => filters\n            queryMap[it] = search.substring(1).coerce()\n        else if search.endsWith(',')\n            `${sqlQuote(it)} IN (${search.trimEnd(',').split(',').map(i=>i.toLong()).join(',')})` |> addTo=>filters\n            queryMap[it] = null\n        else if search.startsWith('%') || search.endsWith('%')\n            `${sqlQuote(it).sqlCast('varchar')} LIKE @${it}` |> addTo => filters\n        else\n            `${sqlQuote(it).sqlCast('varchar')} = @${it}` |> addTo => filters\n        /if\n    /each\n    #if !filters.isEmpty()\n        sql = `${sql} WHERE ${filters.join(' AND ')}`\n    /if\n    #if qs.orderBy\n        sql = `${sql} ORDER BY ${sqlOrderByFields(qs.orderBy)}`\n    /if\n    #if qs.skip || qs.take\n        sql = `${sql} ${sqlLimit(qs.skip,qs.take)}`\n    /if\n    sql |> dbSelect(queryMap) |> return\n    ```\n    {{ ifError |> show(sql) }}\n    {{htmlError}}\n")])])],-1),i=a(`<p>The <code>_</code> prefixes in the path utilizes <a href="https://sharpscript.net/docs/sharp-pages#page-based-routing" target="_blank" rel="noopener noreferrer">Page Based Routing</a> allowing for <a href="https://en.wikipedia.org/wiki/Convention_over_configuration" target="_blank" rel="noopener noreferrer">CoC</a> based <a href="https://en.wikipedia.org/wiki/Clean_URL" target="_blank" rel="noopener noreferrer">Clean URL</a> routes without needing to define &amp; maintain separate routes where the same script supports querying all <a href="/multitenancy.html#changedb-apphost-registration">registered multitenancy databases</a>.</p><h3 id="instant-customizable-rdbms-ui" tabindex="-1">Instant Customizable RDBMS UI <a class="header-anchor" href="#instant-customizable-rdbms-ui" aria-hidden="true">#</a></h3><p>The <a href="https://github.com/NetCoreApps/SharpData" target="_blank" rel="noopener noreferrer">SharpData</a> project essentially provides a UI around this script, surfacing its features &amp; give it instant utility which ended up being so useful that it&#39;s become the quickest way to perform fast adhoc DB queries as it&#39;s easy to configure which RDBMS&#39;s &amp; tables to show in a simple text file, easy to customize its UI, enables 1-click export into Excel and its shortcut syntax support in column filters is a fast way to perform quick adhoc queries.</p><h3 id="quick-tour" tabindex="-1">Quick Tour <a class="header-anchor" href="#quick-tour" aria-hidden="true">#</a></h3><p>We&#39;ll quickly go through some of its features to give you an idea of its capabilities, from the above screenshot we can some of its filtering capabilities. All results displayed in the UI are queried using the above <a href="https://github.com/NetCoreApps/SharpData/blob/master/wwwroot/db/_db/_table/index.html" target="_blank" rel="noopener noreferrer">sharpdata</a> <code>#Script</code> HTTP API which supports the following features:</p><h4 id="filters" tabindex="-1">Filters <a class="header-anchor" href="#filters" aria-hidden="true">#</a></h4><p>All query string parameter except for <code>db,fields,format,skip,take,orderBy</code> are treated as filters, where you can:</p><ul><li>Use <code>=null</code> or <code>!=null</code> to search <code>NULL</code> columns</li><li>Use <code>&lt;=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;&gt;</code>, <code>!=</code> prefix to search with that operator</li><li>Use <code>,</code> trailing comma to perform an <code>IN (values)</code> search (integer columns only)</li><li>Use <code>%</code> suffix or prefix to perform a <code>LIKE</code> search</li><li>Use <code>=</code> prefix to perform a coerced &quot;JS&quot; search, for exact <code>number</code>, <code>boolean</code>, <code>null</code> and WCF date comparisons</li><li>Otherwise by default performs a &quot;string equality&quot; search where columns are casted and compared as strings</li></ul><p>Here&#39;s the filtered list used in the above screenshot:</p><p><a href="http://sharpdata.netcore.io/db/main/Order?format=json&amp;Id=%3E10200&amp;CustomerId=V%25&amp;Freight=%3C%3D30&amp;OrderDate=%3E1997-01-01&amp;take=100" target="_blank" rel="noopener noreferrer">/db/main/Order?Id=&gt;10200&amp;CustomerId=V%&amp;Freight=&lt;=30&amp;OrderDate=&gt;1997-01-01</a></p><h4 id="custom-field-selection" tabindex="-1">Custom Field Selection <a class="header-anchor" href="#custom-field-selection" aria-hidden="true">#</a></h4><p>The <strong>column selection</strong> icon on the top left of the results lets you query custom select columns which is specified using <code>?fields</code>:</p><ul><li><a href="https://sharpdata.netcore.io/db/main/Customer?format=json&amp;fields=Id%2CCompanyName%2CContactName%2CContactTitle&amp;take=100" target="_blank" rel="noopener noreferrer">/db/main/Customer?fields=Id,CompanyName,ContactName,ContactTitle</a></li></ul><h4 id="multiple-orderby-s" tabindex="-1">Multiple OrderBy&#39;s <a class="header-anchor" href="#multiple-orderby-s" aria-hidden="true">#</a></h4><p>You can use <a href="/autoquery-rdbms.html#multiple-orderbys">AutoQuery Syntax</a> to specify multiple Order By&#39;s:</p><ul><li><a href="https://sharpdata.netcore.io/db/main/Customer?format=json&amp;orderBy=-Id,CompanyName,-ContactName" target="_blank" rel="noopener noreferrer">/db/main/Customer?orderBy=-Id,CompanyName,-ContactName</a></li></ul><h4 id="paging" tabindex="-1">Paging <a class="header-anchor" href="#paging" aria-hidden="true">#</a></h4><p>Use <code>?skip</code> and <code>?take</code> to page through a result set</p><h4 id="format" tabindex="-1">Format <a class="header-anchor" href="#format" aria-hidden="true">#</a></h4><p>Use <code>?format</code> to specify which <strong>Content-Type</strong> to return the results in, e.g:</p><ul><li><a href="https://sharpdata.netcore.io/db/main/Customer?format=html" target="_blank" rel="noopener noreferrer">/db/main/Customer?format=html</a></li><li><a href="https://sharpdata.netcore.io/db/main/Customer?format=json" target="_blank" rel="noopener noreferrer">/db/main/Customer?format=json</a></li><li><a href="https://sharpdata.netcore.io/db/main/Customer?format=csv" target="_blank" rel="noopener noreferrer">/db/main/Customer?format=csv</a></li></ul><h4 id="multitenancy" tabindex="-1">Multitenancy <a class="header-anchor" href="#multitenancy" aria-hidden="true">#</a></h4><p>You can specify which registered DB to search using the path info, use <code>main</code> to query the default database:</p><pre><code>/db/&lt;named-db&gt;/&lt;table&gt;
</code></pre><h3 id="launching-sharpdata" tabindex="-1">Launching SharpData <a class="header-anchor" href="#launching-sharpdata" aria-hidden="true">#</a></h3><p>To run SharpData in a .NET Core Desktop App you&#39;ll need latest <code>app</code> dotnet tool:</p><pre><code>$ dotnet tool update -g app
</code></pre><blockquote><p>If on macOS/Linux you can use the <a href="/dotnet-tool.html">x dotnet tool</a> instead to view SharpData in your default browser</p></blockquote><h4 id="configure-rdbms-from-command-line" tabindex="-1">Configure RDBMS from command-line <a class="header-anchor" href="#configure-rdbms-from-command-line" aria-hidden="true">#</a></h4><p>You can override which database to connect to by specifying it on the command line, e.g. here&#39;s an example of connecting to <a href="https://techstacks.io" target="_blank" rel="noopener noreferrer">https://techstacks.io</a> RDBMS:</p><pre><code>$ app open sharpdata -db postgres -db.connection $TECHSTACKS_DB
</code></pre><p>Which will open SharpData listing all of TechStack&#39;s RDBMS tables. If you have a lot of tables the <strong>Sidebar filter</strong> provides a quick way to find the table you want, e.g:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/sharpdata-technology.png" alt=""></p><h3 id="app-url-schemes" tabindex="-1">app URL Schemes <a class="header-anchor" href="#app-url-schemes" aria-hidden="true">#</a></h3><p>What can be done with the <code>open</code> command on the command-line can also be done from a <strong>custom URL Scheme</strong>, a feature that opens up a myriad of new possibilities as <code>app</code> can open <a href="https://sharpscript.net/docs/gist-desktop-apps" target="_blank" rel="noopener noreferrer">Gist Desktop Apps</a> from Gists or in public &amp; private GitHub repositories, where it&#39;s able to download and launch Apps on the fly with custom arguments - allowing a single URL to run a <strong>never installed</strong> Desktop App stored in a Gist &amp; pass it custom params to enable <strong>deep linking</strong>.</p><p>With this organizations could maintain a dashboard of links to its different Desktop Apps that anyone can access, especially useful as the <strong>only software</strong> that&#39;s needed to run any <a href="https://sharpscript.net/docs/sharp-apps" target="_blank" rel="noopener noreferrer">Sharp Apps</a> is the <code>app</code> dotnet tool which thanks to all ServiceStack .dll&#39;s &amp; dependencies being bundled with the tool, (including Vue/React/Bootstrap fontawesome and Material SVG Icon assets), the only files that need to be published are the App&#39;s specific resources, which is how Apps like <strong>SharpData</strong> can be compressed in a <strong>20kb .zip</strong> - a tiny payload that&#39;s viable to download the latest app each on each run, removing the pain &amp; friction to distribute updates as everyone&#39;s already running the latest version every time it&#39;s run.</p><p>Should you need to (e.g. large Sharp App or <a href="http://github.com" target="_blank" rel="noopener noreferrer">github.com</a> is down) you can run your previously locally cached App using <code>run</code>:</p><pre><code>$ app run sharpdata
</code></pre><p>With Custom URL Schemes everyone with <code>app</code> installed can view any database they have network access to from specifying the db type and connection string in the URL:</p><pre><code>app://sharpdata?db=postgres&amp;db.connection={CONNECTION_STRING}
</code></pre><blockquote><p>CONNECTION_STRING needs to be URL Encoded, e.g. with JS&#39;s <code>encodeURIComponent()</code></p></blockquote><p>or by specifying an Environment variable containing the connection string:</p><pre><code>app://sharpdata?db=postgres&amp;db.connection=$TECHSTACKS_DB
</code></pre><p>In addition to Sharp Apps being downloaded and run on the fly, they&#39;re also able to take advantage of the dotnet tools <a href="/mix-tool.html">mix support</a> to also download another Gist&#39;s content into the Sharp App&#39;s working directory.</p><p>With this you can publish a custom dataset in an SQLite database save it as a gist and <strong>generate a single URL</strong> that everyone can use to download the database and open it in <strong>SharpData</strong>, e.g:</p><ul><li><a href="app://sharpdata?mix=northwind.sqlite&amp;db=sqlite&amp;db.connection=northwind.sqlite">app://sharpdata?mix=northwind.sqlite&amp;db=sqlite&amp;db.connection=northwind.sqlite</a></li></ul><p>It&#39;s possible to use the user-friendly <code>northwind.sqlite</code> alias here as it&#39;s published in the global <a href="https://gist.github.com/gistlyn/9b32b03f207a191099137429051ebde8" target="_blank" rel="noopener noreferrer">mix.md</a> directory where it links to the <a href="https://gist.github.com/gistlyn/97d0bcd3ebd582e06c85f8400683e037" target="_blank" rel="noopener noreferrer">northwind.sqlite gist</a>.</p><p>For your custom databases you use the <strong>Gist Id</strong> instead or if you plan to use this feature a lot you can override which <code>mix.md</code> document that <code>app</code> should source its links from by specifying another <strong>Gist Id</strong> in the <code>MIX_SOURCE</code> Environment variable (or see below - to create a local alias).</p><p>But if you&#39;re already mixing in an external gist you may as well include a custom <code>app.settings</code> in the Gist so it&#39;s pre-configured with custom RDBMS registrations and table lists, e.g:</p><ul><li><a href="app://sharpdata?mix=northwind.sharpdata">app://sharpdata?mix=northwind.sharpdata</a></li></ul><p>Which applies the <a href="https://gist.github.com/gistlyn/0ce0d5b828303f1cb4637450b563adbd" target="_blank" rel="noopener noreferrer">northwind.sharpdata gist</a>, which can also be referenced by <strong>Gist Id</strong>:</p><ul><li><a href="app://sharpdata?mix=0ce0d5b828303f1cb4637450b563adbd">app://sharpdata?mix=0ce0d5b828303f1cb4637450b563adbd</a></li></ul><p>Alternatively you may instead prefer to publish it to a private GitHub repo instead of a Gist which anyone can open up with:</p><pre><code>app://user/sharpdata-private?token={TOKEN}
</code></pre><p>The <code>app</code> dotnet tools will use the <strong>latest published GitHub release</strong> if there are any, otherwise will use the <strong>master.zip</strong> archive, this feature can be used to maintain a working master repo and maintain control ver when to publish new versions of your custom SharpData App.</p><h3 id="app-local-aliases" tabindex="-1">app local aliases <a class="header-anchor" href="#app-local-aliases" aria-hidden="true">#</a></h3><p>Where ever you can use a Gist Id, you can assign a local user-friendly alias to use instead. So if you had a custom <strong>sqlite</strong> database and sharpdata <strong>app.settings</strong> you could assign it to a local <strong>db</strong> alias with:</p><pre><code>$ app alias db 0ce0d5b828303f1cb4637450b563adbd
</code></pre><p>Which you&#39;ll be able to use in place of the Gist Id, e.g. via command-line:</p><pre><code>$ app open sharpdata mix db
</code></pre><p>or via URL Scheme:</p><pre><code>app://sharpdata?mix=db
</code></pre><p>Likewise the gist alias can also be used for referencing <a href="https://sharpscript.net/docs/gist-desktop-apps" target="_blank" rel="noopener noreferrer">Gist Desktop Apps</a>, e.g. we can assign the <a href="https://gist.github.com/gistlyn/6de7993333b457445793f51f6f520ea8" target="_blank" rel="noopener noreferrer">redis gist app</a> to use our preferred alias:</p><pre><code>$ app alias local-redis 6de7993333b457445793f51f6f520ea8
</code></pre><p>That we can open via command-line:</p><pre><code>$ app open local-redis
</code></pre><p>Or URL Scheme:</p><pre><code>app://local-redis
</code></pre><p>Or if we want to run our own modified copy of the Redis Desktop App, we can <a href="/mix-tool.html">mix</a> the Gist files to our local directory:</p><pre><code>$ app mix local-redis
</code></pre><p>Make the changes we want, then run our local copy by running <code>app</code> (or <code>x</code>) without arguments:</p><pre><code>$ app
</code></pre><p>Other alias command include:</p><h5 id="view-all-aliases" tabindex="-1">View all aliases <a class="header-anchor" href="#view-all-aliases" aria-hidden="true">#</a></h5><pre><code>$ app alias
</code></pre><h5 id="view-single-alias" tabindex="-1">View single alias <a class="header-anchor" href="#view-single-alias" aria-hidden="true">#</a></h5><pre><code>$ app alias mydb
</code></pre><h5 id="remove-an-alias" tabindex="-1">Remove an alias <a class="header-anchor" href="#remove-an-alias" aria-hidden="true">#</a></h5><pre><code>$ app unalias mydb
</code></pre><h3 id="open-in-excel" tabindex="-1">Open in Excel <a class="header-anchor" href="#open-in-excel" aria-hidden="true">#</a></h3><p>SharpData detects if <strong>Excel</strong> is installed and lets you open the un-paged filtered resultset directly by clicking the <strong>Excel</strong> button</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/sharpdata-excel.png" alt=""></p><p>This works seamlessly as it&#39;s able to &quot;by-pass&quot; the browser download where the query is performed by the back-end .NET Core Server who streams the response directly to the Users <strong>Downloads</strong> folder and launches it in Excel as soon as it&#39;s finished.</p><h3 id="custom-sharpdata-ui" tabindex="-1">Custom SharpData UI <a class="header-anchor" href="#custom-sharpdata-ui" aria-hidden="true">#</a></h3><p>Each time a Gist Desktop App is opened it downloads and overrides the existing Gist with the latest version which it loads in a <a href="/virtual-file-system.html#gistvirtualfiles">Gist VFS</a> where any of its files can be overridden with a local copy.</p><p>As the App&#39;s working directory is preserved between restarts you can provide a custom <code>app.settings</code> at:</p><pre><code>%USERPROFILE%\\.sharp-apps\\sharpdata\\app.settings
</code></pre><h4 id="custom-app-settings" tabindex="-1">Custom app.settings <a class="header-anchor" href="#custom-app-settings" aria-hidden="true">#</a></h4><p>Where you can perform basic customizations like which RDBMS&#39;s and tables you want to be able to access, e.g:</p><div class="language-"><pre><code>debug false
name Northwind &amp; TechStacks UI
appName sharpdata

db.connections[northwind]  { db:sqlite,   connection:&#39;northwind.sqlite&#39; }
db.connections[techstacks] { db:postgres, connection:$TECHSTACKS_DB }

args.tables Customer,Order,OrderDetail,Category,Product,Employee,EmployeeTerritory,Shipper,Supplier,Region,Territory
args.tables_techstacks technology,technology_stack,technology_choice,organization,organization_member,post,post_comment,post_vote,custom_user_auth,user_auth_details,user_activity,page_stats
</code></pre></div><p>Which will display both RDBMS Databases, showing only the user-specified tables in app.settings above:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/sharpdata-custom-appsettings.png" alt=""></p><h3 id="advanced-customizations" tabindex="-1">Advanced Customizations <a class="header-anchor" href="#advanced-customizations" aria-hidden="true">#</a></h3><p>More advanced customizations can be added via dropping TypeScript/JavaScript source files in the <code>/custom</code> folder, e.g:</p><ul><li><a href="https://github.com/NetCoreApps/SharpData/blob/master/wwwroot/custom/chinook.ts" target="_blank" rel="noopener noreferrer">/wwwroot/custom/chinook.ts</a></li><li><a href="https://github.com/NetCoreApps/SharpData/blob/master/wwwroot/custom/northwind.ts" target="_blank" rel="noopener noreferrer">/wwwroot/custom/northwind.ts</a></li></ul><p>Which is how the <a href="https://gist.github.com/gistlyn/0ce0d5b828303f1cb4637450b563adbd" target="_blank" rel="noopener noreferrer">northwind.sharpdata</a> and <a href="https://gist.github.com/gistlyn/96b10369daf94897531810841cb097f2" target="_blank" rel="noopener noreferrer">chinook.sharpdata</a> mix gists enable Customized Views for the Northwind &amp; Chinook databases via their dbConfig registrations below:</p><h4 id="chinook" tabindex="-1">chinook <a class="header-anchor" href="#chinook" aria-hidden="true">#</a></h4><div class="language-ts"><pre><code><span class="token function">dbConfig</span><span class="token punctuation">(</span><span class="token string">&#39;chinook&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    showTables<span class="token operator">:</span> <span class="token string">&#39;albums,artists,playlists,tracks,genres,media_types,customers,employees,invoices&#39;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    tableName<span class="token operator">:</span> splitPascalCase<span class="token punctuation">,</span>
    links<span class="token operator">:</span> <span class="token punctuation">{</span>
        albums<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">ArtistId</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">artists?filter=ArtistId:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        employees<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">ReportsTo</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">employees?filter=EmployeeId:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        invoices<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">CustomerId</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">customers?filter=CustomerId:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        tracks<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">AlbumId</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">albums?filter=AlbumId:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
            <span class="token function-variable function">MediaTypeId</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">media_types?filter=MediaTypeId:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
            <span class="token function-variable function">GenreId</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">genres?filter=GenreId:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rowComponents<span class="token operator">:</span> <span class="token punctuation">{</span>
        albums<span class="token operator">:</span> Album<span class="token punctuation">,</span>
        artists<span class="token operator">:</span> Artist<span class="token punctuation">,</span>
        playlists<span class="token operator">:</span> Playlist<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="northwind" tabindex="-1">northwind <a class="header-anchor" href="#northwind" aria-hidden="true">#</a></h4><div class="language-ts"><pre><code><span class="token function">dbConfig</span><span class="token punctuation">(</span><span class="token string">&#39;northwind&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    showTables<span class="token operator">:</span> <span class="token string">&#39;Customer,Order,OrderDetail,Category,Product,Employee,Shipper,Supplier,Region&#39;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    tableName<span class="token operator">:</span> splitPascalCase<span class="token punctuation">,</span>
    links<span class="token operator">:</span> <span class="token punctuation">{</span>
        Order<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">CustomerId</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Customer?filter=Id:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
            <span class="token function-variable function">EmployeeId</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Employee?filter=Id:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
            <span class="token function-variable function">ShipVia</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Shipper?filter=Id:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        OrderDetail<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">OrderId</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Order?filter=Id:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
            <span class="token function-variable function">ProductId</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Product?filter=Id:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        Product<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">SupplierId</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Supplier?filter=Id:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
            <span class="token function-variable function">CategoryId</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Category?filter=Id:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        Territory<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">RegionId</span><span class="token operator">:</span> <span class="token punctuation">(</span>id<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Region?filter=Id:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rowComponents<span class="token operator">:</span> <span class="token punctuation">{</span>
        Order<span class="token punctuation">,</span>
        Customer<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>These db customizations let you specify which RDBMS tables &amp; the order that they should be displayed, the table names text casing function, which columns to linkify &amp; any custom Row Components for different tables.</p><h3 id="deploying-customizations" tabindex="-1">Deploying Customizations <a class="header-anchor" href="#deploying-customizations" aria-hidden="true">#</a></h3><p>When deploying as a .NET Core project the customizations are deployed with your <a href="https://github.com/NetCoreApps/SharpData/tree/master/wwwroot" target="_blank" rel="noopener noreferrer">/wwwroot</a> as normal.</p><p>To make customizations available to load with the SharpData Gist Desktop App you&#39;ll need to publish the directory of customizations to a gist. Here are the customizations for the <a href="https://gist.github.com/gistlyn/0ce0d5b828303f1cb4637450b563adbd" target="_blank" rel="noopener noreferrer">northwind.sharpdata</a> and <a href="https://gist.github.com/gistlyn/96b10369daf94897531810841cb097f2" target="_blank" rel="noopener noreferrer">chinook.sharpdata</a> gists:</p><h3 id="dist-mix" tabindex="-1"><a href="https://github.com/NetCoreApps/SharpData/tree/master/dist-mix" target="_blank" rel="noopener noreferrer">/dist-mix</a> <a class="header-anchor" href="#dist-mix" aria-hidden="true">#</a></h3><ul><li><a href="https://github.com/NetCoreApps/SharpData/tree/master/dist-mix/chinook" target="_blank" rel="noopener noreferrer">/chinook</a><ul><li><a href="https://github.com/NetCoreApps/SharpData/tree/master/dist-mix/chinook/custom" target="_blank" rel="noopener noreferrer">/custom</a><ul><li><a href="https://github.com/NetCoreApps/SharpData/blob/master/dist-mix/chinook/custom/chinook.js" target="_blank" rel="noopener noreferrer">chinook.js</a> - UI Customizations</li></ul></li><li><a href="https://github.com/NetCoreApps/SharpData/blob/master/dist-mix/chinook/app.settings" target="_blank" rel="noopener noreferrer">app.settings</a> - Custom App Settings</li><li><a href="https://github.com/NetCoreApps/SharpData/blob/master/dist-mix/chinook/chinook.sqlite" target="_blank" rel="noopener noreferrer">chinook.sqlite</a> - Embedded SQLite database</li></ul></li><li><a href="https://github.com/NetCoreApps/SharpData/tree/master/dist-mix/northwind" target="_blank" rel="noopener noreferrer">/northwind</a><ul><li><a href="https://github.com/NetCoreApps/SharpData/tree/master/dist-mix/chinook/northwind" target="_blank" rel="noopener noreferrer">/custom</a><ul><li><a href="https://github.com/NetCoreApps/SharpData/blob/master/dist-mix/northwind/custom/northwind.js" target="_blank" rel="noopener noreferrer">northwind.js</a> - UI Customizations</li></ul></li><li><a href="https://github.com/NetCoreApps/SharpData/blob/master/dist-mix/northwind/app.settings" target="_blank" rel="noopener noreferrer">app.settings</a> - Custom App Settings</li><li><a href="https://github.com/NetCoreApps/SharpData/blob/master/dist-mix/northwind/northwind.sqlite" target="_blank" rel="noopener noreferrer">northwind.sqlite</a> - Embedded SQLite database</li></ul></li></ul><p>You can <a href="https://sharpscript.net/sharp-apps/app-index#publishing-gist-desktop-apps" target="_blank" rel="noopener noreferrer">publish a directory of files to a GitHub Gist</a> using the <code>x publish</code> command with the GitHub <strong>AccessToken</strong> with gist write access you want to write to, e.g:</p><pre><code>$ cd northwind
$ x publish -token %TOKEN%
</code></pre><h3 id="viewing-customizations" tabindex="-1">Viewing Customizations <a class="header-anchor" href="#viewing-customizations" aria-hidden="true">#</a></h3><p>When published these Gist Customizations can be viewed by gist id directly or by a user friendly gist mix or local alias:</p><ul><li><strong><a name="app://sharpdata?mix=0ce0d5b828303f1cb4637450b563adbd">app://sharpdata?mix=0ce0d5b828303f1cb4637450b563adbd</a></strong></li><li><strong><a name="app://sharpdata?mix=96b10369daf94897531810841cb097f2">app://sharpdata?mix=96b10369daf94897531810841cb097f2</a></strong></li></ul><h3 id="custom-row-components" tabindex="-1">Custom Row Components <a class="header-anchor" href="#custom-row-components" aria-hidden="true">#</a></h3><p>Whilst a tabular grid view might be a natural UI for browsing a database for devs, we can do better since we have the full UI source code of the Vue components. A filtered tabular view makes it fast to find the record you&#39;re interested in, but it&#39;s not ideal for quickly finding related information about an Entity.</p><p>To provide a more customized UX for different App UIs, <strong>SharpData</strong> includes support for <strong>&quot;Row Components&quot;</strong> (defined in <a href="https://github.com/NetCoreApps/SharpData/tree/master/wwwroot/custom" target="_blank" rel="noopener noreferrer">/wwwroot/custom</a>) to be able to quickly drill down &amp; view richer info on any record.</p><p>For example when viewing an <strong>Order</strong>, it&#39;s natural to want to view the <strong>Order Details</strong> with it, enabled with the custom Vue component registration below:</p><div class="language-ts"><pre><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> template<span class="token operator">:</span>
<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div v-if=&quot;id&quot;&gt;
    &lt;jsonviewer :value=&quot;details&quot; /&gt;
&lt;/div&gt;
&lt;div v-else class=&quot;alert alert-danger&quot;&gt;Order Id needs to be selected&lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token keyword">extends</span> <span class="token class-name">RowComponent</span> <span class="token punctuation">{</span>
    details<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">get</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>row<span class="token punctuation">.</span>Id<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">async</span> <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>details <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sharpData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>db<span class="token punctuation">,</span><span class="token string">&#39;OrderDetail&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span> OrderId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>All Row components are injected with the <code>db</code>, <code>table</code> properties, the entire <code>row</code> object that was selected as well as the Column Schema definition for that table. Inside the component you&#39;re free to display anything, in this case we&#39;re using the <code>sharpData</code> helper for calling the server <code>#Script</code> HTTP API to get it to fetch all <code>OrderDetail</code> entries for this order.</p><blockquote><p>If the resultset is filtered without the Order <code>Id</code> PK it can&#39;t fetch its referenced data, so displays an error instead</p></blockquote><p>The <a href="https://github.com/NetCoreApps/SharpData/blob/master/src/JsonViewer.ts" target="_blank" rel="noopener noreferrer">jsonviewer</a> component used is similar to ServiceStack&#39;s <a href="/html5reportformat.html">HTML5 auto pages</a> to quickly view contents of any object.</p><p>The <code>registerRowComponent(db,table,VueComponent,componentName)</code> API is used to register this component with <strong>SharpData</strong> to make it available to render any order.</p><p>With the <code>Order</code> component registered we can now drill down into any <strong>Order</strong> to view its <strong>Order Details</strong>:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/sharpdata-custom-rowcomponents.png" alt=""></p><p>You&#39;re free to render any kind of UI in the row component, e.g. here&#39;s the <a href="https://github.com/NetCoreApps/SharpData/blob/master/src/components/Custom/Customer.ts" target="_blank" rel="noopener noreferrer">Customer.ts</a> row component used to render a richer view for Customers:</p><div class="language-ts"><pre><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> template<span class="token operator">:</span>
<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div v-if=&quot;id&quot; class=&quot;pl-2&quot;&gt;
    &lt;h3 class=&quot;text-success&quot;&gt;{{customer.ContactName}}&lt;/h3&gt;
    &lt;table class=&quot;table table-bordered&quot; style=&quot;width:auto&quot;&gt;
        &lt;tr&gt;
            &lt;th&gt;Contact&lt;/th&gt;
            &lt;td&gt;{{ customer.ContactName }} ({{ customer.ContactTitle }})&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;th&gt;Address&lt;/th&gt;
            &lt;td&gt;
                &lt;div&gt;{{ customer.Address }}&lt;/div&gt;
                &lt;div&gt;{{ customer.City }}, {{ customer.PostalCode }}, {{ customer.Country }}&lt;/div&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;th&gt;Phone&lt;/th&gt;
            &lt;td&gt;{{ customer.Phone }}&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr v-if=&quot;customer.Fax&quot;&gt;
            &lt;th&gt;Fax&lt;/th&gt;
            &lt;td&gt;{{ customer.Fax }}&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
    &lt;jsonviewer :value=&quot;orders&quot; /&gt;
&lt;/div&gt;
&lt;div v-else class=&quot;alert alert-danger&quot;&gt;Customer Id needs to be selected&lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token keyword">extends</span> <span class="token class-name">RowComponent</span> <span class="token punctuation">{</span>

    customer<span class="token operator">:</span><span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    orders<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">get</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>row<span class="token punctuation">.</span>Id<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">async</span> <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>customer <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">sharpData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>db<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>table<span class="token punctuation">,</span><span class="token punctuation">{</span> Id<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> fields <span class="token operator">=</span> <span class="token string">&#39;Id,EmployeeId,OrderDate,Freight,ShipVia,ShipCity,ShipCountry&#39;</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>orders <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sharpData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>db<span class="token punctuation">,</span><span class="token string">&#39;Order&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span> CustomerId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span> fields <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which looks like:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/sharpdata-customer-rowcomponent.png" alt=""></p><h3 id="sharpdata-net-core-project" tabindex="-1">SharpData .NET Core Project <a class="header-anchor" href="#sharpdata-net-core-project" aria-hidden="true">#</a></h3><p>Whilst <a href="https://github.com/NetCoreApps/SharpData" target="_blank" rel="noopener noreferrer">NetCoreApps/SharpData</a> can live a charmed life as a Desktop App, it&#39;s also just a regular ServiceStack .NET Core App with a <a href="https://github.com/NetCoreApps/SharpData/blob/master/Startup.cs" target="_blank" rel="noopener noreferrer">Startup.cs</a> and <code>AppHost</code> that can be developed, published and deployed as you&#39;re used to, here&#39;s an instance of it <a href="/netcore-deploy-rsync.html">deployed as a .NET Core App on Linux</a>:</p><h3 id="sharpdata-netcore-io" tabindex="-1"><a href="https://sharpdata.netcore.io" target="_blank" rel="noopener noreferrer">sharpdata.netcore.io</a> <a class="header-anchor" href="#sharpdata-netcore-io" aria-hidden="true">#</a></h3><blockquote><p>For best experience we recommend running against local network databases</p></blockquote><p>It&#39;s a unique ServiceStack App in that it doesn&#39;t contain any ServiceStack Services as it&#39;s only using pre-existing functionality already built into ServiceStack, <code>#Script</code> for its HTTP APIs and a Vue SPA for its UI, so requires no <code>.dll&#39;s</code> need to be deployed with it.</p><p>It uses the same Vue SPA solution as <a href="https://github.com/NetCoreTemplates/vue-lite" target="_blank" rel="noopener noreferrer">vue-lite</a> to avoid npm&#39;s size &amp; complexity where you only need to run TypeScript&#39;s <code>tsc -w</code> to enable its <a href="/hot-reloading.html">live-reload</a> dev UX which provides its instant feedback during development.</p><p>Some other of its unique traits is that instead of manually including all the Vue framework <code>.js</code> libraries, it instead references the new <code>ServiceStack.Desktop.dll</code> for its Vue framework libraries and its Material design SVG icons which are <a href="https://github.com/NetCoreApps/SharpData/blob/0499e7c66ca4289d17158e79bcc91815bbcd7a99/wwwroot/_layout.html#L60-L66" target="_blank" rel="noopener noreferrer">referenced as normal file references</a>:</p>`,133),u=n("div",null,[n("div",{class:"language-js"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/vue/vue.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/vue-router/vue-router.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/vue-class-component/vue-class-component.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/vue-property-decorator/vue-property-decorator.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/@servicestack/desktop/servicestack-desktop.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/@servicestack/client/servicestack-client.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/@servicestack/vue/servicestack-vue.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"|"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token parameter"},"map"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},'<script src="'),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("it"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},'"><\/script>'),n("span",{class:"token template-punctuation string"},"`")]),s(),n("span",{class:"token operator"},"|"),n("span",{class:"token operator"},">"),s(" joinln "),n("span",{class:"token operator"},"|"),n("span",{class:"token operator"},">"),s(" raw "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),r=a(`<p>But instead of needing to exist on disk &amp; deployed with your project it&#39;s referencing the embedded resources in <code>ServiceStack.Desktop.dll</code> and only the bundled assets need to be <a href="https://github.com/NetCoreApps/SharpData/blob/0499e7c66ca4289d17158e79bcc91815bbcd7a99/SharpData.csproj#L17" target="_blank" rel="noopener noreferrer">deployed with your project</a> which is using the built-in <a href="https://github.com/xoofx/NUglify" target="_blank" rel="noopener noreferrer">NUglify</a> support in the <a href="/dotnet-tool.html">dotnet tools</a> to produce its highly optimized/minified bundle without needing to rely on any npm tooling when publishing the .NET Core App:</p><div class="language-xml"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Target</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Bundle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">BeforeTargets</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AfterPublish<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Exec</span> <span class="token attr-name">Command</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x run _bundle.ss -to /bin/Release/netcoreapp3.1/publish/wwwroot<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Target</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The included <a href="https://github.com/NetCoreApps/SharpData/tree/master/typings" target="_blank" rel="noopener noreferrer">/typings</a> are just the TypeScript definitions for each library which TypeScript uses for its static analysis &amp; its great dev UX in IDEs &amp; VSCode, but are only needed during development and not deployed with the project.</p><h3 id="publish-to-gist-desktop-app" tabindex="-1">Publish to Gist Desktop App <a class="header-anchor" href="#publish-to-gist-desktop-app" aria-hidden="true">#</a></h3><p>The primary way <strong>SharpData</strong> is distributed is as a <a href="https://sharpscript.net/docs/gist-desktop-apps" target="_blank" rel="noopener noreferrer">Gist Desktop App</a>, where it&#39;s able to provide instant utility by running on a users local machine inside a native Chromium Desktop App making it suitable for a much broader use-case as a fast, lightweight, always up-to-date Desktop App with deeper Windows integration all packaged in a tiny <strong>20kb .zip</strong> footprint. There&#39;s no need to provision servers, setup CI, manage cloud hosting resources, you can simply run a script to update a Gist where its latest features are immediately available to your end users the next time it&#39;s run.</p><p>To run, test &amp; publish it as a Desktop App you can use the pre-made scripts in <a href="https://github.com/NetCoreApps/SharpData/blob/master/package.json" target="_blank" rel="noopener noreferrer">package.json</a>. Rider provides a nice UX here as it lets you run each individual script directly from their json editor:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/sharpdata-scripts.png" alt=""></p><p>Essentially to package it into a <a href="https://sharpscript.net/docs/sharp-apps" target="_blank" rel="noopener noreferrer">Sharp App</a> you just need to run the <code>pack</code> script which will bundle &amp; copy all required assets into the <code>/dist</code> folder which you can then test locally in a <a href="/netcore-windows-desktop.html">.NET Core Desktop App</a> by running <code>app</code> in that folder:</p><pre><code>$ cd dist
$ app
</code></pre><p>The <code>init-test</code> script just copies an example <strong>northwind.sqlite</strong> database and sample <code>app.settings</code> so you have something to test it with if you need it.</p><p>The <code>publish-app</code> script is if you want to publish it to a Gist, you will need it to provide the GitHub <strong>AccessToken</strong> with write access to the Gist User Account you want to publish it to. Adding an <code>appName</code> and <code>description</code> to <code>app.settings</code> will publish it to the <a href="https://sharpscript.net/docs/gist-desktop-apps#instant-run-without-installation" target="_blank" rel="noopener noreferrer">Global App Registry</a>, make it publicly discoverable and allow anyone to open your App using your user-friendly <code>appName</code> alias, otherwise they can run it using the <strong>Gist Id</strong> or <strong>Gist URL</strong>.</p><p>Alternatively the contents of the <code>dist/</code> folder can be published to a GitHub repo (public or private) and run with:</p><pre><code>$ app open &lt;user&gt;/&lt;repo&gt;
</code></pre><p>Or link to it with its custom URL Scheme:</p><pre><code>app://&lt;user&gt;/repo
</code></pre><p>If it&#39;s in a private repo they&#39;ll need to either provide an <strong>AccessToken</strong> in the <code>GITHUB_TOKEN</code> Environment variable or using the <code>-token</code> argument:</p><pre><code>$ app open &lt;user&gt;/&lt;repo&gt; -token &lt;token&gt;
</code></pre><p>URL Scheme:</p><pre><code>app://&lt;user&gt;/repo?token=&lt;token&gt;
</code></pre><h3 id="rdbms-configuration" tabindex="-1">RDBMS Configuration <a class="header-anchor" href="#rdbms-configuration" aria-hidden="true">#</a></h3><p>When running as a .NET Core App you&#39;d need to register which RDBMS&#39;s you want to use with OrmLite&#39;s configuration, e.g. the screenshot above registers an SQLite <code>northwind.sqlite</code> database and the <a href="https://techstacks.io" target="_blank" rel="noopener noreferrer">https://techstacks.io</a> PostgreSQL Database:</p><div class="language-csharp"><pre><code>container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteConnectionFactory</span><span class="token punctuation">(</span>
    <span class="token function">MapProjectPath</span><span class="token punctuation">(</span><span class="token string">&quot;~/northwind.sqlite&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SqliteDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> dbFactory <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dbFactory<span class="token punctuation">.</span><span class="token function">RegisterConnection</span><span class="token punctuation">(</span><span class="token string">&quot;techstacks&quot;</span><span class="token punctuation">,</span>
     Environment<span class="token punctuation">.</span><span class="token function">GetEnvironmentVariable</span><span class="token punctuation">(</span><span class="token string">&quot;TECHSTACKS_DB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     PostgreSqlDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>By default it shows all Tables in each RDBMS, but you can limit it to only show a user-defined list of tables with <code>#Script</code> Arguments:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SharpPagesFeature</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    Args <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token comment">//Only display user-defined list of tables:</span>
        <span class="token punctuation">[</span><span class="token string">&quot;tables&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Customer,Order,OrderDetail,Category,Product,Employee,EmployeeTerritory,Shipper,Supplier,Region,Territory&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">&quot;tables_techstacks&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;technology,technology_stack,technology_choice,organization,organization_member,post,post_comment,post_vote,custom_user_auth,user_auth_details,user_activity,page_stats&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>When running as a Sharp App it&#39;s instead configured in its <a href="https://github.com/NetCoreApps/SharpData/blob/master/scripts/deploy/app.northwind.settings" target="_blank" rel="noopener noreferrer">app.settings</a>, here&#39;s equivalent settings for the above configuration:</p><div class="language-"><pre><code># Configure below. Supported dialects: sqlite, mysql, postgres, sqlserver
db sqlite
db.connection northwind.sqlite
# db.connections[techstacks] { db:postgres, connection:$TECHSTACKS_DB }

args.tables Customer,Order,OrderDetail,Category,Product,Employee,EmployeeTerritory,Shipper,Supplier,Region,Territory
args.tables_techstacks technology,technology_stack,technology_choice,organization,organization_member,post,post_comment,post_vote,custom_user_auth,user_auth_details,user_activity,page_stats
</code></pre></div><h3 id="feedback" tabindex="-1">Feedback <a class="header-anchor" href="#feedback" aria-hidden="true">#</a></h3><p>We hope <a href="https://github.com/NetCoreApps/SharpData" target="_blank" rel="noopener noreferrer">SharpData</a> serves useful in some capacity, whether it&#39;s being able to quickly develop and Ship a UI to stakeholders or as a template to develop .NET Core Apps that you can distribute as <strong>Sharp Apps</strong>, as an example to explore the delivery and platform potential of URL schemes and install-less Desktop Apps or just as an inspiration for areas where <code>#Script</code> shines &amp; the different kind of Apps you can create with it.</p><p>Whilst <code>app</code> is Windows 64 only, you can use the <code>x</code> cross-platform tool and its <code>xapp://</code> URL scheme to run Sharp Apps on macOS/Linux, it just wont have access to any of its Window Integration features.</p><h2 id="autoquery-crud" tabindex="-1">AutoQuery CRUD! <a class="header-anchor" href="#autoquery-crud" aria-hidden="true">#</a></h2><p>AutoQuery Services enjoy new declarative super powers where it&#39;s able to implement much of a CRUD Services logic declaratively, including support for multi-tenancy, optimistic concurrency, declarative validation, Auto Mapping external of Request/Respond DTOs to data model properties, auto populating then using full #Script Expressions that can be used for example to populate timestamps, authenticating user information, generating new UUIDs, etc.</p><p>Just like AutoQuery, CRUD Services are ServiceStack Services where you can continue using the same functionality to specify optimal user-defined routes for HTTP APIs, same Request/Response and Attribute filters to apply custom logic and continue enjoying the entire ecosystem around ServiceStack Services including being able to invoke them via <a href="/grpc.html">gRPC</a>, <a href="/messaging.html">MQ endpoints</a> and its rich client ecosystem for enabling end-to-end Typed APIs with <a href="/add-servicestack-reference.html">Add ServiceStack Reference</a>.</p><p>AutoQuery Services are fast &amp; emit clean optimal &quot;pure serialized POCO&quot; wire-format, they&#39;re built on OrmLite&#39;s high-performance APIs where all AutoQuery APIs are <code>async</code> by default but also also offers native sync APIs if needing to enlist any of AutoQuery&#39;s functionality in custom sync methods (that are unable to be converted into viral async APIs).</p><p>Importantly AutoQuery Services are &quot;future-proofed&quot; and can be overridden with a custom implementation that can either choose to augment the existing AutoQuery functionality and enhance it with custom behavior (e.g. if not possible to implement declaratively) or if needed its entire implementation can be replaced without breaking its design contract &amp; existing client integrations, should it be necessary to reimplement later if the Service needs to be constructed to use alternative data sources.</p><h3 id="limitations-of-typical-auto-querying-solutions" tabindex="-1">Limitations of typical Auto querying Solutions <a class="header-anchor" href="#limitations-of-typical-auto-querying-solutions" aria-hidden="true">#</a></h3><p>This is ultimately where many auto querying solutions fall down, they&#39;re typically executed with black-box binary implementations which only understand their opaque query languages normal Services wouldn&#39;t support, are exposed on unnatural routes you wouldn&#39;t use and return unclean verbose wire formats normal Services wouldn&#39;t return. So when it comes to needing to replace their implementation-specific APIs, it&#39;s often not feasible to reverse engineer a new implementation to match its existing Services contract and would need to resort in creating a new incompatible API, breaking existing clients and violating its Systems encapsulation which should be one of the <a href="/service-complexity-and-dto-roles.html#services">core goals of Service design</a>.</p><h3 id="creating-autoquery-crud-services" tabindex="-1">Creating AutoQuery CRUD Services <a class="header-anchor" href="#creating-autoquery-crud-services" aria-hidden="true">#</a></h3><p>Just like <a href="/autoquery-rdbms.html">AutoQuery</a>, you just need to provide the typed Request DTOs definition for your DB Table APIs and AutoQuery automatically provides the implementation for the Service.</p><p>To enlist Auto CRUD behavior your Request DTOs need to implement one of the following interfaces which dictates the behavior of the Service:</p><ul><li><code>ICreateDb&lt;Table&gt;</code> - Create new Table Entry</li><li><code>IUpdateDb&lt;Table&gt;</code> - Update existing Table Entry</li><li><code>IPatchDb&lt;Table&gt;</code> - Partially update existing Table Entry</li><li><code>IDeleteDb&lt;Table&gt;</code> - Delete existing Table Entry</li></ul><p>All Request DTOs also require either an <code>IReturn&lt;T&gt;</code> or <code>IReturnVoid</code> marker interface to specify the return type of the Service.</p><blockquote><p>Can use built-in <code>IReturn&lt;EmptyResponse&gt;</code> for an &quot;empty&quot; response where as <code>IReturnVoid</code> returns &quot;no&quot; response.</p></blockquote><p>Let&#39;s go through a simple example, starting with a simple POCO OrmLite data model we want to add to our RDBMS:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rockstar</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoIncrement</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> DateOfBirth <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime<span class="token punctuation">?</span></span> DateDied <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">LivingStatus</span> LivingStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can create a Service that inserts new <code>Rockstar</code> by defining all the properties we want to allow API consumers to provide when creating a new Rockstar:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateRockstar</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>CreateRockstarResponse<span class="token punctuation">&gt;</span></span></span> 
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> DateOfBirth <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateRockstarResponse</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// Id is auto populated with RDBMS generated Id</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ResponseStatus</span> ResponseStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>When ServiceStack starts it generates the implementation for this Service, which can now insert Rockstars using your populated Request DTO:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonServiceClient</span><span class="token punctuation">(</span>baseUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>

client<span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateRockstar</span> <span class="token punctuation">{</span>
    FirstName <span class="token operator">=</span> <span class="token string">&quot;Kurt&quot;</span><span class="token punctuation">,</span>
    LastName <span class="token operator">=</span> <span class="token string">&quot;Cobain&quot;</span><span class="token punctuation">,</span>
    Age <span class="token operator">=</span> <span class="token number">27</span><span class="token punctuation">,</span>
    DateOfBirth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DateTime</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1967</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Similarly you can define &quot;Update&quot; and &quot;Delete&quot; Services the same way, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateRockstar</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Rockstar</span><span class="token punctuation">,</span>
    <span class="token class-name">IUpdateDb<span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>UpdateRockstarResponse<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateRockstarResponse</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// Id is auto populated with RDBMS generated Id</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Rockstar</span> Result <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// selects &amp; returns latest DB Rockstar</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ResponseStatus</span> ResponseStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>By convention if your Response DTO contains any of these properties it will be automatically populated:</p><ul><li><code>T Id</code> - The Primary Key</li><li><code>T Result</code> - The POCO you want to return (can be a subset of DB model)</li><li><code>int Count</code> - Return the number of rows affected (Deletes can have &gt;1)</li></ul><p>Delete Services need only a Primary Key, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeleteRockstar</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IDeleteDb<span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturnVoid</span></span> 
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>and to Query the Rockstar table you have the <a href="/autoquery-rdbms.html">full featureset of AutoQuery</a> for a complete set of CRUD Services without needing to provide any implementations.</p><h3 id="advanced-crud-example" tabindex="-1">Advanced CRUD Example <a class="header-anchor" href="#advanced-crud-example" aria-hidden="true">#</a></h3><p>Lets now explore a more advanced example that implements Audit information as well as layered support for multi-tenancy to see how you can easily compose features.</p><p>So lets say you have an interface that all tables you want to contain Audit information implements:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAudit</span> 
<span class="token punctuation">{</span>
    <span class="token return-type class-name">DateTime</span> CreatedDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> CreatedBy <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> CreatedInfo <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token return-type class-name">DateTime</span> ModifiedDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> ModifiedBy <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> ModifiedInfo <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token return-type class-name">DateTime<span class="token punctuation">?</span></span> SoftDeletedDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> SoftDeletedBy <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> SoftDeletedInfo <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>It&#39;s not required, but it&#39;s also useful to have a concrete base table which could be annotated like:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AuditBase</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IAudit</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> CreatedDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> CreatedBy <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> CreatedInfo <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> ModifiedDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ModifiedBy <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ModifiedInfo <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Index</span></span><span class="token punctuation">]</span> <span class="token comment">//Check if Deleted</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime<span class="token punctuation">?</span></span> SoftDeletedDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> SoftDeletedBy <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> SoftDeletedInfo <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can then create a base Request DTO that all Audit Create Services will implement:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateIsAuthenticated</span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoPopulate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>CreatedDate<span class="token punctuation">)</span><span class="token punctuation">,</span>  Eval <span class="token operator">=</span> <span class="token string">&quot;utcNow&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoPopulate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">)</span><span class="token punctuation">,</span>    Eval <span class="token operator">=</span> <span class="token string">&quot;userAuthName&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">//or userAuthId</span>
<span class="token punctuation">[</span><span class="token function">AutoPopulate</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>CreatedInfo<span class="token punctuation">)</span><span class="token punctuation">,</span>  Eval <span class="token operator">=</span> <span class="token string">&quot;\`\${userSession.DisplayName} (\${userSession.City})\`&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoPopulate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>ModifiedDate<span class="token punctuation">)</span><span class="token punctuation">,</span> Eval <span class="token operator">=</span> <span class="token string">&quot;utcNow&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoPopulate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>ModifiedBy<span class="token punctuation">)</span><span class="token punctuation">,</span>   Eval <span class="token operator">=</span> <span class="token string">&quot;userAuthName&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">//or userAuthId</span>
<span class="token punctuation">[</span><span class="token function">AutoPopulate</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>ModifiedInfo<span class="token punctuation">)</span><span class="token punctuation">,</span> Eval <span class="token operator">=</span> <span class="token string">&quot;\`\${userSession.DisplayName} (\${userSession.City})\`&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">CreateAuditBase<span class="token punctuation">&lt;</span>Table<span class="token punctuation">,</span>TResponse<span class="token punctuation">&gt;</span></span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>TResponse<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>These all call <a href="https://sharpscript.net/docs/methods" target="_blank" rel="noopener noreferrer">#Script Methods</a> which you can <a href="https://sharpscript.net/docs/sharp-pages#extend" target="_blank" rel="noopener noreferrer">add/extend yourself</a>.</p><p>The <code>*Info</code> examples is a superfluous example showing that you can basically evaluate any <code>#Script</code> expression. Typically you&#39;d only save User Id or Username</p><h3 id="autopopulate" tabindex="-1">AutoPopulate <a class="header-anchor" href="#autopopulate" aria-hidden="true">#</a></h3><p>The <code>[AutoPopulate]</code> attribute tells AutoCrud that you want the DB Table to automatically populate these properties, which can be populated using any of its properties below:</p><ul><li><strong>Value</strong> - A constant value that can be used in C# Attributes, e.g <code>Value=&quot;Foo&quot;</code></li><li><strong>Expression</strong> - A Lightweight <a href="https://sharpscript.net/" target="_blank" rel="noopener noreferrer">#Script</a> Expression that results in a constant value that&#39;s only evaluated once and cached globally, e.g. <code>Expression = &quot;date(2001,1,1)&quot;</code>, useful for values that can&#39;t be defined in C# Attributes like <code>DateTime</code>, can be any <a href="https://sharpscript.net/docs/default-scripts" target="_blank" rel="noopener noreferrer">#Script Method</a>.</li><li><strong>Eval</strong> - A <a href="https://sharpscript.net/" target="_blank" rel="noopener noreferrer">#Script</a> Expression that&#39;s cached per request. E.g. <code>Eval=&quot;utcNow&quot;</code> calls the <code>utcNow</code> Script method which returns <code>DateTime.UtcNow</code> which is cached for that request so all other <code>utcNow</code> expressions will return the same exact value.</li><li><strong>NoCache</strong> - Don&#39;t cache the expression, evaluate it each time.</li></ul><p>AutoCrud makes extensive usage of <code>#Script</code> expressions for much of its declarative functionality which always executes their cached ASTs so expressions are only parsed once and still fast to evaluate even when results are not cached.</p><p>Lets now layer on additional generic functionality by inheriting and extending the base class with additional functionality, e.g. if we want our table to support <a href="/multitenancy.html">Multitenancy</a> we could extend it with:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoPopulate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAuditTenant<span class="token punctuation">.</span>TenantId<span class="token punctuation">)</span><span class="token punctuation">,</span> Eval <span class="token operator">=</span> <span class="token string">&quot;Request.Items.TenantId&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">CreateAuditTenantBase<span class="token punctuation">&lt;</span>Table<span class="token punctuation">,</span>TResponse<span class="token punctuation">&gt;</span></span> 
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">CreateAuditBase<span class="token punctuation">&lt;</span>Table<span class="token punctuation">,</span>TResponse<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>Where <code>TenantId</code> is added in a Global Request Filter (e.g. after inspecting the authenticated UserSession to determine the tenant they belong to), e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> TenantId <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>TenantId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetTenant</span><span class="token punctuation">(</span><span class="token class-name">IRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">IResponse</span> res<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">object</span></span> dto<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> userSession <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">SessionAs</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthUserSession<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>userSession<span class="token punctuation">.</span>IsAuthenticated<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        req<span class="token punctuation">.</span><span class="token function">SetItem</span><span class="token punctuation">(</span>TenantId<span class="token punctuation">,</span> userSession<span class="token punctuation">.</span>City <span class="token keyword">switch</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;London&quot;</span> <span class="token operator">=&gt;</span> <span class="token number">10</span><span class="token punctuation">,</span>
            <span class="token string">&quot;Perth&quot;</span>  <span class="token operator">=&gt;</span> <span class="token number">11</span><span class="token punctuation">,</span>
            <span class="token comment">//...</span>
            _        <span class="token operator">=&gt;</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
    
GlobalRequestFilters<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>SetTenant<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// HTTP Requests</span>
GlobalMessageRequestFilters<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>SetTenant<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// MQ Requests</span>
</code></pre></div><p>Now we easily implement custom &quot;Audited&quot; and &quot;Multi Tenant&quot; CRUD Services by inheriting these base Services.</p><p>Here&#39;s an example of our custom Table that implements our <code>AuditBase</code> class with a <code>TenantId</code> to capture the Tenant the record should be saved to:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RockstarAuditTenant</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AuditBase</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Index</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> TenantId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoIncrement</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> DateOfBirth <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime<span class="token punctuation">?</span></span> DateDied <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">LivingStatus</span> LivingStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Our service can now implement our base Audit &amp; Multitenant enabled service:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateRockstarAuditTenant</span> 
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">CreateAuditTenantBase<span class="token punctuation">&lt;</span>RockstarAuditTenant<span class="token punctuation">,</span> CreateRockstarResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> DateOfBirth <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>And all the decorated properties will be automatically populated when creating the Rockstar with <code>CreateRockstarAuditTenant</code>, e.g:</p><div class="language-csharp"><pre><code>client<span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateRockstarAuditTenant</span> <span class="token punctuation">{</span>
    FirstName <span class="token operator">=</span> <span class="token string">&quot;Kurt&quot;</span><span class="token punctuation">,</span>
    LastName <span class="token operator">=</span> <span class="token string">&quot;Cobain&quot;</span><span class="token punctuation">,</span>
    Age <span class="token operator">=</span> <span class="token number">27</span><span class="token punctuation">,</span>
    DateOfBirth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DateTime</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1967</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>We can create the same base classes for Updates:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateIsAuthenticated</span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoPopulate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>ModifiedDate<span class="token punctuation">)</span><span class="token punctuation">,</span> Eval <span class="token operator">=</span> <span class="token string">&quot;utcNow&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoPopulate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>ModifiedBy<span class="token punctuation">)</span><span class="token punctuation">,</span>   Eval <span class="token operator">=</span> <span class="token string">&quot;userAuthName&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">//or userAuthId</span>
<span class="token punctuation">[</span><span class="token function">AutoPopulate</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>ModifiedInfo<span class="token punctuation">)</span><span class="token punctuation">,</span> Eval <span class="token operator">=</span> <span class="token string">&quot;\`\${userSession.DisplayName} (\${userSession.City})\`&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">UpdateAuditBase<span class="token punctuation">&lt;</span>Table<span class="token punctuation">,</span>TResponse<span class="token punctuation">&gt;</span></span> 
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IUpdateDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>TResponse<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoFilter</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAuditTenant<span class="token punctuation">.</span>TenantId<span class="token punctuation">)</span><span class="token punctuation">,</span> Eval<span class="token operator">=</span><span class="token string">&quot;Request.Items.TenantId&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">UpdateAuditTenantBase<span class="token punctuation">&lt;</span>Table<span class="token punctuation">,</span>TResponse<span class="token punctuation">&gt;</span></span> 
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">UpdateAuditBase<span class="token punctuation">&lt;</span>Table<span class="token punctuation">,</span>TResponse<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateRockstarAuditTenant</span> 
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">UpdateAuditTenantBase<span class="token punctuation">&lt;</span>RockstarAuditTenant<span class="token punctuation">,</span> RockstarWithIdResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">LivingStatus<span class="token punctuation">?</span></span> LivingStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>Note the <code>[AutoPopulate]</code> properties only appear on the Data Model, not the external Request DTO since we don&#39;t want external API consumers to populate them.</p></blockquote><p>For Apps that prefer to never delete rows and instead mark records as deleted so an audit trail is retained, we can implement &quot;Soft Deletes&quot; using an UPDATE to populate the <code>SoftDelete*</code> fields behind-the-scenes:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateIsAuthenticated</span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoPopulate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>SoftDeletedDate<span class="token punctuation">)</span><span class="token punctuation">,</span> Eval <span class="token operator">=</span> <span class="token string">&quot;utcNow&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoPopulate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>SoftDeletedBy<span class="token punctuation">)</span><span class="token punctuation">,</span>   Eval <span class="token operator">=</span> <span class="token string">&quot;userAuthName&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">//or userAuthId</span>
<span class="token punctuation">[</span><span class="token function">AutoPopulate</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>SoftDeletedInfo<span class="token punctuation">)</span><span class="token punctuation">,</span> Eval <span class="token operator">=</span> <span class="token string">&quot;\`\${userSession.DisplayName} (\${userSession.City})\`&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">SoftDeleteAuditBase<span class="token punctuation">&lt;</span>Table<span class="token punctuation">,</span>TResponse<span class="token punctuation">&gt;</span></span> 
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IUpdateDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>TResponse<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoFilter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>QueryTerm<span class="token punctuation">.</span>Ensure<span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>IAuditTenant<span class="token punctuation">.</span>TenantId<span class="token punctuation">)</span><span class="token punctuation">,</span>  Eval <span class="token operator">=</span> <span class="token string">&quot;Request.Items.TenantId&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">SoftDeleteAuditTenantBase<span class="token punctuation">&lt;</span>Table<span class="token punctuation">,</span>TResponse<span class="token punctuation">&gt;</span></span> 
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">SoftDeleteAuditBase<span class="token punctuation">&lt;</span>Table<span class="token punctuation">,</span>TResponse<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SoftDeleteAuditTenant</span> 
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">SoftDeleteAuditTenantBase<span class="token punctuation">&lt;</span>RockstarAuditTenant<span class="token punctuation">,</span> RockstarWithIdResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To implement a &quot;Real&quot; permanently destructive DELETE you would instead implement <code>IDeleteDb&lt;T&gt;</code>:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateIsAuthenticated</span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoFilter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>QueryTerm<span class="token punctuation">.</span>Ensure<span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>IAuditTenant<span class="token punctuation">.</span>TenantId<span class="token punctuation">)</span><span class="token punctuation">,</span>  Eval <span class="token operator">=</span> <span class="token string">&quot;Request.Items.TenantId&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RealDeleteAuditTenant</span> 
    <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IDeleteDb<span class="token punctuation">&lt;</span>RockstarAuditTenant<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>RockstarWithIdResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="multi-rdbms-services" tabindex="-1">Multi RDBMS Services <a class="header-anchor" href="#multi-rdbms-services" aria-hidden="true">#</a></h3><p>As they&#39;re just regular ServiceStack Services everything you\u2019re used to that works with normal services also works with new Auto Crud Services, to recap you can annotate the <strong>DB Model</strong> with the <code>[NamedConnection]</code> attribute to specify which <a href="/multitenancy.html#changedb-apphost-registration">registered named connection</a> AutoQuery should use:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NamedConnection</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Reporting&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NamedRockstar</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Rockstar</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token comment">//DB Model</span>
</code></pre></div><p>Where all AutoQuery Services for that data model will query the <strong>Reporting</strong> database instead:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateNamedRockstar</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RockstarBase</span><span class="token punctuation">,</span> 
    <span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>NamedRockstar<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>RockstarWithIdAndResultResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateNamedRockstar</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RockstarBase</span><span class="token punctuation">,</span> 
    <span class="token class-name">IUpdateDb<span class="token punctuation">&lt;</span>NamedRockstar<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>RockstarWithIdAndResultResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Alternatively the <code>[ConnectionInfo]</code> can be <a href="/multitenancy.html#connectioninfo-attribute">used on Service implementations</a>, but as AutoQuery doesn&#39;t have them you&#39;d need to provide custom implementations that can delegate to their respective Auto Crud API, e.g:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ConnectionInfo</span><span class="token attribute-arguments"><span class="token punctuation">(</span>NamedConnection <span class="token operator">=</span> MyDatabases<span class="token punctuation">.</span>Reporting<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyReportingServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IAutoQueryDb</span> AutoQuery <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">CreateConnectionInfoRockstar</span> request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
        AutoQuery<span class="token punctuation">.</span><span class="token function">CreateAsync</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> Request<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">UpdateConnectionInfoRockstar</span> request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
        AutoQuery<span class="token punctuation">.</span><span class="token function">UpdateAsync</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> Request<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="autofilter" tabindex="-1">AutoFilter <a class="header-anchor" href="#autofilter" aria-hidden="true">#</a></h3><p>If you&#39;re creating Soft Delete &amp; Multi tenant services you&#39;ll want to ensure that every query only returns records in their tenant and doesn&#39;t return deleted items, which we can implement using an <code>[AutoFilter]</code>, e.g:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateIsAuthenticated</span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoFilter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>QueryTerm<span class="token punctuation">.</span>Ensure<span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>IAudit<span class="token punctuation">.</span>SoftDeletedDate<span class="token punctuation">)</span><span class="token punctuation">,</span> Template <span class="token operator">=</span> SqlTemplate<span class="token punctuation">.</span>IsNull<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoFilter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>QueryTerm<span class="token punctuation">.</span>Ensure<span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>IAuditTenant<span class="token punctuation">.</span>TenantId<span class="token punctuation">)</span><span class="token punctuation">,</span>  Eval <span class="token operator">=</span> <span class="token string">&quot;Request.Items.TenantId&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">QueryDbTenant<span class="token punctuation">&lt;</span>From<span class="token punctuation">,</span> Into<span class="token punctuation">&gt;</span></span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">QueryDb<span class="token punctuation">&lt;</span>From<span class="token punctuation">,</span> Into<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>The <code>[AutoFilter]</code> lets you add pre-configured filters to the query, <code>QueryTerm.Ensure</code> utilizes OrmLite&#39;s new <code>Ensure()</code> APIs which forces always applying this filter, even if the query contains other <code>OR</code> conditions.</p><p>This base class will then let you create concrete queries that doesn&#39;t return soft deleted rows and only returns rows from the same tenant as the authenticated user, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryRockstarAudit</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">QueryDbTenant<span class="token punctuation">&lt;</span>RockstarAuditTenant<span class="token punctuation">,</span> Rockstar<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To coincide with AutoCRUD there&#39;s also support for <a href="https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.Endpoints.Tests/AutoQueryCrudTests.Validate.cs" target="_blank" rel="noopener noreferrer">declarative validation</a> which thanks to <a href="https://sharpscript.net/" target="_blank" rel="noopener noreferrer">#Script</a> lets you define your Fluent Validation Rules by annotating your Request DTO properties. As it&#39;s essentially a different way to define Fluent Validation Rules, it still <a href="/validation.html#validation-feature">needs Validation enabled</a> to run:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="automap-and-autodefault" tabindex="-1">AutoMap and AutoDefault <a class="header-anchor" href="#automap-and-autodefault" aria-hidden="true">#</a></h3><p>The <code>[AutoDefault]</code> attribute allows you to specify default values that the Data Model should be populated with using the same <code>#Script</code> expression support available in <code>[AutoPopulate]</code> to populate constant values, cached constant expressions or results of full evaluated expressions.</p><p>The <code>[AutoMap]</code> attributes enables the flexibility of being able to maintain different external property names from their internal data models, but still be able to declaratively map them.</p><p>Here&#39;s an example <code>ICreateDb&lt;T&gt;</code> AutoCrud Service that makes use of both these attributes to achieve its desired behavior:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateRockstarAutoMapDefault</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>RockstarWithIdResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoMap</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Rockstar<span class="token punctuation">.</span>FirstName<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> MapFirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoMap</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Rockstar<span class="token punctuation">.</span>LastName<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> MapLastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoMap</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Rockstar<span class="token punctuation">.</span>Age<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoDefault</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Value <span class="token operator">=</span> <span class="token number">21</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> MapAge <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoMap</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Rockstar<span class="token punctuation">.</span>DateOfBirth<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoDefault</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Expression <span class="token operator">=</span> <span class="token string">&quot;date(2001,1,1)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> MapDateOfBirth <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoMap</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Rockstar<span class="token punctuation">.</span>DateDied<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoDefault</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Eval <span class="token operator">=</span> <span class="token string">&quot;utcNow&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime<span class="token punctuation">?</span></span> MapDateDied <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoMap</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Rockstar<span class="token punctuation">.</span>LivingStatus<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoDefault</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Value <span class="token operator">=</span> LivingStatus<span class="token punctuation">.</span>Dead<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">LivingStatus<span class="token punctuation">?</span></span> MapLivingStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="custom-complex-mapping" tabindex="-1">Custom Complex Mapping <a class="header-anchor" href="#custom-complex-mapping" aria-hidden="true">#</a></h3><p>Another opportunity to apply more complex custom mapping logic before resorting to creating an actual Service implementation is to make use of ServiceStack&#39;s built-in <a href="/auto-mapping.html#intercept-automapping-conversions">Auto Mapping Populator API</a> to intercept an AutoMapping conversion between 2 types and apply custom logic after <code>ConvertTo&lt;T&gt;</code> or <code>PopulateWith&lt;T&gt;</code> APIs, e.g:</p><div class="language-csharp"><pre><code>AutoMapping<span class="token punctuation">.</span><span class="token function">RegisterPopulator</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> target<span class="token punctuation">,</span> <span class="token class-name">CreateRockstar</span> source<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">IsAlive</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        target<span class="token punctuation">[</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span>LivingStatus<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> LivingStatus<span class="token punctuation">.</span>Dead<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="auto-guid-s" tabindex="-1">Auto Guid&#39;s <a class="header-anchor" href="#auto-guid-s" aria-hidden="true">#</a></h3><p>In addition to supporting <code>[AutoIncrement]</code> to insert records with Auto Incrementing Ids, you can use <code>[AutoId]</code> to insert entities with <a href="https://github.com/ServiceStack/ServiceStack.OrmLite#auto-populated-guid-ids" target="_blank" rel="noopener noreferrer">RDBMS generated UUIDs</a> where they&#39;re supported otherwise OrmLite populates them with <code>Guid.NewGuid()</code>.</p><blockquote><p>Note: usage of inheritance isn&#39;t required &amp; has the same behavior as using explicit properties</p></blockquote><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">RockstarBase</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> DateOfBirth <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rockstar</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RockstarBase</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoId</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Guid</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateRockstarWithAutoGuid</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RockstarBase</span><span class="token punctuation">,</span> <span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>RockstarWithIdResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Or if you prefer for Id&#39;s to always be populated with <code>Guid.NewGuid()</code>, remove <code>[AutoId]</code> and populate it with <code>[AutoPopulate]</code> instead:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoPopulate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Rockstar<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">,</span>  Eval <span class="token operator">=</span> <span class="token string">&quot;nguid&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateRockstarWithAutoGuid</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RockstarBase</span><span class="token punctuation">,</span> <span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>RockstarWithIdResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="optimistic-concurrency" tabindex="-1">Optimistic Concurrency <a class="header-anchor" href="#optimistic-concurrency" aria-hidden="true">#</a></h3><p>We can declaratively add support for <a href="https://github.com/ServiceStack/ServiceStack.OrmLite#optimistic-concurrency" target="_blank" rel="noopener noreferrer">OrmLite&#39;s Optimistic Concurrency</a> by including <code>ulong RowVersion</code> property on Auto Crud Request/Response DTOs and Data Models, e.g:</p><div class="language-csharp"><pre><code><span class="token comment">// Data Model</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RockstarVersion</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RockstarBase</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoIncrement</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">ulong</span></span> RowVersion <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateRockstarVersion</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RockstarBase</span><span class="token punctuation">,</span> <span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>RockstarVersion<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
    <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>RockstarWithIdAndRowVersionResponse<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateRockstarVersion</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RockstarBase</span><span class="token punctuation">,</span> <span class="token class-name">IPatchDb<span class="token punctuation">&lt;</span>RockstarVersion<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
    <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>RockstarWithIdAndRowVersionResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">ulong</span></span> RowVersion <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Response DTO</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RockstarWithIdAndRowVersionResponse</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">uint</span></span> RowVersion <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ResponseStatus</span> ResponseStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>AutoQuery will populate the <code>RowVersion</code> in Response DTOs which will need to be provided whenever making changes to that entity where it will fail to update the entity if no <code>RowVersion</code> was provided or has since been modified:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> createResponse <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateRockstarVersion</span> <span class="token punctuation">{</span>
    FirstName <span class="token operator">=</span> <span class="token string">&quot;Original&quot;</span><span class="token punctuation">,</span>
    LastName <span class="token operator">=</span> <span class="token string">&quot;Version&quot;</span><span class="token punctuation">,</span>
    Age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span>
    DateOfBirth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DateTime</span><span class="token punctuation">(</span><span class="token number">2001</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    LivingStatus <span class="token operator">=</span> LivingStatus<span class="token punctuation">.</span>Dead<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// throws OptimisticConcurrencyException: No RowVersion provided</span>
client<span class="token punctuation">.</span><span class="token function">Patch</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">UpdateRockstarVersion</span> <span class="token punctuation">{</span>
    Id <span class="token operator">=</span> createResponse<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> 
    LastName <span class="token operator">=</span> <span class="token string">&quot;UpdatedVersion&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// succeeds if &quot;Original Version&quot; wasn&#39;t modified otherwise throws OptimisticConcurrencyException </span>
<span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">Patch</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">UpdateRockstarVersion</span> <span class="token punctuation">{</span>
    Id <span class="token operator">=</span> createResponse<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> 
    LastName <span class="token operator">=</span> <span class="token string">&quot;UpdatedVersion&quot;</span><span class="token punctuation">,</span>
    RowVersion <span class="token operator">=</span> createResponse<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="mq-auto-crud-requests" tabindex="-1">MQ Auto Crud Requests <a class="header-anchor" href="#mq-auto-crud-requests" aria-hidden="true">#</a></h3><p>As Auto Crud Services are just ServiceStack Services they can partake in its ecosystem of features like being able to <a href="/messaging.html">invoke Services via MQ</a>, although there&#39;s some extra consideration needed to account for the differences between HTTP and MQ Requests. First whatever filters you&#39;ve added to populate the <code>IRequest.Items</code> like tenant Id you&#39;ll also need to register in <code>GlobalMessageRequestFilters</code> so they&#39;re executed for MQ Requests as well:</p><div class="language-csharp"><pre><code>GlobalRequestFilters<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>SetTenant<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// HTTP Requests</span>
GlobalMessageRequestFilters<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>SetTenant<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// MQ Requests</span>
</code></pre></div><p>Secondly Auth Information is typically sent in the HTTP Request Headers, but they need to be included in the Request DTO to send Authenticated MQ Requests, which can either implement <code>IHasSessionId</code> for normal <a href="/authentication-and-authorization.html#session-authentication-overview">Session Auth Providers</a>, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateRockstarAuditTenant</span> 
  <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">CreateAuditTenantBase<span class="token punctuation">&lt;</span>RockstarAuditTenant<span class="token punctuation">,</span> RockstarWithIdAndResultResponse<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IHasSessionId</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> SessionId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">//Authenticate MQ Requests</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Alternatively they can implement <code>IHasBearerToken</code> for <a href="/authentication-and-authorization.html#authentication-per-request-auth-providers">stateless Bearer Token</a> Auth providers like JWT or API Keys.</p><p>If you&#39;re publishing an MQ Request inside a HTTP Service you can use the <code>PopulateRequestDtoIfAuthenticated</code> extension method which populates the Request DTO from the Authenticated HTTP Request, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoCrudMqServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>        
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">CreateRockstarAuditTenantMq</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> mqRequest <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CreateRockstarAuditTenant<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Request<span class="token punctuation">.</span><span class="token function">PopulateRequestDtoIfAuthenticated</span><span class="token punctuation">(</span>mqRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">PublishMessage</span><span class="token punctuation">(</span>mqRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In this case if using <a href="/background-mq.html">Background MQ</a>, it will execute the <code>CreateRockstarAuditTenant</code> request in a background thread, populating the MQ Request Context with the session identified by the <code>IRequest.GetSessionId()</code>.</p><h4 id="publishing-requests-to-oneway-endpoint" tabindex="-1">Publishing Requests to OneWay Endpoint <a class="header-anchor" href="#publishing-requests-to-oneway-endpoint" aria-hidden="true">#</a></h4><p>You can also send MQ requests directly by <a href="/messaging.html#oneway-http-requests-are-published-to-mq-then-executed">publishing to the OneWay HTTP endpoint</a>, which if your AppHost is registered with an MQ Server, it will publish the message to the MQ and auto populate Request DTOs that implements <code>IHasSessionId</code> or <code>IHasBearerToken</code>, either if implicitly sent from an Authenticated client:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> authResponse <span class="token operator">=</span> authClient<span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Authenticate</span> <span class="token punctuation">{</span>
    provider <span class="token operator">=</span> <span class="token string">&quot;credentials&quot;</span><span class="token punctuation">,</span>
    UserName <span class="token operator">=</span> <span class="token string">&quot;admin@email.com&quot;</span><span class="token punctuation">,</span>
    Password <span class="token operator">=</span> <span class="token string">&quot;p@55wOrd&quot;</span><span class="token punctuation">,</span>
    RememberMe <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

authClient<span class="token punctuation">.</span><span class="token function">SendOneWay</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateRockstarAuditTenant</span> <span class="token punctuation">{</span>
    FirstName <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>CreateRockstarAuditTenant<span class="token punctuation">)</span><span class="token punctuation">,</span>
    LastName <span class="token operator">=</span> <span class="token string">&quot;SessionId&quot;</span><span class="token punctuation">,</span>
    Age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span>
    DateOfBirth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DateTime</span><span class="token punctuation">(</span><span class="token number">2002</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Or from an anonymous client with the explicit <code>BearerToken</code> or <code>SessionId</code> properties populated, e.g:</p><div class="language-csharp"><pre><code>client<span class="token punctuation">.</span><span class="token function">SendOneWay</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateRockstarAuditMqToken</span> <span class="token punctuation">{</span>
    BearerToken <span class="token operator">=</span> JwtUserToken<span class="token punctuation">,</span>
    FirstName <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>CreateRockstarAuditMqToken<span class="token punctuation">)</span><span class="token punctuation">,</span>
    LastName <span class="token operator">=</span> <span class="token string">&quot;JWT&quot;</span><span class="token punctuation">,</span>
    Age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span>
    DateOfBirth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DateTime</span><span class="token punctuation">(</span><span class="token number">2002</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To save populating the <code>BearerToken</code> in each request, you can set it once on the Service Client which will automatically populate it on Request DTOs:</p><div class="language-csharp"><pre><code>client<span class="token punctuation">.</span>BearerToken <span class="token operator">=</span> jwtUserToken<span class="token punctuation">;</span>
</code></pre></div><h2 id="declarative-validation" tabindex="-1">Declarative Validation <a class="header-anchor" href="#declarative-validation" aria-hidden="true">#</a></h2><p>To facilitate greater declarative functionality around ServiceStack Services, this release also introduces support for declarative validation where all existing <a href="/validation.html#validation-feature">Fluent Validation Property Validators</a> can be annotated on Request DTOs using typed validation attributes which are decoupled from their Validator implementation so they&#39;re suitable to be annotated on impl-free Service Model DTOs and exported in <a href="/add-servicestack-reference.html">Add ServiceStack Reference</a> Types.</p><blockquote><p>As they&#39;re decoupled they can eventually be used to implement instant validation feedback on clients without server round trips</p></blockquote><p>The validators are incorporated into ServiceStack&#39;s existing Fluent Validation model so it <a href="/world-validation.html">works with existing UI form binding</a>.</p><h3 id="property-validators" tabindex="-1">Property Validators <a class="header-anchor" href="#property-validators" aria-hidden="true">#</a></h3><p>The new Property Validator attributes provide an alternative way to apply Request DTO validation rules, the best way to demonstrate them is showing the same example below implemented using Fluent Validation APIs:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleValidatorsValidator</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AbstractValidator<span class="token punctuation">&lt;</span>ExampleValidators<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">ExampleValidatorsValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>CreditCard<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CreditCard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Email<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">EmailAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Empty<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Equal<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span><span class="token string">&quot;Equal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>ExclusiveBetween<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ExclusiveBetween</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>GreaterThanOrEqual<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GreaterThanOrEqualTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>GreaterThan<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GreaterThan</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>InclusiveBetween<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InclusiveBetween</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Length</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>LessThanOrEqual<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">LessThanOrEqualTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>LessThan<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">LessThan</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>NotEmpty<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>NotEqual<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NotEqual</span><span class="token punctuation">(</span><span class="token string">&quot;NotEqual&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Null<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Null</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>ScalePrecision<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ScalePrecision</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>RegularExpression<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Matches</span><span class="token punctuation">(</span><span class="token string">@&quot;^[a-z]*$&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For each property validator above you can use a Typed Property Validation Attribute in the format <code>[Validate*]</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleValidators</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>ExampleValidator<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>EmptyResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateCreditCard</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> CreditCard <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateEmail</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Email <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateEmpty</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Empty <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateEqual</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Equal&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Equal <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateLessThan</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> LessThan <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateLessThanOrEqual</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> LessThanOrEqual <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateGreaterThan</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> GreaterThan <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateGreaterThanOrEqual</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> GreaterThanOrEqual <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateExclusiveBetween</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> ExclusiveBetween <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateInclusiveBetween</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> InclusiveBetween <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateExactLength</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Length <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotEmpty</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> NotEmpty <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotEqual</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;NotEqual&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> NotEqual <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNull</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Null <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateScalePrecision</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> ScalePrecision <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateRegularExpression</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;^[a-z]*$&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> RegularExpression <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>All Typed Validator Attributes above are just providing a typed subclass wrapper around the generic <code>[Validate]</code>, so the implementation of the <code>[ValidateLessThan]</code> is just:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ValidateLessThanAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ValidateAttribute</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">ValidateLessThanAttribute</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;LessThan(</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">value</span></span><span class="token punctuation">}</span></span><span class="token string">)&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>So the same Typed Validator above is equivalent to using the untyped generic <code>[Validate]</code> attribute below:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleValidators</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>ExampleValidator<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>EmptyResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;CreditCard&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> CreditCard <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Email&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Email <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Empty&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Empty <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Equal(&#39;Equal&#39;)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Equal <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;ExclusiveBetween(10, 20)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> ExclusiveBetween <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;GreaterThanOrEqual(10)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> GreaterThanOrEqual <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;GreaterThan(10)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> GreaterThan <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;InclusiveBetween(10, 20)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> InclusiveBetween <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;ExactLength(10)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Length <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;LessThanOrEqual(10)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> LessThanOrEqual <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;LessThan(10)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> LessThan <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;NotEmpty&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> NotEmpty <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;NotEqual(&#39;NotEqual&#39;)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> NotEqual <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Null&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Null <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;RegularExpression(&#39;^[a-z]*$&#39;)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> RegularExpression <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;ScalePrecision(1,1)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> ScalePrecision <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Where the <strong>Validator Expression</strong> is a <code>#Script</code> Expression that returns a Fluent Validation <code>IPropertyValidator</code> defined in the built-in <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/ValidateScripts.cs" target="_blank" rel="noopener noreferrer">ValidateScripts.cs</a>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ValidateScripts</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ScriptMethods</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">Null</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NullValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">Empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EmptyValidator</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">Empty</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> defaultValue<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EmptyValidator</span><span class="token punctuation">(</span>defaultValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">Equal</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EqualValidator</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">NotNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotNullValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">NotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotEmptyValidator</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">NotEmpty</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> defaultValue<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotEmptyValidator</span><span class="token punctuation">(</span>defaultValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">NotEqual</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NotEqualValidator</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">CreditCard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreditCardValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">Email</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AspNetCoreCompatibleEmailValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">Length</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> min<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> max<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">LengthValidator</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">ExactLength</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> length<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ExactLengthValidator</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">MaximumLength</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> max<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MaximumLengthValidator</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">MinimumLength</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> min<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MinimumLengthValidator</span><span class="token punctuation">(</span>min<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">InclusiveBetween</span><span class="token punctuation">(</span><span class="token class-name">IComparable</span> from<span class="token punctuation">,</span> <span class="token class-name">IComparable</span> to<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">InclusiveBetweenValidator</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> to<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">ExclusiveBetween</span><span class="token punctuation">(</span><span class="token class-name">IComparable</span> from<span class="token punctuation">,</span> <span class="token class-name">IComparable</span> to<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ExclusiveBetweenValidator</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> to<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">LessThan</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">LessThanValidator</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">LessThanOrEqual</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">LessThanOrEqualValidator</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">GreaterThan</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GreaterThanValidator</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">GreaterThanOrEqual</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GreaterThanOrEqualValidator</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">ScalePrecision</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> scale<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> precision<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ScalePrecisionValidator</span><span class="token punctuation">(</span>scale<span class="token punctuation">,</span> precision<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">RegularExpression</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> regex<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RegularExpressionValidator</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> RegexOptions<span class="token punctuation">.</span>Compiled<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="validated-validator-expressions" tabindex="-1">Validated Validator Expressions <a class="header-anchor" href="#validated-validator-expressions" aria-hidden="true">#</a></h3><p>Despite using untyped string Expressions, <strong>Validator</strong> expressions still provide early error detection as on <code>Startup</code> each <code>#Script</code> expression is evaluated and verified that it resolves to a valid <code>IPropertyValidator</code> instance otherwise fails with a <strong>Startup Exception</strong>. If the instance returned is valid it&#39;s merged with any other <code>AbstractValidator&lt;T&gt;</code> that may also be defined for the same Request DTO Type, where it lets you mix n&#39; match declarative attributes together with Fluent Validation rules.</p><h3 id="defining-multiple-validators" tabindex="-1">Defining Multiple Validators <a class="header-anchor" href="#defining-multiple-validators" aria-hidden="true">#</a></h3><p>You can specify multiple Property Validators should be applied within a single Validator expression by using <code>[]</code> Array notation, alternatively you can apply multiple Validate attributes and use C# syntax to combine them in a single line:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleValidators</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;[NotNull,InclusiveBetween(13,100)]&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> ValidateAge <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotNull</span><span class="token punctuation">,</span><span class="token class-name">ValidateInclusiveBetween</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> TypedAge <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="registering-custom-declarative-validators" tabindex="-1">Registering Custom Declarative Validators <a class="header-anchor" href="#registering-custom-declarative-validators" aria-hidden="true">#</a></h3><p>As <code>[Validate*]</code> attributes just execute a Script Method they&#39;re easily extensible by <a href="https://sharpscript.net/docs/methods" target="_blank" rel="noopener noreferrer">defining and register your own</a>, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyValidateScripts</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ScriptMethods</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IPropertyValidator</span> <span class="token function">Custom</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> arg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyCustomValidator</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which can be registered, either directly on your <a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">Script Pages plugin</a> if your AppHost uses one:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SharpPagesFeature</span> <span class="token punctuation">{</span>
    ScriptMethods <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomScriptMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Otherwise you can use the AppHost&#39;s new <code>ScriptContext</code> which adds it to the AppHost&#39;s empty <code>ScriptContext</code>:</p><div class="language-csharp"><pre><code>ScriptContext<span class="token punctuation">.</span>ScriptMethods<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomScriptMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>ScriptContext</code> also returns <code>SharpPagesFeature</code> if registered, in which case both registration examples are equivalent</p></blockquote><p>After which you&#39;ll immediately be able to use it with the <code>[Validate]</code> attribute:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Custom(1)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Test <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>Likewise you can create a typed Validate attribute around it which you can use instead:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ValidateCustomAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ValidateAttribute</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">ValidateCustomAttribute</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> arg<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Custom(</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">arg</span><span class="token punctuation">}</span></span><span class="token string">)&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//...</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateCustom</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Test <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="custom-script-validation" tabindex="-1">Custom Script Validation <a class="header-anchor" href="#custom-script-validation" aria-hidden="true">#</a></h3><p>Fluent Validation Validators are a nice model for defining reusable validation rules however they can require a bit of boilerplate if you only need to define a one-off validation check. In these cases we can provide an even lighter weight solution by being able to defining our validation condition inline with <code>#Script</code> by specifying it in the <code>Condition</code> attribute, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleValidators</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>ExampleValidator<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>EmptyResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Condition <span class="token operator">=</span> <span class="token string">&quot;it.isOdd()&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> IsOddCondition <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Condition <span class="token operator">=</span> <span class="token string">&quot;it.isOdd() &amp;&amp; it.log10() &gt; 2&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> IsOddAndOverTwoDigitsCondition <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Condition <span class="token operator">=</span> <span class="token string">&quot;it.isOdd() || it.log10() &gt; 2&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> IsOddOrOverTwoDigitsCondition <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Script Conditions are valid if they return a <strong>truthy</strong> value and have access to the following arguments within their Expression:</p><ul><li><code>Request</code>: IRequest</li><li><code>dto</code>: Request DTO</li><li><code>field</code>: Property Name</li><li><code>it</code>: Property Value</li></ul><p>If you&#39;re reusing the same Expression a nice solution for maintaining them is in a static class where you can use the <code>AllConditions</code> and <code>AnyConditions</code> helper properties to compose individual checks, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ValidationConditions</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> IsOdd <span class="token operator">=</span> <span class="token string">&quot;it.isOdd()&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> IsOver2Digits <span class="token operator">=</span> <span class="token string">&quot;it.log10() &gt; 2&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleValidators</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>ExampleValidator<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>EmptyResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Condition <span class="token operator">=</span> ValidationConditions<span class="token punctuation">.</span>IsOdd<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> IsOddCondition <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span>AllConditions <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> ValidationConditions<span class="token punctuation">.</span>IsOdd<span class="token punctuation">,</span> ValidationConditions<span class="token punctuation">.</span>IsOver2Digits <span class="token punctuation">}</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> IsOddAndOverTwoDigitsCondition <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span>AnyConditions <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> ValidationConditions<span class="token punctuation">.</span>IsOdd<span class="token punctuation">,</span> ValidationConditions<span class="token punctuation">.</span>IsOver2Digits <span class="token punctuation">}</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> IsOddOrOverTwoDigitsCondition <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Despite not using a validator all <code>#Script</code> Conditions are executed using a custom Fluent Validation <code>IPredicateValidator</code> (called <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Validators.cs" target="_blank" rel="noopener noreferrer">ScriptConditionValidator</a>) so it able to slot right in with all other Property Validators.</p><h3 id="custom-error-codes-and-messages" tabindex="-1">Custom Error Codes and Messages <a class="header-anchor" href="#custom-error-codes-and-messages" aria-hidden="true">#</a></h3><p>The other aspect of validators that can be overridden declaratively are the <strong>ErrorCode</strong> and Error <strong>Message</strong> returned in ServiceStack&#39;s <a href="/error-handling.html">structured Error Response</a>, specified using the <code>ErrorCode</code> and <code>Message</code> Attribute properties:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleValidators</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>ExampleValidator<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>EmptyResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotNull</span><span class="token attribute-arguments"><span class="token punctuation">(</span>ErrorCode <span class="token operator">=</span> <span class="token string">&quot;ZError&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> CustomErrorCode <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token comment">// Overrides both ErrorCode &amp; Message</span>
    <span class="token punctuation">[</span><span class="token function">ValidateInclusiveBetween</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span> ErrorCode <span class="token operator">=</span> <span class="token string">&quot;ZError&quot;</span><span class="token punctuation">,</span> 
        Message <span class="token operator">=</span> <span class="token string">&quot;{PropertyName} has to be between {From} and {To}, you: {PropertyValue}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> CustomErrorCodeAndMessage <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// Overrides ErrorCode &amp; uses Message from Validators</span>
    <span class="token punctuation">[</span><span class="token function">ValidateNotNull</span><span class="token punctuation">(</span>ErrorCode <span class="token operator">=</span> <span class="token string">&quot;RuleMessage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ErrorCodeRule <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Condition <span class="token operator">=</span> ValidationConditions<span class="token punctuation">.</span>IsOdd<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> IsOddCondition <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Validate</span><span class="token attribute-arguments"><span class="token punctuation">(</span>AllConditions <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> ValidationConditions<span class="token punctuation">.</span>IsOdd<span class="token punctuation">,</span> ValidationConditions<span class="token punctuation">.</span>IsOver2Digits <span class="token punctuation">}</span><span class="token punctuation">,</span> 
        ErrorCode <span class="token operator">=</span> <span class="token string">&quot;RuleMessage&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> IsOddAndOverTwoDigitsCondition <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>All Error Messages can reference the <code>{PropertyName}</code> and <code>{PropertyValue}</code> in their messages along with any other MessageFormatter placeholders defined by the validator, e.g. the <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/FluentValidation/Validators/InclusiveBetweenValidator.cs" target="_blank" rel="noopener noreferrer">InclusiveBetweenValidator.cs</a> used above also defines the <code>{From}</code>, <code>{To}</code> and <code>{Value}</code> placeholders.</p><p><code>#Script</code> Conditions can define their Error codes in the centralized <code>ConditionErrorCodes</code> Dictionary in the <code>ValidationFeature</code> Plugin where all <code>IsOdd</code> conditions will return the <strong>NotOdd</strong> custom error code.</p><p>The Error Messages can also be defined in the centralized <code>ErrorCodeMessages</code> Dictionary which defines the Error Messages that all failed <strong>NotOdd</strong> or <strong>RuleMessage</strong> rules will use, e.g:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationFeature</span> <span class="token punctuation">{</span>
    ConditionErrorCodes <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidationConditions<span class="token punctuation">.</span>IsOdd</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;NotOdd&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ErrorCodeMessages <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token string">&quot;NotOdd&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;{PropertyName} must be odd&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">&quot;RuleMessage&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;ErrorCodeMessages for RuleMessage&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="type-validators" tabindex="-1">Type Validators <a class="header-anchor" href="#type-validators" aria-hidden="true">#</a></h3><p>In addition to Property Validators there&#39;s also new support for <strong>Type Validators</strong> which can be declaratively added to perform top-level validation on Request DTOs.</p><p>They behave and function the same as Property Validators where you can use either the typed or the generic <code>[ValidateRequest]</code> attribute.</p><p>ServiceStack includes built-in Type Validator attributes for all <a href="/authentication-and-authorization.html#the-authenticate-attribute">Authorization Filter Attributes</a> but as they&#39;re decoupled from any implementation they can be safely annotated on Request DTOs without requiring any implementation dependencies.</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateIsAuthenticated</span></span><span class="token punctuation">]</span>            <span class="token comment">// or [ValidateRequest(&quot;IsAuthenticated&quot;)]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateIsAdmin</span></span><span class="token punctuation">]</span>                    <span class="token comment">// or [ValidateRequest(&quot;IsAdmin&quot;)]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateHasRole</span><span class="token attribute-arguments"><span class="token punctuation">(</span>role<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>              <span class="token comment">// or [ValidateRequest($&quot;HasRole(\`{role}\`)&quot;)]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateHasPermission</span><span class="token attribute-arguments"><span class="token punctuation">(</span>permission<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>  <span class="token comment">// or [ValidateRequest($&quot;HasPermission(\`{permission}\`)&quot;)</span>
</code></pre></div><p>Just like Property Validators, the Typed Validator attributes are wrappers around the generic <code>[ValidateRequest]</code> attribute, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ValidateIsAuthenticatedAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ValidateRequestAttribute</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">ValidateIsAuthenticatedAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token string">&quot;IsAuthenticated&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which are also defined in <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/ValidateScripts.cs" target="_blank" rel="noopener noreferrer">ValidateScripts.cs</a> but instead return a <code>ITypeValidator</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ValidateScripts</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ScriptMethods</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ITypeValidator</span> <span class="token function">IsAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IsAuthenticatedValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ITypeValidator</span> <span class="token function">IsAuthenticated</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> provider<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IsAuthenticatedValidator</span><span class="token punctuation">(</span>provider<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ITypeValidator</span> <span class="token function">HasRole</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> role<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HasRolesValidator</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ITypeValidator</span> <span class="token function">HasRoles</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> roles<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HasRolesValidator</span><span class="token punctuation">(</span>roles<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ITypeValidator</span> <span class="token function">HasPermission</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> permission<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HasPermissionsValidator</span><span class="token punctuation">(</span>permission<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ITypeValidator</span> <span class="token function">HasPermissions</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> permission<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HasPermissionsValidator</span><span class="token punctuation">(</span>permission<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ITypeValidator</span> <span class="token function">IsAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HasRolesValidator</span><span class="token punctuation">(</span>RoleNames<span class="token punctuation">.</span>Admin<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="custom-type-attributes" tabindex="-1">Custom Type Attributes <a class="header-anchor" href="#custom-type-attributes" aria-hidden="true">#</a></h4><p>The easiest way to create a an <code>ITypeValidator</code> is to inherit from the <code>TypeValidator</code> base class, including both the <strong>ErrorCode</strong> and <strong>Error Message</strong> failed requests should return.</p><p>An example where you might use one is when testing the pre-condition state of an entity which doesn&#39;t logically map to a property. In the example below we&#39;re validating to ensure that the entity doesn&#39;t have any Foreign Key References:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NoRockstarAlbumReferences</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">TypeValidator</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">NoRockstarAlbumReferences</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
        <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token string">&quot;HasForeignKeyReferences&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Has RockstarAlbum References&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">bool</span><span class="token punctuation">&gt;</span></span> <span class="token function">IsValidAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//Example of using compiled accessor delegates to access \`Id\` property</span>
        <span class="token comment">//var id = TypeProperties.Get(dto.GetType()).GetPublicGetter(&quot;Id&quot;)(dto).ConvertTo&lt;int&gt;();</span>

        <span class="token class-name"><span class="token keyword">var</span></span> id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>IHasId<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>dto<span class="token punctuation">)</span><span class="token punctuation">.</span>Id<span class="token punctuation">;</span>
        <span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> db <span class="token operator">=</span> HostContext<span class="token punctuation">.</span>AppHost<span class="token punctuation">.</span><span class="token function">GetDbConnection</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ExistsAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RockstarAlbum<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>RockstarId <span class="token operator">==</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then we need to register it as a custom script method to be able to reference it in <code>[ValidateRequest]</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyValidators</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ScriptMethods</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ITypeValidator</span> <span class="token function">NoRockstarAlbumReferences</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NoRockstarAlbumReferences</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which we can now declaratively reference by script method name:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateRequest</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>NoRockstarAlbumReferences<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleValidators</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>RockstarWithIdResponse<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IHasId<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotNull</span></span><span class="token punctuation">]</span> <span class="token comment">//doesn&#39;t get validated if ValidateRequest is invalid</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> NotNull <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Type Validators are executed before any property validators, which if failed wont be executed.</p><h3 id="type-script-conditions" tabindex="-1">Type Script Conditions <a class="header-anchor" href="#type-script-conditions" aria-hidden="true">#</a></h3><p>Type Validators can also execute <code>#Script</code> expressions where we could implement the above FK check inline using a sync <a href="https://sharpscript.net/docs/db-scripts" target="_blank" rel="noopener noreferrer">Database Script</a>:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateRequest</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Condition <span class="token operator">=</span> <span class="token string">&quot;!dbExistsSync(&#39;SELECT * FROM RockstarAlbum WHERE RockstarId = @Id&#39;, { it.Id })&quot;</span><span class="token punctuation">,</span> 
    ErrorCode <span class="token operator">=</span> <span class="token string">&quot;HasForeignKeyReferences&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleValidators</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>RockstarWithIdResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateNotNull</span></span><span class="token punctuation">]</span> <span class="token comment">//doesn&#39;t get validated if ValidateRequest is invalid</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> NotNull <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>Note the condition needs to return a <strong>truthy</strong> value so you&#39;d need to use the sync DB Script APIs to return a boolean instead of an async Task.</p></blockquote><p>Type Validators can also specify custom Error Codes and Error Messages, they can also specify a custom HTTP Error StatusCode that failed requests should return.</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateRequest</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Condition <span class="token operator">=</span> <span class="token string">&quot;it.Test.isOdd() &amp;&amp; it.Test.log10() &gt; 2&quot;</span><span class="token punctuation">,</span>
    ErrorCode <span class="token operator">=</span> <span class="token string">&quot;NotOddAndOver2Decimals&quot;</span><span class="token punctuation">,</span> Message <span class="token operator">=</span> <span class="token string">&quot;Pre-condition Failed&quot;</span><span class="token punctuation">,</span> StatusCode <span class="token operator">=</span> <span class="token number">401</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleValidators</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>ExampleValidator<span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">IReturn<span class="token punctuation">&lt;</span>EmptyResponse<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="db-validation-rules" tabindex="-1">DB Validation Rules <a class="header-anchor" href="#db-validation-rules" aria-hidden="true">#</a></h3><p>Both Property and Type Validators can also be sourced from a <strong>dynamic source</strong> with both <strong>Memory</strong> and <strong>RDBMS</strong> implementations included along with a Management HTTP API to be able to manage them remotely. Dynamic Validation Rules are cacheable locally giving them the same performance profile as declarative attributes in code whose caches are only invalidated once they&#39;ve been updated, upon which they&#39;ll come into immediate effect.</p><p>Here&#39;s a <a href="/modular-startup.html">Modular Startup</a> class you can drop into a ServiceStack Project to enable maintaining declarative Validation Rules in your configured RDBMS:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureValidation</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureServices</span><span class="token punctuation">,</span> <span class="token class-name">IConfigureAppHost</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Add support for dynamically generated db rules</span>
        services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IValidationSource<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> 
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteValidationSource</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        appHost<span class="token punctuation">.</span>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IValidationSource<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InitSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>DB Validation rules can be added programmatically, this example below adds 1x Type Validator and 2x Property Validators to the <code>DynamicRules</code> Request DTO:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> validationSource <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IValidationSource<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
validationSource<span class="token punctuation">.</span><span class="token function">SaveValidationRulesAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>ValidationRule<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationRule</span> <span class="token punctuation">{</span> Type  <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>DynamicRules<span class="token punctuation">)</span><span class="token punctuation">,</span> Validator <span class="token operator">=</span> <span class="token string">&quot;IsAuthenticated&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationRule</span> <span class="token punctuation">{</span> Type  <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>DynamicRules<span class="token punctuation">)</span><span class="token punctuation">,</span> Validator <span class="token operator">=</span> <span class="token string">&quot;NotNull&quot;</span><span class="token punctuation">,</span> 
                         Field <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>DynamicRules<span class="token punctuation">.</span>LastName<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationRule</span> <span class="token punctuation">{</span> Type  <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>DynamicRules<span class="token punctuation">)</span><span class="token punctuation">,</span> Validator <span class="token operator">=</span> <span class="token string">&quot;InclusiveBetween(13,100)&quot;</span><span class="token punctuation">,</span> 
                         Field <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>DynamicRules<span class="token punctuation">.</span>Age<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Admin</strong> Users can also manage these rules remotely using the <code>ModifyValidationRules</code> Service defined below:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ModifyValidationRules</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReturnVoid</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> AuthSecret <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>ValidationRule<span class="token punctuation">&gt;</span></span> SaveRules <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> DeleteRuleIds <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> SuspendRuleIds <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> UnsuspendRuleIds <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span><span class="token punctuation">?</span></span> ClearCache <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Later we&#39;ll showcase the UX-friendly UI you can also use to manage them when we introduce ServiceStack Studio.</p><h2 id="executable-audit-log" tabindex="-1">Executable Audit Log <a class="header-anchor" href="#executable-audit-log" aria-hidden="true">#</a></h2><p>In addition to being able to declaratively develop AutoQuery and CRUD APIs without needing to implement them, you&#39;re also able to enable a <strong>recorded history of Executable Audit information</strong> over all AutoCrud operations in an executable audit log that in addition to maintaining an automated recorded history of every change to an entity also exhibits &quot;EventSourcing-like capabilities&quot; in being able to recreate the entities state using the latest Services implementation by replaying all AutoCrud operations in order, which can be applied on a granular entity, table level, or in the unlikely case that all System DB writes are performed through AutoQuery CRUD Services, it&#39;s capable of re-creating the entire DB state from just its Audit history, although is dependent on whether all changes made to AutoCrud Services are backwards compatible.</p><p>Being able to rebuild your Systems DB by replaying audit history events is a nice property that can serve as an integrity check to verify that all changes leading up to the current DB state has been recorded. As data is the most important part of most systems it can be beneficial to maintain a change history of when items were created, modified and deleted (and by whom) as we&#39;re used to when using a VCS for our source code. Typically this means also employing &quot;non destructive&quot; approaches to system design like &quot;Soft Deletes&quot; which you can declaratively implement with Auto CRUD.</p><h3 id="executable-crud-audit-events" tabindex="-1">Executable Crud Audit Events <a class="header-anchor" href="#executable-crud-audit-events" aria-hidden="true">#</a></h3><p>This feature tries to obtain some of the nice features of Event Sourcing but without the additional complexity by allowing you to capture all CRUD operations in an executable log whilst still retaining your RDBMS as your master authority. This feature doesn\u2019t require any additional dev overhead as your AutoCrud Request DTOs are the recorded events.</p><p>To enable this feature you just need to register an <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Server/CrudEvents.cs" target="_blank" rel="noopener noreferrer">ICrudEvents</a> provider which will let you persist your events in any data store, but typically you\u2019d use OrmLiteCrudEvents to persist it in the same RDBMS that the AutoCrud requests are already writing to, e.g:</p><div class="language-csharp"><pre><code>container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICrudEvents<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteCrudEvents</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// NamedConnections = { SystemDatabases.Reporting }</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICrudEvents<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InitSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If you\u2019re using Multitenancy features or multiple RDBMS\u2019s in your AutoCrud DTOs you can add them to NamedConnections where it will create an CrudEvent table in each of the RDBMS\u2019s used.</p><p>and that\u2019s all that\u2019s required, now every AutoCrud operation will persist the Request DTO and associative metadata in the Event entry below within a DB transaction:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CrudEvent</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IMeta</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoIncrement</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">long</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    
    <span class="token comment">// AutoCrudOperation, e.g. Create, Update, Patch, Delete, Save</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> EventType <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Model <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>         <span class="token comment">// DB Model Name    </span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ModelId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>       <span class="token comment">// Primary Key of DB Model</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> EventDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>   <span class="token comment">// UTC</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">long</span><span class="token punctuation">?</span></span> RowsUpdated <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token comment">// How many rows were affected</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> RequestType <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>   <span class="token comment">// Request DTO Type    </span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> RequestBody <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>   <span class="token comment">// Serialized Request Body    </span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserAuthId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token comment">// UserAuthId if Authenticated    </span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserAuthName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>  <span class="token comment">// UserName or unique User Identity</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> RemoteIp <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>      <span class="token comment">// Remote IP of the Request</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Urn <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>           <span class="token comment">// URN format: urn:{requestType}:{ModelId}</span>

    <span class="token comment">// Custom Reference Data with or with non-integer Primary Key</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> RefId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> RefIdStr <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> Meta <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="full-executable-audit-history" tabindex="-1">Full Executable Audit History <a class="header-anchor" href="#full-executable-audit-history" aria-hidden="true">#</a></h3><p>With what&#39;s captured this will serve as an Audit History of state changes for any row by querying the <code>Model</code> &amp; <code>ModelId</code> columns, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> dbEvents <span class="token operator">=</span> <span class="token punctuation">(</span>OrmLiteCrudEvents<span class="token punctuation">)</span>container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICrudEvents<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> rowAuditEvents <span class="token operator">=</span> dbEvents<span class="token punctuation">.</span><span class="token function">GetEvents</span><span class="token punctuation">(</span>Db<span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>Rockstar<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The contents of the Request DTO stored as JSON in <code>RequestBody</code>. You can quickly display the contents of any JSON in human-friendly HTML with the <a href="https://sharpscript.net/docs/html-scripts#htmldump" target="_blank" rel="noopener noreferrer">htmlDump</a> script if you&#39;re using <code>#Script</code>, <code>@Html.HtmlDump(obj)</code> if you&#39;re using Razor or just the static <code>ViewUtils.HtmlDump(obj)</code> method to get a raw pretty-formatted HTML String.</p><h3 id="replay-autocrud-requests" tabindex="-1">Replay AutoCrud Requests <a class="header-anchor" href="#replay-autocrud-requests" aria-hidden="true">#</a></h3><p>If all your database was created with AutoCrud Services you could delete its rows and re-create it by just re-playing all your AutoCrud DTOs in the order they were executed, which can be done with:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> eventsPlayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CrudEventsExecutor</span><span class="token punctuation">(</span>appHost<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> crudEvent <span class="token keyword">in</span> dbEvents<span class="token punctuation">.</span><span class="token function">GetEvents</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">await</span> eventsPlayer<span class="token punctuation">.</span><span class="token function">ExecuteAsync</span><span class="token punctuation">(</span>crudEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>CrudEventsExecutor</code> uses your AppHost&#39;s <code>ServiceController</code> to execute the message, e,g. same execution pipeline MQ Requests use, so it will execute your AppHost&#39;s <code>GlobalMessageRequestFilters/Async</code> if you have any custom logic in Request Filters (e.g. Multi TenantId example above). It also executes authenticated AutoCrud requests as the original AutoCrud Request Authenticated User, which just like <a href="/jwt-authprovider.html#requires-user-auth-repository-or-iusersessionsource">JWT Refresh Tokens</a> will require either using an AuthRepository or if you&#39;re using a Custom Auth Provider you can implement an <code>IUserSessionSource</code> to load User Sessions from a custom data store.</p><p>When replaying the Audit Events it will use the original primary key, even if you&#39;re using <code>[AutoIncrement]</code> Primary Keys, this will let you re-create the state of a single entry, e.g:</p><div class="language-csharp"><pre><code>db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DeleteById</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> rowAuditEvents <span class="token operator">=</span> dbEvents<span class="token punctuation">.</span><span class="token function">GetEvents</span><span class="token punctuation">(</span>Db<span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>Rockstar<span class="token punctuation">)</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> crudEvent <span class="token keyword">in</span> rowAuditEvents<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">await</span> eventsPlayer<span class="token punctuation">.</span><span class="token function">ExecuteAsync</span><span class="token punctuation">(</span>crudEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If for instance you wanted it to execute through your latest logic with any enhancements or bug fixes, etc.</p><h2 id="autogen-autoquery-crud-services" tabindex="-1">AutoGen AutoQuery &amp; Crud Services <a class="header-anchor" href="#autogen-autoquery-crud-services" aria-hidden="true">#</a></h2><p>Long time users of ServiceStack will know it&#39;s a staunch proponent of <strong>code-first development</strong> where your C# Types retains the master authority of your App&#39;s logic, although there are a number of times where you have to work with existing databases which would require significant effort to create the initial code-first Data Models. Historically we&#39;ve pointed people to use <a href="https://github.com/ServiceStack/ServiceStack.OrmLite#t4-template-support" target="_blank" rel="noopener noreferrer">OrmLite&#39;s T4 Template Support</a> which provides a decent initial stab, however it&#39;s limited in its capability and offers a sub par development experience.</p><h3 id="code-generation-of-autoquery-crud-services" tabindex="-1">Code Generation of AutoQuery &amp; Crud Services <a class="header-anchor" href="#code-generation-of-autoquery-crud-services" aria-hidden="true">#</a></h3><p>Now with AutoCrud we can add a lot more value in this area as AutoCrud&#39;s declarative nature allows us to easily generate AutoQuery &amp; Crud Services by just emitting declarative Request DTOs.</p><p>You can then add the generated DTOs to your ServiceModel&#39;s to quickly enable AutoQuery Services for your existing databases.</p><p>To enable this feature you you just need to initialize <code>GenerateCrudServices</code> in your <code>AutoQueryFeature</code> plugin, e.g:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AutoQueryFeature</span> <span class="token punctuation">{</span>
    MaxLimit <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    GenerateCrudServices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GenerateCrudServices</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If you don&#39;t have an existing database, you can quickly test this out with a Northwind SQLite database available from <a href="https://github.com/NetCoreApps/NorthwindAuto" target="_blank" rel="noopener noreferrer">github.com/NetCoreApps/NorthwindAuto</a>:</p><pre><code>$ x download NetCoreApps/NorthwindAuto
</code></pre><p>As you&#39;ll need to use 2 terminal windows, I&#39;d recommend opening the project with <strong>VS Code</strong> which has great multi-terminal support:</p><pre><code>$ code NorthwindAuto
</code></pre><p>The important parts of this project is the registering the OrmLite DB Connection, the above configuration and the local <strong>northwind.sqlite</strong> database, i.e:</p><div class="language-csharp"><pre><code>container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteConnectionFactory</span><span class="token punctuation">(</span><span class="token function">MapProjectPath</span><span class="token punctuation">(</span><span class="token string">&quot;~/northwind.sqlite&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SqliteDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AutoQueryFeature</span> <span class="token punctuation">{</span>
    MaxLimit <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    GenerateCrudServices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GenerateCrudServices</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="generating-autoquery-types-services" tabindex="-1">Generating AutoQuery Types &amp; Services <a class="header-anchor" href="#generating-autoquery-types-services" aria-hidden="true">#</a></h4><p>The development experience is essentially the same as <a href="/add-servicestack-reference.html">Add ServiceStack Reference</a> where you&#39;ll need to run the .NET Core App in 1 terminal:</p><pre><code>$ dotnet run
</code></pre><p>Then use the <code>x</code> dotnet tool to download all the AutoQuery &amp; Crud Services for all tables in the configured DB connection:</p><pre><code>$ x csharp https://localhost:5001 -path /crud/all/csharp
</code></pre><h4 id="updating-generated-services" tabindex="-1">Updating Generated Services <a class="header-anchor" href="#updating-generated-services" aria-hidden="true">#</a></h4><p>If your RDBMS schema changes you&#39;d just need to restart your .NET Core App, then you can update all existing <code>dtos.cs</code> with:</p><pre><code>$ x csharp
</code></pre><p>i.e. the same experience as updating normal DTOs.</p><p>You can do the same for all other ServiceStack&#39;s supported languages as shown in autodto at the start of this release.</p><h2 id="autoregister-autogen-autoquery-services" tabindex="-1">AutoRegister AutoGen AutoQuery Services! <a class="header-anchor" href="#autoregister-autogen-autoquery-services" aria-hidden="true">#</a></h2><p>To recap we&#39;ve now got an integrated scaffolding solution where we can quickly generate code-first AutoQuery Services and integrate them into our App to quickly build an AutoQuery Service layer around our existing database.</p><p>But we can raise the productivity level even higher by instead of manually importing the code-generated Services into our project we just tell ServiceStack to do it for us!</p><p>This is what the magical <code>AutoRegister</code> flag does for us:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AutoQueryFeature</span> <span class="token punctuation">{</span>
    GenerateCrudServices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GenerateCrudServices</span> <span class="token punctuation">{</span>
        AutoRegister <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">//....</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="instantly-servicify-northwind-db-with-grpc" tabindex="-1">Instantly Servicify Northwind DB with gRPC <a class="header-anchor" href="#instantly-servicify-northwind-db-with-grpc" aria-hidden="true">#</a></h3><p>To show the exciting potential of this feature we&#39;ll demonstrate one valuable use-case of creating a <a href="/grpc.html">grpc</a> project, mixing in AutoQuery configuration to instantly Servicifying the Northwind DB, browsing the generated Services from ServiceStack&#39;s <a href="/metadata-page.html">Metadata Page</a>, explore the gRPC RPC Services <code>.proto</code> then create a new Dart App to consume the gRPC Services:</p><blockquote><p>YouTube: <a href="https://youtu.be/5NNCaWMviXU" target="_blank" rel="noopener noreferrer">youtu.be/5NNCaWMviXU</a></p></blockquote><p><a href="https://youtu.be/5NNCaWMviXU" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/autogen-grpc.png" alt=""></a></p><h4 id="step-by-step-guide" tabindex="-1">Step-by-step Guide <a class="header-anchor" href="#step-by-step-guide" aria-hidden="true">#</a></h4><p>See the annotated guide below to follow along:</p><p>Create a new <a href="https://github.com/NetCoreTemplates/grpc" target="_blank" rel="noopener noreferrer">grpc</a> .NET Core project and open it in VS Code:</p><pre><code>$ x new grpc NorthwindApi
$ code NorthwindApi
</code></pre><p>Inside VS Code open a Terminal Window and <a href="/mix-tool.html">mix in</a> the required configuration:</p><pre><code>$ cd NorthwindApi
$ x mix autocrudgen sqlite northwind.sqlite
</code></pre><p>Which will mix in the <a href="https://gist.github.com/gistlyn/464a80c15cb3af4f41db7810082dc00c" target="_blank" rel="noopener noreferrer">autocrudgen</a> gist to enable AutoQuery and tell it to Auto Generate AutoQuery and CRUD Services for all tables in the registered RDBMS:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureAutoQuery</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureAppHost</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        appHost<span class="token punctuation">.</span>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AutoQueryFeature</span> <span class="token punctuation">{</span>
            MaxLimit <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span>
            GenerateCrudServices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GenerateCrudServices</span> <span class="token punctuation">{</span>
                AutoRegister <span class="token operator">=</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <a href="https://gist.github.com/gistlyn/768d7b330b8c977f43310b954ceea668" target="_blank" rel="noopener noreferrer">sqlite</a> gist registers an <a href="https://github.com/ServiceStack/ServiceStack.OrmLite" target="_blank" rel="noopener noreferrer">OrmLite.Sqlite</a> RDBMS connection with our App which we want to configure to connect to a <strong>northwind.sqlite</strong> database:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteConnectionFactory</span><span class="token punctuation">(</span>
        Configuration<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span><span class="token string">&quot;DefaultConnection&quot;</span><span class="token punctuation">)</span> 
            <span class="token operator">??</span> <span class="token string">&quot;northwind.sqlite&quot;</span><span class="token punctuation">,</span>
        SqliteDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then we apply the <a href="https://gist.github.com/gistlyn/97d0bcd3ebd582e06c85f8400683e037" target="_blank" rel="noopener noreferrer">northwind.sqlite</a> gist to add the <strong>northwind.sqlite</strong> database to our new project.</p><p>Now that our App&#39;s configured we can run it with:</p><pre><code>$ dotnet run
</code></pre><p>Where it will start the ServiceStack gRPC App on 3 ports configured in <strong>appsettings.json</strong>:</p><ul><li><code>5001</code> - Enables access from existing HTTP/1.1 clients and proxies</li><li><code>5002</code> - Enables a secure gRPC Channel</li><li><code>5003</code> - Enables an insecure gRPC Channel</li></ul><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;Kestrel&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;Endpoints&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;Https&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;Url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://*:5001&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;Protocols&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Http1&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;GrpcSecure&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;Url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://*:5051&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;Protocols&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Http2&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;GrpcInsecure&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;Url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://*:5054&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;Protocols&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Http2&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Once running you can view your Apps metadata page at <code>https://localhost:5001</code> to inspect all the Services that were generated.</p><h4 id="create-dart-grpc-console-app" tabindex="-1">Create Dart gRPC Console App <a class="header-anchor" href="#create-dart-grpc-console-app" aria-hidden="true">#</a></h4><p>It&#39;s also now accessible via <a href="/grpc.html">ServiceStack&#39;s gRPC endpoint</a> which opens your generated Services up to <a href="https://grpc.io" target="_blank" rel="noopener noreferrer">Google&#39;s high-performance gRPC ecosystem</a> which enables typed, high-performance integrations into exciting platforms like <a href="https://flutter.dev" target="_blank" rel="noopener noreferrer">Flutter</a> which uses the <a href="https://dart.dev" target="_blank" rel="noopener noreferrer">Dart</a> programming language to create Reactive, high-performance native Android and iOS Apps.</p><p>We can test Dart&#39;s gRPC integration and development workflow in a new Dart Console App we can create with:</p><pre><code>$ mkdir dart-grpc &amp;&amp; cd dart-grpc
$ pub global activate stagehand
$ stagehand console-full
</code></pre><p>We&#39;ll need to update <strong>pubspec.yaml</strong> with the required gRPC dependencies:</p><div class="language-yaml"><pre><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
  <span class="token key atrule">fixnum</span><span class="token punctuation">:</span> ^0.10.11
  <span class="token key atrule">async</span><span class="token punctuation">:</span> ^2.2.0
  <span class="token key atrule">protobuf</span><span class="token punctuation">:</span> ^1.0.1
  <span class="token key atrule">grpc</span><span class="token punctuation">:</span> ^2.1.3    
</code></pre></div><p>When you save <strong>pubspec.yaml</strong> Dart&#39;s VS Code extension will automatically fetch any new dependencies which can also be manually run with:</p><pre><code>$ pub get
</code></pre><p>We can then use the <a href="/grpc.html#public-grpc-protoc-service-and-ui">protoc support in the dotnet tools</a> to download our <code>.proto</code> Services descriptor and generate Dart&#39;s gRPC classes with a single command:</p><pre><code>$ x proto-dart https://localhost:5001 -out lib
</code></pre><p>We&#39;re now all set to consume our gRPC Services using the protoc generated gRPC proxy in our <code>main()</code> function in <strong>main.dart</strong>:</p><div class="language-dart"><pre><code><span class="token keyword">import</span> <span class="token string">&#39;dart:io&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;package:grpc/grpc.dart&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;package:dart_grpc/services.pb.dart&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;package:dart_grpc/services.pbgrpc.dart&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> arguments<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> client <span class="token operator">=</span> <span class="token class-name">GrpcServicesClient</span><span class="token punctuation">(</span><span class="token class-name">ClientChannel</span><span class="token punctuation">(</span><span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span> port<span class="token punctuation">:</span><span class="token number">5054</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span><span class="token class-name">ChannelOptions</span><span class="token punctuation">(</span>credentials<span class="token punctuation">:</span> <span class="token class-name">ChannelCredentials</span><span class="token punctuation">.</span><span class="token function">insecure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">getQueryCategory</span><span class="token punctuation">(</span><span class="token class-name">QueryCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which can be run with:</p><pre><code>$ dart bin\\main.dart
</code></pre><h3 id="calling-grpc-ssl-services" tabindex="-1">Calling gRPC SSL Services <a class="header-anchor" href="#calling-grpc-ssl-services" aria-hidden="true">#</a></h3><p>The <a href="/grpc-dart.html#dart-protoc-grpc-ssl-example">Dart gRPC Docs</a> shows how we can connect to it via our gRPC SSL endpoint by running the openssl scripts in <a href="https://github.com/NetCoreTemplates/grpc/tree/master/scripts" target="_blank" rel="noopener noreferrer">grpc/scripts</a> to generate our <strong>dev.crt</strong> and <strong>prod.crt</strong> SSL Certificates that you can configure in your in your <strong>GrpcSecure</strong> endpoint with:</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;Kestrel&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;Endpoints&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;GrpcSecure&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;Url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://*:5051&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;Protocols&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Http2&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;Certificate&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;Path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dev.pfx&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;Password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;grpc&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Where you&#39;ll then be able to access the secure gRPC SSL endpoints using the generated <strong>dev.crt</strong> certificate in your Dart App:</p><div class="language-dart"><pre><code><span class="token keyword">import</span> <span class="token string">&#39;dart:io&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;package:grpc/grpc.dart&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;package:dart_grpc/services.pb.dart&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;package:dart_grpc/services.pbgrpc.dart&#39;</span><span class="token punctuation">;</span>

<span class="token class-name">GrpcServicesClient</span> <span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">CallOptions</span> options<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">GrpcServicesClient</span><span class="token punctuation">(</span><span class="token class-name">ClientChannel</span><span class="token punctuation">(</span><span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span> port<span class="token punctuation">:</span><span class="token number">5051</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span><span class="token class-name">ChannelOptions</span><span class="token punctuation">(</span>credentials<span class="token punctuation">:</span> <span class="token class-name">ChannelCredentials</span><span class="token punctuation">.</span><span class="token function">secure</span><span class="token punctuation">(</span>
        certificates<span class="token punctuation">:</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&#39;dev.crt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readAsBytesSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        authority<span class="token punctuation">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> args<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>

    <span class="token keyword">var</span> client <span class="token operator">=</span> <span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">getQueryCategory</span><span class="token punctuation">(</span><span class="token class-name">QueryCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="autogen-s-autoregister-implementation" tabindex="-1">AutoGen&#39;s AutoRegister Implementation <a class="header-anchor" href="#autogen-s-autoregister-implementation" aria-hidden="true">#</a></h3><p>Whilst the <code>AutoRegister = true</code> flag on its face may seem magical, it&#39;s simply an instruction that tells ServiceStack to register the <strong>new</strong> AutoQuery Services it already knows about and register them as if they were normal code-first Services that we had written ourselves.</p><p>More accurately, behind-the-scenes it uses the Metadata Type structure it constructed in generating the Services &amp; Types, i.e. the same Types used to project into its Add ServiceStack Reference&#39;s generated C#, TypeScript, (and other languages) which are also the same Types that are manipulated when customizing code-generation, gets used to generate .NET Types in memory on Startup with Reflection.Emit.</p><p>Barring any issues with the projection into IL, externally the end result is indistinguishable to a normal code-first ServiceStack Service manually created by a developer - An important point as to why these solutions compose well with the rest of ServiceStack, just as an AutoQuery Service is a normal ServiceStack Service, these auto generated &amp; auto registered ServiceStack Services are regular Auto Query Services. The primary difference is that they only exist in a .NET Assembly in memory created on Startup, not in code so they&#39;re not &quot;statically visible&quot; to a C# compiler, IDE, tools, etc. But otherwise they&#39;re regular typed ServiceStack Services and can take advantage of the ecosystem around Services including <a href="/add-servicestack-reference.html">Add ServiceStack Reference</a> &amp; other Metadata Pages and Services, etc.</p><h3 id="createcrudservices-instructions" tabindex="-1">CreateCrudServices Instructions <a class="header-anchor" href="#createcrudservices-instructions" aria-hidden="true">#</a></h3><p>Peeking deeper behind the <code>AutoRegister</code> flag will reveal that it&#39;s a helper for adding an empty <code>CreateCrudServices</code> instance, i.e. it&#39;s equivalent to:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AutoQueryFeature</span> <span class="token punctuation">{</span>
    GenerateCrudServices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GenerateCrudServices</span> <span class="token punctuation">{</span>
        CreateServices <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateCrudServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//....</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="multiple-schemas-and-rdbms-connections" tabindex="-1">Multiple Schemas and RDBMS Connections <a class="header-anchor" href="#multiple-schemas-and-rdbms-connections" aria-hidden="true">#</a></h4><p>This instructs ServiceStack to generate Services for the default option, i.e. all tables in the Database of the default registered Database connection.</p><p>Although should you wish to, you can also generate Services for multiple Databases and RDBMS Schemas within the same App. With this you could have a single API Gateway Servicifying access to multiple System RDBMS Tables &amp; Schemas, e.g:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AutoQueryFeature</span> <span class="token punctuation">{</span>
    GenerateCrudServices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GenerateCrudServices</span> <span class="token punctuation">{</span>
        CreateServices <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateCrudServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateCrudServices</span> <span class="token punctuation">{</span> Schema <span class="token operator">=</span> <span class="token string">&quot;AltSchema&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateCrudServices</span> <span class="token punctuation">{</span> NamedConnection <span class="token operator">=</span> <span class="token string">&quot;Reporting&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateCrudServices</span> <span class="token punctuation">{</span> NamedConnection <span class="token operator">=</span> <span class="token string">&quot;Reporting&quot;</span><span class="token punctuation">,</span> Schema <span class="token operator">=</span> <span class="token string">&quot;AltSchema&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//....</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>These will generated Service Contracts &amp; DTO Types with the Multitenancy <a href="/autoquery-rdbms.html#named-connection">NamedConnection</a> &amp; OrmLite <code>[Schema]</code> attribute required for routing AutoQuery Services to use the appropriate RDBMS connection of Schema.</p><p>Although there are potential conflicts if there are identical table names in each RDBMS/Schema as it has to go back and rewrite the Metadata References to use a non-ambiguous name, first tries using the NamedConnection, then the schema then a combination when both exists, if it&#39;s still ambiguous it gives up and ignores it. If you do run into conflicts, the recommendation is to &quot;eject&quot; the generated <code>.cs</code> sources and manually update them to use your preferred unique names.</p><h3 id="customize-code-generation-to-include-app-conventions" tabindex="-1">Customize Code Generation to include App Conventions <a class="header-anchor" href="#customize-code-generation-to-include-app-conventions" aria-hidden="true">#</a></h3><p>Being able to instantly generate AutoQuery Services for all your RDBMS tables is nice, but it&#39;s even nicer if you could easily customize the code-generation!</p><p>Together with the flexibility of the new declarative validation support you can compose a surprisingly large amount of your App&#39;s logic using the versatility of C# to automate embedding your App&#39;s conventions by annotating them on declarative Request DTOs.</p><p>The existing code-generation already infers a lot from your RDBMS schema which you can further augment using the available <code>GenerateCrudServices</code> filters:</p><ul><li><code>ServiceFilter</code> - called with every Service Operation</li><li><code>TypeFilter</code> - called with every DTO Type</li><li><code>IncludeService</code> - a predicate to return whether the <strong>Service</strong> should be included</li><li><code>IncludeType</code> - a predicate to return whether the <strong>Type</strong> should be included</li></ul><p>For an illustration of this in action, here&#39;s a typical scenario of how the Northwind AutoQuery Services could be customized:</p><ul><li>Controlling which Tables <strong>not to generate Services for</strong> in <code>ignoreTables</code></li><li>Which tables not to generate <strong>Write Crud Services</strong> for in <code>readOnlyTables</code></li><li>Which tables to <strong>restrict access</strong> to in different roles in <code>protectTableByRole</code></li><li>Example of <strong>additional validation</strong> to existing tables in <code>tableRequiredFields</code><ul><li>Adds the <code>[ValidateNotEmpty]</code> attribute to Services accessing the table and the <code>[Required]</code> OrmLite attribute for the Data Model DTO Type.</li></ul></li></ul><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> ignoreTables <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;IgnoredTable&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// don&#39;t generate AutoCrud APIs for these tables</span>
<span class="token class-name"><span class="token keyword">var</span></span> readOnlyTables <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;Region&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> protectTableByRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">&quot;Admin&quot;</span><span class="token punctuation">]</span>    <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>CrudEvent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>ValidationRule<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;Accounts&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;Order&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Supplier&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Shipper&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;Employee&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;Customer&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Order&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;OrderDetail&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;Manager&quot;</span><span class="token punctuation">]</span>  <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;Product&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Category&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Employee&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;EmployeeTerritory&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;UserAuth&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;UserAuthDetails&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> tableRequiredFields <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">&quot;Shipper&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token string">&quot;CompanyName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Phone&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AutoQueryFeature</span> <span class="token punctuation">{</span>
    MaxLimit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
    GenerateCrudServices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GenerateCrudServices</span>
    <span class="token punctuation">{</span>
        ServiceFilter <span class="token operator">=</span> <span class="token punctuation">(</span>op<span class="token punctuation">,</span>req<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
        <span class="token punctuation">{</span>
            <span class="token comment">// Require all Write Access to Tables to be limited to Authenticated Users</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>op<span class="token punctuation">.</span><span class="token function">IsCrudWrite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                op<span class="token punctuation">.</span>Request<span class="token punctuation">.</span><span class="token function">AddAttributeIfNotExists</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidateRequestAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;IsAuthenticated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                    x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Validator <span class="token operator">==</span> <span class="token string">&quot;IsAuthenticated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Limit Access to specific Tables</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> tableRole <span class="token keyword">in</span> protectTableByRole<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> table <span class="token keyword">in</span> tableRole<span class="token punctuation">.</span>Value<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>op<span class="token punctuation">.</span><span class="token function">ReferencesAny</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">)</span>
                        op<span class="token punctuation">.</span>Request<span class="token punctuation">.</span><span class="token function">AddAttribute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidateHasRoleAttribute</span><span class="token punctuation">(</span>tableRole<span class="token punctuation">.</span>Key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Add [ValidateNotEmpty] attribute on Services operating Tables with Required Fields</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>op<span class="token punctuation">.</span>DataModel <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> tableRequiredFields<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span>op<span class="token punctuation">.</span>DataModel<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> requiredFields<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name"><span class="token keyword">var</span></span> props <span class="token operator">=</span> op<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Properties<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> requiredFields<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                props<span class="token punctuation">.</span><span class="token function">Each</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">AddAttribute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidateNotEmptyAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        TypeFilter <span class="token operator">=</span> <span class="token punctuation">(</span>type<span class="token punctuation">,</span> req<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
        <span class="token punctuation">{</span>
            <span class="token comment">// Add OrmLite [Required] Attribute on Tables with Required Fields</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>tableRequiredFields<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> requiredFields<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name"><span class="token keyword">var</span></span> props <span class="token operator">=</span> type<span class="token punctuation">.</span>Properties<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> requiredFields<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                props<span class="token punctuation">.</span><span class="token function">Each</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">AddAttribute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequiredAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//Don&#39;t generate the Services or Types for Ignored Tables</span>
        IncludeService <span class="token operator">=</span> op <span class="token operator">=&gt;</span> <span class="token operator">!</span>ignoreTables<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>table <span class="token operator">=&gt;</span> op<span class="token punctuation">.</span><span class="token function">ReferencesAny</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
            <span class="token operator">!</span><span class="token punctuation">(</span>op<span class="token punctuation">.</span><span class="token function">IsCrudWrite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> readOnlyTables<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>table <span class="token operator">=&gt;</span> op<span class="token punctuation">.</span><span class="token function">ReferencesAny</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

        IncludeType <span class="token operator">=</span> type <span class="token operator">=&gt;</span> <span class="token operator">!</span>ignoreTables<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To assist in code-generation a number of high-level APIs are available to help with identifying Services, e.g:</p><ul><li><code>operation.IsCrud()</code> - Is read-only AutoQuery or AutoCrud write Service</li><li><code>operation.IsCrudWrite()</code> - Is AutoCrud write Service</li><li><code>operation.IsCrudRead()</code> - Is AutoQuery read-only Service</li><li><code>operation.ReferencesAny()</code> - The DTO Type is referenced anywhere in the Service (e.g. Request/Response DTOs, Inheritance, Generic Args, etc)</li><li><code>type.InheritsAny()</code> - The DTO inherits any of the specified type names</li><li><code>type.ImplementsAny()</code> - The DTO implements any of the specified interface type names</li></ul><h3 id="mixing-generated-autoquery-services-existing-code-first-services" tabindex="-1">Mixing generated AutoQuery Services &amp; existing code-first Services <a class="header-anchor" href="#mixing-generated-autoquery-services-existing-code-first-services" aria-hidden="true">#</a></h3><p>The expected use-case for these new features is that you&#39;d create a new project that points to an existing database to bootstrap your project with code-first AutoQuery Services using the dotnet tool to download the generated types, i.e:</p><pre><code>$ x csharp https://localhost:5001 -path /crud/all/csharp
</code></pre><p>At which point you&#39;d &quot;eject&quot; from the generated AutoQuery Services (forgetting about this feature), copy the generated types into your <strong>ServiceModel</strong> project and continue on development as code-first Services just as if you&#39;d created the Services manually.</p><p>But the <code>GenerateCrudServices</code> feature also supports a &quot;hybrid&quot; mode where you can also just generate Services for any <strong>new</strong> AutoQuery Services that don&#39;t exist, i.e. for tables for which there are no existing services which you can access their generated Services from:</p><pre><code>$ x csharp https://localhost:5001 -path /crud/new/csharp
</code></pre><p>The existing <code>/crud/all/csharp</code> Service continues to return generated Services for all Tables but will stitch together and use existing types where they exist.</p><h3 id="trying-it-out" tabindex="-1">Trying it out <a class="header-anchor" href="#trying-it-out" aria-hidden="true">#</a></h3><p>We now have all the features we need to quickly servicify an existing database that we can easily customize to apply custom App logic to further protect &amp; validate access.</p><p>So you can quickly explore these new features locally, you can download the enhanced Northwind example with this customization above in the new <a href="https://github.com/NetCoreApps/NorthwindCrud" target="_blank" rel="noopener noreferrer">github.com/NetCoreApps/NorthwindCrud</a> project which you can download &amp; run with:</p><pre><code>$ x download NetCoreApps/NorthwindCrud
$ cd NorthwindCrud
$ dotnet run
</code></pre><p>This example App is also configured with other new features in incoming release including Crud Events in <a href="https://github.com/NetCoreApps/NorthwindCrud/blob/master/Startup.cs" target="_blank" rel="noopener noreferrer">Startup.cs</a>:</p><div class="language-csharp"><pre><code><span class="token comment">// Add support for auto capturing executable audit history for AutoCrud Services</span>
container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICrudEvents<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteCrudEvents</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICrudEvents<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InitSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>As well as support for dynamically generated db rules in <a href="https://github.com/NetCoreApps/NorthwindCrud/blob/master/Configure.Validation.cs" target="_blank" rel="noopener noreferrer">Configure.Validation.cs</a>:</p><div class="language-csharp"><pre><code>services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IValidationSource<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> 
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteValidationSource</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IValidationSource<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InitSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To be able to test the custom code generation the example is pre-populated with 3 users with different roles in <a href="https://github.com/NetCoreApps/NorthwindCrud/blob/master/Configure.Auth.cs" target="_blank" rel="noopener noreferrer">Configure.Auth.cs</a>:</p><div class="language-csharp"><pre><code><span class="token comment">// Register Users that don&#39;t exist</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EnsureUser</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> email<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> roles<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>authRepo<span class="token punctuation">.</span><span class="token function">GetUserAuthByUserName</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> 
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    
    authRepo<span class="token punctuation">.</span><span class="token function">CreateUserAuth</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserAuth</span> <span class="token punctuation">{</span>
        Email <span class="token operator">=</span> email<span class="token punctuation">,</span>
        DisplayName <span class="token operator">=</span> name<span class="token punctuation">,</span>
        Roles <span class="token operator">=</span> roles<span class="token punctuation">?.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">password</span><span class="token punctuation">:</span><span class="token string">&quot;p@ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">EnsureUser</span><span class="token punctuation">(</span><span class="token string">&quot;employee@gmail.com&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">name</span><span class="token punctuation">:</span><span class="token string">&quot;A Employee&quot;</span><span class="token punctuation">,</span>   <span class="token named-parameter punctuation">roles</span><span class="token punctuation">:</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token string">&quot;Employee&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">EnsureUser</span><span class="token punctuation">(</span><span class="token string">&quot;accounts@gmail.com&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">name</span><span class="token punctuation">:</span><span class="token string">&quot;Account Dept&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">roles</span><span class="token punctuation">:</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token string">&quot;Employee&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Accounts&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">EnsureUser</span><span class="token punctuation">(</span><span class="token string">&quot;manager@gmail.com&quot;</span><span class="token punctuation">,</span>  <span class="token named-parameter punctuation">name</span><span class="token punctuation">:</span><span class="token string">&quot;The Manager&quot;</span><span class="token punctuation">,</span>  <span class="token named-parameter punctuation">roles</span><span class="token punctuation">:</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token string">&quot;Employee&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Manager&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Of which you can also find published on NorthwindCrud&#39;s home page:</p><h3 id="open-in-servicestack-studio" tabindex="-1">Open in ServiceStack Studio <a class="header-anchor" href="#open-in-servicestack-studio" aria-hidden="true">#</a></h3><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/northwindcrud-home.png" alt=""></p><h3 id="retrying-dart-grpc-example" tabindex="-1">Retrying Dart gRPC Example <a class="header-anchor" href="#retrying-dart-grpc-example" aria-hidden="true">#</a></h3><p>We can see an immediate effect of these customizations in <strong>NorthwindCrud</strong> where most APIs now require Authentication:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/northwindcrud-metadata.png" alt=""></p><p>If we then try to run our Dart <code>main.dart</code> example against the customized <strong>NorthwindCrud</strong> APIs by first regenerating gRPC protoc Types:</p><pre><code>$ x proto-dart https://localhost:5001 -out lib
</code></pre><p>Then try rerunning <code>main.dart</code> where it will now fail with an <strong>Unauthorized</strong> exception:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/northwindcrud-noauth.png" alt=""></p><p>To now be able to access most Services we&#39;ll need to <a href="/grpc-dart.html#dart-grpc-authenticated-request-example">Authenticate as registered user</a>. As NorthwindCrud is <a href="https://github.com/NetCoreApps/NorthwindCrud/blob/master/Configure.Auth.cs" target="_blank" rel="noopener noreferrer">configured to use JWT</a> we can create an Authenticated gRPC client by adding the populated JWT Token from an Authenticated Request into the <strong>Authorization</strong> gRPC metadata Header:</p><div class="language-dart"><pre><code><span class="token class-name">GrpcServicesClient</span> <span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">CallOptions</span> options<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">GrpcServicesClient</span><span class="token punctuation">(</span><span class="token class-name">ClientChannel</span><span class="token punctuation">(</span><span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span> port<span class="token punctuation">:</span><span class="token number">5054</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span><span class="token class-name">ChannelOptions</span><span class="token punctuation">(</span>credentials<span class="token punctuation">:</span> <span class="token class-name">ChannelCredentials</span><span class="token punctuation">.</span><span class="token function">insecure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    options<span class="token punctuation">:</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> arguments<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> authResponse <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">postAuthenticate</span><span class="token punctuation">(</span><span class="token class-name">Authenticate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span>provider<span class="token operator">=</span><span class="token string">&#39;credentials&#39;</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span>userName<span class="token operator">=</span><span class="token string">&#39;manager@gmail.com&#39;</span><span class="token punctuation">.</span><span class="token punctuation">.</span>password<span class="token operator">=</span><span class="token string">&#39;p@ss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> authClient <span class="token operator">=</span> <span class="token function">createClient</span><span class="token punctuation">(</span>options<span class="token punctuation">:</span><span class="token class-name">CallOptions</span><span class="token punctuation">(</span>metadata<span class="token punctuation">:</span><span class="token punctuation">{</span> 
        <span class="token string">&#39;Authorization&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Bearer \${authResponse.bearerToken}&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token keyword">await</span> authClient<span class="token punctuation">.</span><span class="token function">getQueryCategory</span><span class="token punctuation">(</span><span class="token class-name">QueryCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now when we rerun <code>main.dart</code> we&#39;ll be able to access our Northwind categories again:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/northwindcrud-jwtauth.png" alt=""></p><h2 id="servicestack-studio" tabindex="-1">ServiceStack Studio <a class="header-anchor" href="#servicestack-studio" aria-hidden="true">#</a></h2><p>Thanks to the richer semantics of AutoQuery Services, it&#39;s generic interfaces, base class &amp; declarative attributes, ServiceStack has more knowledge about your Services than what&#39;s possible from normal HTTP API endpoint metadata and is able to provide richer suite of functionality around them. An example that takes advantage of this is <strong>ServiceStack Studio</strong> - A new Desktop App for accessing your ServiceStack instances.</p><blockquote><p>YouTube: <a href="https://youtu.be/2FFRLxs7orU" target="_blank" rel="noopener noreferrer">youtu.be/2FFRLxs7orU</a></p></blockquote><p><a href="https://youtu.be/2FFRLxs7orU" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-home.png" alt=""></a></p><p>It replaces the <a href="https://github.com/ServiceStack/Admin" target="_blank" rel="noopener noreferrer">ServiceStack Admin UI</a> where it provides a UX-friendly UI for accessing AutoQuery &amp; Crud Services but will also gain UI features for taking advantage of various ServiceStack Plugins &amp; Features, e.g. in this initial release it includes UI&#39;s for <strong>Managing DB Validation Rules</strong> &amp; for viewing the <strong>Executable Audit History of Tables</strong> updated through AutoCrud Services.</p><p><strong>Studio</strong> is a capability-based Admin UI where it only enables its different management UI&#39;s depending on which features each remote ServiceStack Instance has enabled &amp; whether the Signed In User has access to them.</p><p>To enable this ability a new <code>/metadata/app</code> endpoint returns metadata information about which plugins are enabled, what features they&#39;re configured with and whether they&#39;re protected behind User Roles. As such it will only be able to manage ServiceStack instances running the latest v5.9 release.</p><p>You&#39;ll need the latest <a href="/netcore-windows-desktop.html">app dotnet tool</a> which is bundled with the latest Chromium which provides the Desktop UI:</p><pre><code>$ dotnet tool update -g app
</code></pre><p>Which you&#39;ll need to run once to register the <code>app://</code> url scheme, e.g:</p><pre><code>$ app -version
</code></pre><h3 id="studio-desktop-app-vs-servicestack-admin" tabindex="-1">Studio Desktop App vs ServiceStack.Admin <a class="header-anchor" href="#studio-desktop-app-vs-servicestack-admin" aria-hidden="true">#</a></h3><p>The primary limitations with <a href="https://github.com/ServiceStack/Admin" target="_blank" rel="noopener noreferrer">ServiceStack Admin</a> was its deployment model where it had to be explicitly registered as a plugin in each ServiceStack instance, this means it could only be used on ServiceStack instances that explicitly had it registered, also it maintained the long release cadence of ServiceStack major releases which means the UI couldn&#39;t be updated frequently resulting in a stale long feedback loop.</p><h3 id="frequent-out-of-band-release-cadence" tabindex="-1">Frequent out-of-band release cadence <a class="header-anchor" href="#frequent-out-of-band-release-cadence" aria-hidden="true">#</a></h3><p>To overcome this ServiceStack Studio is delivered as a <a href="https://sharpscript.net/docs/gist-desktop-apps" target="_blank" rel="noopener noreferrer">Gist Desktop App</a> which, like a website will be running the latest version each time it&#39;s run. To reduce its download footprint the <code>app</code> and <code>x</code> dotnet tools now include the new <a href="https://github.com/ServiceStack/ServiceStack/tree/master/src/ServiceStack.Desktop" target="_blank" rel="noopener noreferrer">ServiceStack.Desktop</a> project which includes the common framework libraries that most Vue &amp; React Apps use which saves it from needing to be included in each Download. It also includes Google Material Design Icons SVGs &amp; a copy of <a href="https://fontawesome.com/how-to-use/on-the-web/setup/hosting-font-awesome-yourself" target="_blank" rel="noopener noreferrer">fontawesome free icons</a> that all Desktop Apps will be able to use without the bandwidth cost for using them.</p><h3 id="light-footprint-always-use-latest-version" tabindex="-1">Light Footprint + Always use latest version <a class="header-anchor" href="#light-footprint-always-use-latest-version" aria-hidden="true">#</a></h3><p><a href="https://github.com/ServiceStack/Studio" target="_blank" rel="noopener noreferrer">ServiceStack/Studio</a> is a <a href="https://github.com/NetCoreTemplates/vue-lite" target="_blank" rel="noopener noreferrer">vue-lite</a> App that only uses SVG icons as they&#39;re small, high-quality at every scale, are customizable &amp; have built-in css classes making them easy to use declaratively where it takes advantage of <a href="/svg.html">ServiceStack&#39;s built-in SVG</a> support which allows optimal css bundles containing only the SVGs your App&#39;s use. All SVG icons used in Studio are defined in its <a href="https://github.com/ServiceStack/Studio/blob/master/wwwroot/_init.ss" target="_blank" rel="noopener noreferrer">_init.ss</a> startup script which defines which Material Design SVG to make available under which css bundle. It also registers its own custom SVG icons not contained in ServiceStack.Desktop&#39;s embedded resources and includes them as part of its <code>/css/app.css</code> bundle.</p><p>As a result of its architecture Studio gets bundled down to a <strong>55kb .zip</strong> which includes its 46kb (Uncompressed) <code>Studio.dll</code> plugin containing all its C# back-end logic (thanks to all ServiceStack .dll&#39;s being deployed with the dotnet tools as well). As it&#39;s <a href="https://gist.github.com/gistlyn/d8e7a56027ed6ec3060d9a9896931909" target="_blank" rel="noopener noreferrer">published as a Gist</a> it adds a bit more overhead (and Gist APIs aren&#39;t particularly fast) so there&#39;s a slight delay in loading from a Gist but still is able to load its home page in around <strong>2-3s</strong>, which includes the start time of the ServiceStack .NET Core App and the Chromium CEF Browser. The number of restarts should be minimal thanks to Studio being designed as a single UI to manage all your ServiceStack instances so you can reuse the same running Desktop App to manage multiple remote ServiceStack instances.</p><h3 id="desktop-features" tabindex="-1">Desktop Features <a class="header-anchor" href="#desktop-features" aria-hidden="true">#</a></h3><p>Thanks to it being a Desktop App we have features that wouldn&#39;t be possible in a Web App, e.g. we can use built-in proxies to by-pass CORS &amp; IFrame embedding limitations to be able to access ServiceStack instances that don&#39;t have CORS enabled &amp; native Windows features like easy access to clipboard, launch external programs directly, control Desktop Windows, e.g. Launch into <strong>kiosk</strong> mode or in/out of full-screen with <code>F11</code>, etc.</p><h3 id="servicestack-desktop" tabindex="-1">ServiceStack.Desktop <a class="header-anchor" href="#servicestack-desktop" aria-hidden="true">#</a></h3><p>Studio is powered by exciting new features in the latest <code>app</code> .NET Core Desktop App dotnet tool which in addition to its small footprint &amp; able to run &quot;always up-to-date&quot;, it also includes seamless integration into invoking server functions with <code>#Script</code> which allows you to use the same syntax to call JavaScript functions.</p><p>The integration makes it trivial to call <strong>Win32 APIs</strong> from JavaScript which are accessible behind <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Desktop/lib/js/%40servicestack/desktop/servicestack-desktop.d.ts" target="_blank" rel="noopener noreferrer">async TypeScript APIs</a> resulting in a much more pleasant API than calling them in C#, e.g. you can Copy + Paste to the Windows clipboard with just:</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> clipboard<span class="token punctuation">,</span> setClipboard <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@servicestack/desktop&#39;</span>

<span class="token keyword">await</span> <span class="token function">setClipboard</span><span class="token punctuation">(</span><span class="token string">&#39;Some Text&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">await</span> <span class="token function">clipboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//= Some Text</span>
</code></pre></div><p>The TypeScript APIs are just typed wrappers around calling <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Desktop/DesktopScripts.cs" target="_blank" rel="noopener noreferrer">DesktopScripts Script Methods</a> which invoke the the appropriate Win 32 API, e.g:</p><div class="language-ts"><pre><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">clipboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">evaluateCode</span><span class="token punctuation">(</span><span class="token string">&#39;clipboard&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre></div><h3 id="win32-demo" tabindex="-1">win32 demo <a class="header-anchor" href="#win32-demo" aria-hidden="true">#</a></h3><p>The <a href="https://github.com/sharp-apps/win32" target="_blank" rel="noopener noreferrer">win32</a> Sharp App contains an examples dashboard of invoking different native Win32 functions:</p><p><a href="https://github.com/sharp-apps/win32" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/win32.png" alt=""></a></p><p>You can run this Gist Desktop App via URL Scheme from:</p><pre><code>[app://win32](app://win32)
</code></pre><p>Or via command-line:</p><pre><code>$ app open win32
</code></pre><p>The main source code of this component is in <a href="https://github.com/sharp-apps/win32/blob/master/src/components/Win32/index.ts" target="_blank" rel="noopener noreferrer">Win32/index.ts</a>, which makes use of the built in TypeScript APIs below from <code>@servicestack/desktop</code>:</p><div class="language-ts"><pre><code><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&#39;%USERPROFILE%\\\\\\\\.sharp-apps&#39;</span><span class="token punctuation">)</span>

<span class="token function">openUrl</span><span class="token punctuation">(</span><span class="token string">&#39;https://google.com&#39;</span><span class="token punctuation">)</span>

<span class="token function">messageBox</span><span class="token punctuation">(</span><span class="token string">&#39;The Title&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Caption&#39;</span><span class="token punctuation">,</span> MessageBoxType<span class="token punctuation">.</span>YesNo <span class="token operator">|</span> MessageBoxType<span class="token punctuation">.</span>IconInformation<span class="token punctuation">)</span>

<span class="token keyword">await</span> <span class="token function">openFile</span><span class="token punctuation">(</span>  <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&#39;Pick Images&#39;</span><span class="token punctuation">,</span>
    filter<span class="token operator">:</span> <span class="token string">&quot;Image files (*.png;*.jpeg)|*.png;*.jpeg|All files (*.*)|*.*&quot;</span><span class="token punctuation">,</span>
    initialDir<span class="token operator">:</span> <span class="token keyword">await</span> <span class="token function">expandEnvVars</span><span class="token punctuation">(</span><span class="token string">&#39;%USERPROFILE%\\\\\\\\Pictures&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    defaultExt<span class="token operator">:</span> <span class="token string">&#39;*.png&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">openFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span> isFolderPicker<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">deviceScreenResolution</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">primaryMonitorInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">windowSetPosition</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>

<span class="token function">windowSetSize</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
</code></pre></div><h4 id="custom-win32-api" tabindex="-1">Custom Win32 API <a class="header-anchor" href="#custom-win32-api" aria-hidden="true">#</a></h4><p>You&#39;re also not limited to calling the built-in Win32 APIs above as calling custom APIs just involves wrapping the C# inside your preferred <a href="https://sharpscript.net/docs/methods" target="_blank" rel="noopener noreferrer">#Script method</a> that you would like to make it available to JS as, e.g. here&#39;s the <strong>win32</strong> implementation for launching <a href="https://docs.microsoft.com/en-us/windows/win32/dlgbox/color-dialog-box" target="_blank" rel="noopener noreferrer">Win32&#39;s Color Dialog Box</a> and returning the selected color in HTML Color format:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomMethods</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ScriptMethods</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;ComDlg32.dll&quot;</span><span class="token punctuation">,</span> CharSet <span class="token operator">=</span> CharSet<span class="token punctuation">.</span>Unicode<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">internal</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">CommDlgExtendedError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;ComDlg32.dll&quot;</span><span class="token punctuation">,</span> CharSet <span class="token operator">=</span> CharSet<span class="token punctuation">.</span>Unicode<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">internal</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ChooseColor</span><span class="token punctuation">(</span><span class="token keyword">ref</span> <span class="token class-name">ChooseColor</span> cc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> customColors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">int</span></span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
        <span class="token number">0x00FFFFFF</span><span class="token punctuation">,</span> <span class="token number">0x00C0C0C0</span><span class="token punctuation">,</span> <span class="token number">0x00808080</span><span class="token punctuation">,</span> <span class="token number">0x00000000</span><span class="token punctuation">,</span>
        <span class="token number">0x00FF0000</span><span class="token punctuation">,</span> <span class="token number">0x00800000</span><span class="token punctuation">,</span> <span class="token number">0x00FFFF00</span><span class="token punctuation">,</span> <span class="token number">0x00808000</span><span class="token punctuation">,</span>
        <span class="token number">0x0000FF00</span><span class="token punctuation">,</span> <span class="token number">0x00008000</span><span class="token punctuation">,</span> <span class="token number">0x0000FFFF</span><span class="token punctuation">,</span> <span class="token number">0x00008080</span><span class="token punctuation">,</span>
        <span class="token number">0x000000FF</span><span class="token punctuation">,</span> <span class="token number">0x00000080</span><span class="token punctuation">,</span> <span class="token number">0x00FF00FF</span><span class="token punctuation">,</span> <span class="token number">0x00800080</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">chooseColor</span><span class="token punctuation">(</span><span class="token class-name">ScriptScopeContext</span> scope<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">chooseColor</span><span class="token punctuation">(</span>scope<span class="token punctuation">,</span> <span class="token string">&quot;#ffffff&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">chooseColor</span><span class="token punctuation">(</span><span class="token class-name">ScriptScopeContext</span> scope<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> defaultColor<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> scope<span class="token punctuation">.</span><span class="token function">DoWindow</span><span class="token punctuation">(</span>w <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> cc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ChooseColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cc<span class="token punctuation">.</span>lStructSize <span class="token operator">=</span> Marshal<span class="token punctuation">.</span><span class="token function">SizeOf</span><span class="token punctuation">(</span>cc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> lpCustColors <span class="token operator">=</span> Marshal<span class="token punctuation">.</span><span class="token function">AllocCoTaskMem</span><span class="token punctuation">(</span><span class="token number">16</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">int</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            Marshal<span class="token punctuation">.</span><span class="token function">Copy</span><span class="token punctuation">(</span>customColors<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> lpCustColors<span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cc<span class="token punctuation">.</span>hwndOwner <span class="token operator">=</span> w<span class="token punctuation">;</span>
            cc<span class="token punctuation">.</span>lpCustColors <span class="token operator">=</span> lpCustColors<span class="token punctuation">;</span>
            cc<span class="token punctuation">.</span>Flags <span class="token operator">=</span> ChooseColorFlags<span class="token punctuation">.</span>FullOpen <span class="token operator">|</span> ChooseColorFlags<span class="token punctuation">.</span>RgbInit<span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> c <span class="token operator">=</span> ColorTranslator<span class="token punctuation">.</span><span class="token function">FromHtml</span><span class="token punctuation">(</span>defaultColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cc<span class="token punctuation">.</span>rgbResult <span class="token operator">=</span> ColorTranslator<span class="token punctuation">.</span><span class="token function">ToWin32</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">ChooseColor</span><span class="token punctuation">(</span><span class="token keyword">ref</span> cc<span class="token punctuation">)</span><span class="token punctuation">)</span> 
                <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        
            c <span class="token operator">=</span> ColorTranslator<span class="token punctuation">.</span><span class="token function">FromWin32</span><span class="token punctuation">(</span>cc<span class="token punctuation">.</span>rgbResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> ColorTranslator<span class="token punctuation">.</span><span class="token function">ToHtml</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">finally</span>
        <span class="token punctuation">{</span>
            Marshal<span class="token punctuation">.</span><span class="token function">FreeCoTaskMem</span><span class="token punctuation">(</span>lpCustColors<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ServiceStack.Desktop&#39;s IPC takes care of invoking the <code>#Script</code> <a href="https://sharpscript.net/docs/expression-viewer" target="_blank" rel="noopener noreferrer">JS-compatible expression</a> and returning the result:</p><div class="language-ts"><pre><code><span class="token keyword">var</span> selectedColor <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">evaluateCode</span><span class="token punctuation">(</span><span class="token string">&#39;chooseColor(\`#336699\`)&#39;</span><span class="token punctuation">)</span>
</code></pre></div><p><a href="https://github.com/sharp-apps/win32" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/win32-choosecolor.png" alt=""></a></p><p>The <code>scope.DoWindow()</code> extension method supports expressions being invoked in-process when launched by <code>app.exe</code> as well as when invoked during development in &quot;detached mode&quot; if electing to run the .NET Core backend as a stand-alone Web App.</p><p>If your App calls your custom APIs a lot you can wrap it in a first-class TypeScript method that mirrors the server #Script method:</p><div class="language-ts"><pre><code><span class="token keyword">function</span> <span class="token function">chooseColor</span><span class="token punctuation">(</span>defaultColor<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> defaultColor
        <span class="token operator">?</span> <span class="token function">evaluateCode</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">chooseColor(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">quote</span><span class="token punctuation">(</span>defaultColor<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token function">evaluateCode</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">chooseColor()</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Where it can be called using the same syntax in JS and #Script:</p><div class="language-ts"><pre><code><span class="token keyword">var</span> selectedColor <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">chooseColor</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">#336699</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
</code></pre></div><h3 id="highly-productive-live-reloading-development-experience" tabindex="-1">Highly productive live-reloading Development experience <a class="header-anchor" href="#highly-productive-live-reloading-development-experience" aria-hidden="true">#</a></h3><p>When running inside an <code>app</code> <a href="/netcore-windows-desktop.html">.NET Core Desktop App</a> is uses an IPC mode similar to Unix Pipes where communication is streamed over internal processes with the Desktop Scripts invoked by app.exe. To enable an optimal development experience it also supports a decoupled mode where in Debug builds you can launch the <code>app.exe</code> Chromium browser to open a remote URL, e.g:</p><pre><code>$ app start https://localhost:5002
</code></pre><p>Which allows you to develop your Desktop App as a regular .NET Core Web App whilst still being hosted inside the <code>app</code> CEF shell which instead of using a Chromium inter-process IPC to invoke <code>#Script</code> server functions, will invoke them over https where the Win 32 APIs end up being invoked by the back-end .NET Core Server instead of the <code>app.exe</code> Desktop App, but the end result remains the same.</p><p>If it weren&#39;t for the productivity possible for being able to only needing to develop for Chrome&#39;s state-of-the-art rendering engine where you can use advanced features like CSS grid along with the productivity of high-level productive Reactive UI frameworks like Vue, the effort into create a Desktop App like ServiceStack Studio wouldn&#39;t be justifiable. Being able to develop in a highly productive environment with hot-reloading and a fast iterative development loop makes all the difference which otherwise wouldn&#39;t be feasible if needing to use any C# &amp; XAML UI FX or WinForms to develop Desktop Apps.</p><p>A Reactive Vue Desktop App with live-reload brings the enjoyment back to developing Desktop Apps with web development productivity, access to the latest Chrome features &amp; native Windows features when needed.</p><p>After the next release we&#39;ll create pre-packaged project templates for <strong>vue-desktop</strong> and <strong>react-desktop</strong> Desktop Apps to make it easy develop Vue &amp; React Desktop Apps along with scripts to bundle it &amp; publish it to gist. If preferred <code>app.exe</code> also lets you deploy the published app to your own private repo &amp; limit access to only users accessible with a GitHub token which they can open with from a URL with:</p><pre><code>app://user/repo?token={GITHUB_TOKEN}
</code></pre><p>Or on the command line with:</p><pre><code>$ app user/repo -token $GITHUB_TOKEN
</code></pre><blockquote><p>Or without a token by setting it in the <code>GITHUB_TOKEN</code> Environment variable</p></blockquote><p>For offline deployments the published <code>/dist</code> folder can be copied and launched with <code>app</code> (or <code>x</code>) in the app&#39;s folder:</p><pre><code>$ app
</code></pre><p>For better Desktop integration this (or custom command-line arguments) can be wrapped in a new Windows Shortcut:</p><pre><code>$ app shortcut
</code></pre><p>Anyone wanting an early look at an example of Desktop App projects built using this development model can checkout <a href="https://github.com/ServiceStack/Studio" target="_blank" rel="noopener noreferrer">ServiceStack/Studio</a> or <a href="https://github.com/NetCoreApps/SharpData" target="_blank" rel="noopener noreferrer">NetCoreApps/SharpData</a>.</p><h3 id="starting-servicestack-studio" tabindex="-1">Starting ServiceStack Studio <a class="header-anchor" href="#starting-servicestack-studio" aria-hidden="true">#</a></h3><p>The initial release of ServiceStack Studio primarily provides a UI around AutoQuery Services and the latest features in this release like <strong>Executable Audit History</strong> and declarative <strong>RDBMS validators</strong>.</p><p>If you don&#39;t have a project using the latest v5.9 features on hand you can launch a copy of <a href="https://github.com/NetCoreApps/NorthwindCrud" target="_blank" rel="noopener noreferrer">NetCoreApps/NorthwindCrud</a> which uses the new AutoCrud features to generate AutoQuery Services around all its RDBMS tables, that can be run locally with:</p><pre><code>$ x download NetCoreApps/NorthwindCrud
$ cd NorthwindCrud
$ dotnet run
</code></pre><p>Where you can use <code>app</code> URL scheme support to launch <strong>Studio</strong> &amp; automatically register the <strong>NorthwindCrud</strong> instance with:</p><p><a href="app://studio?connect=https://localhost:5001">app://studio?connect=https://localhost:5001</a></p><p>This URL scheme gets translated &amp; is equivalent to running <strong>Studio</strong> on the command-line with:</p><pre><code>$ app open studio -connect https://localhost:5001
</code></pre><p>Which downloads the <a href="https://gist.github.com/gistlyn/d8e7a56027ed6ec3060d9a9896931909" target="_blank" rel="noopener noreferrer">Studio Gist Desktop App</a>, loads it as a <a href="/virtual-file-system.html#gistvirtualfiles">Gist VFS</a> whose static assets are then served by the .NET Core Server and loaded in the CEF Chromium browser.</p><p>The <code>connect</code> param is used by <strong>Studio</strong> to auto register the remote <strong>NorthwindCrud</strong> instance where it auto downloads its App Metadata containing its enabled plugins &amp; features &amp; within a few seconds you should see it appear on the home page:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-home.png" alt=""></p><h4 id="desktop-less-x-plat-app" tabindex="-1">Desktop-less x-plat app <a class="header-anchor" href="#desktop-less-x-plat-app" aria-hidden="true">#</a></h4><p>Whilst not optimized for it, <strong>Studio</strong> can also be launched headless in your default Browser using the <code>x</code> x-plat tool:</p><p><a href="xapp://studio?connect=https://localhost:5001">xapp://studio?connect=https://localhost:5001</a></p><pre><code>$ x open studio -connect https://localhost:5001
</code></pre><p>Where you&#39;ll then be able to view it by going to <code>https://localhost:5002</code>. Note if not launched in a browser <strong>Studio</strong> will have limited capacity and features, but will eventually be a supported mode for accessing <strong>Studio</strong> from macOS or Linux.</p><h3 id="home-page" tabindex="-1">Home Page <a class="header-anchor" href="#home-page" aria-hidden="true">#</a></h3><p>From the home page you&#39;ll see all the top-level Admin Sections available that&#39;s enabled on the remote instance, in the initial release there&#39;s a UI for accessing AutoQuery Services and a UI for maintaining DB Validation Rules.</p><h3 id="autoquery-ui" tabindex="-1">AutoQuery UI <a class="header-anchor" href="#autoquery-ui" aria-hidden="true">#</a></h3><p>Because of the rich declarative metadata of AutoQuery &amp; Crud Services we can infer the data model that each AutoQuery Service operates on and the Type of Operation each Service provides. As a result can logically group each Service around the Data Model they operate on and provide a more intuitive &amp; natural UI for each of the different AutoQuery/CRUD operation types.</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/autoquery-noauth.png" alt=""></p><p>What UI features &amp; tables are visible is reflected by whether the AutoQuery Service for that type exists and whether the currently authenticated User has access to them (i.e. Have the role required by each Service). So an unauthenticated user will see Northwind Crud&#39;s read-only <strong>Region</strong> table with no ability to update it &amp; the <strong>Territory</strong> table, which as it isn&#39;t protected by a role will be visible to everyone, but as all CRUD Write operations require authentication, all edit controls require authentication - where we can see in the screenshot above, are replaced with <strong>Sign In</strong> buttons.</p><p>Here are the relevant <a href="https://github.com/NetCoreApps/NorthwindCrud/blob/master/Startup.cs" target="_blank" rel="noopener noreferrer">NorthwindCrud auto-generation rules</a> which defines this behavior:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> readOnlyTables <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;Region&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
GenerateCrudServices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GenerateCrudServices</span> <span class="token punctuation">{</span>
    ServiceFilter <span class="token operator">=</span> <span class="token punctuation">(</span>op<span class="token punctuation">,</span>req<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// Require all Write Access to Tables to be limited to Authenticated Users</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>op<span class="token punctuation">.</span><span class="token function">IsCrudWrite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            op<span class="token punctuation">.</span>Request<span class="token punctuation">.</span><span class="token function">AddAttributeIfNotExists</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidateRequestAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;IsAuthenticated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Validator <span class="token operator">==</span> <span class="token string">&quot;IsAuthenticated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//Don&#39;t generate the Services or Types for Ignored Tables</span>
    IncludeService <span class="token operator">=</span> op <span class="token operator">=&gt;</span> <span class="token operator">!</span>ignoreTables<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>table <span class="token operator">=&gt;</span> op<span class="token punctuation">.</span><span class="token function">ReferencesAny</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
        <span class="token operator">!</span><span class="token punctuation">(</span>op<span class="token punctuation">.</span><span class="token function">IsCrudWrite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> readOnlyTables<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>table <span class="token operator">=&gt;</span> op<span class="token punctuation">.</span><span class="token function">ReferencesAny</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Clicking on any of the <strong>Auth</strong> icons or the <strong>Sign In</strong> button on the top right will open up the Sign In dialog.</p><h3 id="integrated-auth-component" tabindex="-1">Integrated Auth Component <a class="header-anchor" href="#integrated-auth-component" aria-hidden="true">#</a></h3><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/auth.png" alt=""></p><p>The <strong>Sign In</strong> dialog supports most of ServiceStack&#39;s built-in Auth Providers with a different Auth Dialog tab depending which Auth Providers are enabled. It looks at &quot;auth family type&quot; to determine how to Authenticate with each Auth Provider so it should still support your Custom Auth Providers if they inherit from existing Auth Providers, otherwise they can explicitly specify which Type of Auth they use by overriding the <code>Type</code> property getter with one of the following:</p><ul><li><strong>Bearer</strong> - Authenticate with HTTP Authentication Bearer Token (e.g. JWT or API Key)</li><li><strong>credentials</strong> - Authenticate with Username/Password at <code>/auth/credentials</code></li><li><strong>oauth</strong> - Authenticate with OAuth</li><li><strong>session</strong> - Alternative <a href="/authentication-and-authorization.html#session-authentication-overview">session-based Auth Provider</a></li></ul><p>The <strong>session</strong> tab is also displayed if a <code>credentials</code> or <code>auth</code> provider is enabled. It should serve as a fallback Auth option if your Custom Auth Provider doesn&#39;t fit into the existing family types as it opens the <code>/auth</code> page of the remote ServiceStack instance:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/auth-session.png" alt=""></p><p>Where you can login to the remote site via the new fallback <code>/login</code> page or uses your custom Login Page if exists. If your remote instance is configured to allow Studio CORS access, i.e:</p><div class="language-csharp"><pre><code>appHost<span class="token punctuation">.</span>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CorsFeature</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">allowOriginWhitelist</span><span class="token punctuation">:</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token string">&quot;https://localhost:5002&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Clicking on the <strong>copy</strong> button will then be able to post the session Id back to Studio &amp; close the auth popup otherwise you&#39;d need to manually close the popup and paste the session in.</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/auth-session-copy.png" alt=""></p><p>The <strong>OAuth</strong> tab is a little different since it requires an OAuth redirect and since most 3rd Party OAuth providers disallow embedding in iframes, it needs to popup an external url in your default browser which still provides a nice auth UX as you&#39;d typically already be Signed In with your Default browser, where it will redirect you back to your <code>/auth</code> page where you can copy either the <strong>Session Id</strong> or the OAuth <strong>Access Token</strong> if you enable including OAuth Access Tokens in your <code>AuthenticateResponse</code> DTO with:</p><div class="language-csharp"><pre><code>appHost<span class="token punctuation">.</span>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    IncludeOAuthTokensInAuthenticateResponse <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Include OAuth Keys in authenticated /auth page</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This allows you to <a href="/authentication-and-authorization.html#authentication-via-oauth-accesstokens">Authenticate via OAuth Access Token</a> where you can test the same Authentication that Mobile and Desktop using pre-existing Sign In Widgets who also authenticate via OAuth Access Tokens obtained by their native UI widget:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/auth-page.png" alt=""></p><p><strong>Studio</strong> is able to provide a seamless UX where it&#39;s able to monitor the Windows clipboard for changes &amp; when detected close the window, return focus back to Studio who uses it to automatically Sign In with the copied token.</p><h3 id="desktop-user-state-preferences" tabindex="-1">Desktop User State &amp; Preferences <a class="header-anchor" href="#desktop-user-state-preferences" aria-hidden="true">#</a></h3><p>As is expected from a normal Desktop App, the User State of the App is preserved across restarts, which Studio maintains in its <code>$HOME/.servicestack/studio/site.settings</code> JSON file which preserves amongst other things what remote ServiceStack instances you&#39;ve connected to &amp; last queries made on each table, etc. When not running in a Desktop App it will save it to your browsers <code>localStorage</code>. You can force a save with <code>Ctrl+S</code> or by clicking on the <strong>save icon</strong> on the top right.</p><h3 id="autocrud-querying" tabindex="-1">AutoCrud Querying <a class="header-anchor" href="#autocrud-querying" aria-hidden="true">#</a></h3><p>The same querying behavior, supported filters, custom fields, paging, order by&#39;s, etc. demonstrated in <strong>SharpData</strong> above are also available in <strong>Studio</strong>, but implemented differently, where instead of calling the SharpData API directly, the filters are translated into the equivalent AutoQuery request and the remote AutoQuery Services are called instead, but as they both result in the same UX and end result, users knowledge is transferable:</p><h4 id="search-filters" tabindex="-1">Search Filters <a class="header-anchor" href="#search-filters" aria-hidden="true">#</a></h4><ul><li>Use <code>=null</code> or <code>!=null</code> to search <code>NULL</code> columns</li><li>Use <code>&lt;=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;&gt;</code>, <code>!=</code> prefix to search with that operator</li><li>Use <code>,</code> trailing comma to perform an <code>IN (values)</code> search (integer columns only)</li><li>Use <code>%</code> suffix or prefix to perform a <code>LIKE</code> search</li></ul><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-query-filters.png" alt=""></p><h3 id="export-to-excel" tabindex="-1">Export to Excel <a class="header-anchor" href="#export-to-excel" aria-hidden="true">#</a></h3><p>Likewise the fast, direct export into Excel is also available, one difference is that the total results returned in a query is controlled by the remote ServiceStack AutoQuery plugin whereas <strong>SharpData</strong> allows for unlimited sized queries:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-excel.png" alt=""></p><h3 id="autocrud-partial-updates" tabindex="-1">AutoCrud Partial Updates <a class="header-anchor" href="#autocrud-partial-updates" aria-hidden="true">#</a></h3><p>The UI is designed to look similar to a generic RDBMS Admin UI Table Editor where you can edit records in a table grid. If a <code>IPatchDb&lt;Table&gt;</code> AutoQuery Service exists for the Data Model &amp; the Authenticated User has access to it.</p><p>If enabled all fields (excl PK) on that Request DTO will be editable in the UI, otherwise they&#39;ll appear Read-only like the <strong>Id</strong> column:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-crud-partial.png" alt=""></p><h3 id="autocrud-create" tabindex="-1">AutoCrud Create <a class="header-anchor" href="#autocrud-create" aria-hidden="true">#</a></h3><p>If the user has access to the <code>ICreateDb&lt;Table&gt;</code> Service they&#39;ll be able to add records by clicking the <em>+</em> icon on the top-right of the resultset which brings up the Create Entity modal:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-crud-create.png" alt=""></p><h3 id="autocrud-update-and-delete" tabindex="-1">AutoCrud Update and Delete <a class="header-anchor" href="#autocrud-update-and-delete" aria-hidden="true">#</a></h3><p>If the user has access to the <code>IUpdateDb&lt;Table&gt;</code> Service they&#39;ll be able to update records by clicking on the <strong>edit</strong> icon which will bring up the Edit Entity dialog. If they have access to the <code>IDeleteDb&lt;Table&gt;</code> Service they&#39;ll also be able to delete the entity from the same screen:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-crud-update.png" alt=""></p><h3 id="api-log-viewer" tabindex="-1">API Log Viewer <a class="header-anchor" href="#api-log-viewer" aria-hidden="true">#</a></h3><p>All API Requests the UI makes to remote ServiceStack instances are made via a generic .NET Core back-end Service Proxy which attaches the Signed In Authentication Info to each Request. Each API Request Studio makes is recorded in the log viewer at the bottom, showing the Verb and Parameters each API was called with:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-request-log.png" alt=""></p><blockquote><p>You can copy the URL from <strong>GET</strong> API Requests or open them up in a new browser to view it in isolation.</p></blockquote><h3 id="executable-audit-history" tabindex="-1">Executable Audit History <a class="header-anchor" href="#executable-audit-history" aria-hidden="true">#</a></h3><p>If you Sign In as the <strong>Admin</strong> User (i.e. using <code>AuthSecret=zsecret</code>) you&#39;ll get super user access to access the other protected features like being able to view an <strong>Audit History</strong> of updates made to each record via AutoQuery that&#39;s enabled in <strong>NorthwindCrud</strong> with:</p><div class="language-csharp"><pre><code><span class="token comment">// Add support for auto capturing executable audit history for AutoCrud Services</span>
container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICrudEvents<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteCrudEvents</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICrudEvents<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InitSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Where users in the <code>AutoQueryFeature.AccessRole</code> (default: Admin) role will be able to view the Audit history of each row:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-audit.png" alt=""></p><blockquote><p>If creating &amp; deleting an entity with the same Id, the Audit History of the previous entity will be retained &amp; visible</p></blockquote><h3 id="validators-ui" tabindex="-1">Validators UI <a class="header-anchor" href="#validators-ui" aria-hidden="true">#</a></h3><p>As an <strong>Admin</strong> you&#39;ll also have access to the <a href="https://forums.servicestack.net/t/autocrud-preview/8298/29?u=mythz" target="_blank" rel="noopener noreferrer">DB Validation Source</a> Admin UI which will let you add declarative Type and Property Validators for each Request DTO in Studio. This is enabled in NorthwindCrud in <a href="https://github.com/NetCoreApps/NorthwindCrud/blob/master/Configure.Validation.cs" target="_blank" rel="noopener noreferrer">Configure.Validation.cs</a>:</p><div class="language-csharp"><pre><code><span class="token comment">// Add support for dynamically generated db rules</span>
services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IValidationSource<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> 
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteValidationSource</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>
appHost<span class="token punctuation">.</span>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IValidationSource<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InitSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Management of this feature is limited to users in the <code>ValidationFeature.AccessRole</code> (default: Admin).</p><p>Clicking on the Validation <strong>Lock Icon</strong> on the top right will take you to the Validation Editor for that AutoQuery Request DTO which will include quick links to jump to different AutoQuery/Crud Services for the same Data Model.</p><p>In the validation editor you&#39;ll be able to create <strong>Type</strong> and <strong>Property</strong> Validation Rules that either make use of an existing <strong>Validator</strong> or you can enter a custom <code>#Script</code> expression that must validate to <code>true</code>. The Validator UI is smart and will list all built-in and Custom Script Methods returning <code>ITypeValidator</code> or <code>IPropertyValidator</code> that&#39;s registered in the remote instance. The pre-defined list of validators are displayed in a list of &quot;quick pick&quot; buttons that enables fast adding/editing of validation rules.</p><h4 id="verified-rules" tabindex="-1">Verified Rules <a class="header-anchor" href="#verified-rules" aria-hidden="true">#</a></h4><p>The <code>ModifyValidationRules</code> Service that Studio calls performs a lot of validation to ensure the Validation rule is accurate including executing the validator to make sure it returns the appropriate validator type and checking the syntax on any <strong>Script</strong> validation rules to ensure it&#39;s valid.</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-validator-property.png" alt=""></p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-db-validators.png" alt=""></p><p>The <code>ModifyValidationRules</code> back-end Service also takes care of invalidating the validation rule cache so that any saved Validators are immediately applied. Despite being sourced from a DB, after the first access the validation rules are cached in memory where they&#39;d have similar performance to validators declaratively added on Request DTOs in code.</p><p>After you add your validation rules you will be able to click the <strong>AutoQuery</strong> icon on the top right to return to the AutoQuery editor. Be mindful of what Validation Rule you&#39;re adding to which DTO, e.g. a validation rule added to <strong>CreateCategory</strong> Service will only be applied to that Service which is used when creating entities, e,g. not for full entity or partial field updates.</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/studio-validators-create.png" alt=""></p><h3 id="future-updates" tabindex="-1">Future Updates <a class="header-anchor" href="#future-updates" aria-hidden="true">#</a></h3><p>We hope this provides a quick glimpse into ServiceStack Studio that you&#39;ll find useful. Currently this release focused on getting the foundational architecture pieces in place that makes it possible for Studio to enable its compatibility-based UI with the metadata of the different plugins &amp; features &amp; their access roles.</p><p>Thanks to the productive workflow of an integrated .NET Core Chromium Desktop App updates will be able to frequently continue out-of-band of ServiceStack releases where they&#39;ll be immediately available after the next time the Studio is run. Currently on the TODO list will be to implement richer edit UIs where we should be able to use more optimal input controls as we have the type information of every field. Also planned is proving a better UI for invoking ServiceStack APIs than a generic HTTP API UI like Postman as we have richer metadata about each API and access to the richer functionality around ServiceStack Services.</p><p><strong>Studio</strong> should be considered to be in beta at least until v5.10 where it&#39;s likely additional changes will be needed in the App Metadata as more UI features are implemented. Any feedback is welcome in the <a href="https://forums.servicestack.net" target="_blank" rel="noopener noreferrer">Customer Forums</a> where they should be quickly resolved.</p><h3 id="metadata-app-export-discovery" tabindex="-1">Metadata App Export / Discovery <a class="header-anchor" href="#metadata-app-export-discovery" aria-hidden="true">#</a></h3><p>The way a generic capability-based Admin UI&#39;s like Studio is possible is via the <code>/metadata/app</code> API descriptor which describes what plugins and features are enabled on the remote ServiceStack instance. All built-in plugins which provide functionality that can be remotely accessed add their info to the App&#39;s metadata.</p><p>This functionality is also available to your own plugins should you wish to attach info about your plugin where you can use the <code>AddToAppMetadata</code> extension method to return a populated <code>CustomPlugin</code> DTO describing the features made available by your plugin:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPlugin</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IPlugin</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Register</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        appHost<span class="token punctuation">.</span><span class="token function">AddToAppMetadata</span><span class="token punctuation">(</span>meta <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            meta<span class="token punctuation">.</span>CustomPlugins<span class="token punctuation">[</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>MyPlugin<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomPlugin</span> <span class="token punctuation">{</span>
                AccessRole <span class="token operator">=</span> RoleNames<span class="token punctuation">.</span>AllowAnyUser<span class="token punctuation">,</span>                   <span class="token comment">// Required Role to access Services</span>
                ServiceRoutes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
                    <span class="token punctuation">{</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>MyPluginService<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;/myplugin/{Id}&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Available Plugin Services</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                Enabled <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token string">&quot;feature1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;feature2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// What plugin features are enabled</span>
                Meta <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
                    <span class="token punctuation">[</span><span class="token string">&quot;custom&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;meta&quot;</span> <span class="token comment">// additional custom metadata you want returned for this plugin</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="autoquery" tabindex="-1">AutoQuery <a class="header-anchor" href="#autoquery" aria-hidden="true">#</a></h2><p>By default all AutoQuery Requests execute all requests using OrmLite&#39;s async DB APIs, this can be toggled at a global level to have all AutoQuery requests use sync APIs if there are any bugs or performance issues with <a href="http://ADO.NET" target="_blank" rel="noopener noreferrer">ADO.NET</a>&#39;s providers async implementations.</p><p>E.g. As MySql and SQLite <a href="http://ADO.NET" target="_blank" rel="noopener noreferrer">ADO.NET</a> providers do not yet have a &quot;true&quot; async implementations they&#39;d benefit from using Sync APIs which would incur less overhead than their current &quot;async over sync&quot; implementations:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AutoQueryFeature</span> <span class="token punctuation">{</span>
    EnableAsync <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>To increase the versatility of using AutoQuery functionality in custom Service implementations, there&#39;s now parallel Sync and Async APIs if needing to enlist AutoQuery functionality in Sync methods that are unable to be refactored to use the async APIs:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAutoQueryDb</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IAutoCrudDb</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// Generic API to resolve the DB Connection to use for this request</span>
    <span class="token return-type class-name">IDbConnection</span> <span class="token generic-method"><span class="token function">GetDb</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IRequest</span> req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Generate a populated and Typed OrmLite SqlExpression using the same model as the source and output target</span>
    <span class="token return-type class-name">SqlExpression<span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">CreateQuery</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IQueryDb<span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> dynamicParams<span class="token punctuation">,</span> 
        <span class="token class-name">IRequest</span> req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">IDbConnection</span> db <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Execute an OrmLite SqlExpression using the same model as the source and output target</span>
    <span class="token return-type class-name">QueryResponse<span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">Execute</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IQueryDb<span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span> <span class="token class-name">SqlExpression<span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span> query<span class="token punctuation">,</span> 
        <span class="token class-name">IRequest</span> req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">IDbConnection</span> db <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Async Execute an OrmLite SqlExpression using the same model as the source and output target</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>QueryResponse<span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">ExecuteAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IQueryDb<span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span> <span class="token class-name">SqlExpression<span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span> query<span class="token punctuation">,</span> 
        <span class="token class-name">IRequest</span> req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">IDbConnection</span> db <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Generate a populated and Typed OrmLite SqlExpression using different models for source and output target</span>
    <span class="token return-type class-name">SqlExpression<span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">CreateQuery</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>From<span class="token punctuation">,</span> Into<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IQueryDb<span class="token punctuation">&lt;</span>From<span class="token punctuation">,</span>Into<span class="token punctuation">&gt;</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> dynamicParams<span class="token punctuation">,</span> 
        <span class="token class-name">IRequest</span> req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">IDbConnection</span> db <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Execute an OrmLite SqlExpression using different models for source and output target</span>
    <span class="token return-type class-name">QueryResponse<span class="token punctuation">&lt;</span>Into<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">Execute</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>From<span class="token punctuation">,</span> Into<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IQueryDb<span class="token punctuation">&lt;</span>From<span class="token punctuation">,</span> Into<span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span> <span class="token class-name">SqlExpression<span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span> query<span class="token punctuation">,</span> 
        <span class="token class-name">IRequest</span> req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">IDbConnection</span> db <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Async Execute an OrmLite SqlExpression using different models for source and output target</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>QueryResponse<span class="token punctuation">&lt;</span>Into<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">ExecuteAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>From<span class="token punctuation">,</span> Into<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IQueryDb<span class="token punctuation">&lt;</span>From<span class="token punctuation">,</span> Into<span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span> <span class="token class-name">SqlExpression<span class="token punctuation">&lt;</span>From<span class="token punctuation">&gt;</span></span> query<span class="token punctuation">,</span> 
        <span class="token class-name">IRequest</span> req <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">IDbConnection</span> db <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>IAutoQueryDb</code> inherits the new <code>IAutoCrudDb</code> APIs below and can access both AutoQuery and CRUD functionality.</p><p>Likewise the new AutoQuery Crud APIs also have sync &amp; async implementations:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAutoCrudDb</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Inserts new entry into Table</span>
    <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token generic-method"><span class="token function">Create</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Inserts new entry into Table Async</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">CreateAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">ICreateDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Updates entry into Table</span>
    <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token generic-method"><span class="token function">Update</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IUpdateDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Updates entry into Table Async</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">UpdateAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IUpdateDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Partially Updates entry into Table (Uses OrmLite UpdateNonDefaults behavior)</span>
    <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token generic-method"><span class="token function">Patch</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IPatchDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Partially Updates entry into Table Async (Uses OrmLite UpdateNonDefaults behavior)</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">PatchAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IPatchDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Deletes entry from Table</span>
    <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token generic-method"><span class="token function">Delete</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IDeleteDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// Deletes entry from Table Async</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">DeleteAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">IDeleteDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Inserts or Updates entry into Table</span>
    <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token generic-method"><span class="token function">Save</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">ISaveDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Inserts or Updates entry into Table Async</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">SaveAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">ISaveDb<span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span> dto<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> req<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Due to its internal pre-defined behavior, AutoQuery CRUD custom Service implementations have limited customizability over its implementation but still allows you to apply custom logic like apply Custom Filter Attributes, include additional validation, augment the Response DTO, etc.</p><p>E.g. This implementation applies the <code>[ConnectionInfo]</code> behavior to all its Services which will instead execute queries on the registered <strong>Reporting</strong> named connection:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ConnectionInfo</span><span class="token attribute-arguments"><span class="token punctuation">(</span>NamedConnection <span class="token operator">=</span> <span class="token string">&quot;Reporting&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyReportingServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IAutoQueryDb</span> AutoQuery <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">CreateReport</span> request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> AutoQuery<span class="token punctuation">.</span><span class="token function">CreateAsync</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token keyword">base</span><span class="token punctuation">.</span>Request<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="resolve-and-inject-db-connection" tabindex="-1">Resolve and Inject DB Connection <a class="header-anchor" href="#resolve-and-inject-db-connection" aria-hidden="true">#</a></h4><p>There&#39;s a minor optimization existing custom AutoQuery implementations can do by passing in the resolved <code>IDbConnection</code>, saving <code>CreateQuery</code> and <code>Execute*</code> APIs from resolving it both themselves or when wanting to use a custom DB Connection resolution for a specific Service:</p><div class="language-csharp"><pre><code><span class="token comment">// Sync</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">QueryRockstars</span> query<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> db <span class="token operator">=</span> AutoQuery<span class="token punctuation">.</span><span class="token function">GetDb</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token keyword">base</span><span class="token punctuation">.</span>Request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> q <span class="token operator">=</span> AutoQuery<span class="token punctuation">.</span><span class="token function">CreateQuery</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token keyword">base</span><span class="token punctuation">.</span>Request<span class="token punctuation">,</span> db<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> AutoQuery<span class="token punctuation">.</span><span class="token function">Execute</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> q<span class="token punctuation">,</span> <span class="token keyword">base</span><span class="token punctuation">.</span>Request<span class="token punctuation">,</span> db<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Another optimization if using SQL Server or PostgreSQL RDBMS&#39;s is to refactor it to use their native async implementations, e.g:</p><div class="language-csharp"><pre><code><span class="token comment">// Async</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">QueryRockstars</span> query<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> db <span class="token operator">=</span> AutoQuery<span class="token punctuation">.</span><span class="token function">GetDb</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token keyword">base</span><span class="token punctuation">.</span>Request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> q <span class="token operator">=</span> AutoQuery<span class="token punctuation">.</span><span class="token function">CreateQuery</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token keyword">base</span><span class="token punctuation">.</span>Request<span class="token punctuation">,</span> db<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> AutoQuery<span class="token punctuation">.</span><span class="token function">ExecuteAsync</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> q<span class="token punctuation">,</span> <span class="token keyword">base</span><span class="token punctuation">.</span>Request<span class="token punctuation">,</span> db<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="new-autoquery-conventions" tabindex="-1">New AutoQuery Conventions <a class="header-anchor" href="#new-autoquery-conventions" aria-hidden="true">#</a></h3><p>The new implicit AutoQuery conventions below can be used in all AutoQuery Services:</p><ul><li><code>%IsNull</code> - (e.g. <code>FieldIsNull</code>) return results where Field is <strong>NULL</strong></li><li><code>%IsNotNull</code> - (e.g. <code>FieldIsNotNull</code>) return results where Field is <strong>NOT NULL</strong></li><li><code>&lt;&gt;%</code> - (e.g. <code>&lt;&gt;Field=value</code>) return results where Field does <strong>not equal value</strong>.</li></ul><h3 id="csvformat" tabindex="-1">CsvFormat <a class="header-anchor" href="#csvformat" aria-hidden="true">#</a></h3><p><a href="/csv-format.html">CSV Format</a> responses can use the same <a href="/customize-json-responses.html">scoped custom responses as JSON</a> to allow Typed Results to exclude default values columns when returning limited <a href="/autoquery-rdbms.html#custom-fields">custom fields with <code>?fields</code></a>:</p><ul><li>Camel Humps Notation: <code>?jsconfig=edf</code></li><li>Full configuration: <code>?jsconfig=ExcludeDefaultValues</code></li></ul><h2 id="grpc-code-first-development" tabindex="-1">gRPC code-first Development <a class="header-anchor" href="#grpc-code-first-development" aria-hidden="true">#</a></h2><p>The development experience of gRPC Services continue to benefit from ServiceStack&#39;s code-first gRPC Services enabled by <a href="https://github.com/protobuf-net/protobuf-net.Grpc" target="_blank" rel="noopener noreferrer">protobuf-net.Grpc</a> where instead of imposing the high maintenance burden of manually authoring <code>.proto</code> to define gRPC Services on the developer and resulting in awkward generated classes in both the C# Service implementation as well as the protoc generated clients.</p><p>A code-first development approach allows use of the higher-level &amp; more expressive power of C# &amp; its rich static analysis to intuitively declare exactly the Service you want to provide.</p><p>E.g. an AutoQuery Service uses both inheritance and generic response Types is simply declared in a single C# Request DTO with exactly what querying features you want to be discoverable for this Service:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryCategory</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">QueryDb<span class="token punctuation">&lt;</span>Category<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> CategoryName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which you could call in an end-to-end API without code-gen, using the smart <a href="/grpc-generic.html">C# Generic gRPC Service Client</a> which supports protobuf-net high-level retrofitted support for both inheritance and generic responses:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">QueryCategory</span> <span class="token punctuation">{</span> CategoryName <span class="token operator">=</span> <span class="token string">&quot;Vegetables&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>But as <code>.proto</code> doesn&#39;t natively support either inheritance or generic classes the proto clients generates an unusable and awkward <strong>has</strong> vs <strong>is a</strong> base for the retrofitted inheritance message hack requiring every base message type to define every possible subtype message. The pursuit of a better dev UX inspired us to create the <a href="/grpc.html#dynamic-grpc-requests">Dynamic gRPC Requests</a> feature, enabling the more natural and UX-friendly way to invoke Services using a flattened unstructured string Dictionary, akin to a <code>?QueryString</code> in HTTP Requests:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetDynamicQueryCategoryAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">DynamicRequest</span> <span class="token punctuation">{</span>
    Params <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span> <span class="token string">&quot;CategoryName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Vegetables&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
        <span class="token punctuation">{</span> <span class="token string">&quot;OrderBy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Id&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
        <span class="token punctuation">{</span> <span class="token string">&quot;Include&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Total&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This feature also allows you to construct a generic <code>DynamicRequest</code> Request Message that can invoke any Service making it useful in scenarios where you want to dynamically construct &amp; invoke different Services like in a Request Query Builder as done in <strong>Studio</strong> and <strong>SharpData</strong> UIs, but is no longer required for invoking AutoQuery Services from protoc clients.</p><h3 id="flattened-request-hierarchy-s" tabindex="-1">Flattened Request Hierarchy&#39;s <a class="header-anchor" href="#flattened-request-hierarchy-s" aria-hidden="true">#</a></h3><p>To improve support for <a href="/grpc.html#public-grpc-protoc-service-and-ui">protoc generated Service Clients</a> Request DTOs now automatically flatten multiple inheritance hierarchy&#39;s into a single message type in the dynamically generated <code>.proto</code> gRPC Services description so now the C# <code>QueryCategory</code> Service above will elide the inheritance tree and expose it as a flattened Service message containing both implicit base functionality available to all AutoQuery Services together with the explicit Querying functionality specific for each AutoQuery Service.</p><p>Now the above <code>QueryCategory</code> AutoQuery Service above are defined in the generated gRPC <code>.proto</code> as:</p><div class="language-csharp"><pre><code><span class="token return-type class-name">service</span> GrpcServices <span class="token punctuation">{</span>
    <span class="token return-type class-name">rpc</span> <span class="token function">GetQueryCategory</span><span class="token punctuation">(</span>QueryCategory<span class="token punctuation">)</span> returns <span class="token punctuation">(</span>QueryResponse_Category<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token return-type class-name">message</span> QueryCategory <span class="token punctuation">{</span>
   <span class="token class-name">int32</span> Skip <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token class-name">int32</span> Take <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
   <span class="token class-name"><span class="token keyword">string</span></span> OrderBy <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
   <span class="token class-name"><span class="token keyword">string</span></span> OrderByDesc <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
   <span class="token class-name"><span class="token keyword">string</span></span> Include <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
   <span class="token class-name"><span class="token keyword">string</span></span> Fields <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
   <span class="token class-name">map<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> Meta <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
   <span class="token class-name">int64</span> Id <span class="token operator">=</span> <span class="token number">201</span><span class="token punctuation">;</span>
   <span class="token class-name"><span class="token keyword">string</span></span> CategoryName <span class="token operator">=</span> <span class="token number">202</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token return-type class-name">message</span> QueryResponse_Category <span class="token punctuation">{</span>
   <span class="token class-name">int32</span> Offset <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token class-name">int32</span> Total <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
   repeated <span class="token class-name">Category</span> Results <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
   <span class="token class-name">map<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> Meta <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
   <span class="token class-name">ResponseStatus</span> ResponseStatus <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This enables protoc generated clients with the more optimal generated typed API for calling ServiceStack&#39;s AutoQuery Services down to:</p><div class="language-dart"><pre><code><span class="token comment">// Dart</span>
<span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">getQueryCategory</span><span class="token punctuation">(</span><span class="token class-name">QueryCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span>categoryName<span class="token operator">=</span><span class="token string">&#39;Vegetables&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="single-page-app-templates" tabindex="-1">Single Page App Templates <a class="header-anchor" href="#single-page-app-templates" aria-hidden="true">#</a></h2><p>All <a href="/templates-single-page-apps.html">Single Page App Templates</a> have been upgraded to their latest framework libraries versions:</p><table><thead><tr><th style="text-align:left;">.NET Core C# Templates</th><th style="text-align:left;"></th></tr></thead><tbody><tr><td style="text-align:left;"><a href="https://github.com/NetCoreTemplates/angular-spa" target="_blank" rel="noopener noreferrer">angular-spa</a></td><td style="text-align:left;">.NET Core 3.1 Angular 9 CLI Bootstrap App</td></tr><tr><td style="text-align:left;"><a href="https://github.com/NetCoreTemplates/aurelia-spa" target="_blank" rel="noopener noreferrer">aurelia-spa</a></td><td style="text-align:left;">.NET Core 3.1 Aurelia CLI Bootstrap App</td></tr><tr><td style="text-align:left;"><a href="https://github.com/NetCoreTemplates/react-lite" target="_blank" rel="noopener noreferrer">react-lite</a></td><td style="text-align:left;">.NET Core 3.1 simple + lite (npm-free) React SPA using TypeScript</td></tr><tr><td style="text-align:left;"><a href="https://github.com/NetCoreTemplates/react-spa" target="_blank" rel="noopener noreferrer">react-spa</a></td><td style="text-align:left;">.NET Core 3.1 React Create App CLI Bootstrap App</td></tr><tr><td style="text-align:left;"><a href="https://github.com/NetCoreTemplates/vue-lite" target="_blank" rel="noopener noreferrer">vue-lite</a></td><td style="text-align:left;">.NET Core 3.1 simple + lite (npm-free) Vue SPA using TypeScript</td></tr><tr><td style="text-align:left;"><a href="https://github.com/NetCoreTemplates/vue-nuxt" target="_blank" rel="noopener noreferrer">vue-nuxt</a></td><td style="text-align:left;">.NET Core 3.1 Nuxt.js SPA App with Bootstrap</td></tr><tr><td style="text-align:left;"><a href="https://github.com/NetCoreTemplates/vue-spa" target="_blank" rel="noopener noreferrer">vue-spa</a></td><td style="text-align:left;">.NET Core 3.1 Vue CLI Bootstrap App</td></tr><tr><td style="text-align:left;"><a href="https://github.com/NetCoreTemplates/vuetify-nuxt" target="_blank" rel="noopener noreferrer">vuetify-nuxt</a></td><td style="text-align:left;">.NET Core 3.1 Nuxt.js SPA App with Material Vuetify</td></tr><tr><td style="text-align:left;"><a href="https://github.com/NetCoreTemplates/vuetify-spa" target="_blank" rel="noopener noreferrer">vuetify-spa</a></td><td style="text-align:left;">.NET Core 3.1 Vue CLI App with Material Vuetify</td></tr><tr><td style="text-align:left;"><a href="https://github.com/NetCoreTemplates/angular-lite-spa" target="_blank" rel="noopener noreferrer">angular-lite-spa</a></td><td style="text-align:left;">.NET Core 3.1 Angular 4 Material Design Lite Webpack App</td></tr></tbody></table><p>They&#39;ve also all been converted to use the new <code>EnableSpaFallback</code> feature:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SharpPagesFeature</span> <span class="token punctuation">{</span>
    EnableSpaFallback <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Which replaces the previous explicit <code>[FallbackRoute]</code> Service with the built-in one below for returning the home page for any unknown HTML requests to enable SPA routing on the client:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FallbackRoute</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/{PathInfo*}&quot;</span><span class="token punctuation">,</span> Matches<span class="token operator">=</span><span class="token string">&quot;AcceptsHtml&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span> <span class="token class-name">ExcludeMetadata</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpaFallback</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReturn<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> PathInfo <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DefaultRequest</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">SpaFallback</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpaFallbackService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">//Return index.html for unmatched requests so routing is handled on client</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">SpaFallback</span> request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Request<span class="token punctuation">.</span><span class="token function">GetPageResult</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="vue-react-lite-project-templates" tabindex="-1">Vue &amp; React &quot;Lite&quot; Project Templates <a class="header-anchor" href="#vue-react-lite-project-templates" aria-hidden="true">#</a></h3><p><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/vue-lite.png" alt=""></p><p>The &quot;maximum-simplified&quot; npm-free <a href="https://github.com/NetCoreTemplates/vue-lite" target="_blank" rel="noopener noreferrer">vue-lite</a> and <a href="https://github.com/NetCoreTemplates/react-lite" target="_blank" rel="noopener noreferrer">react-lite</a> Project templates are now even lighter where instead of needing the <strong>bootstrap.css</strong> or Vue framework library <code>*.js</code> assets on disk we can instead <a href="https://github.com/NetCoreTemplates/vue-lite/blob/master/wwwroot/_layout.html" target="_blank" rel="noopener noreferrer">reference the official pre-minified assets</a> embedded in <strong>ServiceStack.Desktop.dll</strong>:</p>`,562),k=n("div",null,[n("div",{class:"language-js"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/vue/vue.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/vue-router/vue-router.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/vue-class-component/vue-class-component.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/vue-property-decorator/vue-property-decorator.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/@servicestack/client/servicestack-client.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},"/lib/js/@servicestack/vue/servicestack-vue.min.js"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"|"),n("span",{class:"token operator"},">"),s(),n("span",{class:"token parameter"},"map"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token string"},'<script src="'),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("it"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},'"><\/script>'),n("span",{class:"token template-punctuation string"},"`")]),s(),n("span",{class:"token operator"},"|"),n("span",{class:"token operator"},">"),s(" joinln "),n("span",{class:"token operator"},"|"),n("span",{class:"token operator"},">"),s(" raw "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),d=a(`<p>This allows faster and simplified updates and deployments which automatically takes care of updating to the latest framework library stable versions when upgrading to a newer ServiceStack release. This approach is also compatible with ServiceStack Desktop Apps and reduces the effort in wrapping your App into a <a href="https://sharpscript.net/docs/gist-desktop-apps" target="_blank" rel="noopener noreferrer">Gist Desktop App</a> should you wish to offer a Desktop version of it in future.</p><p>This greatly reduces the payload size of <a href="https://github.com/NetCoreTemplates/vue-lite/tree/master/wwwroot" target="_blank" rel="noopener noreferrer">wwwroot</a> assets where the only library assets that need to exist on disk are their dev-only <code>*.d.ts</code> TypeScript declarations in <a href="https://github.com/NetCoreTemplates/vue-lite/tree/master/typings" target="_blank" rel="noopener noreferrer">typings</a> which provides the rich intelli-sense and static analysis when developing with TypeScript.</p><p>Deployments have also been simplified where now no explicit step is needed to compile your App&#39;s client assets as they&#39;re now automatically bundled, minified &amp; hashed as part of the project&#39;s <strong>Bundle</strong> task:</p><div class="language-xml"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Target</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Bundle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">BeforeTargets</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AfterPublish<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Exec</span> <span class="token attr-name">Command</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x run _bundle.ss -to /bin/Release/netcoreapp3.1/publish/wwwroot<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Target</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Where it&#39;s implicitly run when publishing the .NET Core App:</p><pre><code>$ dotnet publish -c Release
</code></pre><h2 id="script" tabindex="-1"><code>#Script</code> <a class="header-anchor" href="#script" aria-hidden="true">#</a></h2><p>As it&#39;s becoming an integral part of ServiceStack&#39;s newer more versatile features there&#39;s now a <code>ScriptContext</code> available in all ServiceStack AppHost&#39;s which either uses your AppHost&#39;s configured <code>SharpPagesFeature</code> if it has one, otherwise uses an empty fallback <code>DefaultScriptContext</code>.</p><p>The new APIs allows your App to easily invoke scripting functionality from a free-form string expression that has access to all built-in and <a href="https://sharpscript.net/docs/introduction#net-usage" target="_blank" rel="noopener noreferrer">registered #Script features</a>.</p><p>So if you had your own custom rules engine with a dynamic source of user-defined business validation rules you could easily dynamically resolve them to construct a list of Fluent Validation <code>IPropertyValidator</code>, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> propertyRules <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;InclusiveBetween(13,100)&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> validators <span class="token operator">=</span> propertyRules<span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>rule <span class="token operator">=&gt;</span> 
    <span class="token punctuation">(</span>IPropertyValidator<span class="token punctuation">)</span> HostContext<span class="token punctuation">.</span>AppHost<span class="token punctuation">.</span><span class="token function">EvalExpressionCached</span><span class="token punctuation">(</span>rule<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Using the <code>EvalExpressionCached</code> API ensures that only the minimum number of validator instances are created &amp; subsequently cached for fast access.</p><p>The <code>IScriptValue</code> Eval APIs allow you to create your own super enhanced Attributes like <code>[AutoDefault]</code>, <code>[AutoFilter]</code> and <code>[AutoPopulate]</code> where they&#39;re able to declaratively define any kind of value that can be statically embedded in a compile-time static C# Attribute declaration.</p><p>It also allows custom APIs to accept a single <code>ScriptValue</code> Type that can resolve to any kind of value, captured at their optimal performance:</p><div class="language-csharp"><pre><code>HostContext<span class="token punctuation">.</span>AppHost<span class="token punctuation">.</span><span class="token function">EvalScriptValueAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ScriptValue</span> <span class="token punctuation">{</span>
    Value <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>                      <span class="token comment">// constant value</span>
    Expression <span class="token operator">=</span> <span class="token string">&quot;date(2001,01,01)&quot;</span><span class="token punctuation">,</span> <span class="token comment">// constant expression</span>
                                     <span class="token comment">// evaluate dynamic expression</span>
    Eval <span class="token operator">=</span> <span class="token string">&quot;dbSelect(&#39;SELECT * FROM Table WHERE Id=@Id&#39;, { Id })&quot;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token string">&quot;Id&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>These new <code>#Script</code> APIs are available in your AppHost at:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAppHost</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Global #Script ScriptContext for AppHost. Returns SharpPagesFeature or DefaultScriptContext</span>
    <span class="token return-type class-name">ScriptContext</span> ScriptContext <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// Evaluate Expressions in ServiceStack&#39;s ScriptContext.</span>
    <span class="token comment">// Can be overridden if you want to customize how different expressions are evaluated</span>
    <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">EvalExpression</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> expr<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Evaluate Expressions in ServiceStack&#39;s ScriptContext.</span>
    <span class="token comment">// Can be overridden if you want to customize how different expressions are evaluated</span>
    <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">EvalExpressionCached</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> expr<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Evaluate a script value, \`IScriptValue.Expression\` results are cached globally.</span>
    <span class="token comment">// If \`IRequest\` is provided, results from the same \`IScriptValue.Eval\` are cached per request</span>
    <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">EvalScriptValue</span><span class="token punctuation">(</span><span class="token class-name">IScriptValue</span> scriptValue<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> req<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> 
        <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> args<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Evaluate a script value, \`IScriptValue.Expression\` results are cached globally.</span>
    <span class="token comment">// If \`IRequest\` is provided, results from the same \`IScriptValue.Eval\` are cached per request</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token function">EvalScriptValueAsync</span><span class="token punctuation">(</span><span class="token class-name">IScriptValue</span> scriptValue<span class="token punctuation">,</span> <span class="token class-name">IRequest</span> req<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> 
        <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> args<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="reclaiming-operator-for-assignment-expressions" tabindex="-1">Reclaiming <code>=</code> operator for assignment expressions <a class="header-anchor" href="#reclaiming-operator-for-assignment-expressions" aria-hidden="true">#</a></h3><p>In its quest to provide a familiar and easy to use scripting language for .NET <a href="https://sharpscript.net/" target="_blank" rel="noopener noreferrer">#Script</a> added some enhancements to JavaScript expressions such as being able to use <a href="https://sharpscript.net/docs/syntax#sql-like-boolean-expressions" target="_blank" rel="noopener noreferrer">SQL-Like Boolean Expressions</a> like <code>=</code>, <code>and</code> and <code>or</code> inside a boolean expression, e.g:</p><div class="language-js"><pre><code><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token parameter">where</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>it <span class="token operator">=</span> <span class="token number">2</span> or it <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span> and it<span class="token punctuation">.</span><span class="token function">isOdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>In modern JS (ES6+) this would be written as:</p><div class="language-js"><pre><code><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>it <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> it <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isOdd</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="breaking-change" tabindex="-1">Breaking Change <a class="header-anchor" href="#breaking-change" aria-hidden="true">#</a></h3><p>By default the use of the single <code>=</code> is <strong>now treated as an Assignment operator</strong> as it is in JS so you will need to update any of your boolean expressions using it to use the standard <code>==</code> equality operator instead, e.g:</p><div class="language-js"><pre><code><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token parameter">where</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>it <span class="token operator">==</span> <span class="token number">2</span> or it <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> and it<span class="token punctuation">.</span><span class="token function">isOdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>If you&#39;re not ready to update your scripts you can revert to the previous behavior and retain treating <code>=</code> as equality with:</p><div class="language-csharp"><pre><code>ScriptConfig<span class="token punctuation">.</span>AllowAssignmentExpressions <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="js-familiarity-over-enhanced-human-friendly-syntax" tabindex="-1">JS familiarity over enhanced human-friendly syntax <a class="header-anchor" href="#js-familiarity-over-enhanced-human-friendly-syntax" aria-hidden="true">#</a></h3><p>At the time we valued human-friendly syntax over JS compatibility however over the years it&#39;s become clearer that language familiarity is more important than enhanced human-friendly syntax as it makes it much easier for devs who knows JS (i.e. most) to use <code>#Script</code>. Keeping compatibility with JS syntax also helps in other areas like code portability, JS tooling and syntax highlighters and linters, etc.</p><p>JS compatibility was the primary motivation for <a href="/releases/v5.7.html#transition-to-js-pipeline-operator-syntax">transitioning to the Pipe Forward operator</a> whose future incorporation into JS will have a lot less friction then continuing to use the unix pipe <code>|</code> operator.</p><p>The Pipe Forward operator makes it more obvious that the <strong>output of the left expression</strong> is passed as the <strong>input of the right target</strong> which needs to be either a <a href="https://sharpscript.net/docs/methods" target="_blank" rel="noopener noreferrer">script method</a> or a <a href="https://sharpscript.net/docs/transformers#filter-transformers" target="_blank" rel="noopener noreferrer">filter transformer</a> however it could be forgiven to <a href="https://forums.servicestack.net/t/virtualfilesystem-for-script-page/7971/5?u=mythz" target="_blank" rel="noopener noreferrer">confuse it as an assignment expression</a> where the output of the left expression was assigned to the <code>sliders</code> variable:</p>`,31),h=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"dirFiles"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'img/sliders'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"sliders"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])]),n("p",null,[s("The mistake here was that it needs to be piped to the "),n("code",null,"to"),s(" (or "),n("code",null,"toGlobal"),s(") script method which assigns it to the "),n("code",null,"sliders"),s(" local scope argument:")]),n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"dirFiles"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'img/sliders'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"to"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"sliders"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),g=a(`<h3 id="local-variables" tabindex="-1">Local Variables <a class="header-anchor" href="#local-variables" aria-hidden="true">#</a></h3><p>As #Script&#39;s variable declaration &amp; assignment is the most common expression foreign to JS devs, we&#39;ve decided to add support for it where you can now use JS syntax to assign a variable, e.g:</p><div class="language-js"><pre><code><span class="token keyword">var</span> sliders <span class="token operator">=</span> <span class="token function">dirFiles</span><span class="token punctuation">(</span><span class="token string">&#39;img/sliders&#39;</span><span class="token punctuation">)</span>
</code></pre></div><p>Like JS you can use either <code>var</code>, <code>let</code> or <code>const</code> but they all behave like <code>let</code> and assign a locally scoped variable at the time the expression is executed.</p><p>Also like JS the semicolon is optional and you can assign multiple variables in a single expression:</p><div class="language-js"><pre><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token string">&#39;D&#39;</span><span class="token punctuation">;</span>
</code></pre></div><p>One semantic difference is that variable declarations are still an &quot;Expression&quot; in <code>#Script</code>, albeit one that returns a discarded result whilst they&#39;re a &quot;Statement&quot; in JS, although this distinction doesn&#39;t mean much in practice.</p><h3 id="global-variables" tabindex="-1">Global Variables <a class="header-anchor" href="#global-variables" aria-hidden="true">#</a></h3><p>Global Variables in <code>#Script</code> are maintained in the <code>PageResult.Args</code> dictionary which you could previously assign to using the <code>toGlobal</code> script method where it&#39;s accessible to all scripts rendered within that <code>PageResult</code>.</p><p><code>#Script</code> now mimics JS&#39;s behavior to allow assignment expressions to assign global variables where &quot;Assignment Expressions&quot; on undeclared variables (i.e. where no locally scoped variable exists) will assign a global variable:</p><div class="language-js"><pre><code>a <span class="token operator">=</span> <span class="token number">1</span>
</code></pre></div><p>A more descriptive syntax available to declare a global variable is to assign it to the <code>global</code> object (inspired by node&#39;s <a href="https://nodejs.org/api/globals.html#globals_global" target="_blank" rel="noopener noreferrer">global</a>) which is an alias to the <code>PageResult.Args</code> dictionary:</p><div class="language-js"><pre><code>global<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span>
</code></pre></div><blockquote><p>Note: Like most languages assignment expressions in <code>#Script</code> return the assigned value which can be discarded with <code>|&gt; end</code>.</p></blockquote><h3 id="assignment-expressions" tabindex="-1">Assignment Expressions <a class="header-anchor" href="#assignment-expressions" aria-hidden="true">#</a></h3><p>In addition to declaring and assigning variables, there&#39;s also support for using assignment expressions to assign and mutate Collections and Type Properties using either Member Expression or Index expression syntax, e.g:</p><div class="language-js"><pre><code>intList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
stringArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span>
stringMap<span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;bar&quot;</span>
person<span class="token punctuation">.</span>Age <span class="token operator">=</span> <span class="token number">27</span>
objectMap<span class="token punctuation">.</span>Person<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;kurt&quot;</span>
objectMap<span class="token punctuation">[</span><span class="token string">&#39;Per&#39;</span> <span class="token operator">+</span> <span class="token string">&#39;son&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;kurt&quot;</span>
intList<span class="token punctuation">[</span><span class="token number">1.</span><span class="token function">isOdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">2</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">30</span>
</code></pre></div><h3 id="new-script-script-methods" tabindex="-1">New <code>#Script</code> Script Methods <a class="header-anchor" href="#new-script-script-methods" aria-hidden="true">#</a></h3><ul><li>new <code>userAuthId</code> and <code>userAuthName</code> script methods (aliases for <code>userSession.UserAuthId</code> &amp; <code>userSession.UserAuthName</code>)</li><li>new <code>utcNowOffset</code> for <code>DateTimeOffset.UtcNow</code> and <code>nguid</code> for <code>Guid.NewGuid()</code></li><li>new <code>envCommandLineArgs</code> for <code>Environment.GetCommandLineArgs()</code></li><li>new <code>it.ownProps</code> in Partials to only return user-defined arguments passed to it (e.g. not implicit <code>it</code> bindings)</li><li>new <code>requestBodyAsJson</code> as deserialized JSON Object or <code>requestBodyAsString</code> raw string Request Body</li><li>new <code>toCoercedDictionary</code> converts String Dictionary to Object Dictionary with values coerced following JS behavior</li><li>new <code>typeofProgId</code> on Windows for <code>Type.GetTypeFromProgID(name)</code></li><li>new <code>svgAdd</code> and <code>svgAddFile</code> to register SVGs</li><li>new <code>resolveArg</code> (local var resolution), <code>resolveGlobal</code> (PageResult.Args), <code>resolveContextArg</code> (Context.Args) APIs</li></ul><p>The <code>resolve*</code> APIs let you resolve a variable named with the result of an expression, e.g:</p><div class="language-js"><pre><code><span class="token keyword">var</span> tableNames <span class="token operator">=</span> <span class="token function">resolveGlobal</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>db<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_tables</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
</code></pre></div><p>Which is the same as:</p><div class="language-js"><pre><code><span class="token keyword">var</span> tableNames <span class="token operator">=</span> global<span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>db<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_tables</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">]</span>
</code></pre></div><p>Whereas <code>resolveArg</code> lets you resolve a variable using locally scope resolution hierarchy:</p><div class="language-js"><pre><code><span class="token keyword">var</span> tableNames <span class="token operator">=</span> <span class="token function">resolveArg</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>db<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_tables</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
</code></pre></div><p>If <code>db</code> was <strong>northwind</strong> this would be the same as:</p><div class="language-js"><pre><code><span class="token keyword">var</span> tableNames <span class="token operator">=</span> northwind_tables
</code></pre></div><h4 id="other-features" tabindex="-1">Other features <a class="header-anchor" href="#other-features" aria-hidden="true">#</a></h4><div><ul><li>Can now use <code>$</code> in variable identifiers</li><li>Can use top-level <code>{{ &#39;ex&#39; |&gt; catchError }}</code> at start of Page to capture exceptions in <code>ex</code> &amp; continue page execution</li></ul></div><h3 id="modified-if-methods-behavior" tabindex="-1">Modified <code>if*</code> methods behavior <a class="header-anchor" href="#modified-if-methods-behavior" aria-hidden="true">#</a></h3><p>The <code>if*</code> APIs have changed behavior to stop execution instead of returning <code>null</code> which previously allowed fallback to an <code>otherwise</code> script method, e.g:</p><div class="language-js"><pre><code><span class="token string">&#39;Is Authenticated&#39;</span> <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token keyword">if</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token function">otherwise</span><span class="token punctuation">(</span><span class="token string">&#39;Not Authenticated&#39;</span><span class="token punctuation">)</span>
</code></pre></div><p>This is more naturally expressed using a ternary expression:</p><div class="language-js"><pre><code>auth <span class="token operator">?</span> <span class="token string">&#39;Is Authenticated&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;Not Authenticated&#39;</span>
</code></pre></div><p>Alternatively you can use the wordier <code>*Else</code> script methods or <code>iif</code> to return a default value:</p><div class="language-js"><pre><code><span class="token string">&#39;Is Authenticated&#39;</span> <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token function">ifElse</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> <span class="token string">&#39;Not Authenticated&#39;</span><span class="token punctuation">)</span>
<span class="token string">&#39;Is Authenticated&#39;</span> <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token function">unlessElse</span><span class="token punctuation">(</span><span class="token operator">!</span>auth<span class="token punctuation">,</span> <span class="token string">&#39;Not Authenticated&#39;</span><span class="token punctuation">)</span>

<span class="token function">iif</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span><span class="token string">&#39;Is Authenticated&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;Not Authenticated&#39;</span><span class="token punctuation">)</span>
</code></pre></div><p>The new behavior is changed so that <code>useDb</code> only gets called if <code>db</code> is &quot;truthy&quot;:</p><div class="language-js"><pre><code><span class="token punctuation">{</span>namedConnection<span class="token operator">:</span>db<span class="token punctuation">}</span> <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token keyword">if</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">&gt;</span> useDb
</code></pre></div><h3 id="init-ss-startup-scripts" tabindex="-1">init.ss Startup Scripts <a class="header-anchor" href="#init-ss-startup-scripts" aria-hidden="true">#</a></h3><p>ServiceStack Apps that have <code>SharpPagesFeature</code> configured can also use <code>init.ss</code> (in addition to previous <code>init.html</code>) for declaring one-time Startup logic in <code>#Script</code> (akin to <code>Startup.cs</code> for C#).</p><p><a href="https://github.com/NetCoreApps/SharpData/blob/master/wwwroot/_init.ss" target="_blank" rel="noopener noreferrer">_init.ss</a> is used in Script Pages Apps like <a href="https://github.com/NetCoreApps/SharpData" target="_blank" rel="noopener noreferrer">SharpData</a> to construct a ServiceStack App&#39;s <a href="/svg.html">SVG stylesheet bundle</a> from a user-defined list of embedded <code>*.svg</code> resources and inline SVG declarations, e.g:</p>`,41),m=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(` 
    `),n("span",{class:"token variable"},"var"),s(),n("span",{class:"token variable"},"AppSvgs"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token string"},"'action/home.svg'"),n("span",{class:"token punctuation"},":"),s("                    "),n("span",{class:"token string"},"'home'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'device/storage.svg'"),n("span",{class:"token punctuation"},":"),s("                 "),n("span",{class:"token string"},"'db'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'action/list.svg'"),n("span",{class:"token punctuation"},":"),s("                    "),n("span",{class:"token string"},"'table'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'navigation/first_page.svg'"),n("span",{class:"token punctuation"},":"),s("          "),n("span",{class:"token string"},"'chevron-first'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'navigation/last_page.svg'"),n("span",{class:"token punctuation"},":"),s("           "),n("span",{class:"token string"},"'chevron-last'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'navigation/expand_more.svg'"),n("span",{class:"token punctuation"},":"),s("         "),n("span",{class:"token string"},"'chevron-down'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'navigation/chevron_left.svg'"),n("span",{class:"token punctuation"},":"),s("        "),n("span",{class:"token string"},"'chevron-left'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'navigation/chevron_right.svg'"),n("span",{class:"token punctuation"},":"),s("       "),n("span",{class:"token string"},"'chevron-right'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'navigation/expand_less.svg'"),n("span",{class:"token punctuation"},":"),s("         "),n("span",{class:"token string"},"'chevron-up'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'content/clear.svg'"),n("span",{class:"token punctuation"},":"),s("                  "),n("span",{class:"token string"},"'clear'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'content/filter_list.svg'"),n("span",{class:"token punctuation"},":"),s("            "),n("span",{class:"token string"},"'filter'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),s(` 
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"each"),s(),n("span",{class:"token variable"},"AppSvgs"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"svg"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"material"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Key"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"svgAddFile"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Value"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'app'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"each"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"svg"),s(),n("span",{class:"token variable"},"fields"),s(),n("span",{class:"token variable"},"app"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"svg"),s(),n("span",{class:"token variable"},"xmlns"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"http://www.w3.org/2000/svg"'),s(),n("span",{class:"token variable"},"viewBox"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"0 0 24 24"'),s(),n("span",{class:"token variable"},"fill"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"black"'),s(),n("span",{class:"token variable"},"width"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"48px"'),s(),n("span",{class:"token variable"},"height"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"48px"'),n("span",{class:"token punctuation"},">"),s(`
    `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"path"),s(),n("span",{class:"token variable"},"d"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"M0 0h24v24H0V0z"'),s(),n("span",{class:"token variable"},"fill"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"none"'),n("span",{class:"token block keyword"},"/>"),s(`
    `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"path"),s(),n("span",{class:"token variable"},"d"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"M4 5v13h17V5H4zm10 2v9h-3V7h3zM6 7h3v9H6V7zm13 9h-3V7h3v9z"'),s(),n("span",{class:"token variable"},"fill"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"#ffffff"'),n("span",{class:"token block keyword"},"/>"),s(`
`),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"svg"),n("span",{class:"token punctuation"},">"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"svg"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),y=a(`<h3 id="lisp" tabindex="-1">Lisp <a class="header-anchor" href="#lisp" aria-hidden="true">#</a></h3><p>Support for <a href="https://clojuredocs.org/clojure.core/dorun" target="_blank" rel="noopener noreferrer">dorun</a> was added for executing a &quot;statement block&quot; (sequence of expressions) with side-effects that you want to discard the return type (akin to <code>void</code> return type):</p><div class="language-csharp"><pre><code>context<span class="token punctuation">.</span><span class="token function">EvaluateLisp</span><span class="token punctuation">(</span><span class="token string">&quot;(dorun println (map fizzbuzz (range 1 100)))&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Or you can use <code>do</code> to return the last expression in the statement block:</p><div class="language-csharp"><pre><code>context<span class="token punctuation">.</span><span class="token function">EvaluateLisp</span><span class="token punctuation">(</span><span class="token string">&quot;(return (do (+ 1 1) (+ 2 2)) )&quot;</span><span class="token punctuation">)</span> <span class="token comment">//= 4</span>
context<span class="token punctuation">.</span><span class="token function">EvaluateLisp</span><span class="token punctuation">(</span><span class="token string">&quot;(return (do (+ 1 1) (+ 2 2) nil)) )&quot;</span><span class="token punctuation">)</span> <span class="token comment">//= null</span>
context<span class="token punctuation">.</span><span class="token function">EvaluateLisp</span><span class="token punctuation">(</span><span class="token string">&quot;(return (do ()) )&quot;</span><span class="token punctuation">)</span> <span class="token comment">//= null</span>
</code></pre></div><h2 id="servicestack" tabindex="-1">ServiceStack <a class="header-anchor" href="#servicestack" aria-hidden="true">#</a></h2><h3 id="embedded-umd-build-of-servicestack-client" tabindex="-1">Embedded UMD build of <code>@servicestack/client</code> <a class="header-anchor" href="#embedded-umd-build-of-servicestack-client" aria-hidden="true">#</a></h3><p>A UMD version of the <a href="https://github.com/ServiceStack/servicestack-client" target="_blank" rel="noopener noreferrer">@servicestack/client</a> JavaScript client library that contains the <a href="/typescript-add-servicestack-reference.html">TypeScript Service and SSE Clients</a> is now embedded in <strong>ServiceStack.dll</strong>. It&#39;s the modern, dependency-free replacement to <a href="/ss-utils-js.html">ss-utils.js</a> which requires jQuery which is used instead in all SPA Project Templates.</p><p>The embedded UMD version allows for the creation of stand-alone pages that accesses your ServiceStack JSON APIs without any external file references with the single <code>&lt;script/&gt;</code> reference:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/servicestack-client.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>This is used by the updated <a href="/mix-tool.html#mix-usage">mix init</a> gists when generating its empty Web Apps:</p><pre><code>$ mkdir web &amp;&amp; cd web
$ x mix init
$ dotnet run
</code></pre><p>Where its dep-free <a href="https://gist.github.com/gistlyn/58030e271595520d87873c5df5e4c2eb#file-wwwroot-index-html" target="_blank" rel="noopener noreferrer">/index.html</a> use its <code>JsonServiceClient</code> to call its <strong>/hello</strong> API:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/init.png" alt=""></p><p>To call APIs you&#39;ll need to include the JS transpiled DTOs of your Services <a href="/typescript-add-servicestack-reference.html">TypeScript DTOs</a>:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/servicestack-client.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> window<span class="token punctuation">[</span><span class="token string">&#39;@servicestack/client&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//import into global namespace</span>

    <span class="token comment">// generate typed dtos with /typescript-add-servicestack-reference</span>
    <span class="token keyword">var</span> Hello <span class="token operator">=</span> <span class="token comment">/** @class */</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token parameter">init</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token class-name">Hello</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">createResponse</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HelloResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">Hello</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getTypeName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&#39;Hello&#39;</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Hello<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> HelloResponse <span class="token operator">=</span> <span class="token comment">/** @class */</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">HelloResponse</span><span class="token punctuation">(</span><span class="token parameter">init</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">return</span> HelloResponse<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> val <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;result&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> r<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Although modern browsers (as well as any TypeScript or Webpack project) let you use the much nicer async/await syntax:</p><div class="language-js"><pre><code><span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> val <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="typescript-nullable-properties" tabindex="-1">TypeScript Nullable properties <a class="header-anchor" href="#typescript-nullable-properties" aria-hidden="true">#</a></h3><p>The default TypeScript generated for a C# DTO like:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Data</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Value <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> OptionalValue <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Text <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Will render the DTO with optional properties like:</p><div class="language-csharp"><pre><code>export <span class="token keyword">class</span> <span class="token class-name">Data</span>
<span class="token punctuation">{</span>
    <span class="token comment">// @Required()</span>
    <span class="token keyword">public</span> <span class="token keyword">value</span><span class="token punctuation">:</span> number<span class="token punctuation">;</span>

    <span class="token keyword">public</span> optionalValue<span class="token punctuation">?</span><span class="token punctuation">:</span> number<span class="token punctuation">;</span>
    <span class="token keyword">public</span> text<span class="token punctuation">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">constructor</span><span class="token punctuation">(</span>init<span class="token punctuation">?</span><span class="token punctuation">:</span> Partial<span class="token operator">&lt;</span>Data<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>Object <span class="token keyword">as</span> <span class="token class-name">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can change the behavior to emit nullable properties instead with:</p><div class="language-csharp"><pre><code>TypeScriptGenerator<span class="token punctuation">.</span>UseNullableProperties <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><p>Where it will instead emit nullable properties:</p><div class="language-ts"><pre><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Data</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token operator">|</span><span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> optionalValue<span class="token operator">:</span> <span class="token builtin">number</span><span class="token operator">|</span><span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token operator">|</span><span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">constructor</span><span class="token punctuation">(</span>init<span class="token operator">?</span><span class="token operator">:</span> Partial<span class="token operator">&lt;</span>Data<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>Object <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Should you need finer-grained customization and want to control which type and property should be nullable you can use the new customizable filters (which <code>UseNullableProperties</code> defaults to):</p><div class="language-csharp"><pre><code>TypeScriptGenerator<span class="token punctuation">.</span>IsPropertyOptional <span class="token operator">=</span> <span class="token punctuation">(</span>generator<span class="token punctuation">,</span> type<span class="token punctuation">,</span> prop<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

TypeScriptGenerator<span class="token punctuation">.</span>PropertyTypeFilter <span class="token operator">=</span> <span class="token punctuation">(</span>gen<span class="token punctuation">,</span> type<span class="token punctuation">,</span> prop<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
    gen<span class="token punctuation">.</span><span class="token function">GetPropertyType</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> isNullable<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;|null&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="embedded-login-page-fallback" tabindex="-1">Embedded Login Page fallback <a class="header-anchor" href="#embedded-login-page-fallback" aria-hidden="true">#</a></h3><p>The <code>AuthFeature</code> adds a fallback <strong>/login.html</strong> page if the <code>HtmlRedirect</code> remains the default and no <code>/login.html</code> exists, otherwise if using a custom <code>/login</code> page in either <strong>Razor</strong> or <strong>Script Pages</strong> they&#39;ll continue to be used instead.</p><p>The default <code>/login.html</code> page provides an auto Login page that supports authentication via Credentials as well as a generating a dynamic list of OAuth providers, e.g the <strong>NorthwindCrud</strong> <code>/login</code> page with Facebook OAuth looks like:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/auth-login.png" alt=""></p><p>If however you&#39;re using an SPA App with client side routing to implement <code>/login</code>, the default login page can be disabled with:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span> <span class="token punctuation">{</span>
    IncludeDefaultLogin <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="lightweight-customizable-html-templates" tabindex="-1">Lightweight Customizable HTML Templates <a class="header-anchor" href="#lightweight-customizable-html-templates" aria-hidden="true">#</a></h3><p>There&#39;s a new lightweight templating solution that can be used to override ServiceStack&#39;s <a href="/html5reportformat.html">auto HTML Service response pages</a> at specific routes, e.g. this is used to complete the auth/login flow in default apps which is pre-configured with:</p><div class="language-csharp"><pre><code>GetPlugin<span class="token operator">&lt;</span>HtmlFormat<span class="token operator">&gt;</span><span class="token punctuation">.</span>PathTemplates<span class="token punctuation">[</span><span class="token string">&quot;/auth&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;/Templates/Auth.html&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>Specifying the <strong>/path/info</strong> to override and the <strong>VirtualPath</strong> of the static HTML page that should be returned instead.</p><p>That instead of the JSON HTML Dump of the <code>/auth</code> endpoint, now returns a static <code>.html</code> page to display the <code>AuthenticateResponse</code> DTO in a custom beautified HTML view:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/release-notes/v5.9/auth-page.png" alt=""></p><p>The static HTML templates will replace these variable placeholders which will allow you to render a custom view of service responses:</p><ul><li><code>\${Dto}</code> JSON Response DTO</li><li><code>\${BaseUrl}</code> - <code>IRequest.GetBaseUrl()</code></li><li><code>\${ServiceUrl}</code> - Service URL</li></ul><h3 id="hosting-asp-net-core-apps-on-custom-path" tabindex="-1">Hosting <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps on Custom Path <a class="header-anchor" href="#hosting-asp-net-core-apps-on-custom-path" aria-hidden="true">#</a></h3><p>The new <code>PathBase</code> property on AppHost is now the official API for hosting a ServiceStack .NET Core App at a custom path which can be specified at initialization:</p><div class="language-csharp"><pre><code>app<span class="token punctuation">.</span><span class="token function">UseServiceStack</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AppHost</span> <span class="token punctuation">{</span>
    PathBase <span class="token operator">=</span> <span class="token string">&quot;/api&quot;</span><span class="token punctuation">,</span>
    AppSettings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NetCoreAppSettings</span><span class="token punctuation">(</span>Configuration<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Resulting in both <code>Config.PathBase</code> and <code>Config.HandlerFactoryPath</code> getting populated with and without the <code>/</code> suffix:</p><div class="language-csharp"><pre><code>Config<span class="token punctuation">.</span>PathBase           <span class="token comment">//= /api</span>
Config<span class="token punctuation">.</span>HandlerFactoryPath <span class="token comment">//= api</span>
</code></pre></div><p>When necessary the <code>PathBase</code> property is available in both server rendered views:</p><div><ul><li><code>{{PathBase}}</code> variable in <a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">#Script Pages</a></li><li><code>PathBase</code> in Razor Views</li></ul></div><h3 id="pluralize-and-singularize" tabindex="-1">Pluralize and Singularize <a class="header-anchor" href="#pluralize-and-singularize" aria-hidden="true">#</a></h3><p>In order to use optimal user-friendly routes in our AutoGenerated AutoQuery Services, an interned version of <a href="http://andrewpeters.net/inflectornet/" target="_blank" rel="noopener noreferrer">Andrew Peters port of Rails Inflector</a> is available under the <code>Words</code> static class should you need to <code>Pluralize</code> or <code>Singularize</code> text:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> plural <span class="token operator">=</span> Words<span class="token punctuation">.</span><span class="token function">Pluralize</span><span class="token punctuation">(</span><span class="token string">&quot;Customer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//= Customers</span>
<span class="token class-name"><span class="token keyword">var</span></span> singular <span class="token operator">=</span> Words<span class="token punctuation">.</span><span class="token function">Singularize</span><span class="token punctuation">(</span><span class="token string">&quot;Customers&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//= Customer</span>
</code></pre></div><h3 id="authsecret-admin-session" tabindex="-1">AuthSecret Admin Session <a class="header-anchor" href="#authsecret-admin-session" aria-hidden="true">#</a></h3><p>Super User Requests using <a href="/debugging.html#authsecret">Config.AdminAuthSecret</a> now return an Authenticated Admin UserSession whose default values can be modified at <code>AuthFeature.AuthSecretSession</code>:</p><ul><li><code>DisplayName</code>: Admin</li><li><code>UserName</code>: authsecret</li><li><code>AuthProvider</code>: authsecret</li><li><code>Roles</code>: Admin</li><li><code>UserAuthId</code>: 0</li></ul><h3 id="exception-handling" tabindex="-1">Exception Handling <a class="header-anchor" href="#exception-handling" aria-hidden="true">#</a></h3><p><code>Config.ReturnsInnerException</code> now defaults to <code>false</code> in .NET Core. Returning the InnerException was an attempt to return the most useful Exception but was often undesired. Instead when in <code>DebugMode</code> the populated StackTrace will return the StackTraces of all Inner Exceptions, the added detail making it better to be able to identify the source of the Exception when by inspecting the Error Response.</p><h3 id="gatewayexceptionhandlers" tabindex="-1">GatewayExceptionHandlers <a class="header-anchor" href="#gatewayexceptionhandlers" aria-hidden="true">#</a></h3><p>The new Gateway Exception Handlers provide the same Exception Handling callbacks as ServiceExceptions which you can use to intercept Exceptions from Gateway requests:</p><div class="language-csharp"><pre><code>IAppHost<span class="token punctuation">.</span>GatewayExceptionHandlers
IAppHost<span class="token punctuation">.</span>GatewayExceptionHandlersAsync 
</code></pre></div><p>Gateway Exceptions can also be intercepted in your <code>AppHost</code> by overriding:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">OnGatewayException</span><span class="token punctuation">(</span><span class="token class-name">IRequest</span> httpReq<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">object</span></span> request<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div><h3 id="system-web-shims-removed" tabindex="-1"><a href="http://System.Web" target="_blank" rel="noopener noreferrer">System.Web</a> Shims removed <a class="header-anchor" href="#system-web-shims-removed" aria-hidden="true">#</a></h3><p>To assist in being able to retain the same code-base in .NET Core and .NET Framework some core <code>System.Web.</code> classes were added like <code>IHttpHandler</code> which have now been moved to the <code>ServiceStack.Host</code> namespace.</p><p>This can be a source breaking change if you have code that references these types, which can be resolved by including the namespace:</p><div class="language-csharp"><pre><code><span class="token keyword">using</span> <span class="token namespace">ServiceStack<span class="token punctuation">.</span>Host</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="xmlserializerformat-plugin" tabindex="-1">XmlSerializerFormat Plugin <a class="header-anchor" href="#xmlserializerformat-plugin" aria-hidden="true">#</a></h3><p>The new <code>XmlSerializerFormat</code> plugin changes ServiceStack to serialize XML with .NET <code>XmlSerializer</code> instead of .NET XML <code>DataContractSerializer</code>:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">XmlSerializerFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The implementation provides a typical example of how to register or override different Content-Types in ServiceStack:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XmlSerializerFormat</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IPlugin</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Serialize</span><span class="token punctuation">(</span><span class="token class-name">IRequest</span> req<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">object</span></span> response<span class="token punctuation">,</span> <span class="token class-name">Stream</span> stream<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> serializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">XmlSerializer</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        serializer<span class="token punctuation">.</span><span class="token function">Serialize</span><span class="token punctuation">(</span>stream<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Deserialize</span><span class="token punctuation">(</span><span class="token class-name">Type</span> type<span class="token punctuation">,</span> <span class="token class-name">Stream</span> stream<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> serializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">XmlSerializer</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> obj <span class="token operator">=</span> <span class="token punctuation">(</span>Type<span class="token punctuation">)</span> serializer<span class="token punctuation">.</span><span class="token function">Deserialize</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Register</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        appHost<span class="token punctuation">.</span>ContentTypes<span class="token punctuation">.</span><span class="token function">Register</span><span class="token punctuation">(</span>MimeTypes<span class="token punctuation">.</span>Xml<span class="token punctuation">,</span> Serialize<span class="token punctuation">,</span> Deserialize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="cache-client" tabindex="-1">Cache Client <a class="header-anchor" href="#cache-client" aria-hidden="true">#</a></h3><p>Most caching providers now provide an explicit API to remove expired entries:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICacheClientExtended</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICacheClient</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">RemoveExpiredEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The Memory Cache client periodically calls this every <code>MemoryCacheClient.CleaningInterval</code> (default 1000).</p><h3 id="other-features-1" tabindex="-1">Other features <a class="header-anchor" href="#other-features-1" aria-hidden="true">#</a></h3><ul><li>Fluent Validation upgraded to latest 9 Preview 2</li><li>Support for returning naked <code>ReadOnlyMemory&lt;char&gt;</code> and <code>ReadOnlyMemory&lt;byte&gt;</code> raw text &amp; binary in Service responses</li><li>Support added for non-ascii UTF-8 chares in Content-Disposition file names</li><li>ServiceStack&#39;s interned <code>RecyclableMemoryStream</code> updated to use latest <a href="https://github.com/microsoft/Microsoft.IO.RecyclableMemoryStream" target="_blank" rel="noopener noreferrer">Microsoft.IO.RecyclableMemoryStream</a></li></ul><h3 id="server-sent-events" tabindex="-1">Server Sent Events <a class="header-anchor" href="#server-sent-events" aria-hidden="true">#</a></h3><p><a href="/server-events.html">Server Events</a> is more resilient and better detects and handles hung blocking async requests in <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Framework.</p><p>All Notify APIs now have overloads for being able to send raw JSON:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IServerEvents</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IDisposable</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">Task</span> <span class="token function">NotifyAllJsonAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> selector<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> json<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> ct<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task</span> <span class="token function">NotifyChannelJsonAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> channel<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> selector<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> json<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> ct<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task</span> <span class="token function">NotifySubscriptionJsonAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> subscriptionId<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> selector<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> json<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> channel<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> ct<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task</span> <span class="token function">NotifyUserIdJsonAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userId<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> selector<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> json<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> channel<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> ct<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task</span> <span class="token function">NotifyUserNameJsonAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> selector<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> json<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> channel<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> ct<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task</span> <span class="token function">NotifySessionJsonAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> sessionId<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> selector<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> json<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> channel<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> ct<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Update Events for when a subscription updates their registered channels are now sent to new &amp; previously subscribed channels. <code>IEventSubscription</code> captures both old &amp; new channels in <code>MergedChannels</code> collection whilst the <code>Channels</code> return the currently subscribed channels so the difference between <code>MergedChannels-Channels</code> determines which channels were unsubscribed to.</p><h3 id="stand-alone-razor-views" tabindex="-1">Stand-alone Razor Views <a class="header-anchor" href="#stand-alone-razor-views" aria-hidden="true">#</a></h3><p>Support for rendering stand-alone HTML Views from Razor Pages has been added to .NET Core&#39;s <a href="/netcore-razor.html">ServiceStack.Razor implementation</a> which can use the <code>GetViewPage()</code> API for retrieving View Pages (e.g. under <code>~/Views</code>) and the <code>GetContentPage()</code> API for retrieving Content Pages (e.g. under <code>/wwwroot</code>).</p><p>You can then use <code>RenderToHtmlAsync()</code> API to render the HTML output in a UTF-8 <code>ReadOnlyMemory&lt;char&gt;</code> which your Services can return directly for optimal efficiency, or if needed the rendered output can be converted to a <code>string</code> with <code>.ToString()</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">MyRequest</span> request<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> razor <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetPlugin</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RazorFormat<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> view <span class="token operator">=</span> razor<span class="token punctuation">.</span><span class="token function">GetViewPage</span><span class="token punctuation">(</span><span class="token string">&quot;MyView&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> HttpError<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token string">&quot;Razor view not found: &quot;</span> <span class="token operator">+</span> <span class="token string">&quot;MyView&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> ret <span class="token operator">=</span> <span class="token keyword">await</span> razor<span class="token punctuation">.</span><span class="token function">RenderToHtmlAsync</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyModel</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;World&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">layout</span><span class="token punctuation">:</span><span class="token string">&quot;_MyLayout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//if Layout specified in \`.cshtml\` page it uses that</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For even better efficiency the Razor View can render to the Response <code>OutputStream</code> directly with <code>WriteHtmlAsync()</code> to write the rendered UTF-8 bytes directly to the <code>OutputStream</code> instead of above where it converts it into a UTF-8 string before converting it back to UTF-8 bytes when ServiceStack writes it to the response:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">MyRequest</span> request<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> razor <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetPlugin</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RazorFormat<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> view <span class="token operator">=</span> razor<span class="token punctuation">.</span><span class="token function">GetViewPage</span><span class="token punctuation">(</span><span class="token string">&quot;MyView&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> HttpError<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token string">&quot;Razor view not found: &quot;</span> <span class="token operator">+</span> <span class="token string">&quot;MyView&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> razor<span class="token punctuation">.</span><span class="token function">WriteHtmlAsync</span><span class="token punctuation">(</span>Response<span class="token punctuation">.</span>OutputStream<span class="token punctuation">,</span> view<span class="token punctuation">,</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyModel</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;World&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
        <span class="token named-parameter punctuation">layout</span><span class="token punctuation">:</span><span class="token string">&quot;_MyLayout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//if Layout specified in \`.cshtml\` page it uses that</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If needed you can also render the view with an anonymous Model Type, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">await</span> razor<span class="token punctuation">.</span><span class="token function">RenderToHtmlAsync</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;World&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Where the Razor View would need to specify it&#39;s using a <code>dynamic</code> model with:</p><div class="language-html"><pre><code>@model dynamic
</code></pre></div><h3 id="openapi" tabindex="-1">OpenApi <a class="header-anchor" href="#openapi" aria-hidden="true">#</a></h3><p>To improve the metadata available when customizing the Open API output using <a href="/openapi.html#operation-filters">Operation Filters</a>, non-serializable <code>PropertyInfo</code> and <code>PropertyType</code> members have been added to the <code>OpenApiProperty</code> DTO they represent:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OpenApiProperty</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">IgnoreDataMember</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">PropertyInfo</span> PropertyInfo <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">IgnoreDataMember</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Type</span> PropertyType <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ormlite" tabindex="-1">OrmLite <a class="header-anchor" href="#ormlite" aria-hidden="true">#</a></h2><p>OrmLite continues to evolve with new features gained in every release in response to Customer Feedback and when necessary to provide seamless optimal integrations into new Technologies like AutoCrud.</p><h3 id="ensure" tabindex="-1">Ensure <a class="header-anchor" href="#ensure" aria-hidden="true">#</a></h3><p>The new <code>Ensure()</code> API on OrmLite&#39;s typed <code>SqlExpression&lt;T&gt;</code> can be used to ensure that a condition is always applied irrespective of other conditions, e.g:</p><h4 id="typed-api" tabindex="-1">Typed API <a class="header-anchor" href="#typed-api" aria-hidden="true">#</a></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> q <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
q<span class="token punctuation">.</span><span class="token function">Ensure</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Id <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//always applied</span>

<span class="token comment">//...</span>
q<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Age <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
q<span class="token punctuation">.</span><span class="token function">Or</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>LivingStatus <span class="token operator">==</span> LivingStatus<span class="token punctuation">.</span>Dead<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> rows <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="custom-parameterized-sql-expression" tabindex="-1">Custom Parameterized SQL Expression <a class="header-anchor" href="#custom-parameterized-sql-expression" aria-hidden="true">#</a></h4><p>Custom SQL Ensure parameterized expressions:</p><div class="language-csharp"><pre><code> q<span class="token punctuation">.</span><span class="token function">Ensure</span><span class="token punctuation">(</span><span class="token string">&quot;Id = {0}&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h4 id="multiple-ensure-expressions" tabindex="-1">Multiple Ensure expressions <a class="header-anchor" href="#multiple-ensure-expressions" aria-hidden="true">#</a></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> q <span class="token operator">=</span> db
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Join</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RockstarAlbum<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>a<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>Id <span class="token operator">==</span> a<span class="token punctuation">.</span>RockstarId<span class="token punctuation">)</span><span class="token punctuation">;</span>

q<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Ensure</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">,</span>RockstarAlbum<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>a<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>Name <span class="token operator">==</span> <span class="token string">&quot;Nevermind&quot;</span> <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>Id <span class="token operator">==</span> a<span class="token punctuation">.</span>RockstarId<span class="token punctuation">)</span><span class="token punctuation">;</span>

q<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Age <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">)</span>
 <span class="token punctuation">.</span><span class="token function">Or</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>LivingStatus <span class="token operator">==</span> LivingStatus<span class="token punctuation">.</span>Dead<span class="token punctuation">)</span><span class="token punctuation">;</span>

q<span class="token punctuation">.</span><span class="token function">Ensure</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Id <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> rows <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>These APIs are useful for mandatory filters like &quot;Soft Deletes&quot; and Multitenant records.</p><h3 id="dictionary-apis" tabindex="-1">Dictionary APIs <a class="header-anchor" href="#dictionary-apis" aria-hidden="true">#</a></h3><p>The new Dictionary APIs allow you to customize which parts of a Data Model should be modified by converting it into then manipulating an Object Dictionary, e.g:</p><h4 id="insert-by-dictionary" tabindex="-1">Insert by Dictionary <a class="header-anchor" href="#insert-by-dictionary" aria-hidden="true">#</a></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> row <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Person</span> <span class="token punctuation">{</span> FirstName <span class="token operator">=</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> LastName <span class="token operator">=</span> <span class="token string">&quot;Smith&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> obj <span class="token operator">=</span> row<span class="token punctuation">.</span><span class="token function">ToObjectDictionary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">[</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>LastName<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

row<span class="token punctuation">.</span>Id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Insert</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Person<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token named-parameter punctuation">selectIdentity</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="update-by-dictionary" tabindex="-1">Update by Dictionary <a class="header-anchor" href="#update-by-dictionary" aria-hidden="true">#</a></h4><div class="language-csharp"><pre><code><span class="token class-name">Person</span> row <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">SingleById</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Person<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>row<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> obj <span class="token operator">=</span> row<span class="token punctuation">.</span><span class="token function">ToObjectDictionary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">[</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>LastName<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Update</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Person<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="updateonly-by-dictionary" tabindex="-1">UpdateOnly by Dictionary <a class="header-anchor" href="#updateonly-by-dictionary" aria-hidden="true">#</a></h4><div class="language-csharp"><pre><code><span class="token comment">// By Primary Key Id</span>
<span class="token class-name"><span class="token keyword">var</span></span> fields <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>FirstName<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>LastName<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UpdateOnly</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Person<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>fields<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// By Custom Where Expression</span>
<span class="token class-name"><span class="token keyword">var</span></span> fields <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>FirstName<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>LastName<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UpdateOnly</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Person<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>fields<span class="token punctuation">,</span> p <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>LastName <span class="token operator">==</span> <span class="token string">&quot;Hendrix&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="delete-by-dictionary" tabindex="-1">Delete by Dictionary <a class="header-anchor" href="#delete-by-dictionary" aria-hidden="true">#</a></h4><div class="language-csharp"><pre><code>db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Delete</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rockstar<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token string">&quot;Age&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">27</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="custom-insert-and-update-expressions" tabindex="-1">Custom Insert and Update Expressions <a class="header-anchor" href="#custom-insert-and-update-expressions" aria-hidden="true">#</a></h3><p>The new <code>[CustomInsert]</code> and <code>[CustomUpdate]</code> attributes can be used to override what values rows are inserted during INSERT&#39;s and UPDATE&#39;s.</p><p>We can use this to insert a salted and hashed password using PostgreSQL native functions:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomSqlUser</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AutoIncrement</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Email <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomInsert</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;crypt({0}, gen_salt(&#39;bf&#39;))&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">,</span>
     <span class="token class-name">CustomUpdate</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;crypt({0}, gen_salt(&#39;bf&#39;))&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Password <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name"><span class="token keyword">var</span></span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomSqlUser</span> <span class="token punctuation">{</span>
    Email <span class="token operator">=</span> <span class="token string">&quot;user@email.com&quot;</span><span class="token punctuation">,</span> 
    Password <span class="token operator">=</span> <span class="token string">&quot;secret&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>We can then use <code>Sql.Custom()</code> to create a partially typed custom query to match on the hashed password, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> quotedSecret <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Dialect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetQuotedValue</span><span class="token punctuation">(</span><span class="token string">&quot;secret&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> q <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CustomSqlUser<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Password <span class="token operator">==</span> Sql<span class="token punctuation">.</span><span class="token function">Custom</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;crypt(</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">quotedSecret</span><span class="token punctuation">}</span></span><span class="token string">, password)&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> row <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Single</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="dbscripts" tabindex="-1">DbScripts <a class="header-anchor" href="#dbscripts" aria-hidden="true">#</a></h3><p>The New DB Scripts below surfaces existing OrmLite helpers to assist in generation of SQL queries in <code>#Script</code>:</p><ul><li><code>sqlCast</code> - RDBMS specific CAST expression</li><li><code>sqlOrderByFields</code> - Quoted multi order by fields</li><li><code>sqlVerifyFragment</code> - Verify SQL fragment</li></ul><p>The <code>dbCount</code> API returns the number of rows the specified query returns whilst <code>dbExists</code> returns a <code>bool</code> if the specified query returns any rows:</p><div class="language-js"><pre><code>sql <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token function">dbCount</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>

sql <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token function">dbExists</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
</code></pre></div><h3 id="dbscriptsasync-sync-apis" tabindex="-1">DbScriptsAsync sync APIs <a class="header-anchor" href="#dbscriptsasync-sync-apis" aria-hidden="true">#</a></h3><p>In future we recommend only using <code>DbScriptsAsync</code> going forward as it&#39;s often useful to be explicit when using async and sync queries. To facilitate this all <code>DbScripts</code> sync APIs have been merged into <code>DbScriptsAsync</code> and given <code>*Sync</code> suffixes:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SharpPagesFeature</span> <span class="token punctuation">{</span>
    ScriptMethods <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DbScriptsAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>*Sync</code> APIs are useful when the actual resolved value is needed, like in logical binary expression or a <code>[ValidateRequest]</code> Condition which expects a &quot;truthy&quot; result:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateRequest</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Condition <span class="token operator">=</span> <span class="token string">&quot;dCountSync(&#39;SELECT * FROM RockstarAlbum WHERE RockstarId = @Id&#39;, { dto.Id }) == 0&quot;</span><span class="token punctuation">,</span> 
                 ErrorCode <span class="token operator">=</span> <span class="token string">&quot;HasForeignKeyReferences&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRequest</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ValidateRequest</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Condition <span class="token operator">=</span> <span class="token string">&quot;!dbExistsSync(&#39;SELECT * FROM RockstarAlbum WHERE RockstarId = @Id&#39;, { dto.Id })&quot;</span><span class="token punctuation">,</span> 
                 ErrorCode <span class="token operator">=</span> <span class="token string">&quot;HasForeignKeyReferences&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRequest</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="spread-util" tabindex="-1">Spread Util <a class="header-anchor" href="#spread-util" aria-hidden="true">#</a></h3><p>The <code>SqlSpread()</code> API is useful to generate an escaped list of parameterized values for use in SQL <code>IN()</code> statements and SQL functions:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> dialect <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Dialect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dialect<span class="token punctuation">.</span><span class="token function">SqlSpread</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//= 1,2,3</span>
dialect<span class="token punctuation">.</span><span class="token function">SqlSpread</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//= &#39;A&#39;,&#39;B&#39;,&#39;C&#39;</span>
dialect<span class="token punctuation">.</span><span class="token function">SqlSpread</span><span class="token punctuation">(</span><span class="token string">&quot;A&#39;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C\\&quot;D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//= &#39;A&#39;&#39;B&#39;,&#39;C\\&quot;D&#39;</span>
</code></pre></div><h3 id="postgresql-array" tabindex="-1">PostgreSQL Array <a class="header-anchor" href="#postgresql-array" aria-hidden="true">#</a></h3><p>The <code>PgSql.Array()</code> provides a typed API for generating <a href="https://www.postgresql.org/docs/current/arrays.html" target="_blank" rel="noopener noreferrer">PostgreSQL Array Expressions</a>, e.g:</p><div class="language-csharp"><pre><code>PgSql<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>     <span class="token comment">//= ARRAY[1,2,3]</span>
<span class="token class-name"><span class="token keyword">var</span></span> strings <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
PgSql<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span>strings<span class="token punctuation">)</span>   <span class="token comment">//= ARRAY[&#39;A&#39;,&#39;B&#39;,&#39;C&#39;]</span>
</code></pre></div><p>Which you can safely use in Custom SQL Expressions that use PostgreSQL&#39;s native ARRAY support:</p><div class="language-csharp"><pre><code>q<span class="token punctuation">.</span><span class="token function">And</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">PgSql<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span>anyTechnologyIds<span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> &amp;&amp; technology_ids&quot;</span></span><span class="token punctuation">)</span>
q<span class="token punctuation">.</span><span class="token function">And</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">PgSql<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span>labelSlugs<span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> &amp;&amp; labels&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If you want and empty collection to return <code>null</code> instead of an empty <code>ARRAY[]</code> you can use the <code>nullIfEmpty</code> overload:</p><div class="language-csharp"><pre><code>PgSql<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span></span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">nullIfEmpty</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">)</span>      <span class="token comment">//= null</span>
PgSql<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">nullIfEmpty</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">//= ARRAY[&#39;A&#39;,&#39;B&#39;,&#39;C&#39;]</span>
</code></pre></div><h3 id="postgresql-params" tabindex="-1">PostgreSQL Params <a class="header-anchor" href="#postgresql-params" aria-hidden="true">#</a></h3><p>The <code>PgSql.Param()</code> API provides a resolve the correct populated <code>NpgsqlParameter</code> and <code>NpgsqlDbType</code> from a C# Type which can be used to query custom PostgreSQL Data Types in APIs that accept <code>IDbDataParameter</code> parameters, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FunctionResult</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Val <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name"><span class="token keyword">var</span></span> p <span class="token operator">=</span> PgSql<span class="token punctuation">.</span><span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">&quot;paramValue&quot;</span><span class="token punctuation">,</span> testVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM my_func(@paramValue)&quot;</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> rows <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>FunctionResult<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> p <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>`,148),b=[c,l,i,u,r,k,d,h,g,m,y];function w(f,v,S,q,A,C){return p(),e("div",null,b)}var I=t(o,[["render",w]]);export{T as __pageData,I as default};
