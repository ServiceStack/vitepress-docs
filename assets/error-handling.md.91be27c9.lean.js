import{_ as n,c as s,o as a,a as t}from"./app.14440598.js";const g='{"title":"Error Handling","description":"","frontmatter":{"slug":"error-handling","title":"Error Handling"},"headers":[{"level":2,"title":"Throwing C# Exceptions","slug":"throwing-c-exceptions"},{"level":3,"title":"Default Mapping of C# Exceptions to HTTP Errors","slug":"default-mapping-of-c-exceptions-to-http-errors"},{"level":3,"title":"WebServiceException","slug":"webserviceexception"},{"level":3,"title":"Enabling StackTraces","slug":"enabling-stacktraces"},{"level":3,"title":"Error Response Types","slug":"error-response-types"},{"level":2,"title":"Custom Exceptions","slug":"custom-exceptions"},{"level":3,"title":"Custom mapping of C# Exceptions to HTTP Error Status","slug":"custom-mapping-of-c-exceptions-to-http-error-status"},{"level":3,"title":"Returning a HttpError","slug":"returning-a-httperror"},{"level":3,"title":"HttpError with a Custom Response DTO","slug":"httperror-with-a-custom-response-dto"},{"level":3,"title":"Implementing IResponseStatusConvertible","slug":"implementing-iresponsestatusconvertible"},{"level":3,"title":"Implementing IHasStatusCode","slug":"implementing-ihasstatuscode"},{"level":3,"title":"Overriding OnExceptionTypeFilter in your AppHost","slug":"overriding-onexceptiontypefilter-in-your-apphost"},{"level":3,"title":"Intercept Service Exceptions","slug":"intercept-service-exceptions"},{"level":3,"title":"Custom HTTP Errors","slug":"custom-http-errors"},{"level":3,"title":"Fallback Error Pages","slug":"fallback-error-pages"},{"level":3,"title":"Register handlers for handling Service Exceptions","slug":"register-handlers-for-handling-service-exceptions"},{"level":3,"title":"GatewayExceptionHandlers","slug":"gatewayexceptionhandlers"},{"level":3,"title":"Error handling using a custom ServiceRunner","slug":"error-handling-using-a-custom-servicerunner"}],"relativePath":"error-handling.md","lastUpdated":1634495307618}',e={},o=t(`__VP_STATIC_START__<h2 id="throwing-c-exceptions" tabindex="-1">Throwing C# Exceptions <a class="header-anchor" href="#throwing-c-exceptions" aria-hidden="true">#</a></h2><p>In most cases you won&#39;t need to be concerned with ServiceStack&#39;s error handling since it provides native support for the normal use-case of throwing C# Exceptions, e.g.:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Post</span><span class="token punctuation">(</span><span class="token class-name">User</span> request<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token string">&quot;Name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="default-mapping-of-c-exceptions-to-http-errors" tabindex="-1">Default Mapping of C# Exceptions to HTTP Errors <a class="header-anchor" href="#default-mapping-of-c-exceptions-to-http-errors" aria-hidden="true">#</a></h3><p>By Default C# Exceptions inheriting from:</p><ul><li><code>ArgumentException</code> or <code>SerializationException</code> or <code>FormatException</code> is returned as a <strong>400 BadRequest</strong></li><li><code>NotImplementedException</code> or <code>NotSupportedException </code> is returned as a <strong>405 MethodNotAllowed</strong></li><li><code>FileNotFoundException</code> is return as <strong>404 NotFound</strong></li><li><code>AuthenticationException</code> is returned as <strong>401 Unauthorized</strong></li><li><code>UnauthorizedAccessException</code> is returned as <strong>403 Forbidden</strong></li><li><code>OptimisticConcurrencyException</code> is returned as <strong>409 Conflict</strong></li><li>All Other normal C# Exceptions are returned as <strong>500 InternalServerError</strong></li></ul><p>Other custom mappings can be added to the <a href="/error-handling.html#custom-mapping-of-c-exceptions-to-http-error-status">Config.MapExceptionToStatusCode dictionary</a>, by <a href="/error-handling.html#implementing-ihasstatuscode">implementing IHasStatusCode interface</a> or by <a href="/error-handling.html#returning-a-httperror">returning a HttpError</a>.</p><h3 id="webserviceexception" tabindex="-1">WebServiceException <a class="header-anchor" href="#webserviceexception" aria-hidden="true">#</a></h3><p>All Exceptions get injected into the <code>ResponseStatus</code> property of your Response DTO that is serialized into your ServiceClient&#39;s preferred Content-Type making error handling transparent regardless of your preferred format - i.e., the same C# Error handling code can be used for all ServiceClients.</p><div class="language-csharp"><pre><code><span class="token keyword">try</span> 
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonServiceClient</span><span class="token punctuation">(</span>BaseUri<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Send</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>UserResponse<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">WebServiceException</span> webEx<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token comment">/*
      webEx.StatusCode        = 400
      webEx.StatusDescription = ArgumentNullException
      webEx.ErrorCode         = ArgumentNullException
      webEx.ErrorMessage      = Value cannot be null. Parameter name: Name
      webEx.StackTrace        = (your Server Exception StackTrace - in DebugMode)
      webEx.ResponseDto       = (your populated Response DTO)
      webEx.ResponseStatus    = (your populated Response Status DTO)
      webEx.GetFieldErrors()  = (individual errors for each field if any)
    */</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Where the <code>StatusCode</code> and <code>StatusDescription</code> are the HTTP StatusCode and Description which shows the top-level HTTP-layer details that all HTTP Clients see. The StatusDescription is typically short and used to indicate the type of Error returned which by default is the Type of the Exception thrown. HTTP Clients normally inspect the <code>StatusCode</code> to determine how to handle the error on the client.</p><p>All <a href="/clients-overview.html">Service Clients</a> also have access to Application-level Error details which are returned in the Error Response DTO Body where the <code>ErrorCode</code> holds the Exception Type and is what clients would inspect to determine and handle the Type of Exception it is whilst the <code>ErrorMessage</code> holds the Server Exception Message which provides a human-friendly, longer and descriptive description of the Error that can be displayed to the end user. In <a href="/debugging.html#debugmode">DebugMode</a> the <code>StackTrace</code> is populated with the Server StackTrace to help front-end developers from identifying the cause and location of the Error.</p><p>If the Error refers to a particular field such as a Field Validation Exception, <code>GetFieldErrors()</code> holds the error information for each field that has an Error.</p><p>These defaults can be changed to provide further customized error responses by the various options below:</p><h3 id="enabling-stacktraces" tabindex="-1">Enabling StackTraces <a class="header-anchor" href="#enabling-stacktraces" aria-hidden="true">#</a></h3><p>By default displaying StackTraces in Response DTOs are only enabled in Debug builds, although this behavior is overridable with:</p><div class="language-csharp"><pre><code><span class="token function">SetConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HostConfig</span> <span class="token punctuation">{</span> DebugMode <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="error-response-types" tabindex="-1">Error Response Types <a class="header-anchor" href="#error-response-types" aria-hidden="true">#</a></h3><p>The Error Response that gets returned when an Exception is thrown varies on whether a conventionally-named <code>{RequestDto}Response</code> DTO exists or not.</p><h4 id="if-it-exists" tabindex="-1">If it exists: <a class="header-anchor" href="#if-it-exists" aria-hidden="true">#</a></h4><p>The <code>{RequestDto}Response</code> is returned, regardless of the service method&#39;s response type. If the <code>{RequestDto}Response</code> DTO has a <strong>ResponseStatus</strong> property, it is populated otherwise no <strong>ResponseStatus</strong> will be returned. (If you have decorated the <code>{ResponseDto}Response</code> class and properties with <code>[DataContract]/[DataMember]</code> attributes, then <strong>ResponseStatus</strong> also needs to be decorated, to get populated).</p><h4 id="otherwise-if-it-doesn-t" tabindex="-1">Otherwise, if it doesn&#39;t: <a class="header-anchor" href="#otherwise-if-it-doesn-t" aria-hidden="true">#</a></h4><p>A generic <code>ErrorResponse</code> gets returned with a populated <strong>ResponseStatus</strong> property.</p><p>The <a href="/clients-overview.html">Service Clients</a> transparently handles the different Error Response types, and for schema-less formats like JSON/JSV/etc there&#39;s no actual visible difference between returning a <strong>ResponseStatus</strong> in a custom or generic <code>ErrorResponse</code> - as they both output the same response on the wire.</p><h2 id="custom-exceptions" tabindex="-1">Custom Exceptions <a class="header-anchor" href="#custom-exceptions" aria-hidden="true">#</a></h2><p>Ultimately all ServiceStack WebServiceExceptions are just Response DTO&#39;s with a populated <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/ResponseStatus.cs" target="_blank" rel="noopener noreferrer">ResponseStatus</a> that are returned with a HTTP Error Status. There are a number of different ways to customize how Exceptions are returned including:</p><h3 id="custom-mapping-of-c-exceptions-to-http-error-status" tabindex="-1">Custom mapping of C# Exceptions to HTTP Error Status <a class="header-anchor" href="#custom-mapping-of-c-exceptions-to-http-error-status" aria-hidden="true">#</a></h3><p>You can change what HTTP Error Status is returned for different Exception Types by configuring them with:</p><div class="language-csharp"><pre><code><span class="token function">SetConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HostConfig</span> <span class="token punctuation">{</span> 
    MapExceptionToStatusCode <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">CustomInvalidRoleException</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">403</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">CustomerNotFoundException</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">404</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="returning-a-httperror" tabindex="-1">Returning a HttpError <a class="header-anchor" href="#returning-a-httperror" aria-hidden="true">#</a></h3><p>If you want even finer grained control of your HTTP errors you can either <strong>throw</strong> or <strong>return</strong> an <strong>HttpError</strong> letting you customize the <strong>Http Headers</strong> and <strong>Status Code</strong> and HTTP Response <strong>body</strong> to get exactly what you want on the wire:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token class-name">User</span> request<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">throw</span> HttpError<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;User </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">request<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string"> does not exist&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The above returns a <strong>404</strong> NotFound StatusCode on the wire and is a short-hand for:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpError</span><span class="token punctuation">(</span>HttpStatusCode<span class="token punctuation">.</span>NotFound<span class="token punctuation">,</span> 
    <span class="token interpolation-string"><span class="token string">$&quot;User </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">request<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string"> does not exist&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="httperror-with-a-custom-response-dto" tabindex="-1">HttpError with a Custom Response DTO <a class="header-anchor" href="#httperror-with-a-custom-response-dto" aria-hidden="true">#</a></h3><p>The <code>HttpError</code> can also be used to return a more structured Error Response with:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> responseDto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ErrorResponse</span> <span class="token punctuation">{</span> 
    ResponseStatus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResponseStatus</span> <span class="token punctuation">{</span>
        ErrorCode <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ArgumentException</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">,</span>
        Message <span class="token operator">=</span> <span class="token string">&quot;Invalid Request&quot;</span><span class="token punctuation">,</span>
        Errors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>ResponseError<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResponseError</span> <span class="token punctuation">{</span>
                ErrorCode <span class="token operator">=</span> <span class="token string">&quot;NotEmpty&quot;</span><span class="token punctuation">,</span>
                FieldName <span class="token operator">=</span> <span class="token string">&quot;Company&quot;</span><span class="token punctuation">,</span>
                Message <span class="token operator">=</span> <span class="token string">&quot;&#39;Company&#39; should not be empty.&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpError</span><span class="token punctuation">(</span>HttpStatusCode<span class="token punctuation">.</span>BadRequest<span class="token punctuation">,</span> <span class="token string">&quot;ArgumentException&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Response <span class="token operator">=</span> responseDto<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="implementing-iresponsestatusconvertible" tabindex="-1">Implementing IResponseStatusConvertible <a class="header-anchor" href="#implementing-iresponsestatusconvertible" aria-hidden="true">#</a></h3><p>You can also override the serialization of Custom Exceptions by implementing the <code>IResponseStatusConvertible</code> interface to return your own populated ResponseStatus instead. This is how <code>ValidationException</code> allows customizing the Response DTO is by <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/FluentValidation/ValidationException.cs" target="_blank" rel="noopener noreferrer">having ValidationException implement</a> the <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Model/IResponseStatusConvertible.cs" target="_blank" rel="noopener noreferrer">IResponseStatusConvertible</a> interface.</p><p>E.g. Here&#39;s a custom Exception example that returns a populated Field Error:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomFieldException</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Exception</span><span class="token punctuation">,</span> <span class="token class-name">IResponseStatusConvertible</span></span>
<span class="token punctuation">{</span>
  <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FieldErrorCode <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FieldName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FieldMessage <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">ResponseStatus</span> <span class="token function">ToResponseStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResponseStatus</span> <span class="token punctuation">{</span>
        ErrorCode <span class="token operator">=</span> <span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">,</span>
        Message <span class="token operator">=</span> Message<span class="token punctuation">,</span>
        Errors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>ResponseError<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResponseError</span> <span class="token punctuation">{</span>
                ErrorCode <span class="token operator">=</span> FieldErrorCode<span class="token punctuation">,</span>
                FieldName <span class="token operator">=</span> FieldName<span class="token punctuation">,</span>
                Message <span class="token operator">=</span> FieldMessage
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="implementing-ihasstatuscode" tabindex="-1">Implementing IHasStatusCode <a class="header-anchor" href="#implementing-ihasstatuscode" aria-hidden="true">#</a></h3><p>In addition to customizing the HTTP Response Body of C# Exceptions with <a href="/error-handling.html#implementing-iresponsestatusconvertible">IResponseStatusConvertible</a>, you can also customize the HTTP Status Code by implementing <code>IHasStatusCode</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Custom401Exception</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Exception</span><span class="token punctuation">,</span> <span class="token class-name">IHasStatusCode</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> StatusCode <span class="token operator">=&gt;</span> <span class="token number">401</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Likewise <code>IHasStatusDescription</code> can be used to customize the <code>StatusDescription</code> and <code>IHasErrorCode</code> for customizing the <code>ErrorCode</code> returned, instead of its Exception Type.</p><h3 id="overriding-onexceptiontypefilter-in-your-apphost" tabindex="-1">Overriding OnExceptionTypeFilter in your AppHost <a class="header-anchor" href="#overriding-onexceptiontypefilter-in-your-apphost" aria-hidden="true">#</a></h3><p>You can also catch and modify the returned <code>ResponseStatus</code> returned by overriding <code>OnExceptionTypeFilter</code> in your AppHost, e.g. <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/ServiceStackHost.Runtime.cs#L310" target="_blank" rel="noopener noreferrer">ServiceStack uses this</a> to customize the returned ResponseStatus to automatically add a custom field error for <code>ArgumentExceptions</code> with the specified <code>ParamName</code>, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnExceptionTypeFilter</span><span class="token punctuation">(</span>
    <span class="token class-name">Exception</span> ex<span class="token punctuation">,</span> <span class="token class-name">ResponseStatus</span> responseStatus<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> argEx <span class="token operator">=</span> ex <span class="token keyword">as</span> <span class="token class-name">ArgumentException</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> isValidationSummaryEx <span class="token operator">=</span> argEx <span class="token keyword">is</span> <span class="token class-name">ValidationException</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>argEx <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isValidationSummaryEx <span class="token operator">&amp;&amp;</span> argEx<span class="token punctuation">.</span>ParamName <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> paramMsgIndex <span class="token operator">=</span> argEx<span class="token punctuation">.</span>Message<span class="token punctuation">.</span><span class="token function">LastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Parameter name:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> errorMsg <span class="token operator">=</span> paramMsgIndex <span class="token operator">&gt;</span> <span class="token number">0</span>
            <span class="token punctuation">?</span> argEx<span class="token punctuation">.</span>Message<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> paramMsgIndex<span class="token punctuation">)</span>
            <span class="token punctuation">:</span> argEx<span class="token punctuation">.</span>Message<span class="token punctuation">;</span>

        responseStatus<span class="token punctuation">.</span>Errors<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ResponseError</span>
        <span class="token punctuation">{</span>
            ErrorCode <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">,</span>
            FieldName <span class="token operator">=</span> argEx<span class="token punctuation">.</span>ParamName<span class="token punctuation">,</span>
            Message <span class="token operator">=</span> errorMsg<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="intercept-service-exceptions" tabindex="-1">Intercept Service Exceptions <a class="header-anchor" href="#intercept-service-exceptions" aria-hidden="true">#</a></h3><p>As an alternative way of customizing Service Exceptions is to override <code>OnExceptionAsync()</code> callback in your <code>Service</code> class (or base class) to intercept and modify Request DTOs, Responses or Error Responses, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">class</span> <span class="token class-name">MyServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">//Return custom error with additional metadata</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token function">OnExceptionAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> requestDto<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> error <span class="token operator">=</span> DtoUtils<span class="token punctuation">.</span><span class="token function">CreateErrorResponse</span><span class="token punctuation">(</span>requestDto<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">is</span> <span class="token class-name">IHttpError</span> httpError<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>                
            <span class="token class-name"><span class="token keyword">var</span></span> errorStatus <span class="token operator">=</span> httpError<span class="token punctuation">.</span>Response<span class="token punctuation">.</span><span class="token function">GetResponseStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            errorStatus<span class="token punctuation">.</span>Meta <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
                <span class="token punctuation">[</span><span class="token string">&quot;InnerType&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> ex<span class="token punctuation">.</span>InnerException<span class="token punctuation">?.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> Task<span class="token punctuation">.</span><span class="token function">FromResult</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Return <code>null</code> to continue with default error handling</p></div><h3 id="custom-http-errors" tabindex="-1">Custom HTTP Errors <a class="header-anchor" href="#custom-http-errors" aria-hidden="true">#</a></h3><p>In Any Request or Response Filter you can short-circuit the <a href="/order-of-operations.html">Request Pipeline</a> by emitting a Custom HTTP Response and Ending the request, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">this</span><span class="token punctuation">.</span>PreRequestFilters<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>PathInfo<span class="token punctuation">.</span><span class="token function">StartsWith</span><span class="token punctuation">(</span><span class="token string">&quot;/admin&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> 
        <span class="token operator">!</span>req<span class="token punctuation">.</span><span class="token function">GetSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">HasRole</span><span class="token punctuation">(</span><span class="token string">&quot;Admin&quot;</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TryResolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span>StatusCode <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>HttpStatusCode<span class="token punctuation">.</span>Forbidden<span class="token punctuation">;</span>
        res<span class="token punctuation">.</span>StatusDescription <span class="token operator">=</span> <span class="token string">&quot;Requires Admin Role&quot;</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">EndRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Or if you need access to the Request DTO you can use a <a href="/request-and-response-filters.html">Global Request Filter</a> instead, e.g:</p><div class="language-csharp"><pre><code>GlobalRequestFilters<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>dto<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>Verb <span class="token operator">==</span> HttpMethods<span class="token punctuation">.</span>Post <span class="token operator">&amp;&amp;</span> dto <span class="token keyword">is</span> <span class="token class-name">Authenticate</span> authDto 
        <span class="token operator">&amp;&amp;</span> authDto<span class="token punctuation">.</span>provider <span class="token operator">==</span> CredentialsAuthProvider<span class="token punctuation">.</span>Name <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>authDto<span class="token punctuation">.</span>UseTokenCookie<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span>StatusCode <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>HttpStatusCode<span class="token punctuation">.</span>Forbidden<span class="token punctuation">;</span>
        res<span class="token punctuation">.</span>StatusDescription <span class="token operator">=</span> <span class="token string">&quot;Must use stateless JWT Cookies&quot;</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">EndRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>To end the Request in a Custom HttpHandler use <code>res.EndHttpHandlerRequest()</code></p></div><h3 id="fallback-error-pages" tabindex="-1">Fallback Error Pages <a class="header-anchor" href="#fallback-error-pages" aria-hidden="true">#</a></h3><p>Use <code>IAppHost.GlobalHtmlErrorHttpHandler</code> for specifying a <strong>fallback HttpHandler</strong> for all error status codes, e.g.:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>GlobalHtmlErrorHttpHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RazorHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/oops&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For more fine-grained control, use <code>IAppHost.CustomErrorHttpHandlers</code> for specifying custom HttpHandlers to use with specific error status codes, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>CustomErrorHttpHandlers<span class="token punctuation">[</span>HttpStatusCode<span class="token punctuation">.</span>NotFound<span class="token punctuation">]</span> <span class="token operator">=</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SharpPageHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/notfound&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>CustomErrorHttpHandlers<span class="token punctuation">[</span>HttpStatusCode<span class="token punctuation">.</span>Unauthorized<span class="token punctuation">]</span> <span class="token operator">=</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SharpPageHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>CustomErrorHttpHandlers<span class="token punctuation">[</span>HttpStatusCode<span class="token punctuation">.</span>Forbidden<span class="token punctuation">]</span> <span class="token operator">=</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SharpPageHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/forbidden&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Will render the contents of the <code>/notfound.html</code> for 404 NotFound Requests and <code>/login.html</code> page for 401 Unauthorized requests if you&#39;re using static HTML, Single Page Apps or <a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">#Script Pages</a>.</p><p>If you&#39;re using Razor instead you can <code>RazorHandler</code> to render <code>/notfound.cshtml</code> or <code>/login.cshtml</code> ServiceStack Razor pages:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>CustomErrorHttpHandlers<span class="token punctuation">[</span>HttpStatusCode<span class="token punctuation">.</span>NotFound<span class="token punctuation">]</span> <span class="token operator">=</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RazorHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/notfound&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>CustomErrorHttpHandlers<span class="token punctuation">[</span>HttpStatusCode<span class="token punctuation">.</span>Unauthorized<span class="token punctuation">]</span> <span class="token operator">=</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RazorHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>CustomErrorHttpHandlers<span class="token punctuation">[</span>HttpStatusCode<span class="token punctuation">.</span>Forbidden<span class="token punctuation">]</span> <span class="token operator">=</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RazorHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/forbidden&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="register-handlers-for-handling-service-exceptions" tabindex="-1">Register handlers for handling Service Exceptions <a class="header-anchor" href="#register-handlers-for-handling-service-exceptions" aria-hidden="true">#</a></h3><p>ServiceStack and its <a href="/api-design.html">API Design</a> provides a flexible way to intercept exceptions. If you need a single entry point for all service exceptions, you can add a handler to <code>AppHost.ServiceExceptionHandler</code> in <code>Configure</code>. To handle exceptions occurring outside of services you can set the global <code>AppHost.UncaughtExceptionHandlers</code> handler, e.g.:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//Handle Exceptions occurring in Services:</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>ServiceExceptionHandlers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">(</span>httpReq<span class="token punctuation">,</span> request<span class="token punctuation">,</span> exception<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//log your exceptions here</span>
        <span class="token range operator">..</span><span class="token punctuation">.</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//continue with default Error Handling</span>

        <span class="token comment">//or return your own custom response</span>
        <span class="token comment">//return DtoUtils.CreateErrorResponse(request, exception);</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//Handle Unhandled Exceptions occurring outside of Services</span>
    <span class="token comment">//E.g. Exceptions during Request binding or in filters:</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>UncaughtExceptionHandlers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> operationName<span class="token punctuation">,</span> ex<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         res<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Error: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ex<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ex<span class="token punctuation">.</span>Message</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         res<span class="token punctuation">.</span><span class="token function">EndRequest</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">skipHeaders</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="async-exception-handlers" tabindex="-1">Async Exception Handlers <a class="header-anchor" href="#async-exception-handlers" aria-hidden="true">#</a></h4><p>If your handlers need to make any async calls they can use the Async versions instead:</p><div class="language-csharp"><pre><code><span class="token keyword">this</span><span class="token punctuation">.</span>ServiceExceptionHandlersAsync<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>httpReq<span class="token punctuation">,</span> request<span class="token punctuation">,</span> ex<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">LogServiceExceptionAsync</span><span class="token punctuation">(</span>httpReq<span class="token punctuation">,</span> request<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">is</span> <span class="token class-name">UnhandledException</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> ex<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>request <span class="token keyword">is</span> <span class="token class-name">IQueryDb</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> DtoUtils<span class="token punctuation">.</span><span class="token function">CreateErrorResponse</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;AutoQuery request failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>UncaughtExceptionHandlersAsync<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> operationName<span class="token punctuation">,</span> ex<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">WriteAsync</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;UncaughtException &#39;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ex<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">&#39; at &#39;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">req<span class="token punctuation">.</span>PathInfo</span><span class="token punctuation">}</span></span><span class="token string">&#39;&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">EndRequest</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">skipHeaders</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="gatewayexceptionhandlers" tabindex="-1">GatewayExceptionHandlers <a class="header-anchor" href="#gatewayexceptionhandlers" aria-hidden="true">#</a></h3><p>Gateway Exception Handlers provide the same Exception Handling callbacks as ServiceExceptions which you can use to intercept Exceptions from Gateway requests:</p><div class="language-csharp"><pre><code>IAppHost<span class="token punctuation">.</span>GatewayExceptionHandlers
IAppHost<span class="token punctuation">.</span>GatewayExceptionHandlersAsync 
</code></pre></div><p>Gateway Exceptions can also be intercepted in your <code>AppHost</code> by overriding:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">OnGatewayException</span><span class="token punctuation">(</span><span class="token class-name">IRequest</span> httpReq<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">object</span></span> request<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div><h3 id="error-handling-using-a-custom-servicerunner" tabindex="-1">Error handling using a custom ServiceRunner <a class="header-anchor" href="#error-handling-using-a-custom-servicerunner" aria-hidden="true">#</a></h3><p>If you want to provide different error handlers for different actions and services you can just tell ServiceStack to run your services in your own custom <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Web/IServiceRunner.cs" target="_blank" rel="noopener noreferrer">IServiceRunner</a> and implement the <strong>HandleException</strong> event hook in your AppHost:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">IServiceRunner<span class="token punctuation">&lt;</span>TRequest<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">CreateServiceRunner</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TRequest<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
    <span class="token class-name">ActionContext</span> actionContext<span class="token punctuation">)</span>
<span class="token punctuation">{</span>           
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyServiceRunner<span class="token punctuation">&lt;</span>TRequest<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> actionContext<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>Where <strong>MyServiceRunner</strong> is just a custom class implementing the custom hooks you&#39;re interested in, e.g.:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServiceRunner<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ServiceRunner<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span> 
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">MyServiceRunner</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">,</span> <span class="token class-name">ActionContext</span> actionContext<span class="token punctuation">)</span> 
        <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>appHost<span class="token punctuation">,</span> actionContext<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">HandleException</span><span class="token punctuation">(</span><span class="token class-name">IRequest</span> request<span class="token punctuation">,</span> 
        <span class="token class-name">T</span> request<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Called whenever an exception is thrown in your Services Action</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="community-resources" tabindex="-1">Community Resources <a class="header-anchor" href="#community-resources" aria-hidden="true">#</a></h1><ul><li><a href="http://www.philliphaydon.com/2012/03/09/service-stack-exceptions-and-errors/" target="_blank" rel="noopener noreferrer">ServiceStack Exceptions and Errors</a> by <a href="https://twitter.com/philliphaydon" target="_blank" rel="noopener noreferrer">@philliphaydon</a></li></ul>__VP_STATIC_END__`,84),p=[o];function c(r,i,u,l,k,d){return a(),s("div",null,p)}var m=n(e,[["render",c]]);export{g as __pageData,m as default};
