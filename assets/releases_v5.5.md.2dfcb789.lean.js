import{_ as u,o as e,c as o,a,b as n,d as t,u as p,s as h,g,h as m,i as b,j as v,e as s}from"./app.14440598.js";const f={},y=a("<table><thead><tr><th>Order Details</th><th></th></tr></thead><tbody><tr><td>Id</td><td>10643</td></tr><tr><td>Order Date</td><td>1997-08-25</td></tr><tr><td>Customer Id</td><td>ALFKI</td></tr><tr><td>Freight</td><td>29.46</td></tr><tr><td>Employee Id</td><td>6</td></tr><tr><td>Ship Via</td><td>Speedy Express</td></tr><tr><td>Ship Address</td><td>Obere Str. 57</td></tr><tr><td>Ship City</td><td>Berlin</td></tr><tr><td>Ship Postal Code</td><td>12209</td></tr><tr><td>Ship Country</td><td>Germany</td></tr></tbody></table><p>Line Items</p><table><thead><tr><th>#</th><th>Product Name</th><th>Unit Price</th><th>Quantity</th><th>Discount</th></tr></thead><tbody><tr><td>1</td><td>R\xF6ssle Sauerkraut</td><td>$45.60</td><td>15</td><td>0.25</td></tr><tr><td>2</td><td>Chartreuse verte</td><td>$18.00</td><td>21</td><td>0.25</td></tr><tr><td>3</td><td>Spegesild</td><td>$12.00</td><td>2</td><td>0.25</td></tr></tbody></table><table><thead><tr><th>Order Totals</th></tr></thead><tbody><tr><td>$684.00</td></tr><tr><td>$378.00</td></tr><tr><td>$24.00</td></tr></tbody></table>",4),w=[y];function S(c,l,i,r,k,d){return e(),o("div",null,w)}var A=u(f,[["render",S]]);const T={},q=a("<table><thead><tr><th>Query Methods</th><th></th><th>Description</th></tr></thead><tbody><tr><td>formQuery(name)</td><td>-&gt; string</td><td>FormData[name] ?? QueryString[name]</td></tr><tr><td>formQueryValues(name)</td><td>-&gt; string[]</td><td>FormData[name]</td></tr><tr><td>httpParam(name)</td><td>-&gt; string</td><td>Headers[X-name] ?? QueryString[name] ?? FormData[name] ?? Item[name]</td></tr><tr><td>queryString</td><td>-&gt; string</td><td>$&quot;?{QueryString.ToString()}&quot;</td></tr><tr><td>queryDictionary</td><td>-&gt; Dictionary</td><td>QueryString.ToObjectDictionary()</td></tr><tr><td>formDictionary</td><td>-&gt; Dictionary</td><td>FormData.ToObjectDictionary()</td></tr><tr><td>formValue(name)</td><td>-&gt; string</td><td>if (hasError) FormData[name] ?? QueryString[name]</td></tr><tr><td>formValues(name)</td><td>-&gt; string[]</td><td>if (hasError) FormData[name] ?? QueryString[name]</td></tr><tr><td>formCheckValue(name)</td><td>-&gt; bool</td><td>formValue(name) in [ &quot;true&quot;, &quot;t&quot;, &quot;on&quot;, &quot;1&quot; ]</td></tr></tbody></table>",1),C=[q];function x(c,l,i,r,k,d){return e(),o("div",null,C)}var P=u(T,[["render",x]]);const _=a(`__VP_STATIC_START__<h2 id="servicestack-turns-10" tabindex="-1">ServiceStack turns 10! <a class="header-anchor" href="#servicestack-turns-10" aria-hidden="true">#</a></h2><p>Before we get into unpacking this release we&#39;re happy to announce that we&#39;ve now eclipsed <strong>10 years</strong> since our <a href="https://github.com/ServiceStack/ServiceStack/commit/2a9cd0d10247ae1a679ac011d7bdef593937dba4" target="_blank" rel="noopener noreferrer">first commit</a>!</p><p>When you&#39;ve been working on the same piece of code or art work for a long enough time you can look through it as a time lens back to that first commit, the developer you were, the visions, inspiration and motivations you had. Enough years pass that it eclipses a generation, remembering the person you were then and comparing with who you are now, how we grew as developers, as people, with different skills, careers, motivations, perspectives and life priorities.</p><p>As I take this moment to reflect back, it&#39;s reassuring to see that whilst the environments and ecosystems around us have all changed, ServiceStack&#39;s code always stayed true to its time-tested original vision. Whose core focus, Services, still provides the most value and software reuse, whose interface is still your systems most important and regardless of the technology used to implement them, its goals continue to be to make them simple to implement and simple to consume from wherever they&#39;re being called from - realizing their benefits.</p><p>It might be clear now but it wasn&#39;t in the era ServiceStack was created in, where most software was being given the &quot;Enterprise&quot; label and focused on surrounding itself with &quot;Enterprise features&quot;. In Java, Enterprise Java Beans were being marketed as the pinnacle of Enterprise Software development whilst in .NET we were told we needed to use SOAP to in order to develop Web Services - which after experiencing the friction they inflicted in large code-bases first-hand, became the catalyst for starting ServiceStack - a clean, friction-free Services Framework for developing evolving message-based APIs, that even then already shipped with multiple JSON/XML serialization formats and REST/HTTP and SOAP endpoints out-of-the-box, including generic SOAP clients to ease transitions from legacy code bases.</p><h3 id="dto-first-services-on-the-outside" tabindex="-1">DTO-first Services on the outside <a class="header-anchor" href="#dto-first-services-on-the-outside" aria-hidden="true">#</a></h3><p>From the outset ServiceStack embraced and built upon the importance of the <a href="https://martinfowler.com/eaaCatalog/dataTransferObject.html" target="_blank" rel="noopener noreferrer">Data Transfer Object (DTO)</a> and <a href="https://martinfowler.com/eaaCatalog/remoteFacade.html" target="_blank" rel="noopener noreferrer">Remote Facade</a> patterns for the development of its robust coarse-grained, message-based Services, the importance of using Model-first logic-less DTOs for developing well-defined, evolvable, serialization-agnostic Services ensuring they can be consumed in any format, in any language and client - where they utilized the <a href="https://martinfowler.com/eaaCatalog/gateway.html" target="_blank" rel="noopener noreferrer">Gateway pattern</a>, a large part to why ServiceStack Services are so easily consumed from all its reusable generic <a href="/clients-overview.html">Typed Service Clients</a> in <a href="/add-servicestack-reference.html">different languages</a>, all in the same way, where only DTOs are needed to enable its end-to-end Typed APIs.</p><p>Even today, most generated client proxy solutions still generate their clients RPC proxy stubs coupled with their types, creating additional friction whilst limiting its flexibility and reuse.</p><h3 id="clean-architecture-on-the-inside" tabindex="-1">Clean architecture on the inside <a class="header-anchor" href="#clean-architecture-on-the-inside" aria-hidden="true">#</a></h3><p>Instead of WCF&#39;s dependence on complicated configuration and tooling ServiceStack opted for a convention-based configuration-free approach that in addition to adopting a simpler, cleaner more robust approach to develop Services on the outside, also encouraged a cleaner development model on the inside where DTOs only dependency were to <strong>ServiceStack.Interfaces</strong> - a dependency and implementation-free Assembly containing abstractions of all ServiceStack providers. This allowed the decoupling of your Host project containing all your App&#39;s configuration and concrete dependencies with your Services logic which would only bind to substitutable and testable interfaces so your AppHost could freely switch to use different concrete <a href="/caching.html">Caching</a>, <a href="/appsettings.html">Configuration</a> or <a href="/logging.html">Logging providers</a> without impacting your Services implementation which is decoupled from your ServiceModel DTOs, which itself has no concrete dependencies.</p><p>This same time-tested blue-print giving ServiceStack Projects a structured base to build on continues to be our recommended <a href="/physical-project-structure.html">Physical Project Structure</a> that&#39;s adopted from most of our <a href="/templates-overview.html">project templates</a>.</p><p>So what started out as a <a href="http://System.Web" target="_blank" rel="noopener noreferrer">System.Web</a> <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> 3/3.5 code-base 10 years ago has now evolved where its single modular code-base can support running your ServiceStack Services on any of <a href="/why-servicestack.html#multiple-hosting-options">.NET Framework v4.5+ and .NET Core&#39;s most popular Hosts</a> where they&#39;re available in a myriad of <a href="/formats.html">serialization formats</a>, accessible from a <a href="/messaging.html">number of popular MQ Servers</a> and <a href="/soap-support.html">SOAP Endpoints</a> (should you still need to support legacy integrations) whilst the first-class end-to-typed support for <a href="/add-servicestack-reference.html">all popular Mobile and Desktop platforms</a> enables maximum utility and productivity for everyone consuming your Services.</p><h3 id="thank-you" tabindex="-1">Thank You! <a class="header-anchor" href="#thank-you" aria-hidden="true">#</a></h3><p>I&#39;d like to take this milestone to thank our thousands of Customers we&#39;ve had the pleasure to serve and see our Software used which has amassed more than <strong>27,000,000+ total downloads</strong> on NuGet and to see the uptick in adoption of some of our unique features like <a href="/add-servicestack-reference.html">Add ServiceStack Reference</a> which has been used more than <strong>88,000 times</strong> to generate native Typed DTOs amongst its <a href="/add-servicestack-reference.html#supported-languages">8 supported languages</a>.</p><p>It&#39;s rewarding to see value being created with our software and the small part we&#39;ve played in its success, we&#39;re especially grateful to continue serving our long term Customers who&#39;ve supported us since ServiceStack became a permanent full-time effort in 2013 and I look forward to continue working on enhancing the value and provide more first-class integrations around your ServiceStack Services including access to the latest modern development technologies in the simplest and most productive way we can make it, including continuing to develop our own innovations where it can reduce friction or be able to deliver a simpler and more enjoyable experience - many of which we&#39;re happy to introduce to you today.</p><p>And with that we have another jam-packed release with exciting features across the board, if you haven&#39;t got enough time to go through it all today, feel free to jump directly to the features you&#39;re interested in:</p><h1 id="table-of-contents" tabindex="-1">Table of Contents <a class="header-anchor" href="#table-of-contents" aria-hidden="true">#</a></h1><ul><li><a href="#aspnet-core-on-net-framework">ASP.NET Core on .NET Framework</a><ul><li><a href="#aspnet-core---still-our-top-recommendation-for-net-framework">ASP.NET Core - still our top recommendation for .NET Framework</a></li><li><a href="#servicestacks-multi-targeted-packages">ServiceStack&#39;s multi-targeted Packages</a></li><li><a href="#future-proofed-and-continually-developed">Future proofed and continually developed</a></li></ul></li><li><a href="#new-vue-and-react-lite-aspnet-core-templates">New Vue and React &quot;lite&quot; ASP.NET Core Templates</a><ul><li><a href="#introducing-new-lite-npm-free-project-templates">Introducing new &quot;lite&quot; npm-free project templates</a></li><li><a href="#light-on-complexity-big-on-features">Light on Complexity, Big on Features</a></li><li><a href="#vue-lite">vue-lite</a></li><li><a href="#react-lite">react-lite</a></li><li><a href="#development-workflow">Development workflow</a></li><li><a href="#update-typescript-dtos">Update TypeScript DTOs</a></li><li><a href="#integrated-bundling">Integrated Bundling</a><ul><li><a href="#css-bundling">CSS Bundling</a></li><li><a href="#hot-reloading-of-static-resources">Hot Reloading of Static Resources</a></li><li><a href="#javascript-library-bundling">JavaScript Library Bundling</a></li><li><a href="#app-source-code-bundling">App Source Code Bundling</a></li></ul></li><li><a href="#pre-compiled-minified-production-bundles">Pre-compiled minified production bundles</a></li><li><a href="#minified-bundles-with-cache-breakers">Minified bundles with cache breakers</a></li><li><a href="#available-in-razor-helpers">Available in Razor Helpers</a></li><li><a href="#vue-lite-project-template-features">vue-lite Project Template features</a><ul><li><a href="#validation-error-binding">Validation Error Binding</a></li><li><a href="#vue-global-state-management">Vue Global State Management</a></li></ul></li><li><a href="#react-lite-project-template-features">react-lite Project Template features</a></li><li><a href="#react-global-state-management">React Global State Management</a></li><li><a href="#lite-project-structure">&quot;lite&quot; Project Structure</a></li><li><a href="#updating-lite-project-dependencies">Updating &quot;lite&quot; project dependencies</a></li></ul></li><li><a href="#script">#Script!</a><ul><li><a href="#script-fka-servicestack-templates">#Script (fka ServiceStack Templates)</a></li><li><a href="#optimal-for-generating-html-and-live-scripting-environments">Optimal for generating HTML and Live Scripting Environments</a></li><li><a href="#sharp-apps">Sharp Apps</a></li><li><a href="#sharp-apis">Sharp APIs</a></li><li><a href="#sharp-scripts">Sharp Scripts</a><ul><li><a href="#textdump">textDump</a></li><li><a href="#aws-dashboards">AWS Dashboards</a></li><li><a href="#azure-dashboards">Azure Dashboards</a></li></ul></li><li><a href="#live-script-with-web-watch">Live #Script with web watch</a><ul><li><a href="#live-transformations">Live Transformations</a></li></ul></li><li><a href="#usage-in-net">Usage in .NET</a><ul><li><a href="#evaluating-scripts-with-return-values">Evaluating Scripts with return values</a></li><li><a href="#optimized-for-net">Optimized for .NET</a></li><li><a href="#auto-async-io-and-stream-transformations">Auto Async I/O and Stream Transformations</a></li></ul></li><li><a href="#breaking-changes">Breaking Changes</a><ul><li><a href="#servicestackscript-rebrand">ServiceStack.Script rebrand</a></li><li><a href="#migration-to-new-script-apis">Migration to new Script APIs</a></li><li><a href="#request-params-are-no-longer-imported-by-default">Request Params are no longer imported by default</a><ul><li><a href="#importrequestparams">importRequestParams</a></li></ul></li><li><a href="#no-impact-on-page-based-routing">No impact on page based routing</a></li><li><a href="#request-param-methods">Request Param Methods</a></li></ul></li></ul></li><li><a href="#world-validation">World Validation</a><ul><li><a href="#benefits-of-services">Benefits of Services</a></li><li><a href="#api-first-development-model">API First Development Model</a></li><li><a href="#validation-of-all-the-things">Validation from all the things</a></li><li><a href="#server-rendered-html-uis">Server Rendered HTML UIs</a></li><li><a href="#client-html-uis">Client HTML UIs</a></li><li><a href="#shared-error-handling-concepts">Shared Error Handling Concepts</a></li><li><a href="#login-page">Login Page</a></li><li><a href="#contacts-page">Contacts Page</a></li></ul></li><li><a href="#no-touch-host-configuration">&quot;No touch&quot; Host Configuration</a></li><li><a href="#auto-mapping">Auto Mapping</a><ul><li><a href="#register-converters">Register Converters</a></li><li><a href="#ignore-mapping">Ignore Mapping</a></li><li><a href="#support-for-implicit--explicit-type-casts">Support for Implicit / Explicit Type Casts</a></li><li><a href="#powerful-and-capable">Powerful and Capable</a></li></ul></li><li><a href="#page-based-routing-in-razor">Page Based Routing in Razor!</a><ul><li><a href="#consider-pretty-urls-for-public-pages">Consider &quot;pretty-urls&quot; for public pages</a></li><li><a href="#permalinks-important-for-seo-usability-and-refactorability">Permalinks important for SEO, usability and refactorability</a></li><li><a href="#pre-defined-routes-are-optimal-for-machines">Pre-defined Routes are optimal for machines</a></li><li><a href="#optimize-custom-routes-for-humans">Optimize Custom Routes for humans</a></li><li><a href="#designing-clean-urls">Designing Clean URLs</a></li></ul></li><li><a href="#web-tool"><code>web</code> tool</a><ul><li><a href="#addupdate-servicestack-references">Add/Update ServiceStack References</a></li></ul></li><li><a href="#web-new---nets-missing-project-template-system"><code>web new</code> - .NET&#39;s missing project template system</a><ul><li><a href="#github-powered-project-templates">GitHub powered Project Templates</a></li><li><a href="#always-up-to-date">Always up to date</a></li><li><a href="#just-regular-projects">Just regular Projects</a></li><li><a href="#available-project-templates">Available project templates</a></li></ul></li><li><a href="#web----customize-mixmatch-projects-from-gists"><code>web +</code> - customize mix/match projects from gists!</a><ul><li><a href="#usage">Usage</a></li><li><a href="#available-gists">Available Gists</a></li><li><a href="#creating-customized-projects">Creating customized projects</a></li><li><a href="#apply-gist-modifiers">Apply Gist Modifiers</a></li><li><a href="#open-for-gists">Open for Gists!</a></li><li><a href="#apply-adhoc-gists">Apply adhoc Gists</a></li></ul></li><li><a href="#sourcelink-enabled-packages">SourceLink Enabled Packages</a><ul><li><a href="#all-servicestack-github-projects-now-use-ci-nuget-feed">All ServiceStack GitHub projects now use CI NuGet feed</a></li></ul></li><li><a href="#authentication">Authentication</a><ul><li><a href="#community-auth-providers">Community Auth Providers</a></li><li><a href="#aspnet-core-identity-auth-provider">ASP.NET Core Identity Auth Provider</a></li><li><a href="#use-existing-attributes">Use existing Attributes</a></li></ul></li><li><a href="#using-servicestack-auth-in-mvc">Using ServiceStack Auth in MVC</a><ul><li><a href="#defaults-to-mvc-auth-redirect-conventions">Defaults to MVC Auth Redirect Conventions</a></li></ul></li><li><a href="#using-aspnet-identity-auth-in-servicestack">Using ASP.NET Identity Auth in ServiceStack</a><ul><li><a href="#mapping-customizations">Mapping Customizations</a></li><li><a href="#custom-mappings">Custom Mappings</a></li><li><a href="#built-in-identity-db-apis">Built-in Identity DB APIs</a></li><li><a href="#propagating-extended-user-info">Propagating Extended User Info</a></li></ul></li><li><a href="#using-identityserver4-auth-in-servicestack">Using IdentityServer4 Auth in ServiceStack</a><ul><li><a href="#physical-project-structure">Physical Project Structure</a></li><li><a href="#identityserver">IdentityServer</a></li><li><a href="#app">App</a></li><li><a href="#delegated-auth-pages">Delegated Auth Pages</a></li><li><a href="#api">API</a></li></ul></li><li><a href="#servicestack">ServiceStack</a><ul><li><a href="#new-auth-providers">New Auth Providers</a></li><li><a href="#microsoft-graph-auth-provider">Microsoft Graph Auth Provider</a><ul><li><a href="#microsoft-graph-savephoto">Microsoft Graph SavePhoto</a></li></ul></li><li><a href="#new-claim-apis">New Claim APIs</a></li><li><a href="#iserviceprovider-request-extensions">IServiceProvider Request Extensions</a></li><li><a href="#enable-same-site-cookies">Enable Same Site Cookies</a></li><li><a href="#cookie-filters">Cookie Filters</a></li><li><a href="#secure-cookies-enabled-by-default">Secure Cookies enabled by default</a></li><li><a href="#override-authorization-http-header">Override Authorization HTTP Header</a></li><li><a href="#get-authenticate-requests-are-disabled-by-default">GET Authenticate Requests are disabled by default</a></li><li><a href="#usersession-validation">UserSession validation</a></li><li><a href="#intercept-service-requests">Intercept Service Requests</a></li><li><a href="#fluent-validation">Fluent Validation</a></li><li><a href="#auto-batching">Auto Batching</a></li><li><a href="#hot-reload">Hot Reload</a><ul><li><a href="#hot-reload-sharp-pages">Hot Reload #Script Pages</a></li><li><a href="#hot-reload-static-files">Hot Reload Static Files</a></li></ul></li><li><a href="#image-utils">Image Utils</a></li><li><a href="#enum-utils">Enum Utils</a></li></ul></li><li><a href="#open-api-feature">Open API Feature</a><ul><li><a href="#customizable-security-definitions">Customizable Security Definitions</a></li><li><a href="#customize-swaggerui">Customize SwaggerUI</a></li></ul></li><li><a href="#disable-auto-html-pages">Disable Auto HTML Pages</a></li><li><a href="#typescript">TypeScript</a><ul><li><a href="#partial-constructors">Partial Constructors</a></li><li><a href="#defaultimports">DefaultImports</a></li></ul></li><li><a href="#messaging">Messaging</a><ul><li><a href="#background-mq-stats">Background MQ Stats</a></li><li><a href="#aws-sqs-server">Aws SQS Server</a><ul><li><a href="#intercepting-filters">Intercepting Filters</a></li><li><a href="#polling-duration">Polling Duration</a></li></ul></li></ul></li><li><a href="#ormlite">OrmLite</a><ul><li><a href="#insert-into-select">INSERT INTO SELECT</a></li><li><a href="#postgresql-rich-data-types">PostgreSQL Rich Data Types</a></li><li><a href="#hstore-support">Hstore support</a></li><li><a href="#json-data-types">JSON data types</a></li><li><a href="#new-keyvaluepairkv-top-level-apis">New KeyValuePair&lt;K,V&gt; top-level APIs</a></li><li><a href="#select-constant-expressions">SELECT Constant Expressions</a></li><li><a href="#select-distinct-in-selectmulti">SELECT DISTINCT in SelectMulti</a></li><li><a href="#new-tablealias-replaces-joinalias">New TableAlias replaces JoinAlias</a></li><li><a href="#gettablenames-and-gettablenameswithrowcounts-apis">GetTableNames and GetTableNamesWithRowCounts APIs</a></li><li><a href="#dapper-updated">Dapper updated</a></li><li><a href="#db-scripts-can-open-different-connections">DB Scripts can open different connections</a></li></ul></li><li><a href="#redis">Redis</a></li><li><a href="#servicestacktext">ServiceStack.Text</a></li><li><a href="#servicestackazure">ServiceStack.Azure</a></li></ul><h2 id="asp-net-core-on-net-framework" tabindex="-1"><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core on .NET Framework <a class="header-anchor" href="#asp-net-core-on-net-framework" aria-hidden="true">#</a></h2><p>Another important announcement that occurred since our last release was Microsoft&#39;s announcement that it would stop supporting <a href="https://github.com/aspnet/AspNetCore/issues/3753" target="_blank" rel="noopener noreferrer">new versions of ASP.NET Core on the .NET Framework</a>. Whilst we strongly disagreed against this decision which would&#39;ve put out a large class of the existing ecosystems from participating in the new <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core development model and many from staged migrations to .NET Core from commencing, we&#39;re happy to see <a href="https://github.com/aspnet/AspNetCore/issues/3753#issuecomment-438046364" target="_blank" rel="noopener noreferrer">ASP.NET Core 2.1 LTS will enjoy the same indefinite level of support</a> as the rest of the .NET Framework - which should come as great news to the 1/3 of our Customers who are still creating new <a href="https://github.com/NetFrameworkCoreTemplates" target="_blank" rel="noopener noreferrer">ASP.NET Core on FX Project Templates</a>.</p><p>Whilst this announcement sends a clear message that new development on .NET Framework has effectively been put on product life support, <strong><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core 2.1 LTS</strong> is still a great rock-solid platform to build on if you&#39;re unable to jump directly to <strong>.NET Core</strong> immediately or if you want to get off .NET Core&#39;s major version release train and build upon a stable LTS platform.</p><h3 id="asp-net-core-still-our-top-recommendation-for-net-framework" tabindex="-1"><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core - still our top recommendation for .NET Framework <a class="header-anchor" href="#asp-net-core-still-our-top-recommendation-for-net-framework" aria-hidden="true">#</a></h3><p>If you need to stay on the .NET Framework, we&#39;d still recommend using the newer <strong><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core 2.1</strong> over classic <strong><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> <a href="http://System.Web" target="_blank" rel="noopener noreferrer">System.Web</a></strong> projects as it&#39;s cleaner, lighter, more flexible and future proof. Unlike Microsoft web frameworks, ServiceStack is a <strong>single code-base</strong> which supports running on <a href="/why-servicestack.html#multiple-hosting-options">multiple platforms</a> so your ServiceStack Services can enjoy near perfect source-code compatibility when and if you choose to <strong>move to .NET Core</strong> in future.</p><p>So whilst Microsoft is stopping new development of <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core on .NET Framework, we&#39;re not, our supported packages have standardized to multi-target both <strong>.NET v4.5+</strong> and <strong>.NET Standard 2.0</strong> which is supported natively on <strong><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core 2.1</strong>.</p><h3 id="servicestack-s-multi-targeted-packages" tabindex="-1">ServiceStack&#39;s multi-targeted Packages <a class="header-anchor" href="#servicestack-s-multi-targeted-packages" aria-hidden="true">#</a></h3><p>We&#39;ve opted early on to shun classic <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> providers and use our own clean <a href="/caching.html">Session, Caching</a>, <a href="/appsettings.html">Configuration</a>, <a href="/logging.html">Logging</a> providers all of which automatically support <strong>.NET Standard 2.0</strong> given they&#39;re clean library implementations without .NET Framework-only dependencies.</p><p>The only features which we can&#39;t offer <strong>.NET Standard 2.0</strong> builds for are when they referenced external packages which don&#39;t offer .NET Standard 2.0 builds, the major examples being:</p><ol><li><a href="https://www.nuget.org/packages/ServiceStack.Authentication.OAuth2/" target="_blank" rel="noopener noreferrer">ServiceStack.Authentication.OAuth2</a> which depends on <strong>DotNetOpenAuth</strong>, of which we&#39;ve <a href="#new-auth-providers">rewritten the last remaining popular OAuth providers</a> in this release to not have any dependencies and</li><li><a href="http://razor.servicestack.net/" target="_blank" rel="noopener noreferrer">ServiceStack.Razor</a> which depends on the .NET Framework <strong>Microsoft.AspNet.Razor</strong> which we&#39;ve <a href="/netcore-razor.html">rewritten on top of ASP.NET Core MVC</a> that in this release gained features that eclipses the .NET Framework implementation with the exciting new <a href="#page-based-routing-in-razor">Page-based routing</a> feature.</li></ol><h3 id="future-proofed-and-continually-developed" tabindex="-1">Future proofed and continually developed <a class="header-anchor" href="#future-proofed-and-continually-developed" aria-hidden="true">#</a></h3><p>But otherwise all our own home-grown innovations like <a href="https://sharpscript.net" target="_blank" rel="noopener noreferrer">#Script</a> (fka ServiceStack Templates) naturally support .NET Framework and .NET Core and runs everywhere ServiceStack does including within <a href="https://sharpscript.net/docs/mvc-netcore" target="_blank" rel="noopener noreferrer">classic ASP.NET MVC Controllers</a> which wasn&#39;t a design goal but was a natural consequence of developing clean libraries without external dependencies or reliance on external tooling.</p><p>This is to say that <strong><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core 2.1 LTS</strong> is still a fantastic rock-solid platform to run your .NET Framework workloads when you need to which will continue to receive enhancements and new features with each ServiceStack release courtesy of being derived from the same shared code-base which will enable seamless migrations to .NET Core should you wish to in future.</p><h4 id="subpar-experiences" tabindex="-1">Subpar experiences <a class="header-anchor" href="#subpar-experiences" aria-hidden="true">#</a></h4><p>It&#39;s not always a friction-free experience as there have been frequent reports of runtime Assembly binding issues which are not always correctly handled by NuGet package installs and may require manual binding redirects, in general upgrading to the latest .NET Framework will mitigate these issues.</p><p>Also you&#39;ll miss out on some niceties like the <a href="https://www.nuget.org/packages/Microsoft.AspNetCore.App" target="_blank" rel="noopener noreferrer">Microsoft.AspNetCore.App</a> meta-package reference, as a result we recommend starting from one of our <a href="https://github.com/NetFrameworkCoreTemplates" target="_blank" rel="noopener noreferrer">ASP.NET Core Framework project Templates</a> which contains all the individual package references needed to get started which we&#39;ve expanded in this release to include a couple of exciting new project templates...</p><h2 id="new-vue-and-react-lite-asp-net-core-templates" tabindex="-1">New Vue and React &quot;lite&quot; <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Templates <a class="header-anchor" href="#new-vue-and-react-lite-asp-net-core-templates" aria-hidden="true">#</a></h2><p>Developing Single Page Apps can often feel like a compromise, on the one hand premier JS frameworks like <a href="https://vuejs.org" target="_blank" rel="noopener noreferrer">Vue</a> and <a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer">React</a> have offered unprecedented simplicity and elegance in developing rich and reactive Single Page Apps on the Web, on the other hand you have to <a href="https://twitter.com/dylanbeattie/status/1098204272653676544" target="_blank" rel="noopener noreferrer">start from</a>:</p><p><a href="https://twitter.com/dylanbeattie/status/1098204272653676544" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/spa/create-react-app.png" alt=""></a></p><p>This is the result of <a href="https://www.davidhaney.io/npm-left-pad-have-we-forgotten-how-to-program/" target="_blank" rel="noopener noreferrer">npm&#39;s culture for hyper modularization into micro modules</a> where often these dependencies only contain a single function, in some cases something as simple as checking if a number is positive is an npm package all by itself with a <a href="https://github.com/tjmehta/is-positive-integer/blob/fa2b3a816ee176b33ed84433145030a4512c9cd7/index.js" target="_blank" rel="noopener noreferrer">single function requiring 3 additional dependencies</a>.</p><p>Regardless of the <a href="http://codetunnel.com/why-i-think-micro-packages-are-a-good-thing/" target="_blank" rel="noopener noreferrer">reasons touted for micro modules</a>, they have many negative side-effects where each of these dependencies opens a possible vector making your project susceptible to breaking changes, potential vulnerabilities or potentially malicious code if any of the packages in your dependency tree becomes compromised by a bad actor. The resulting matrix of dependencies often requires you to use complicated tools like Webpack to manage them, which itself can grow to accumulate bespoke complex configuration to manage your projects builds which can quickly become obsolete with each new major Webpack version.</p><p>There are also packages that have shunned this trend like <a href="https://github.com/Microsoft/TypeScript" target="_blank" rel="noopener noreferrer">typescript</a> - a wonderfully capable Typed superset of JavaScript that assists in maintaining new class of large-scale code-bases - a clear counter that you can maintain large, high quality code bases and build highly functional and capable libraries without micro modules.</p><h2 id="introducing-new-lite-npm-free-project-templates" tabindex="-1">Introducing new &quot;lite&quot; npm-free project templates <a class="header-anchor" href="#introducing-new-lite-npm-free-project-templates" aria-hidden="true">#</a></h2><p>The question we keep asking ourselves is how can ServiceStack make modern Web Development simpler, the natural choice was to provide pre-configured <a href="/templates-single-page-apps.html">Webpack-powered SPA Project Templates</a> - bringing the recommended SPA development model for all popular SPA frameworks to .NET, which we&#39;ve been doing successfully and seamlessly integrated with ServiceStack for years.</p><p>However the next leap in simplicity wont be coming from adding additional tooling to manage the complexity, it will be from removing the underlying complexity entirely. Fortunately one of the targets all premier SPA frameworks offer are encapsulated UMD packages so they can be referenced as a single include in online IDE&#39;s like <a href="https://codepen.io" target="_blank" rel="noopener noreferrer">codepen.io</a> but also for simple Web Apps that want to gradually adopt these frameworks but want to avoid the complexity of maintaining an npm build system.</p><p>These UMD packages lets us return back to the simple era of web development where we can go back to referencing libraries using simple script includes - which is the strategy embraced in ServiceStack&#39;s new &quot;lite&quot; project templates.</p><h3 id="light-on-complexity-big-on-features" tabindex="-1">Light on Complexity, Big on Features <a class="header-anchor" href="#light-on-complexity-big-on-features" aria-hidden="true">#</a></h3><p>Surprisingly whilst we&#39;re able to rid ourselves of the complexity of maintaining an npm-based build system, we&#39;re still able to enjoy many of the features that make SPA development with Webpack a joy:</p><ul><li>Integrated hot-reloading</li><li>Advanced JavaScript language features <ul><li>Continue developing with same componentized development model as done when using Webpack</li><li>Future proofed to use optimal ES6 source code</li></ul></li><li>TypeScript with runtime type-checking verification and auto-complete <ul><li>Incremental compilation</li><li>TypeScript declarations are included for all default packages</li></ul></li><li>Smart, effortless bundling and minification <ul><li>Optimal unminified during development and minified for production</li><li>No reliance on external tooling necessary, but can use same bundling configuration in website <code>_layout.html</code> if pre-compilation is preferred</li></ul></li></ul><p>Essentially the &quot;lite&quot; templates goal are to provide the richest suite of functionality possible with the least amount of complexity. TypeScript was adopted because it runs as a non-invasive global tool with no dependencies that enables us to take advantage of the latest JavaScript language features to be able to develop in modern JavaScript without compromises, in the same source code as a fully-fledged npm webpack build system, should you wish to upgrade to one in future.</p><h2 id="install" tabindex="-1">Install <a class="header-anchor" href="#install" aria-hidden="true">#</a></h2><p>All ServiceStack Project Templates can now be created with our <code>web</code> (or <code>app</code>) .NET Core tool:</p><pre><code>$ dotnet tool install -g web
</code></pre><p>If you previously had an existing <code>web</code> tool installed, update it to the latest version with:</p><pre><code>$ dotnet tool update -g web
</code></pre><h3 id="vue-lite" tabindex="-1">vue-lite <a class="header-anchor" href="#vue-lite" aria-hidden="true">#</a></h3><p><a href="https://github.com/NetCoreTemplates/vue-lite" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/vue-lite.png" alt=""></a></p><p>Browse <a href="https://github.com/NetCoreTemplates/vue-lite" target="_blank" rel="noopener noreferrer">source code</a>, view <a href="http://vue-lite.web-templates.io" target="_blank" rel="noopener noreferrer">vue-lite.web-templates.io</a> live demo and install for <strong>.NET Core</strong> with:</p><pre><code>$ web new vue-lite ProjectName
</code></pre><p>Alternatively you can create an <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core 2.1 LTS project on <strong>.NET Framework</strong> with:</p><pre><code>$ web new vue-lite-corefx ProjectName
</code></pre><h3 id="react-lite" tabindex="-1">react-lite <a class="header-anchor" href="#react-lite" aria-hidden="true">#</a></h3><p><a href="https://github.com/NetCoreTemplates/react-lite" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/react-lite.png" alt=""></a></p><p>Browse <a href="https://github.com/NetCoreTemplates/react-lite" target="_blank" rel="noopener noreferrer">source code</a>, view <a href="http://react-lite.web-templates.io" target="_blank" rel="noopener noreferrer">react-lite.web-templates.io</a> live demo and install for <strong>.NET Core</strong> with:</p><pre><code>$ web new react-lite ProjectName
</code></pre><p>Alternatively you can create an <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core 2.1 LTS project on <strong>.NET Framework</strong> with:</p><pre><code>$ web new react-lite-corefx ProjectName
</code></pre><h3 id="development-workflow" tabindex="-1">Development workflow <a class="header-anchor" href="#development-workflow" aria-hidden="true">#</a></h3><p>All that&#39;s needed for client development is to run TypeScript in &quot;watch&quot; mode:</p><pre><code>$ tsc -w
</code></pre><p>Which monitors any changes to any <code>.ts</code> files and incrementally compiles their <code>.js</code> files on save. ServiceStack&#39;s built-in <a href="/templates-single-page-apps.html#optimal-dev-workflow-with-hot-reloading">static files</a> hot-reloading detects changes to any <code>.js</code> files and automatically reloads the page.</p><p>For Server C# development, start your .NET Web App in a new Terminal window with:</p><pre><code>$ dotnet watch run
</code></pre><blockquote><p>Using <code>watch run</code> will monitor changes to <code>C#</code> source files and automatically re-builds and restarts the Server.</p></blockquote><h3 id="update-typescript-dtos" tabindex="-1">Update TypeScript DTOs <a class="header-anchor" href="#update-typescript-dtos" aria-hidden="true">#</a></h3><p>After changing your ServiceStack Services, you can re-generate their <a href="/typescript-add-servicestack-reference.html">Typed TypeScript DTOs</a> with:</p><pre><code>$ web ts
</code></pre><p>Which will recursively update and re-generate all <code>*dto.ts</code> in the current and sub directories.</p><h3 id="integrated-bundling" tabindex="-1">Integrated Bundling <a class="header-anchor" href="#integrated-bundling" aria-hidden="true">#</a></h3><p>The way to eliminate needing a build and module system comes down to including dependencies in dependent order which is where ServiceStack&#39;s new bundling APIs help with. We&#39;ll walk through the <a href="#vue-lite">vue-lite</a> to see how this is easily done.</p><p>All the bundling logic for all <code>.css</code> and <code>.js</code> resources are contained within the <code>_layout.html</code> page below:</p><h4 id="wwwroot-layout-html" tabindex="-1"><a href="https://github.com/NetCoreTemplates/vue-lite/blob/master/wwwroot/_layout.html" target="_blank" rel="noopener noreferrer">/wwwroot/_layout.html</a> <a class="header-anchor" href="#wwwroot-layout-html" aria-hidden="true">#</a></h4>__VP_STATIC_END__`,80),I=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"DOCTYPE"),s(),n("span",{class:"token variable"},"html"),n("span",{class:"token punctuation"},">"),s(`
`),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"html"),s(),n("span",{class:"token variable"},"lang"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"en"'),n("span",{class:"token punctuation"},">"),s(`
`),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"head"),n("span",{class:"token punctuation"},">"),s(`
    `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"meta"),s(),n("span",{class:"token variable"},"charset"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"UTF-8"'),n("span",{class:"token punctuation"},">"),s(`
    `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"meta"),s(),n("span",{class:"token variable"},"name"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"viewport"'),s(),n("span",{class:"token variable"},"content"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"width=device-width, initial-scale=1.0"'),n("span",{class:"token punctuation"},">"),s(`
    `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"meta"),s(),n("span",{class:"token variable"},"http-equiv"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"X-UA-Compatible"'),s(),n("span",{class:"token variable"},"content"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"ie=edge"'),n("span",{class:"token punctuation"},">"),s(`
    `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"title"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"title"),s(),n("span",{class:"token variable"},"??"),s(),n("span",{class:"token string"},"'MyApp'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"title"),n("span",{class:"token punctuation"},">"),s(`
    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"debug"),s(),n("span",{class:"token variable"},"?"),s(),n("span",{class:"token string"},"''"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'.min'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"assignTo"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"min"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'/assets/css/'"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleCss"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"css"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"css"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"head"),n("span",{class:"token punctuation"},">"),s(`
`),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"body"),n("span",{class:"token punctuation"},">"),s(`
    `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"i"),s(),n("span",{class:"token variable"},"hidden"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token string"},"'/js/hot-fileloader.js'"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"ifDebugIncludeScript"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"i"),n("span",{class:"token punctuation"},">"),s(`

    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"page"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),s(`
        `),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"dist"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue-router"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"dist"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue-router$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'/lib/vue-class-component/vue-class-component.js'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'/lib/vue-property-decorator/vue-property-decorator.umd.js'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'/lib/@servicestack/client/servicestack-client.umd.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleJs"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"script"),n("span",{class:"token punctuation"},">"),s(`
        `),n("span",{class:"token variable"},"var"),s(),n("span",{class:"token variable"},"ALIASES"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token string"},"'vue'"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"default"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"Vue"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token string"},"'vue-router'"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"default"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"VueRouter"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token string"},"'vue-class-component'"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"VueClassComponent"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token variable"},"window"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"exports"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token variable"},"window"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"require"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token variable"},"function"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"name"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token variable"},"return"),s(),n("span",{class:"token variable"},"ALIASES"),n("span",{class:"token brackets"},[n("span",{class:"token punctuation"},"["),n("span",{class:"token variable"},"name"),n("span",{class:"token punctuation"},"]")]),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"exports"),n("span",{class:"token brackets"},[n("span",{class:"token punctuation"},"["),n("span",{class:"token variable"},"name"),n("span",{class:"token punctuation"},"]")]),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"window"),n("span",{class:"token brackets"},[n("span",{class:"token punctuation"},"["),n("span",{class:"token variable"},"name"),n("span",{class:"token punctuation"},"]")]),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"exports"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"script"),n("span",{class:"token punctuation"},">"),s(`

    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),s(`
        `),n("span",{class:"token string"},"'content:/src/components/'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'content:/src/shared/'"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},"'content:/src/'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleJs"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"scripts"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"raw"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"body"),n("span",{class:"token punctuation"},">"),s(`
`),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"html"),n("span",{class:"token punctuation"},">"),s(`
`)])])])],-1),R=a('',4),N=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"debug"),s(),n("span",{class:"token variable"},"?"),s(),n("span",{class:"token string"},"''"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'.min'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"assignTo"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"min"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'/assets/css/'"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleCss"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"css"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"css"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),E=a('',7),j=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token string"},"'/assets/css/default.css'"),n("span",{class:"token punctuation"},","),s(` 
    `),n("span",{class:"token string"},"'/assets/css/'"),s(`
   `),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleCss"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),D=n("h4",{id:"hot-reloading-of-static-resources",tabindex:"-1"},[s("Hot Reloading of Static Resources "),n("a",{class:"header-anchor",href:"#hot-reloading-of-static-resources","aria-hidden":"true"},"#")],-1),M=n("p",null,[s("The script below enables "),n("a",{href:"#hot-reload"},"hot-reloading"),s(" during development:")],-1),U=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"i"),s(),n("span",{class:"token variable"},"hidden"),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token string"},"'/js/hot-fileloader.js'"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"ifDebugIncludeScript"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"i"),n("span",{class:"token punctuation"},">"),s(`
`)])])])],-1),F=a(`__VP_STATIC_START__<p>Where it will automatically reload the page if it detects any modifications to any <code>.html</code>, <code>.js</code> or <code>.css</code> files, <a href="https://github.com/NetCoreTemplates/vue-lite/blob/fb56cff8d704f7a066242b4f90708f92a58dbaab/Startup.cs#L63" target="_blank" rel="noopener noreferrer">Configured with</a>:</p><div class="language-csharp"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>Config<span class="token punctuation">.</span>DebugMode<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HotReloadFeature</span> <span class="token punctuation">{</span>
        DefaultPattern <span class="token operator">=</span> <span class="token string">&quot;*.html;*.js;*.css&quot;</span><span class="token punctuation">,</span>
        VirtualFiles <span class="token operator">=</span> VirtualFiles <span class="token comment">// Monitor ContentRoot to detect changes in /src</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>page</code> placeholder is where the page will be rendered inside the Layout template:</p>__VP_STATIC_END__`,3),V=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),n("span",{class:"token variable"},"page"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),H=n("h4",{id:"javascript-library-bundling",tabindex:"-1"},[s("JavaScript Library Bundling "),n("a",{class:"header-anchor",href:"#javascript-library-bundling","aria-hidden":"true"},"#")],-1),O=n("p",null,[s("The layout creates 2 JavaScript bundles, the first containing all 3rd Party libraries used in the App which is written to "),n("code",null,"/js/lib.bundle{.min}.js"),s(" using the same bundling options as the "),n("code",null,"bundleCss"),s(" above:")],-1),L=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"dist"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue-router"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"dist"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue-router$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'/lib/vue-class-component/vue-class-component.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'/lib/vue-property-decorator/vue-property-decorator.umd.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'/lib/@servicestack/client/servicestack-client.umd.js'"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleJs"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),W=a(`__VP_STATIC_START__<h4 id="register-umd-module-mappings" tabindex="-1">Register UMD Module Mappings <a class="header-anchor" href="#register-umd-module-mappings" aria-hidden="true">#</a></h4><p>After importing the libraries we need to make the globals registered by the UMD dependencies available under the module name they are imported from. When they don&#39;t match they need to be explicitly registered in the <code>ALIASES</code> object:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> <span class="token constant">ALIASES</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&#39;vue&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> Vue <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&#39;vue-router&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> VueRouter <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&#39;vue-class-component&#39;</span><span class="token operator">:</span> VueClassComponent
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">require</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">ALIASES</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> exports<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> window<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> exports<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Since <code>Vue</code> is imported as a <code>default</code> import:</p><div class="language-ts"><pre><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
</code></pre></div><p>It&#39;s expected for <code>require(&quot;vue&quot;).default</code> to return the module <a href="https://github.com/NetCoreTemplates/vue-lite/blob/master/wwwroot/lib/vue/dist/vue.js#L9" target="_blank" rel="noopener noreferrer">assigned to the Vue global</a>:</p><div class="language-js"><pre><code><span class="token punctuation">(</span>global <span class="token operator">=</span> global <span class="token operator">||</span> self<span class="token punctuation">,</span> global<span class="token punctuation">.</span>Vue <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Dependencies like <a href="https://github.com/NetCoreTemplates/vue-lite/blob/fb56cff8d704f7a066242b4f90708f92a58dbaab/wwwroot/lib/vue-property-decorator/vue-property-decorator.umd.js#L4" target="_blank" rel="noopener noreferrer">vue-property-decorator.umd.js</a> and <a href="https://github.com/NetCoreTemplates/vue-lite/blob/fb56cff8d704f7a066242b4f90708f92a58dbaab/wwwroot/lib/%40servicestack/client/servicestack-client.umd.js#L17" target="_blank" rel="noopener noreferrer">servicestack-client.umd.js</a> that already register themselves under their expected <code>&quot;vue-property-decorator&quot;</code> and <code>&quot;@servicestack/client&quot;</code> module names don&#39;t need any manual mappings.</p><h4 id="app-source-code-bundling" tabindex="-1">App Source Code Bundling <a class="header-anchor" href="#app-source-code-bundling" aria-hidden="true">#</a></h4><p>The last js bundle created is your App&#39;s source code which also needs to be imported in dependent order, both <a href="https://github.com/NetCoreTemplates/vue-lite" target="_blank" rel="noopener noreferrer">vue-lite</a> and <a href="https://github.com/NetCoreTemplates/react-lite" target="_blank" rel="noopener noreferrer">react-lite</a> project templates share the same structure so their bundle configuration is identical where <a href="https://github.com/NetCoreTemplates/vue-lite/tree/master/src/components" target="_blank" rel="noopener noreferrer">/src/components</a> contains each page defined as a separate component, the <a href="https://github.com/NetCoreTemplates/vue-lite/tree/master/src/shared" target="_blank" rel="noopener noreferrer">/src/shared</a> contains any shared functionality used by the different components whilst the base <a href="https://github.com/NetCoreTemplates/vue-lite/tree/master/src" target="_blank" rel="noopener noreferrer">/src</a> folder contains your App&#39;s entry point:</p>__VP_STATIC_END__`,10),G=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token string"},"'content:/src/components/'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'content:/src/shared/'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'content:/src/'"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleJs"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),B=a('',5),z=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"scripts"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"raw"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),$=n("h3",{id:"pre-compiled-minified-production-bundles",tabindex:"-1"},[s("Pre-compiled minified production bundles "),n("a",{class:"header-anchor",href:"#pre-compiled-minified-production-bundles","aria-hidden":"true"},"#")],-1),J=n("p",null,[s("Whilst not required you can copy the "),n("strong",null,"exact same bundling configuration"),s(" in your "),n("code",null,"_layout.html"),s(" above into a separate "),n("a",{href:"https://github.com/NetCoreTemplates/vue-lite/blob/master/wwwroot/_bundle.ss",target:"_blank",rel:"noopener noreferrer"},"/wwwroot/_bundle.ss"),s(" script:")],-1),Q=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token variable"},"run"),s(),n("span",{class:"token variable"},"in"),s(),n("span",{class:"token variable"},"host"),s(),n("span",{class:"token variable"},"project"),s(),n("span",{class:"token variable"},"directory"),s(),n("span",{class:"token variable"},"with"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"web"),s(),n("span",{class:"token variable"},"run"),s(),n("span",{class:"token variable"},"wwwroot"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"_bundle"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"ss"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"*"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token boolean"},"false"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"assignTo"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"debug"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"debug"),s(),n("span",{class:"token variable"},"?"),s(),n("span",{class:"token string"},"''"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'.min'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"assignTo"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"min"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token brackets"},[n("span",{class:"token punctuation"},"["),n("span",{class:"token variable"},"`/css/bundle${min}.css`,`/js/lib.bundle${min}.js`,`/js/bundle${min}.js`"),n("span",{class:"token punctuation"},"]")]),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"map"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"fileDelete"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"end"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token variable"},"Copy"),s(),n("span",{class:"token variable"},"same"),s(),n("span",{class:"token variable"},"bundle"),s(),n("span",{class:"token variable"},"definitions"),s(),n("span",{class:"token variable"},"from"),s(),n("span",{class:"token variable"},"_layout"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"html"),s(),n("span",{class:"token variable"},"as-is"),s(),n("span",{class:"token punctuation"},"*"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'/assets/css/'"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleCss"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"css"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"css"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"dist"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue-router"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"dist"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue-router$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'/lib/vue-class-component/vue-class-component.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'/lib/vue-property-decorator/vue-property-decorator.umd.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'/lib/@servicestack/client/servicestack-client.umd.js'"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleJs"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token string"},"'content:/src/components/'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'content:/src/shared/'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'content:/src/'"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleJs"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),K=a(`__VP_STATIC_START__<p>Then run it with:</p><pre><code>$ web run wwwroot/_bundle.ss
</code></pre><p>Which will create the production bundles, minify all already non-minified bundles and write them to disk with the paths written visible in the <code>#Script</code> <strong>_bundle.ss</strong> output:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/css/bundle.min.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/lib.bundle.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/bundle.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The bundles created by running <code>_bundle.ss</code> generates more advanced compression courtesy of the <code>web</code> tool&#39;s use of <a href="https://github.com/xoofx/NUglify" target="_blank" rel="noopener noreferrer">NUglify&#39;s</a> smarter and more advanced JS, CSS and HTML minifers.</p><p>If you encounter any issues you can revert back to using ServiceStack&#39;s built-in <code>JSMin</code> and <code>CssMinifier</code> implementations by adding these script arguments at the top of your <code>_bundle.css</code> script:</p><div class="language-html"><pre><code><span class="token comment">&lt;!--
jsMinifier  ServiceStack
cssMinifier ServiceStack
--&gt;</span>
</code></pre></div><h3 id="minified-bundles-with-cache-breakers" tabindex="-1">Minified bundles with cache breakers <a class="header-anchor" href="#minified-bundles-with-cache-breakers" aria-hidden="true">#</a></h3><p>Cache Breaker support is available by with the <code>[hash]</code> placeholder, which we only want to include in minified bundles. In this case we need to perform a file pattern search to find and delete any existing generated bundles:</p>__VP_STATIC_END__`,9),Y=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token variable"},"run"),s(),n("span",{class:"token variable"},"in"),s(),n("span",{class:"token variable"},"host"),s(),n("span",{class:"token variable"},"project"),s(),n("span",{class:"token variable"},"directory"),s(),n("span",{class:"token variable"},"with"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"web"),s(),n("span",{class:"token variable"},"run"),s(),n("span",{class:"token variable"},"wwwroot"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"_bundle"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"ss"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"*"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token boolean"},"false"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"assignTo"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"debug"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"debug"),s(),n("span",{class:"token variable"},"?"),s(),n("span",{class:"token string"},"''"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'[hash].min'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"assignTo"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"min"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token brackets"},[n("span",{class:"token punctuation"},"["),n("span",{class:"token variable"},"`/css/bundle${min}.css`,`/js/lib.bundle${min}.js`,`/js/bundle${min}.js`"),n("span",{class:"token punctuation"},"]")]),s(` 
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"map"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"filesFind"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"replace"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'[hash]'"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'.*'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"flatten"),s(`
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"map"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"fileDelete"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"VirtualPath"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"end"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token variable"},"Copy"),s(),n("span",{class:"token variable"},"same"),s(),n("span",{class:"token variable"},"bundle"),s(),n("span",{class:"token variable"},"definitions"),s(),n("span",{class:"token variable"},"from"),s(),n("span",{class:"token variable"},"_layout"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"html"),s(),n("span",{class:"token variable"},"as-is"),s(),n("span",{class:"token punctuation"},"*"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'/assets/css/'"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleCss"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"css"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"css"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"dist"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue-router"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"dist"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"vue-router$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'/lib/vue-class-component/vue-class-component.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'/lib/vue-property-decorator/vue-property-decorator.umd.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'/lib/@servicestack/client/servicestack-client.umd.js'"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleJs"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),s(`
    `),n("span",{class:"token string"},"'content:/src/components/'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'content:/src/shared/'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"'content:/src/'"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleJs"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),X=a(`__VP_STATIC_START__<p>Running the <code>_bundle.css</code> script again will then output minified bundles with cache breakers:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/css/bundle.1549858174979.min.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/lib.bundle.155190192923.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/js/bundle.1551907971028.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>When using <code>[hash]</code> cache breakers the bundle APIs will use any existing generated bundles it finds, so you&#39;ll need to ensure that any older minified assets are removed (as done in the above script).</p><h3 id="available-in-razor-helpers" tabindex="-1">Available in Razor Helpers <a class="header-anchor" href="#available-in-razor-helpers" aria-hidden="true">#</a></h3><p>The same <code>Html.BundleJs()</code>, <code>Html.BundleCss()</code> and <code>Html.BundleHtml()</code> bundling implementations as above have also been available in ServiceStack Razor where it can be used like:</p><div class="language-csharp"><pre><code>@Html<span class="token punctuation">.</span><span class="token function">BundleJs</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">BundleOptions</span> <span class="token punctuation">{</span>
    Sources <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;content:/src/components/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;content:/src/shared/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;content:/src/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Minify <span class="token operator">=</span> <span class="token operator">!</span>DebugMode<span class="token punctuation">,</span>
    Cache <span class="token operator">=</span> <span class="token operator">!</span>DebugMode<span class="token punctuation">,</span>
    SaveToDisk <span class="token operator">=</span> <span class="token operator">!</span>DebugMode<span class="token punctuation">,</span>
    OutputTo <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;/js/bundle</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">min</span><span class="token punctuation">}</span></span><span class="token string">.js&quot;</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="vue-lite-project-template-features" tabindex="-1">vue-lite Project Template features <a class="header-anchor" href="#vue-lite-project-template-features" aria-hidden="true">#</a></h3><p><strong>vue-lite</strong> comes pre-configured with a lot of the functionality needed in most Single Page Apps including client-side routing in <a href="https://github.com/NetCoreTemplates/vue-lite/blob/master/src/shared/router.ts" target="_blank" rel="noopener noreferrer">/shared/router.ts</a> and <a href="https://github.com/NetCoreTemplates/vue-lite/blob/master/src/components/SignIn.ts" target="_blank" rel="noopener noreferrer">Sign In</a> and <a href="https://github.com/NetCoreTemplates/vue-lite/blob/master/src/components/SignUp.ts" target="_blank" rel="noopener noreferrer">Registration</a> pages, both of which are integrated with ServiceStack&#39;s declarative form validation and auto-binding.</p><h4 id="form-validation-example" tabindex="-1">Form Validation Example <a class="header-anchor" href="#form-validation-example" aria-hidden="true">#</a></h4><p>The <a href="https://github.com/NetCoreTemplates/vue-lite/blob/master/src/components/SignUp.ts" target="_blank" rel="noopener noreferrer">Sign Up</a> Page shows a typical example of auto-form validation with ServiceStack which can be developed using clean declarative markup:</p><div class="language-html"><pre><code>@Component({ template: 
    \`<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Register New User<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@submit.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ error:responseStatus, loading }<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ErrorSummary</span> <span class="token attr-name">except</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>displayName,email,password,confirmPassword<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:responseStatus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>responseStatus<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>displayName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>displayName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Display Name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:responseStatus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>responseStatus<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:responseStatus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>responseStatus<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:responseStatus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>responseStatus<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>confirmPassword<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>confirmPassword<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:responseStatus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>responseStatus<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CheckBox</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>autoLogin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>autoLogin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:responseStatus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>responseStatus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    Auto Login
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CheckBox</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-lg btn-primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Register<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pt-3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>Quick Populate:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pt-1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-outline-info btn-sm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:void(0)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>newUser(<span class="token punctuation">&#39;</span>new@user.com<span class="token punctuation">&#39;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>new@user.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\`
})
</code></pre></div><p>Which renders into the following Bootstrap Form UI:</p><p><a href="http://vue-lite.web-templates.io/signup" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/spa/vue-lite-registration.png" alt=""></a></p><p>All custom controls used are defined in <a href="https://github.com/NetCoreTemplates/vue-lite/blob/master/src/shared/controls.ts" target="_blank" rel="noopener noreferrer">/shared/controls.ts</a> which encapsulate the label and input controls and their validation error bindings within reusable Vue components.</p><h3 id="validation-error-binding" tabindex="-1">Validation Error Binding <a class="header-anchor" href="#validation-error-binding" aria-hidden="true">#</a></h3><p>All validation errors are sourced from the Component&#39;s <code>this.responseStatus</code> reactive property, populated by any Exception&#39;s thrown when using the <a href="/typescript-add-servicestack-reference.html#typescript-serviceclient">ServiceStack&#39;s TypeScript JsonServiceClient</a> which in this case is used to Register the user by sending the <code>Register</code> Request DTO generated in <a href="https://github.com/NetCoreTemplates/vue-lite/blob/master/src/shared/dtos.ts" target="_blank" rel="noopener noreferrer">/shared/dtos.ts</a>:</p><div class="language-ts"><pre><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SignUp</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
    displayName <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
    email <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
    password <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
    confirmPassword <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
    autoLogin <span class="token operator">=</span> <span class="token boolean">true</span>
    loading <span class="token operator">=</span> <span class="token boolean">false</span>
    responseStatus <span class="token operator">=</span> <span class="token keyword">null</span>

    <span class="token keyword">async</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>responseStatus <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

            <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Register</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                displayName<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>displayName<span class="token punctuation">,</span>
                email<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>email<span class="token punctuation">,</span>
                password<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password<span class="token punctuation">,</span>
                confirmPassword<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>confirmPassword<span class="token punctuation">,</span>
                autoLogin<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>autoLogin<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token keyword">await</span> <span class="token function">checkAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>responseStatus <span class="token operator">=</span> e<span class="token punctuation">.</span>responseStatus <span class="token operator">||</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">newUser</span><span class="token punctuation">(</span>email<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> names <span class="token operator">=</span> email<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;@&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>displayName <span class="token operator">=</span> <span class="token function">toPascalCase</span><span class="token punctuation">(</span>names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token function">toPascalCase</span><span class="token punctuation">(</span><span class="token function">splitOnFirst</span><span class="token punctuation">(</span>names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>confirmPassword <span class="token operator">=</span> <span class="token string">&#39;p@55wOrd&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is all it takes to render any server validation errors against their respective fields which we can test by submitting an empty form:</p><p><a href="http://vue-lite.web-templates.io/signup" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/spa/vue-lite-registration-validation.png" alt=""></a></p><h3 id="vue-global-state-management" tabindex="-1">Vue Global State Management <a class="header-anchor" href="#vue-global-state-management" aria-hidden="true">#</a></h3><p>Instead of immediately reaching for <a href="https://vuex.vuejs.org" target="_blank" rel="noopener noreferrer">Vuex</a>, we&#39;ve kept the templates &quot;lite&quot; by leveraging existing functionality built into the core libraries. So for global state management we&#39;re using a global <code>Vue</code> instance as a pub/sub <code>EventBus</code> that our decoupled components use to update global state and listen for events.</p><p>This is used by <code>checkAuth</code> to post an empty <code>Authenticate</code> DTO to ServiceStack to check if the user is still authenticated on the server, which depending if they&#39;re Authenticated will either returns basic session info or fails with a <code>401</code> error response, which the pub/sub event listeners use to update global its state:</p><div class="language-ts"><pre><code><span class="token keyword">export</span> <span class="token keyword">const</span> store<span class="token operator">:</span>Store <span class="token operator">=</span> <span class="token punctuation">{</span>
    isAuthenticated<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    userSession<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">EventBus</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
    store <span class="token operator">=</span> store
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventBus</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token operator">:</span> store <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&#39;signin&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>userSession<span class="token operator">:</span>AuthenticateResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    bus<span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span> <span class="token string">&#39;isAuthenticated&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bus<span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span> <span class="token string">&#39;userSession&#39;</span><span class="token punctuation">,</span> userSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">checkAuth</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;signin&#39;</span><span class="token punctuation">,</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Authenticate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;signout&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="react-lite-project-template-features" tabindex="-1">react-lite Project Template features <a class="header-anchor" href="#react-lite-project-template-features" aria-hidden="true">#</a></h3><p>The <a href="https://github.com/NetCoreTemplates/react-lite" target="_blank" rel="noopener noreferrer">react-lite</a> template is functionality equivalent to <strong>vue-lite</strong> but created using the latest React features. For client-side routing we use React Router&#39;s declarative markup defined in <a href="https://github.com/NetCoreTemplates/react-lite/blob/master/src/main.tsx" target="_blank" rel="noopener noreferrer">main.tsx</a>.</p><p>All components are written as Functional Components and makes use of <a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener noreferrer">React&#39;s new Hooks functionality</a> which enable functional components to retain local state. Just like <strong>vue-lite</strong> all high-level controls are encapsulated into reusable functional components defined in <a href="https://github.com/NetCoreTemplates/react-lite/blob/master/src/shared/controls.tsx" target="_blank" rel="noopener noreferrer">/shared/controls.tsx</a> which ends up retaining similar markup as <strong>vue-lite</strong> despite their completely different implementations:</p><div class="language-tsx"><pre><code><span class="token keyword">export</span> <span class="token keyword">const</span> SignUpImpl<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">SFC</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> history <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>StateContext<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>responseStatus<span class="token punctuation">,</span> setResponseStatus<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token punctuation">[</span>displayName<span class="token punctuation">,</span> setDisplayName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>email<span class="token punctuation">,</span> setEmail<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>password<span class="token punctuation">,</span> setPassword<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>confirmPassword<span class="token punctuation">,</span> setConfirmPassword<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>autoLogin<span class="token punctuation">,</span> setAutoLogin<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">newUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">email<span class="token operator">:</span>string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> names <span class="token operator">=</span> email<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;@&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setDisplayName</span><span class="token punctuation">(</span><span class="token function">toPascalCase</span><span class="token punctuation">(</span>names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token function">toPascalCase</span><span class="token punctuation">(</span><span class="token function">splitOnFirst</span><span class="token punctuation">(</span>names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&#39;p@55wOrd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setConfirmPassword</span><span class="token punctuation">(</span><span class="token string">&#39;p@55wOrd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> <span class="token function-variable function">submit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setResponseStatus</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Register</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                displayName<span class="token punctuation">,</span>
                email<span class="token punctuation">,</span>
                password<span class="token punctuation">,</span>
                confirmPassword<span class="token punctuation">,</span>
                autoLogin<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token keyword">await</span> <span class="token function">checkAuth</span><span class="token punctuation">(</span>dispatch<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">(</span>history <span class="token keyword">as</span> History<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setResponseStatus</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>responseStatus <span class="token operator">||</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Register New User</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classNames</span><span class="token punctuation">(</span><span class="token punctuation">{</span>error<span class="token operator">:</span>responseStatus<span class="token punctuation">,</span> loading<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> 
              <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">await</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ErrorSummary</span></span> <span class="token attr-name">responseStatus</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>responseStatus<span class="token punctuation">}</span></span> <span class="token attr-name">except</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;displayName,email,password,confirmPassword&#39;</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>displayName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>displayName<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setDisplayName<span class="token punctuation">}</span></span> <span class="token attr-name">responseStatus</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>responseStatus<span class="token punctuation">}</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Display Name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>email<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setEmail<span class="token punctuation">}</span></span> <span class="token attr-name">responseStatus</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>responseStatus<span class="token punctuation">}</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Email<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>password<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setPassword<span class="token punctuation">}</span></span> <span class="token attr-name">responseStatus</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>responseStatus<span class="token punctuation">}</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Password<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>confirmPassword<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>confirmPassword<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setConfirmPassword<span class="token punctuation">}</span></span> <span class="token attr-name">responseStatus</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>responseStatus<span class="token punctuation">}</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Confirm<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CheckBox</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>autoLogin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">checked</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>autoLogin<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setAutoLogin<span class="token punctuation">}</span></span> <span class="token attr-name">responseStatus</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>responseStatus<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    Auto Login
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CheckBox</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-lg btn-primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Register</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pt-3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Quick Populate:</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pt-1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-outline-info btn-sm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:void(0)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">newUser</span><span class="token punctuation">(</span><span class="token string">&#39;new@user.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">new@user.com</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> SignUp <span class="token operator">=</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>SignUpImpl<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Which renders the same Bootstrap form UI:</p><p><a href="http://react-lite.web-templates.io/signup" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/spa/react-lite-registration.png" alt=""></a></p><p>Despite React and Vue&#39;s stylistic differences the ServiceStack integration remains the same where the populated <code>Register</code> Request DTO in <a href="https://github.com/NetCoreTemplates/react-lite/blob/master/src/shared/dtos.ts" target="_blank" rel="noopener noreferrer">/shared/dtos.ts</a> is used to register the User with any failures used to populate the <code>responseStatus</code> local state where it&#39;s reactively referenced in all Input components to render field validation errors against their targeted control:</p><p><a href="http://react-lite.web-templates.io/signup" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/spa/react-lite-registration-validation.png" alt=""></a></p><h3 id="react-global-state-management" tabindex="-1">React Global State Management <a class="header-anchor" href="#react-global-state-management" aria-hidden="true">#</a></h3><p>Likewise with global state management we&#39;ve leveraged existing functionality instead of depending on an external state library like Redux or MobX.</p><p>Instead <strong>react-lite</strong> use React&#39;s new <code>useReducer</code> hook within a global <code>StateContext</code> which is made available to all components using <a href="https://reactjs.org/docs/context.html" target="_blank" rel="noopener noreferrer">React&#39;s Context</a> where they&#39;re used to dispatch actions that mutate global state:</p><div class="language-tsx"><pre><code><span class="token keyword">const</span> initialState<span class="token operator">:</span> State <span class="token operator">=</span> <span class="token punctuation">{</span>
  isAuthenticated<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  userSession<span class="token operator">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token operator">:</span>State<span class="token punctuation">,</span> action<span class="token operator">:</span>Action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">&#39;signin&#39;</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> isAuthenticated<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> userSession<span class="token operator">:</span>action<span class="token punctuation">.</span>data <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">&#39;signout&#39;</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> isAuthenticated<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> userSession<span class="token operator">:</span><span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> StateContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Context<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">StateProvider</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span>any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">StateContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span> <span class="token punctuation">{</span> state<span class="token punctuation">,</span> dispatch <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">StateContext.Provider</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Dispatch</span> <span class="token operator">=</span> React<span class="token punctuation">.</span>Dispatch<span class="token operator">&lt;</span>Action<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">checkAuth</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">dispatch<span class="token operator">:</span>Dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&#39;signin&#39;</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Authenticate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&#39;signout&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="lite-project-structure" tabindex="-1">&quot;lite&quot; Project Structure <a class="header-anchor" href="#lite-project-structure" aria-hidden="true">#</a></h3><p>Unlike most other project templates which follow our <a href="/physical-project-structure.html">Recommended Physical Project Structure</a>, the &quot;lite&quot; project templates are all within a single project as it&#39;s more suitable for smaller projects and can be developed using lightweight IDE&#39;s like VS Code which doesn&#39;t work well with multi-project solutions.</p><p>So what would&#39;ve been separate projects are being maintained separate folders:</p><ul><li><a href="https://github.com/NetCoreTemplates/vue-lite/tree/master/ServiceInterface" target="_blank" rel="noopener noreferrer">ServiceInterface/</a></li><li><a href="https://github.com/NetCoreTemplates/vue-lite/tree/master/ServiceModel" target="_blank" rel="noopener noreferrer">ServiceModel/</a></li></ul><p>Where they still retain the same source code and namespaces and can be easily be moved out into a different project when wanting to upgrade to a multi-project solution.</p><h3 id="updating-lite-project-dependencies" tabindex="-1">Updating &quot;lite&quot; project dependencies <a class="header-anchor" href="#updating-lite-project-dependencies" aria-hidden="true">#</a></h3><p>We&#39;ve also enabled a novel approach for updating your &quot;lite&quot; project 3rd Party dependencies where instead of everyone maintaining their own bespoke configuration and a tool like <strong>libman</strong> for updating their local dependencies, <strong>vue-lite</strong> projects can just run:</p><pre><code>$ web +vue-lite-lib
</code></pre><p>To update their <strong>vue-lite</strong> projects with the latest JS libraries and TypeScript definitions used in the default project template.</p><p>For <strong>react-lite</strong> projects, run:</p><pre><code>$ web +react-lite-lib
</code></pre><p>We&#39;ll cover how this works in more detail when we announce our <a href="#web-tool"><code>web</code> tool&#39;s</a> new capabilities below.</p><h3 id="empty-memoryvirtualfiles-now-registered-in-virtualfilesources" tabindex="-1">Empty MemoryVirtualFiles now registered in VirtualFileSources <a class="header-anchor" href="#empty-memoryvirtualfiles-now-registered-in-virtualfilesources" aria-hidden="true">#</a></h3><p>To enable <strong>shadowing</strong> of the <code>WebRoot</code> cascading Virtual File Sources, an empty <code>MemoryVirtualFiles</code> has been added to <code>InsertVirtualFileSources</code> by default where it gets inserted at the start of <code>VirtualFileSources</code>, i.e:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AppHost</span> <span class="token punctuation">{</span>
    InsertVirtualFileSources <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MemoryVirtualFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>If needed, the individual Memory and FileSystem VFS providers in the WebRoot VFS Sources can be accessed with:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> memFs <span class="token operator">=</span> appHost<span class="token punctuation">.</span>VirtualFileSources<span class="token punctuation">.</span><span class="token function">GetMemoryVirtualFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> diskFs <span class="token operator">=</span> appHost<span class="token punctuation">.</span>VirtualFileSources<span class="token punctuation">.</span><span class="token function">GetFileSystemVirtualFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Which are also available from the <code>HostContext</code> singleton:</p><ul><li><code>HostContext.MemoryVirtualFiles</code> - <strong>WebRoot</strong> MemoryVirtualFiles</li><li><code>HostContext.FileSystemVirtualFiles</code> - <strong>WebRoot</strong> FileSystem</li></ul><p>The <strong>WebRoot</strong> Directory and <strong>ContentRoot</strong> Directories are also available from:</p><ul><li><code>HostContext.RootDirectory</code> - <strong>WebRoot</strong> <code>wwwroot/</code></li><li><code>HostContext.ContentRootDirectory</code> - <strong>ContentRoot</strong> <code>/</code></li></ul><h2 id="script" tabindex="-1">#Script! <a class="header-anchor" href="#script" aria-hidden="true">#</a></h2><p><a href="https://sharpscript.net" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/sharpscript/logo.png" alt=""></a></p><h2 align="center"><a href="https://sharpscript.net">sharpscript.net</a></h2><h3 id="script-fka-servicestack-templates" tabindex="-1"><code>#Script</code> (fka ServiceStack Templates) <a class="header-anchor" href="#script-fka-servicestack-templates" aria-hidden="true">#</a></h3><p>As we continue enhancing ServiceStack&#39;s scripting support with exciting new features, it no longer made sense to call our dynamic scripting language &quot;Templates&quot; which is just one of the many use-cases <code>#Script</code> enables.</p><p><a href="https://sharpscript.net" target="_blank" rel="noopener noreferrer">#Script</a> is typical of a popular dynamic template language you&#39;d find in other platforms, using the ubiquitously familiar mix of <a href="https://sharpscript.net/docs/expression-viewer" target="_blank" rel="noopener noreferrer">JavaScript Expressions</a> which for increased wrist-friendly readability can be easily composed together using the Unix <code>|</code> operator as embraced by <a href="https://vuejs.org/v2/guide/syntax.html#header" target="_blank" rel="noopener noreferrer">Vue.js filters</a> and <a href="https://angular.io/guide/template-syntax#template-expression-operators" target="_blank" rel="noopener noreferrer">Angular&#39;s Template Expressions</a> whist the <a href="https://sharpscript.net/docs/blocks" target="_blank" rel="noopener noreferrer">Script Statement Blocks</a> adopt the universally adopted Handlebars-like syntax that&#39;s ideal for rendering dynamic pages.</p><p><code>#Script</code> is contained within the pure <code>ServiceStack.Common</code> library that as it doesn&#39;t require any compilation or reliance on any external build tools is embeddable within any <strong>.NET v4.5</strong> or <strong>.NET Standard 2.0</strong> App, even within Environments that don&#39;t allow <code>Reflection.Emit</code> thanks to the cascading implementations of <a href="/reflection-utils.html">Reflection Utils</a>.</p><p><code>#Script</code> is also completely customizable where all the <strong>script methods</strong> and <strong>blocks</strong> can easily be removed or shadowed and replaced to create your own DSL language. Alternatively you can use its <a href="/js-utils.html#evaluating-javascript-expressions">AST parsing APIs</a> directly to create, parse and evaluate ASTs from free-form JavaScript expressions.</p><h3 id="optimal-for-generating-html-and-live-scripting-environments" tabindex="-1">Optimal for generating HTML and Live Scripting Environments <a class="header-anchor" href="#optimal-for-generating-html-and-live-scripting-environments" aria-hidden="true">#</a></h3><p>We&#39;re staunch proponents for using typed languages like C# for developing compiler-checked server software but we prefer using dynamic languages for creating UIs which are typically constantly changing, single purpose &quot;end-user scripts&quot; where we believe it&#39;s more valuable to have a flexible and highly iterative and productive workflow than be confronted with the friction and delays imposed by a static type system - that&#39;s especially cumbersome in text generation tasks like dynamic HTML pages. We see this as the main reason why innovative Reactive UI frameworks like React and Vue don&#39;t work well translated in C# where the friction and boilerplate imposed by conforming to static and generic typed structures inhibits the productivity and fast iteration that dynamic languages enjoy.</p><h4 id="unrestricted-flexibility" tabindex="-1">Unrestricted flexibility <a class="header-anchor" href="#unrestricted-flexibility" aria-hidden="true">#</a></h4><p>The flexibility, extensibility, expendability of <code>#Script</code> ensures we can use it anywhere, e.g. the same UI logic and controls we use to render dynamic HTML pages can also be re-used inside Services to render Emails and run in stand-alone scripts. It also becomes trivial to unit test any partial fragments and functionality in isolation where the <code>ScriptContext</code> can easily be re-created and any functionality simulated.</p><p>As <code>#Script</code> is not shackled to external tooling or constrained by MVC Razor conventions it&#39;s unrestricted with which features and capabilities we can add to <code>#Script</code> - where it&#39;s already being used to power a number of exciting scenarios.</p><h3 id="sharp-apps" tabindex="-1">Sharp Apps <a class="header-anchor" href="#sharp-apps" aria-hidden="true">#</a></h3><p>In our last release we can see how we can use <code>#Script</code> to build <a href="https://sharpscript.net/docs/sharp-apps" target="_blank" rel="noopener noreferrer">Sharp Apps</a> in real-time:</p>__VP_STATIC_END__`,71),Z=n("iframe",{width:"896",height:"525",src:"https://www.youtube.com/embed/Cf-vstYXrmY",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,-1),nn=n("h3",{id:"sharp-apis",tabindex:"-1"},[s("Sharp APIs "),n("a",{class:"header-anchor",href:"#sharp-apis","aria-hidden":"true"},"#")],-1),sn=n("p",null,[n("code",null,"#Script"),s(" is also the fastest way to create APIs in .NET, which can also be created in real-time without compilation where you can use page based routing to define your API at "),n("a",{href:"https://github.com/sharp-apps/Blog/blob/master/hello/_name/index.html",target:"_blank",rel:"noopener noreferrer"},"/hello/_name/index.html"),s(" (or "),n("code",null,"/hello/_name.html"),s(") that just returns a JS object literal:")],-1),an=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"result"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"Hello"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"name"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"return"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),tn=a(`__VP_STATIC_START__<p>Which returns the same JSON wire-format as the equivalent ServiceStack Service:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/hello/{Name}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReturn<span class="token punctuation">&lt;</span>HelloResponse<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloResponse</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Result <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">Hello</span> request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HelloResponse</span> <span class="token punctuation">{</span> Result <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">request<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">!&quot;</span></span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which also supports standard HTTP Content Negotiation available in all registered Content Types:</p><ul><li><a href="http://blog.web-app.io/hello/World?format=html" target="_blank" rel="noopener noreferrer">/hello/World?format=html</a></li><li><a href="http://blog.web-app.io/hello/World?format=json" target="_blank" rel="noopener noreferrer">/hello/World?format=json</a></li><li><a href="http://blog.web-app.io/hello/World?format=xml" target="_blank" rel="noopener noreferrer">/hello/World?format=xml</a></li><li><a href="http://blog.web-app.io/hello/World?format=csv" target="_blank" rel="noopener noreferrer">/hello/World?format=csv</a></li><li><a href="http://blog.web-app.io/hello/World?format=jsv" target="_blank" rel="noopener noreferrer">/hello/World?format=jsv</a></li></ul><blockquote><p>Note: as Sharp APIs are untyped they don&#39;t benefit from ServiceStack&#39;s metadata features around its Typed Services</p></blockquote><h3 id="sharp-scripts" tabindex="-1">Sharp Scripts <a class="header-anchor" href="#sharp-scripts" aria-hidden="true">#</a></h3><p>In addition to being a versatile utility tool belt, our <code>web</code> (and <code>app</code>) .NET Core tools also serve as a <code>#Script</code> runner. We&#39;ve seen a glimpse of this with <a href="#pre-compiled-minified-production-bundles">_bundle.ss script above</a> which is run with <code>web run {script}</code>:</p><pre><code>$ web run wwwroot/_bundle.ss
</code></pre><p><strong><a href="https://sharpscript.net/docs/sharp-scripts" target="_blank" rel="noopener noreferrer">Sharp Scripts</a></strong> are <strong>run in the same context</strong> and have access to the same functionality and features as a <a href="https://sharpscript.net/docs/sharp-apps" target="_blank" rel="noopener noreferrer">Sharp App</a> including extensibility va <a href="https://sharpscript.net/docs/sharp-apps#plugins" target="_blank" rel="noopener noreferrer">custom plugins</a>. They can run <strong>stand-alone</strong> independent of an <a href="https://sharpscript.net/docs/sharp-apps#ideal-for-web-designers-and-content-authors" target="_blank" rel="noopener noreferrer">app.settings</a> config file, instead the app settings configuration can be added in its page arguments to enable or configure any features.</p><p>Lets go through a couple of different possibilities we can do with scripts:</p><h3 id="adhoc-reports" tabindex="-1">Adhoc reports <a class="header-anchor" href="#adhoc-reports" aria-hidden="true">#</a></h3><p>Scripts can use the built-in <a href="https://sharpscript.net/docs/db-scripts" target="_blank" rel="noopener noreferrer">Database Scripts</a> to be able to <a href="https://sharpscript.net/docs/sharp-apps#multi-platform-configurations" target="_blank" rel="noopener noreferrer">run queries against any</a> <code>sqlite</code>, <code>sqlserver</code>, <code>mysql</code> and <code>postgres</code> database and quickly view data snapshots using the built-in <a href="https://sharpscript.net/docs/html-scripts#htmldump" target="_blank" rel="noopener noreferrer">HTML Scripts</a>, e.g:</p>__VP_STATIC_END__`,12),en=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"--"),s(`
`),n("span",{class:"token variable"},"db"),s(),n("span",{class:"token variable"},"sqlite"),s(`
`),n("span",{class:"token variable"},"db"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"connection"),s(),n("span",{class:"token punctuation"},"~"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"apps"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"northwind"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"sqlite"),s(`
`),n("span",{class:"token variable"},"--"),n("span",{class:"token punctuation"},">"),s(`

`),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"link"),s(),n("span",{class:"token variable"},"rel"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"stylesheet"'),s(),n("span",{class:"token variable"},"href"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"'),n("span",{class:"token punctuation"},">"),s(`
`),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"style"),n("span",{class:"token punctuation"},">"),n("span",{class:"token variable"},"body"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"padding"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"1"),n("span",{class:"token variable"},"em"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"caption-side"),n("span",{class:"token punctuation"},":"),n("span",{class:"token variable"},"top"),n("span",{class:"token punctuation"},";"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"style"),n("span",{class:"token punctuation"},">"),s(`
`),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"h1"),s(),n("span",{class:"token variable"},"class"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"py-2"'),n("span",{class:"token punctuation"},">"),n("span",{class:"token variable"},"Order"),s(),n("span",{class:"token variable"},"Report"),s(),n("span",{class:"token punctuation"},"#"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"id"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"h1"),n("span",{class:"token punctuation"},">"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"SELECT"),s(),n("span",{class:"token variable"},"o"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"OrderDate"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"CustomerId"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Freight"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"e"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),s(),n("span",{class:"token variable"},"as"),s(),n("span",{class:"token variable"},"EmployeeId"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"s"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"CompanyName"),s(),n("span",{class:"token variable"},"as"),s(),n("span",{class:"token variable"},"ShipVia"),n("span",{class:"token punctuation"},","),s(` 
           `),n("span",{class:"token variable"},"ShipAddress"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"ShipCity"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"ShipPostalCode"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"ShipCountry"),s(`
      `),n("span",{class:"token variable"},"FROM"),s(),n("span",{class:"token string"},'"Order"'),s(),n("span",{class:"token variable"},"o"),s(`
           `),n("span",{class:"token variable"},"INNER"),s(),n("span",{class:"token variable"},"JOIN"),s(`
           `),n("span",{class:"token variable"},"Employee"),s(),n("span",{class:"token variable"},"e"),s(),n("span",{class:"token variable"},"ON"),s(),n("span",{class:"token variable"},"o"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"EmployeeId"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token variable"},"e"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),s(`
           `),n("span",{class:"token variable"},"INNER"),s(),n("span",{class:"token variable"},"JOIN"),s(`
           `),n("span",{class:"token variable"},"Shipper"),s(),n("span",{class:"token variable"},"s"),s(),n("span",{class:"token variable"},"ON"),s(),n("span",{class:"token variable"},"o"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"ShipVia"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token variable"},"s"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),s(`
     `),n("span",{class:"token variable"},"WHERE"),s(),n("span",{class:"token variable"},"o"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"@"),n("span",{class:"token variable"},"id"),n("span",{class:"token punctuation"},"`"),s(` 
  `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbSingle"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"id"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"assignTo"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"order"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"with"),s(),n("span",{class:"token variable"},"order"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token string"},'"table table-striped"'),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"assignTo"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"className"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"style"),n("span",{class:"token punctuation"},">"),n("span",{class:"token variable"},"table"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"border"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token number"},"5"),n("span",{class:"token variable"},"px"),s(),n("span",{class:"token variable"},"solid"),s(),n("span",{class:"token variable"},"transparent"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token variable"},"th"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"white-space"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"nowrap"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"style"),n("span",{class:"token punctuation"},">"),s(`
  
  `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"div"),s(),n("span",{class:"token variable"},"style"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"display:flex"'),n("span",{class:"token punctuation"},">"),s(`
      `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"order"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"htmlDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'Order Details'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"className"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"SELECT"),s(),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token variable"},"FROM"),s(),n("span",{class:"token variable"},"Customer"),s(),n("span",{class:"token variable"},"WHERE"),s(),n("span",{class:"token variable"},"Id"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"@"),n("span",{class:"token variable"},"CustomerId"),n("span",{class:"token punctuation"},"`"),s(` 
         `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbSingle"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"CustomerId"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"htmlDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"Customer"),s(),n("span",{class:"token variable"},"Details"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"className"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"SELECT"),s(),n("span",{class:"token variable"},"Id"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"LastName"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"FirstName"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Title"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"City"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Country"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Extension"),s(),n("span",{class:"token variable"},"FROM"),s(),n("span",{class:"token variable"},"Employee"),s(),n("span",{class:"token variable"},"WHERE"),s(),n("span",{class:"token variable"},"Id"),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"@"),n("span",{class:"token variable"},"EmployeeId"),n("span",{class:"token punctuation"},"`"),s(` 
         `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbSingle"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"EmployeeId"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"htmlDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"Employee"),s(),n("span",{class:"token variable"},"Details"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"className"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"div"),n("span",{class:"token punctuation"},">"),s(`

  `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"SELECT"),s(),n("span",{class:"token variable"},"p"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"ProductName"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"sqlCurrency"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"od.UnitPrice"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token variable"},"UnitPrice"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Quantity"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Discount"),s(`
        `),n("span",{class:"token variable"},"FROM"),s(),n("span",{class:"token variable"},"OrderDetail"),s(),n("span",{class:"token variable"},"od"),s(`
             `),n("span",{class:"token variable"},"INNER"),s(),n("span",{class:"token variable"},"JOIN"),s(`
             `),n("span",{class:"token variable"},"Product"),s(),n("span",{class:"token variable"},"p"),s(),n("span",{class:"token variable"},"ON"),s(),n("span",{class:"token variable"},"od"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"ProductId"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token variable"},"p"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),s(`
       `),n("span",{class:"token variable"},"WHERE"),s(),n("span",{class:"token variable"},"OrderId"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"@"),n("span",{class:"token variable"},"id"),n("span",{class:"token punctuation"},"`"),s(`
      `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbSelect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"id"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(` 
      `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"htmlDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},'"Line Items"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"className"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"else"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"There"),s(),n("span",{class:"token variable"},"is"),s(),n("span",{class:"token variable"},"no"),s(),n("span",{class:"token variable"},"Order"),s(),n("span",{class:"token variable"},"with"),s(),n("span",{class:"token variable"},"id"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"id"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"with"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),on=a(`__VP_STATIC_START__<h4 id="specifying-script-arguments" tabindex="-1">Specifying Script Arguments <a class="header-anchor" href="#specifying-script-arguments" aria-hidden="true">#</a></h4><p>The above script generates a static HTML page can be invoked with <strong>any number of named arguments</strong> after the script name, in this case it generates a report for Northwind Order <strong>#10643</strong>, saves it to <code>10643.html</code> and opens it in the OS&#39;s default browser:</p><div class="language-"><pre><code>    $ web run script.html -id 10643 &gt; 10643.html &amp;&amp; start 10643.html
</code></pre></div><p>Which looks like:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/sharpscript/10643.html.png" alt=""></p><h3 id="textdump" tabindex="-1">textDump <a class="header-anchor" href="#textdump" aria-hidden="true">#</a></h3><p>Generating static <code>.html</code> pages can quickly produce reports that looks good enough to share with others, but if you just want to see a snapshot info at a glance or be able to share in text-based mediums like email or chat channels you can replace <code>htmlDump</code> with <code>textDump</code> where it will instead output GitHub flavored Markdown tables, e.g:</p>__VP_STATIC_END__`,7),pn=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"--"),s(`
`),n("span",{class:"token variable"},"db"),s(),n("span",{class:"token variable"},"sqlite"),s(`
`),n("span",{class:"token variable"},"db"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"connection"),s(),n("span",{class:"token punctuation"},"~"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"apps"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"northwind"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"sqlite"),s(`
`),n("span",{class:"token variable"},"--"),n("span",{class:"token punctuation"},">"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"SELECT"),s(),n("span",{class:"token variable"},"o"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"OrderDate"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"CustomerId"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Freight"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"e"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),s(),n("span",{class:"token variable"},"as"),s(),n("span",{class:"token variable"},"EmployeeId"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"s"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"CompanyName"),s(),n("span",{class:"token variable"},"as"),s(),n("span",{class:"token variable"},"ShipVia"),n("span",{class:"token punctuation"},","),s(` 
           `),n("span",{class:"token variable"},"ShipAddress"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"ShipCity"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"ShipPostalCode"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"ShipCountry"),s(`
      `),n("span",{class:"token variable"},"FROM"),s(),n("span",{class:"token string"},'"Order"'),s(),n("span",{class:"token variable"},"o"),s(`
           `),n("span",{class:"token variable"},"INNER"),s(),n("span",{class:"token variable"},"JOIN"),s(`
           `),n("span",{class:"token variable"},"Employee"),s(),n("span",{class:"token variable"},"e"),s(),n("span",{class:"token variable"},"ON"),s(),n("span",{class:"token variable"},"o"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"EmployeeId"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token variable"},"e"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),s(`
           `),n("span",{class:"token variable"},"INNER"),s(),n("span",{class:"token variable"},"JOIN"),s(`
           `),n("span",{class:"token variable"},"Shipper"),s(),n("span",{class:"token variable"},"s"),s(),n("span",{class:"token variable"},"ON"),s(),n("span",{class:"token variable"},"o"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"ShipVia"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token variable"},"s"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),s(`
     `),n("span",{class:"token variable"},"WHERE"),s(),n("span",{class:"token variable"},"o"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"@"),n("span",{class:"token variable"},"id"),n("span",{class:"token punctuation"},"`"),s(` 
  `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbSingle"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"id"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"assignTo"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"order"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"with"),s(),n("span",{class:"token variable"},"order"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"order"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"textDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'Order Details'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"SELECT"),s(),n("span",{class:"token variable"},"p"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"ProductName"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"sqlCurrency"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"od.UnitPrice"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token variable"},"UnitPrice"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Quantity"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Discount"),s(`
      `),n("span",{class:"token variable"},"FROM"),s(),n("span",{class:"token variable"},"OrderDetail"),s(),n("span",{class:"token variable"},"od"),s(`
           `),n("span",{class:"token variable"},"INNER"),s(),n("span",{class:"token variable"},"JOIN"),s(`
           `),n("span",{class:"token variable"},"Product"),s(),n("span",{class:"token variable"},"p"),s(),n("span",{class:"token variable"},"ON"),s(),n("span",{class:"token variable"},"od"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"ProductId"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token variable"},"p"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),s(`
     `),n("span",{class:"token variable"},"WHERE"),s(),n("span",{class:"token variable"},"OrderId"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"@"),n("span",{class:"token variable"},"id"),n("span",{class:"token punctuation"},"`"),s(`
    `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbSelect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"id"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(` 
    `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"textDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},'"Line Items"'),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(` 
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"SELECT"),s(),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"sqlCurrency"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"(od.UnitPrice * Quantity)"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token variable"},"AS"),s(),n("span",{class:"token variable"},"OrderTotals"),s(` 
      `),n("span",{class:"token variable"},"FROM"),s(),n("span",{class:"token variable"},"OrderDetail"),s(),n("span",{class:"token variable"},"od"),s(`
           `),n("span",{class:"token variable"},"INNER"),s(),n("span",{class:"token variable"},"JOIN"),s(`
           `),n("span",{class:"token variable"},"Product"),s(),n("span",{class:"token variable"},"p"),s(),n("span",{class:"token variable"},"ON"),s(),n("span",{class:"token variable"},"od"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"ProductId"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token variable"},"p"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Id"),s(`
     `),n("span",{class:"token variable"},"WHERE"),s(),n("span",{class:"token variable"},"OrderId"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"@"),n("span",{class:"token variable"},"id"),s(` 
     `),n("span",{class:"token variable"},"ORDER"),s(),n("span",{class:"token variable"},"BY"),s(),n("span",{class:"token number"},"1"),s(),n("span",{class:"token variable"},"DESC"),n("span",{class:"token punctuation"},"`"),s(`
    `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbSelect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"id"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(` 
    `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"textDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"rowNumbers"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token boolean"},"false"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"else"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"There"),s(),n("span",{class:"token variable"},"is"),s(),n("span",{class:"token variable"},"no"),s(),n("span",{class:"token variable"},"Order"),s(),n("span",{class:"token variable"},"with"),s(),n("span",{class:"token variable"},"id"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"id"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"with"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),cn=a(`__VP_STATIC_START__<p>As the output is human-readable we can view directly it without a browser:</p><pre><code>$ web run script.ss -id 10643 
</code></pre><p>Which will output:</p><div class="language-md"><pre><code>| Order Details                    ||
|------------------|----------------|
| Id               | 10643          |
| Order Date       | 1997-08-25     |
| Customer Id      | ALFKI          |
| Freight          | 29.46          |
| Employee Id      | 6              |
| Ship Via         | Speedy Express |
| Ship Address     | Obere Str. 57  |
| Ship City        | Berlin         |
| Ship Postal Code | 12209          |
| Ship Country     | Germany        |


Line Items

<span class="token table"><span class="token table-header-row"><span class="token punctuation">|</span><span class="token table-header important"> <span class="token title important"><span class="token punctuation">#</span> </span></span><span class="token punctuation">|</span><span class="token table-header important"> Product Name      </span><span class="token punctuation">|</span><span class="token table-header important"> Unit Price </span><span class="token punctuation">|</span><span class="token table-header important"> Quantity </span><span class="token punctuation">|</span><span class="token table-header important"> Discount </span><span class="token punctuation">|</span>
</span><span class="token table-line"><span class="token punctuation">|</span><span class="token punctuation">---</span><span class="token punctuation">|</span><span class="token punctuation">-------------------</span><span class="token punctuation">|</span><span class="token punctuation">------------</span><span class="token punctuation">|</span><span class="token punctuation">----------</span><span class="token punctuation">|</span><span class="token punctuation">----------</span><span class="token punctuation">|</span>
</span><span class="token table-data-rows"><span class="token punctuation">|</span><span class="token table-data"> 1 </span><span class="token punctuation">|</span><span class="token table-data"> R\xF6ssle Sauerkraut </span><span class="token punctuation">|</span><span class="token table-data"> $45.60     </span><span class="token punctuation">|</span><span class="token table-data"> 15       </span><span class="token punctuation">|</span><span class="token table-data"> 0.25     </span><span class="token punctuation">|</span>
<span class="token punctuation">|</span><span class="token table-data"> 2 </span><span class="token punctuation">|</span><span class="token table-data"> Chartreuse verte  </span><span class="token punctuation">|</span><span class="token table-data"> $18.00     </span><span class="token punctuation">|</span><span class="token table-data"> 21       </span><span class="token punctuation">|</span><span class="token table-data"> 0.25     </span><span class="token punctuation">|</span>
<span class="token punctuation">|</span><span class="token table-data"> 3 </span><span class="token punctuation">|</span><span class="token table-data"> Spegesild         </span><span class="token punctuation">|</span><span class="token table-data"> $12.00     </span><span class="token punctuation">|</span><span class="token table-data"> 2        </span><span class="token punctuation">|</span><span class="token table-data"> 0.25     </span><span class="token punctuation">|</span>
</span></span>

| Order Totals |
|--------------|
| $684.00      |
| $378.00      |
| $24.00       |
</code></pre></div><p>And because they&#39;re GitHub Flavored Markdown Tables they can be embedded directly in Markdown docs (like this) where it&#39;s renders as:</p>__VP_STATIC_END__`,5),ln=n("h3",{id:"aws-dashboards",tabindex:"-1"},[s("AWS Dashboards "),n("a",{class:"header-anchor",href:"#aws-dashboards","aria-hidden":"true"},"#")],-1),un=n("p",null,[s("The "),n("a",{href:"https://sharpscript.net/docs/default-scripts",target:"_blank",rel:"noopener noreferrer"},"comprehensive built-in scripts"),s(" coupled with ServiceStack's agnostic providers like the "),n("a",{href:"/virtual-file-system.html"},"Virtual File System"),s(" makes it easy to quickly query infrastructure resources like all Tables and Row counts in managed AWS RDS Instances or Search for static Asset resources in S3 Buckets.")],-1),rn=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"--"),s(`
`),n("span",{class:"token variable"},"db"),s(),n("span",{class:"token variable"},"postgres"),s(`
`),n("span",{class:"token variable"},"db"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"connection"),s(),n("span",{class:"token variable"},"$AWS_RDS_POSTGRES"),s(`
`),n("span",{class:"token variable"},"files"),s(),n("span",{class:"token variable"},"s3"),s(`
`),n("span",{class:"token variable"},"files"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"config"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"AccessKey"),n("span",{class:"token punctuation"},":"),n("span",{class:"token variable"},"$AWS_S3_ACCESS_KEY"),n("span",{class:"token punctuation"},","),n("span",{class:"token variable"},"SecretKey"),n("span",{class:"token punctuation"},":"),n("span",{class:"token variable"},"$AWS_S3_SECRET_KEY"),n("span",{class:"token punctuation"},","),n("span",{class:"token variable"},"Region"),n("span",{class:"token punctuation"},":"),n("span",{class:"token variable"},"us-east-"),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),n("span",{class:"token variable"},"Bucket"),n("span",{class:"token punctuation"},":"),n("span",{class:"token variable"},"rockwind"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token variable"},"--"),n("span",{class:"token punctuation"},">"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"dbTableNamesWithRowCounts"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"textDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'Tables'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"SELECT"),s(),n("span",{class:"token string"},'"Id"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"CustomerId"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"EmployeeId"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"OrderDate"'),s(),n("span",{class:"token variable"},"from"),s(),n("span",{class:"token string"},'"Order"'),s(),n("span",{class:"token variable"},"ORDER"),s(),n("span",{class:"token variable"},"BY"),s(),n("span",{class:"token string"},'"Id"'),s(),n("span",{class:"token variable"},"DESC"),s(),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"sqlLimit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"`"),s(`
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbSelect"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"textDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'Last 5 Orders'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"headerStyle"),n("span",{class:"token punctuation"},":"),n("span",{class:"token string"},"'None'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"contentAllRootDirectories"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"map"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Name"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token punctuation"},"`"),s(`
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"union"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"contentAllRootFiles"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"x"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"x"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"textDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'Root Files and Folders'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"find"),s(),n("span",{class:"token variable"},"??"),s(),n("span",{class:"token string"},"'*.html'"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"assignTo"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"find"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"find"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"contentFilesFind"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"map"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"VirtualPath"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"take"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"15"),n("span",{class:"token punctuation"},")"),s(` 
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"textDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"Files"),s(),n("span",{class:"token variable"},"matching"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"find"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])]),n("p",null,[s("You can use "),n("code",null,"$NAME"),s(" to move confidential information out of public scripts where it will be replaced with Environment Variables. Then run the script as normal and optionally override the "),n("code",null,"find"),s(" pattern for files you want to search for:")]),n("pre",null,[n("code",null,`$ web run script-aws.ss -find *.png
`)]),n("p",null,[s("Where it displays a dashboard of activity from your AWS resources: containing all Tables with their Row Counts, adhoc queries like your last 5 Orders, The Root files and Folders available in your S3 Bucket and any matching resources from your "),n("code",null,"find"),s(" search pattern:")]),n("div",{class:"language-"},[n("pre",{"v-pre":""},[n("code",null,`| Tables                   ||
|--------------------|------|
| Order Detail       | 2155 |
| Order              | 830  |
| Customer           | 91   |
| Product            | 77   |
| Territory          | 53   |
| Region             | 0    |
| Shipper            | 0    |
| Supplier           | 0    |
| Category           | 0    |
| Employee           | 0    |
| Employee Territory | 0    |


Last 5 Orders

| # | Id    | CustomerId | EmployeeId | OrderDate  |
|---|-------|------------|------------|------------|
| 1 | 11077 | RATTC      | 1          | 1998-05-06 |
| 2 | 11076 | BONAP      | 4          | 1998-05-06 |
| 3 | 11075 | RICSU      | 8          | 1998-05-06 |
| 4 | 11074 | SIMOB      | 7          | 1998-05-06 |
| 5 | 11073 | PERIC      | 2          | 1998-05-05 |


| Root Files and Folders |
|------------------------|
| api/                   |
| northwind/             |
| rockstars/             |
| index.html             |
| web.aws.settings       |
| web.postgres.settings  |
| web.sqlite.settings    |
| web.sqlserver.settings |


| Files matching: *.png                   |
|-----------------------------------------|
| assets/img/logo-32.png                  |
| rockstars/img/green_dust_scratch.png    |
| rockstars/img/rip_jobs.png              |
| rockstars/img/tileable_wood_texture.png |
`)])]),n("h3",{id:"azure-dashboards",tabindex:"-1"},[s("Azure Dashboards "),n("a",{class:"header-anchor",href:"#azure-dashboards","aria-hidden":"true"},"#")]),n("p",null,[s("The nice thing about "),n("code",null,"#Script"),s(" late-binding and cloud agnostic providers is that with just different configuration we can "),n("strong",null,"use the exact same script"),s(" to query an Azure managed SQL Server Database and Azure Blob File Storage:")]),n("div",{"v-pre":""},[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"--"),s(`
`),n("span",{class:"token variable"},"db"),s(),n("span",{class:"token variable"},"sqlserver"),s(`
`),n("span",{class:"token variable"},"db"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"connection"),s(),n("span",{class:"token variable"},"$AZURE_SQL_CONNECTION_STRING"),s(`
`),n("span",{class:"token variable"},"files"),s(),n("span",{class:"token variable"},"azure"),s(`
`),n("span",{class:"token variable"},"files"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"config"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"ConnectionString"),n("span",{class:"token punctuation"},":"),n("span",{class:"token variable"},"$AZURE_BLOB_CONNECTION_STRING"),n("span",{class:"token punctuation"},","),n("span",{class:"token variable"},"ContainerName"),n("span",{class:"token punctuation"},":"),n("span",{class:"token variable"},"rockwind"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token variable"},"--"),n("span",{class:"token punctuation"},">"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"dbTableNamesWithRowCounts"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"textDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'Tables'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"SELECT"),s(),n("span",{class:"token string"},'"Id"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"CustomerId"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"EmployeeId"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"OrderDate"'),s(),n("span",{class:"token variable"},"from"),s(),n("span",{class:"token string"},'"Order"'),s(),n("span",{class:"token variable"},"ORDER"),s(),n("span",{class:"token variable"},"BY"),s(),n("span",{class:"token string"},'"Id"'),s(),n("span",{class:"token variable"},"DESC"),s(),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"sqlLimit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"`"),s(`
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbSelect"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"textDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'Last 5 Orders'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"headerStyle"),n("span",{class:"token punctuation"},":"),n("span",{class:"token string"},"'None'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"contentAllRootDirectories"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"map"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Name"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token punctuation"},"`"),s(` 
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"union"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"contentAllRootFiles"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"x"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"x"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"textDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'Root Files and Folders'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"find"),s(),n("span",{class:"token variable"},"??"),s(),n("span",{class:"token string"},"'*.html'"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"assignTo"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"find"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"find"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"contentFilesFind"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"map"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"VirtualPath"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"take"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),s(` 
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"textDump"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"caption"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"Files"),s(),n("span",{class:"token variable"},"matching"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"find"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])])],-1),kn=a(`__VP_STATIC_START__<h2 id="live-script-with-web-watch" tabindex="-1">Live #Script with <code>web watch</code> <a class="header-anchor" href="#live-script-with-web-watch" aria-hidden="true">#</a></h2><p>What&#39;s even nicer than the fast feedback of running adhoc scripts? Is the instant feedback you get from being able to <strong>&quot;watch&quot;</strong> the same script!</p><p>To watch a script just replace <code>run</code> with <code>watch</code>:</p><pre><code>$ web watch script-aws.ss -find *.png
</code></pre><p><a href="https://sharpscript.net/docs/sharp-scripts" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/sharpscript/watch-aws-azure.gif" alt=""></a></p><p>The ability to run stand-alone adhoc scripts in an extensible dynamic scripting language feels like you&#39;re using a &quot;developer enhanced&quot; SQL Studio, where you can combine queries from multiple data sources, <a href="https://sharpscript.net/linq/restriction-operators" target="_blank" rel="noopener noreferrer">manipulate them with LINQ</a> and quickly pipe results to dump utils to combine them in the same output for instant visualization.</p><p><code>#Script</code> scripts can also be easily shared, maintained in gists and run on all different Win/OSX/Linux OS&#39;s that .NET Core runs on.</p><h3 id="live-transformations" tabindex="-1">Live Transformations <a class="header-anchor" href="#live-transformations" aria-hidden="true">#</a></h3><p>Another area where &quot;watched&quot; scripts can shine is as a &quot;companion scratch pad&quot; assistant during development that you can quickly switch to and instantly test out live code fragments, calculations and transformations, e.g. This ends up being a great way to test out markdown syntax and Nuglify&#39;s advanced compression using our new <code>minifyjs</code> and <code>minifycss</code> <a href="https://sharpscript.net/docs/blocks" target="_blank" rel="noopener noreferrer">Script Blocks</a>:</p>__VP_STATIC_END__`,9),dn=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"--"),s(`
`),n("span",{class:"token variable"},"debug"),s(),n("span",{class:"token boolean"},"false"),s(`
`),n("span",{class:"token variable"},"--"),n("span",{class:"token punctuation"},">"),s(`

`),n("span",{class:"token variable"},"Markdown"),n("span",{class:"token punctuation"},":"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"markdown"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"#"),n("span",{class:"token punctuation"},"#"),s(),n("span",{class:"token variable"},"Title"),s(`

`),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"quote"),s(`

`),n("span",{class:"token variable"},"Paragraph"),s(),n("span",{class:"token variable"},"with"),s(),n("span",{class:"token brackets"},[n("span",{class:"token punctuation"},"["),n("span",{class:"token variable"},"a link"),n("span",{class:"token punctuation"},"]")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"https"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"example"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"org"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"markdown"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token variable"},"JS"),n("span",{class:"token punctuation"},":"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"minifyjs"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token variable"},"function"),s(),n("span",{class:"token variable"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"left"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"right"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token variable"},"return"),s(),n("span",{class:"token variable"},"left"),s(),n("span",{class:"token punctuation"},"+"),s(),n("span",{class:"token variable"},"right"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token variable"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"minifyjs"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`


`),n("span",{class:"token variable"},"CSS"),n("span",{class:"token punctuation"},":"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"minifycss"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token variable"},"body"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token variable"},"background-color"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"ffffff"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"minifycss"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),hn=a(`__VP_STATIC_START__<p>Then run with:</p><div class="language-"><pre><code>    $ web watch livepad.ss
</code></pre></div><p>Which starts a live watched session that re-renders itself on save, initially with:</p><div class="language-"><pre><code>Markdown:
&lt;h2 id=&quot;title&quot;&gt;Title&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;quote&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Paragraph with &lt;a href=&quot;https://example.org&quot;&gt;a link&lt;/a&gt;.&lt;/p&gt;

JS:
function add(n,t){return n+t}add(1,2)

CSS:
body{background-color:#fff}
</code></pre></div><h3 id="live-session" tabindex="-1">Live Session <a class="header-anchor" href="#live-session" aria-hidden="true">#</a></h3><p><a href="https://sharpscript.net/docs/sharp-scripts" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/sharpscript/livepad.gif" alt=""></a></p><h3 id="usage-in-net" tabindex="-1">Usage in .NET <a class="header-anchor" href="#usage-in-net" aria-hidden="true">#</a></h3><p>To evaluate <code>#Script</code> in .NET you&#39;ll first create the <code>ScriptContext</code> containing all functionality and features your Scripts have access to:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ScriptContext</span> <span class="token punctuation">{</span>
    Args <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>               <span class="token comment">// Global Arguments available to all Scripts, Pages, Partials, etc</span>
    Plugins <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment">// Encapsulated Features, e.g. Markdown, Protected or ServiceStack Features</span>
    ScriptMethods <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token comment">// Additional Methods</span>
    ScriptBlocks <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>       <span class="token comment">// Additional Script Blocks </span>
    FilterTransformers <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Additional Stream Transformers</span>
    ScanTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token comment">// Auto register Methods, Blocks and Code Page Types</span>
    ScanAssemblies <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>     <span class="token comment">// Auto register all Methods, Blocks and Code Page Types in Assembly</span>
    PageFormats <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment">// Additional Text Document Formats</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then call <code>EvaluateScript()</code> to evaluate the script and capture it&#39;s rendered output in a string:</p>__VP_STATIC_END__`,10),gn=n("div",null,[n("div",{class:"language-csharp"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"string")]),s(" output "),n("span",{class:"token operator"},"="),s(" context"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"EvaluateScript"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},`"The time is now: {{ now | dateFormat('HH:mm:ss') }}"`),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])])])],-1),mn=n("h3",{id:"evaluating-scripts-with-return-values",tabindex:"-1"},[s("Evaluating Scripts with return values "),n("a",{class:"header-anchor",href:"#evaluating-scripts-with-return-values","aria-hidden":"true"},"#")],-1),bn=n("p",null,[n("code",null,"#Script"),s(" can render text as above or they can return values using the "),n("code",null,"return"),s(" method where it can be accessed using "),n("code",null,"Evaluate()"),s(":")],-1),vn=n("div",null,[n("div",{class:"language-csharp"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" result "),n("span",{class:"token operator"},"="),s(" context"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Evaluate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"1 + 1 = {{ 1 + 1 | return }}."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"//= 2"),s(`
`)])])])],-1),fn=n("p",null,"The generic version utilizes ServiceStack's powerful built-in conversion utils to convert the return value into your preferred type, e.g:",-1),yn=n("div",null,[n("div",{class:"language-csharp"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"double")]),s(" result "),n("span",{class:"token operator"},"="),s(" context"),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-method"},[n("span",{class:"token function"},"Evaluate"),n("span",{class:"token generic class-name"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token keyword"},"double"),n("span",{class:"token punctuation"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"1 + 1 = {{ return(1 + 1) }}."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"//= 2.0"),s(`
`),n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"string")]),s(" result "),n("span",{class:"token operator"},"="),s(" context"),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-method"},[n("span",{class:"token function"},"Evaluate"),n("span",{class:"token generic class-name"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token keyword"},"string"),n("span",{class:"token punctuation"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"1 + 1 = {{ return(1 + 1) }}."'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},'//= "2"'),s(`
`)])])])],-1),wn=n("p",null,"But can also be used for more powerful conversions like converting an Object Dictionary into your preferred POCO:",-1),Sn=n("div",null,[n("div",{class:"language-csharp"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" result "),n("span",{class:"token operator"},"="),s(" context"),n("span",{class:"token punctuation"},"."),n("span",{class:"token generic-method"},[n("span",{class:"token function"},"Evaluate"),n("span",{class:"token generic class-name"},[n("span",{class:"token punctuation"},"<"),s("Customer"),n("span",{class:"token punctuation"},">")])]),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"{{`select * from customer where id=@id` | dbSingle({id}) | return }}"'),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"ObjectDictionary"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},'"id"'),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])])])],-1),An=a(`__VP_STATIC_START__<h3 id="optimized-for-net" tabindex="-1">Optimized for .NET <a class="header-anchor" href="#optimized-for-net" aria-hidden="true">#</a></h3><p>To enable JS-like dynamism when binding to .NET methods, <code>#Script</code> automatically converts arguments for Types that don&#39;t match. One of the effects of this is that you can define a single method with <code>double</code> params:</p><div class="language-csharp"><pre><code><span class="token keyword">class</span> <span class="token class-name">MyMethods</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ScriptMethods</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token keyword">add</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">double</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">double</span></span> b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>And be able to call it with any .NET numeric type, e.g:</p>__VP_STATIC_END__`,4),Tn=n("div",null,[n("div",{class:"language-csharp"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token class-name"},[n("span",{class:"token keyword"},"var")]),s(" context "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"ScriptContext"),s(),n("span",{class:"token punctuation"},"{"),s(" ScriptMethods "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token constructor-invocation class-name"},"MyMethods"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Init"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
context`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"EvaluateScript"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"{{ add(1,1) }}"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])])])],-1),qn=a('',4),Cn=n("div",null,[n("div",{class:"language-csharp"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(" '"),n("span",{class:"token keyword"},"select"),s(" url "),n("span",{class:"token keyword"},"from"),s(" qotd "),n("span",{class:"token keyword"},"where"),s(),n("span",{class:"token class-name"},"id"),s(),n("span",{class:"token operator"},"="),s(` @id' 
   `),n("span",{class:"token operator"},"|"),s(),n("span",{class:"token function"},"dbScalar"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(" id "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"|"),s(" urlContents "),n("span",{class:"token operator"},"|"),s(" markdown "),n("span",{class:"token operator"},"|"),s(" assignTo"),n("span",{class:"token punctuation"},":"),s(" quote "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),xn=a(`__VP_STATIC_START__<p>How it does it becomes an implementation detail, e.g. with this naive implementation below it will make a <strong>Sync DB</strong> call then download the entire URL contents before passing it to the <code>markdown()</code> method to convert it to HTML:</p><div class="language-csharp"><pre><code><span class="token keyword">class</span> <span class="token class-name">MyMethods</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ScriptMethods</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">urlContents</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> url<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> url<span class="token punctuation">.</span><span class="token function">GetStringFromUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">markdown</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> markdown<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> MarkdownConfig<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>markdown<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name"><span class="token keyword">var</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ScriptContext</span> <span class="token punctuation">{</span>
    InsertScriptMethods <span class="token operator">=</span> <span class="token punctuation">{</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DbScripts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>But <strong>without changing any of the script code</strong> we can use the more optimal built-in implementation:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ScriptContext</span> <span class="token punctuation">{</span>
    Plugins <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MarkdownScriptPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ScriptMethods <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DbScriptsAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Where <code>dbScalar</code> is now an async API that returns a <code>Task&lt;object&gt;</code> which is automatically <strong>awaited</strong> before the async <code>urlContents</code> method is called which makes an Async I/O HTTP Call to asynchronously write the response to the <code>OutputStream</code> before it&#39;s passed to the <code>markdown</code><a href="https://sharpscript.net/docs/transformers#filter-transformers" target="_blank" rel="noopener noreferrer">Filter Transformer</a> which reads markdown from an async Input <code>Stream</code> and returns a <code>Stream</code> of HTML, the rendered text output is then captured and stored in the <code>quote</code> string argument.</p><p>So whilst both implementations end up with the same result, they achieve it differently where no additional boilerplate is required to enlist the more performant async streaming implementation below.</p><h2 id="breaking-changes" tabindex="-1">Breaking Changes <a class="header-anchor" href="#breaking-changes" aria-hidden="true">#</a></h2><p>There were 2 major changes which can cause breaking changes in <code>#Script</code>:</p><h3 id="servicestack-script-rebrand" tabindex="-1">ServiceStack.Script rebrand <a class="header-anchor" href="#servicestack-script-rebrand" aria-hidden="true">#</a></h3><p>Despite the re-branding to <code>#Script</code> we were able to retain most source-code compatibility where the previous &quot;Old APIs&quot; under <code>ServiceStack.Templates</code> are now <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/Templates/TemplateContext.cs" target="_blank" rel="noopener noreferrer">deprecated stubs</a> that inherit the new APIs under <code>ServiceStack.Script</code>. All deprecation messages contain the newer classes that you should move to.</p><p>Some classes couldn&#39;t be duplicated, like if you were using <code>PageResult</code> in your Services. They now require adding:</p><div class="language-csharp"><pre><code><span class="token keyword">using</span> <span class="token namespace">ServiceStack<span class="token punctuation">.</span>Script</span><span class="token punctuation">;</span>
</code></pre></div><p>Which is effectively the <a href="https://github.com/NetCoreApps/TemplatePages/commit/7f2fd9f22ef9d92927bd8dc8157f89b8195fdb6c" target="_blank" rel="noopener noreferrer">only changes</a> that <a href="https://github.com/NetCoreApps/TemplatePages" target="_blank" rel="noopener noreferrer">ServiceStack Templates</a> needed to run on the latest version.</p><p><a href="https://github.com/NetCoreApps/TemplatePages" target="_blank" rel="noopener noreferrer">ServiceStack Templates</a> still uses and documents the old <code>ServiceStack.Template</code> APIs whilst the new <a href="https://sharpscript.net" target="_blank" rel="noopener noreferrer">sharpscript.net</a> is the new website for <code>#Script</code> which has been converted to use and document the new <code>ServiceStack.Script</code> APIs.</p><p>To verify minimal disruption to existing APIs, most were converted into unit tests in <a href="https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.Endpoints.Tests/ScriptTests/BAK_CompatTemplateTests.cs" target="_blank" rel="noopener noreferrer">BAK_CompatTemplateTests.cs</a>.</p><h3 id="migration-to-new-script-apis" tabindex="-1">Migration to new Script APIs <a class="header-anchor" href="#migration-to-new-script-apis" aria-hidden="true">#</a></h3><p>Migrating to the new APIs is fairly straight forward:</p><ul><li>Change <code>using ServiceStack.Templates;</code> to <code>using ServiceStack.Script;</code></li><li>Any classes with <code>TemplatePage*</code> has been renamed to <code>SharpPage*</code></li><li>Any other class with a <code>Template*</code> prefix has been renamed to <code>Script*</code></li></ul><p>This change doesn&#39;t affect any of your existing <code>#Script</code> source code whose existing syntax and available filters/methods remains unchanged.</p><h4 id="new-terminology" tabindex="-1">New Terminology <a class="header-anchor" href="#new-terminology" aria-hidden="true">#</a></h4><p>The primary rationale for the rebranding was so we&#39;re better able to label, describe and document all of <code>#Script</code> different features easier, so when referring to Templates <strong>View Engine</strong> we&#39;re now calling <strong>#Script Pages</strong> which is a better corollary to &quot;Razor Pages&quot; which it provides an alternative to.</p><p>Other re-branded features:</p><ul><li><strong>API Pages</strong> are now called <a href="https://sharpscript.net/docs/sharp-apis" target="_blank" rel="noopener noreferrer">Sharp APIs</a></li><li><strong>Web Apps</strong> are now called <a href="https://sharpscript.net/docs/sharp-apps" target="_blank" rel="noopener noreferrer">Sharp Apps</a></li><li><strong>Template Filters</strong> are now called <a href="https://sharpscript.net/docs/methods" target="_blank" rel="noopener noreferrer">Script Methods</a></li><li><strong>Template Blocks</strong> are now called <a href="https://sharpscript.net/docs/methods" target="_blank" rel="noopener noreferrer">Script Blocks</a></li></ul><p>The collection of methods you inject in your scripts like <code>TemplateRedisFilters</code> and <code>TemplateDbFilters</code> are now referred to as &quot;Scripts&quot; where they&#39;ve been renamed to <code>RedisScripts</code> and <code>DbScripts</code>.</p><h3 id="request-params-are-no-longer-imported-by-default" tabindex="-1">Request Params are no longer imported by default <a class="header-anchor" href="#request-params-are-no-longer-imported-by-default" aria-hidden="true">#</a></h3><p>A major change that will require changing existing scripts is that Request Parameters are no longer imported by default and will need to explicitly accessed or imported.</p><p>Previously you could access the <code>?id=1</code> queryString param in your page with:</p>__VP_STATIC_END__`,27),Pn=n("div",null,[n("div",{class:"language-"},[n("pre",{"v-pre":""},[n("code",null,`{{ id }}
`)])])],-1),_n=n("p",null,[s("This now needs to be explicitly accessed using the new "),n("code",null,"query"),s(" or shorter "),n("code",null,"qs"),s(" alias:")],-1),In=n("div",null,[n("div",{class:"language-"},[n("pre",{"v-pre":""},[n("code",null,`{{ qs.id }}
`)])])],-1),Rn=n("p",null,"For HTTP Form Data Params use:",-1),Nn=n("div",null,[n("div",{class:"language-"},[n("pre",{"v-pre":""},[n("code",null,`    {{ form.id }}
`)])])],-1),En=n("h4",{id:"importrequestparams",tabindex:"-1"},[s("importRequestParams "),n("a",{class:"header-anchor",href:"#importrequestparams","aria-hidden":"true"},"#")],-1),jn=n("p",null,"The least disruption to existing Pages would be to specify a white-list of arguments you want to import at the top of your page:",-1),Dn=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token string"},"'id,name,age'"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"importRequestParams"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),Mn=n("p",null,"Or if preferred, you can specify a collection of param names instead:",-1),Un=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'id'"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'name'"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'age'"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"importRequestParams"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),Fn=n("h4",{id:"allow-all-request-params-in-a-page",tabindex:"-1"},[s("Allow all Request Params in a page "),n("a",{class:"header-anchor",href:"#allow-all-request-params-in-a-page","aria-hidden":"true"},"#")],-1),Vn=n("p",null,[s("There's a local nuclear option that you can use to temporarily restore previous behavior in adhoc pages by calling "),n("code",null,"importRequestParams"),s(" without any arguments:")],-1),Hn=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"importRequestParams"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),On=a(`__VP_STATIC_START__<p>Which you can add at the top of adhoc pages to import all QueryString and FormData params as page arguments.</p><h4 id="allow-all-request-params-globally" tabindex="-1">Allow all Request Params Globally <a class="header-anchor" href="#allow-all-request-params-globally" aria-hidden="true">#</a></h4><p>There&#39;s also the unrecommended global nuclear option of reverting to the previous behaving and always importing all Request Params in all pages:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SharpPagesFeature</span> <span class="token punctuation">{</span>
    ImportRequestParams <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="no-impact-on-page-based-routing" tabindex="-1">No impact on page based routing <a class="header-anchor" href="#no-impact-on-page-based-routing" aria-hidden="true">#</a></h3><p>This doesn&#39;t impact page based routing as the path info arguments are explicitly declared in the file or directory name, e.g:</p><ul><li><code>/posts/_slug.html</code> called from <code>/posts/A</code> still populates <code>slug</code> with <strong>A</strong></li><li><code>/posts/_slug/edit.html</code> called from <code>/posts/A/edit</code> still populates <code>slug</code> with <strong>A</strong></li></ul><h3 id="request-param-methods" tabindex="-1">Request Param Methods <a class="header-anchor" href="#request-param-methods" aria-hidden="true">#</a></h3><p>To make it accessing the Request Params as easy as possible we&#39;ve added a number of new methods to access it in a variety of different ways:</p>__VP_STATIC_END__`,9),Ln=n("p",null,"Here's a flavor of how of using the different APIs above:",-1),Wn=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"?$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"qs"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"`"),s("        "),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"addQueryString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"qs3"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"queryString"),s("     "),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"addQueryString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"qs3"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"qs"),s("              "),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"toObjectDictionary"),s("     "),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"addItem"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"qs3"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"3"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"toQueryString"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"queryDictionary"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"addItem"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"qs3"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"3"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s("     "),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"toQueryString"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"queryDictionary"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"addItem"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"pair"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'qs3'"),n("span",{class:"token punctuation"},","),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"toQueryString"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),Gn=n("p",null,"Which all return the same result:",-1),Bn=n("div",{class:"language-"},[n("pre",null,[n("code",null,`    ?qs1=1&qs2=2&qs3=3
    ?qs1=1&qs2=2&qs3=3
    ?qs1=1&qs2=2&qs3=3
    ?qs1=1&qs2=2&qs3=3
    ?qs1=1&qs2=2&qs3=3
`)])],-1),zn=n("p",null,[s("As they all return a string they can be further manipulated with the various "),n("a",{href:"https://sharpscript.net/docs/default-scripts#url-handling",target:"_blank",rel:"noopener noreferrer"},"URL handling methods"),s(":")],-1),$n=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"queryDictionary"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"addItem"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"qs3"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"3"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"toQueryString"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"addQueryString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"qs4"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"4"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s("  "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"queryDictionary"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"addItem"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"qs3"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"3"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"toQueryString"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"setQueryString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"qs1"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"5"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s("  "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"queryDictionary"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"addItem"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"qs3"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"3"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"toQueryString"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"addHashParams"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"qs4"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"4"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s("   "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"queryDictionary"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"toQueryString"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"addHashParams"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"qs4"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"setHashParams"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"qs4"),n("span",{class:"token punctuation"},":"),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),Jn=a(`__VP_STATIC_START__<p>Which returns:</p><div class="language-"><pre><code>    ?qs1=1&amp;qs2=2&amp;qs3=3&amp;qs4=4
    ?qs1=5&amp;qs2=2&amp;qs3=3
    ?qs1=1&amp;qs2=2&amp;qs3=3#qs4=4
    ?qs1=1&amp;qs2=2#qs4=5
</code></pre></div><h2 id="world-validation" tabindex="-1">World Validation <a class="header-anchor" href="#world-validation" aria-hidden="true">#</a></h2><p>One message we continually try to re-iterate is the importance of Services (aka APIs) having a well-defined coarse-grained Services Contract which serves as the interface into your system by which all external consumers bind to - making it the most important contract in your system.</p><h3 id="benefits-of-services" tabindex="-1">Benefits of Services <a class="header-anchor" href="#benefits-of-services" aria-hidden="true">#</a></h3><p>This is the development model ServiceStack has always promoted and what most of its features are centered around, where your Services Contract is defined by decoupled impl-free DTOs. If your Services retain this property then they&#39;ll be able to encapsulate any of its capabilities of infinite complexity and make it available remotely to all consumers with never any more complexity than the cost of a Service call:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/dtos-role.png" alt=""></p><p>This is where the <strong>true value</strong> of Services are derived, they&#39;re the ultimate form of encapsulating complexity and offers the highest level of software reuse. ServiceStack amplifies your Services capabilities by making them available in multiple <a href="/why-servicestack.html#multiple-hosting-options">Hosting Options</a>, <a href="/why-servicestack.html#multiple-pluggable-formats">serialization formats</a>, <a href="/why-servicestack.html#multiple-endpoints">MQ and SOAP endpoints</a> to enable more seamless integrations in a variety of different scenarios including native end-to-end Typed APIs for the most popular <a href="/why-servicestack.html#multiple-clients">Web, Mobile and Desktop Apps</a> that reduce the effort and complexity required to call your Services in all consumers - multiplicatively increasing the value provided.</p><h3 id="api-first-development-model" tabindex="-1">API First Development Model <a class="header-anchor" href="#api-first-development-model" aria-hidden="true">#</a></h3><p>The practice .NET has always dictated was that you need to maintain <strong>separate controllers</strong> and logic for your <strong>HTML UIs</strong> and a <strong>different controller</strong> for your <strong>HTTP APIs</strong>. Apart from forcing code duplication, doing this breaks your systems well-defined Service Contracts where any custom logic in your MVC Controllers and Razor pages becomes another entry point into your system where no longer are all your system capabilities available to all clients, some are only available when using a browser to navigate MVC pages.</p><p>Whereas in ServiceStack there are only Services, which are written with pure logic that&#39;s unopinionated as to what clients are calling it, with clean <strong>Request DTOs</strong> received as Inputs that typically return clean <strong>Response DTOs</strong> as outputs. HTML is then just another serialization format, providing a View of your Services or serving as a bundled UI that works on top of your existing Services, in all cases calling the same well tested and defined Services that all other clients use.</p><h3 id="validation-from-all-the-things" tabindex="-1">Validation from all the things <a class="header-anchor" href="#validation-from-all-the-things" aria-hidden="true">#</a></h3><p>To better demonstrate the benefits of this approach and to show there&#39;s no loss of flexibility, we&#39;ve created the new <a href="https://github.com/NetCoreApps/Validation" target="_blank" rel="noopener noreferrer">Validation</a> .NET Core App which uses the same pure unopinionated ServiceStack Services to support <strong>8 different HTML UI strategies</strong> including server HTML Rendered and Ajax Client forms, multiple View Engines, multiple layouts - all utilizing the same Services and declarative Fluent Validation.</p><p><a href="https://github.com/NetCoreApps/Validation" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/img/apps/Validation/home.png" alt=""></a></p><h4 align="center">View Source on GitHub <a href="https://github.com/NetCoreApps/Validation">NetCoreApps/Validation</a></h4><p>It should be noted that these are just examples of different HTML UIs, with no additional effort, all ServiceStack Services automatically provide native integrations into <strong>all popular Mobile and Desktop Apps</strong> with <a href="/add-servicestack-reference.html">Add ServiceStack Reference</a>.</p><h3 id="about" tabindex="-1">About <a class="header-anchor" href="#about" aria-hidden="true">#</a></h3><p>The Validation App covers a typical App example you&#39;d find in most Apps, including <strong>Login</strong> and <strong>Registration Forms</strong> to <strong>Sign In</strong> and <strong>Register</strong> new Users who are then able to access the <strong>same protected Services</strong> to maintain their own private contact lists. It&#39;s a compact example that tries to cover a lot of use-cases typical in a real-world App, including maintaining a separate Data and DTO Model and using C# idioms like Enum&#39;s for defining a finite list of options which are re-used to populate its HTML UI.</p><p>The UI for the same App is re-implemented in <strong>8 popular Web Development approaches</strong>, each integrated with ServiceStack&#39;s validation.</p><p>As of this writing there <strong>4 different server HTML</strong> generated strategies that use HTML Form Posts to call back-end Services:</p><h3 id="server-rendered-html-uis" tabindex="-1">Server Rendered HTML UIs <a class="header-anchor" href="#server-rendered-html-uis" aria-hidden="true">#</a></h3><ul><li><a href="https://github.com/NetCoreApps/Validation/tree/master/world/wwwroot/server" target="_blank" rel="noopener noreferrer">/server</a> - #Script Pages using Server Controls</li><li><a href="https://github.com/NetCoreApps/Validation/tree/master/world/wwwroot/server-ts" target="_blank" rel="noopener noreferrer">/server-ts</a> - Server HTML enhanced with TypeScript</li><li><a href="https://github.com/NetCoreApps/Validation/tree/master/world/wwwroot/server-jquery" target="_blank" rel="noopener noreferrer">/server-jquery</a> - Server HTML enhanced with jQuery</li><li><a href="https://github.com/NetCoreApps/Validation/tree/master/world/wwwroot/server-razor" target="_blank" rel="noopener noreferrer">/server-razor</a> - ServiceStack.Razor using Razor Helpers</li></ul><h3 id="client-html-uis" tabindex="-1">Client HTML UIs <a class="header-anchor" href="#client-html-uis" aria-hidden="true">#</a></h3><p>The Client Examples use Ajax Forms and the <a href="/typescript-add-servicestack-reference.html#typescript-serviceclient">TypeScript JsonServiceClient</a> to send TypeScript <a href="https://github.com/NetCoreApps/Validation/blob/master/world/wwwroot/dtos.ts" target="_blank" rel="noopener noreferrer">dtos.ts</a> generated with <a href="/typescript-add-servicestack-reference.html">TypeScript Add ServiceStack Reference</a>:</p><ul><li><a href="https://github.com/NetCoreApps/Validation/tree/master/world/wwwroot/vuetify" target="_blank" rel="noopener noreferrer">/vuetify</a> - Vue App using Vuetify&#39;s Material Design Controls using ServiceClient Requests</li><li><a href="https://github.com/NetCoreApps/Validation/tree/master/world/wwwroot/client-ts" target="_blank" rel="noopener noreferrer">/client-ts</a> - TypeScript UI using Ajax Forms and ServiceClient Requests</li><li><a href="https://github.com/NetCoreApps/Validation/tree/master/world/wwwroot/client-jquery" target="_blank" rel="noopener noreferrer">/client-jquery</a> - JavaScript UI using jQuery Ajax Requests</li><li><a href="https://github.com/NetCoreApps/Validation/tree/master/world/wwwroot/client-razor" target="_blank" rel="noopener noreferrer">/client-razor</a> - Client jQuery Ajax Requests rendered by Razor pages</li></ul><p>The source code for all different strategies are encapsulated within their folders above except for the Razor examples which need to maintain their shared resources in the <a href="https://github.com/NetCoreApps/Validation/tree/master/world/Views" target="_blank" rel="noopener noreferrer">/Views</a> folder (representative of friction and restrictions when working with Razor).</p><h3 id="server-implementation" tabindex="-1">Server Implementation <a class="header-anchor" href="#server-implementation" aria-hidden="true">#</a></h3><p>This is the shared backend Server implementation that all UIs are using:</p><p>All Auth Configuration is encapsulated within a &quot;no-touch&quot; <code>IConfigureAppHost</code> plugin that&#39;s run once on Startup:</p><div class="language-cs"><pre><code>\uFEFF<span class="token comment">// Run before AppHost.Configure()</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureAuth</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureAppHost</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> AppSettings <span class="token operator">=</span> appHost<span class="token punctuation">.</span>AppSettings<span class="token punctuation">;</span>
        appHost<span class="token punctuation">.</span>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomUserSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IAuthProvider<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span>
                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CredentialsAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//Enable UserName/Password Credentials Auth</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        appHost<span class="token punctuation">.</span>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RegistrationFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Enable /register Service</span>

        <span class="token comment">//override the default registration validation with your own custom implementation</span>
        appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterAs</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CustomRegistrationValidator<span class="token punctuation">,</span> IValidator<span class="token punctuation">&lt;</span>Register<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ICacheClient<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">MemoryCacheClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Store User Sessions in Memory</span>

        appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">InMemoryAuthRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Store Authenticated Users in Memory</span>

        <span class="token function">CreateUser</span><span class="token punctuation">(</span>appHost<span class="token punctuation">,</span> <span class="token string">&quot;admin@email.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Admin User&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;p@55wOrd&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">roles</span><span class="token punctuation">:</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> RoleNames<span class="token punctuation">.</span>Admin <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Add initial Users to the configured Auth Repository</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> email<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> roles<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> authRepo <span class="token operator">=</span> appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TryResolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> newAdmin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserAuth</span> <span class="token punctuation">{</span> Email <span class="token operator">=</span> email<span class="token punctuation">,</span> DisplayName <span class="token operator">=</span> name <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> user <span class="token operator">=</span> authRepo<span class="token punctuation">.</span><span class="token function">CreateUserAuth</span><span class="token punctuation">(</span>newAdmin<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        authRepo<span class="token punctuation">.</span><span class="token function">AssignRoles</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> roles<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Type class to store additional metadata in Users Session</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomUserSession</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AuthUserSession</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// Custom Validator to add custom validators to built-in /register Service requiring DisplayName and ConfirmPassword</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomRegistrationValidator</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RegistrationValidator</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">CustomRegistrationValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">RuleSet</span><span class="token punctuation">(</span>ApplyTo<span class="token punctuation">.</span>Post<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span>
            <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>DisplayName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>ConfirmPassword<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><p>All Services and Validators used in this App. Extension methods are used to DRY reusable code and a Custom <a href="/auto-mapping.html">Auto Mapping</a> handles conversion between the <code>Contact</code> Data Model and Contact\`\` DTO:</p><div class="language-cs"><pre><code>\uFEFF<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateContactValidator</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AbstractValidator<span class="token punctuation">&lt;</span>CreateContact<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">CreateContactValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>Title<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NotEqual</span><span class="token punctuation">(</span>Title<span class="token punctuation">.</span>Unspecified<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Please choose a title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>Color<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Must</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">IsValidColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Must be a valid color&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>FilmGenres<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Please select at least 1 genre&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>Age<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GreaterThan</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Contacts must be older than 13&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Agree<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithMessage</span><span class="token punctuation">(</span><span class="token string">&quot;You must agree before submitting&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authenticate</span></span><span class="token punctuation">]</span> <span class="token comment">// Limit to Authenticated Users</span>
<span class="token punctuation">[</span><span class="token function">ErrorView</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>CreateContact<span class="token punctuation">.</span>ErrorView<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// Display ErrorView for HTML requests resulting in an Exception</span>
<span class="token punctuation">[</span><span class="token function">DefaultView</span><span class="token punctuation">(</span><span class="token string">&quot;/server/contacts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// Render custom HTML View for HTML Requests</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ContactServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">int</span></span> Counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">internal</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">ConcurrentDictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> Data<span class="token punctuation">.</span>Contact<span class="token punctuation">&gt;</span></span> Contacts <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ConcurrentDictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> Data<span class="token punctuation">.</span>Contact<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">GetContacts</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> userId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">GetUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GetContactsResponse</span>
        <span class="token punctuation">{</span>
            Results <span class="token operator">=</span> Contacts<span class="token punctuation">.</span>Values
                <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>UserAuthId <span class="token operator">==</span> userId<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">OrderByDescending</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Id<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">GetContact</span> request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        Contacts<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> contact<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> contact<span class="token punctuation">.</span>UserAuthId <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">GetUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">?</span> <span class="token punctuation">(</span><span class="token keyword">object</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">GetContactResponse</span> <span class="token punctuation">{</span> Result <span class="token operator">=</span> contact<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
            <span class="token punctuation">:</span> HttpError<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Contact was not found&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">CreateContact</span> request<span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> newContact <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Data<span class="token punctuation">.</span>Contact<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        newContact<span class="token punctuation">.</span>Id <span class="token operator">=</span> Interlocked<span class="token punctuation">.</span><span class="token function">Increment</span><span class="token punctuation">(</span><span class="token keyword">ref</span> Counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        newContact<span class="token punctuation">.</span>UserAuthId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">GetUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        newContact<span class="token punctuation">.</span>CreatedDate <span class="token operator">=</span> newContact<span class="token punctuation">.</span>ModifiedDate <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> contacts <span class="token operator">=</span> Contacts<span class="token punctuation">.</span>Values<span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> alreadyExists <span class="token operator">=</span> contacts<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>UserAuthId <span class="token operator">==</span> newContact<span class="token punctuation">.</span>UserAuthId <span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>Name <span class="token operator">==</span> request<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>alreadyExists<span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;You already have a contact named &#39;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">request<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">&#39;&quot;</span></span><span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        Contacts<span class="token punctuation">[</span>newContact<span class="token punctuation">.</span>Id<span class="token punctuation">]</span> <span class="token operator">=</span> newContact<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CreateContactResponse</span> <span class="token punctuation">{</span> Result <span class="token operator">=</span> newContact<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">AnyHtml</span><span class="token punctuation">(</span><span class="token class-name">CreateContact</span> request<span class="token punctuation">)</span> <span class="token comment">// Called for CreateContact API HTML Requests on any HTTP Method</span>
    <span class="token punctuation">{</span>
        <span class="token function">Any</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> HttpResult<span class="token punctuation">.</span><span class="token function">Redirect</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Continue <span class="token operator">??</span> Request<span class="token punctuation">.</span><span class="token function">GetView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">DeleteContact</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Contacts<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> contact<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> contact<span class="token punctuation">.</span>UserAuthId <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">GetUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            Contacts<span class="token punctuation">.</span><span class="token function">TryRemove</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> <span class="token keyword">out</span> _<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">PostHtml</span><span class="token punctuation">(</span><span class="token class-name">DeleteContact</span> request<span class="token punctuation">)</span> <span class="token comment">// Only called by DeleteContact HTML POST requests </span>
    <span class="token punctuation">{</span>
        <span class="token function">Any</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> HttpResult<span class="token punctuation">.</span><span class="token function">Redirect</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Continue <span class="token operator">??</span> Request<span class="token punctuation">.</span><span class="token function">GetView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//added by [DefaultView]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateContactValidator</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AbstractValidator<span class="token punctuation">&lt;</span>UpdateContact<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">UpdateContactValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GreaterThan</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>Title<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NotEqual</span><span class="token punctuation">(</span>Title<span class="token punctuation">.</span>Unspecified<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Please choose a title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>Color<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Must</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">IsValidColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Must be a valid color&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>FilmGenres<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Please select at least 1 genre&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>Age<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GreaterThan</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Contacts must be older than 13&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ErrorView</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>UpdateContact<span class="token punctuation">.</span>ErrorView<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// Display ErrorView for HTML requests resulting in an Exception</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateContactServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">UpdateContact</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ContactServices<span class="token punctuation">.</span>Contacts<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Id<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> contact<span class="token punctuation">)</span> <span class="token operator">||</span> contact<span class="token punctuation">.</span>UserAuthId <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">GetUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> HttpError<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token string">&quot;Contact was not found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        contact<span class="token punctuation">.</span><span class="token function">PopulateWith</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        contact<span class="token punctuation">.</span>ModifiedDate <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">;</span>
        
        <span class="token keyword">return</span> request<span class="token punctuation">.</span>Continue <span class="token operator">!=</span> <span class="token keyword">null</span> 
            <span class="token punctuation">?</span> <span class="token punctuation">(</span><span class="token keyword">object</span><span class="token punctuation">)</span> HttpResult<span class="token punctuation">.</span><span class="token function">Redirect</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Continue<span class="token punctuation">)</span>
            <span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UpdateContactResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ContactServiceExtensions</span> <span class="token comment">// DRY reusable logic used in Services and Validators</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">GetUserId</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">Service</span> service<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>service<span class="token punctuation">.</span><span class="token function">GetSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>UserAuthId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsValidColor</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name"><span class="token keyword">string</span></span> color<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> 
        <span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">FirstCharEquals</span><span class="token punctuation">(</span><span class="token string character">&#39;#&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">?</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberStyles<span class="token punctuation">.</span>HexNumber<span class="token punctuation">,</span> CultureInfo<span class="token punctuation">.</span>InvariantCulture<span class="token punctuation">,</span> <span class="token keyword">out</span> _<span class="token punctuation">)</span>
            <span class="token punctuation">:</span> Color<span class="token punctuation">.</span><span class="token function">FromName</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">.</span>IsKnownColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Register Custom Auto Mapping for converting Contact Data Model to Contact DTO</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ContactsHostConfig</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureAppHost</span></span> 
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        AutoMapping<span class="token punctuation">.</span><span class="token function">RegisterConverter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Data<span class="token punctuation">.</span>Contact</span> from<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> from<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token named-parameter punctuation">skipConverters</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The dynamic App data used within ServiceStack #Script Pages and Razor pages are maintained within Custom <code>ContactScripts</code> and <code>RazorHelpers</code>:</p><div class="language-cs"><pre><code>\uFEFF<span class="token comment">// Custom filters for App data sources and re-usable UI snippets in ServiceStack Sharp Pages</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ContactScripts</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ScriptMethods</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">internal</span> <span class="token keyword">readonly</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>KeyValuePair<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> MenuItems <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>KeyValuePair<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        KeyValuePair<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Home&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        KeyValuePair<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">&quot;/login-links&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Login Links&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        KeyValuePair<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">&quot;/register-links&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Register Links&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        KeyValuePair<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">&quot;/contact-links&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Contacts Links&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        KeyValuePair<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">&quot;/contact-edit-links&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Edit Contact Links&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>KeyValuePair<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">menuItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> MenuItems<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> Colors <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token string">&quot;#ffa4a2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Red&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">&quot;#b2fab4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Green&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">&quot;#9be7ff&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Blue&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token function">contactColors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Colors<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>KeyValuePair<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> Titles <span class="token operator">=&gt;</span> EnumUtils<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetValues</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Title<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x <span class="token operator">!=</span> Title<span class="token punctuation">.</span>Unspecified<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">ToKeyValuePairs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>KeyValuePair<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">contactTitles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Titles<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> FilmGenres <span class="token operator">=&gt;</span> EnumUtils<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetValues</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>FilmGenres<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">ToDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token function">contactGenres</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> FilmGenres<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Razor Helpers for App data sources and re-usable UI snippets in Razor pages</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">RazorHelpers</span>
<span class="token punctuation">{</span>
    <span class="token keyword">internal</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">ContactScripts</span> Instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ContactScripts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token function">ContactColors</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IHtmlHelper</span> html<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Instance<span class="token punctuation">.</span><span class="token function">contactColors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>KeyValuePair<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">ContactTitles</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IHtmlHelper</span> html<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Instance<span class="token punctuation">.</span><span class="token function">contactTitles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token function">ContactGenres</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IHtmlHelper</span> html<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Instance<span class="token punctuation">.</span><span class="token function">contactGenres</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>KeyValuePair<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">MenuItems</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IHtmlHelper</span> html<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Instance<span class="token punctuation">.</span>MenuItems<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><p>Typed Request/Response Service Contracts including Data and DTO models that utilizes Enum&#39;s:</p><div class="language-cs"><pre><code>\uFEFF<span class="token keyword">namespace</span> Data <span class="token comment">// DB Models</span>
<span class="token punctuation">{</span>
    <span class="token keyword">using</span> <span class="token namespace">ServiceModel<span class="token punctuation">.</span>Types</span><span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Contact</span> <span class="token comment">// Data Model</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> UserAuthId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Title</span> Title <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Color <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">FilmGenres<span class="token punctuation">[</span><span class="token punctuation">]</span></span> FilmGenres <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> CreatedDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> ModifiedDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> ServiceModel <span class="token comment">// Request/Response DTOs</span>
<span class="token punctuation">{</span>
    <span class="token keyword">using</span> <span class="token namespace">Types</span><span class="token punctuation">;</span>
    
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/contacts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetContacts</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReturn<span class="token punctuation">&lt;</span>GetContactsResponse<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetContactsResponse</span> 
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span> Results <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">ResponseStatus</span> ResponseStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/contacts/{Id}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetContact</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReturn<span class="token punctuation">&lt;</span>GetContactResponse <span class="token punctuation">&gt;</span></span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetContactResponse</span> 
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Contact</span> Result <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">ResponseStatus</span> ResponseStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/contacts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateContact</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReturn<span class="token punctuation">&lt;</span>CreateContactResponse<span class="token punctuation">&gt;</span></span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Title</span> Title <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Color <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">FilmGenres<span class="token punctuation">[</span><span class="token punctuation">]</span></span> FilmGenres <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> Agree <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Continue <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ErrorView <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateContactResponse</span> 
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Contact</span> Result <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">ResponseStatus</span> ResponseStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/contacts/{Id}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;POST PUT&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateContact</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReturn<span class="token punctuation">&lt;</span>UpdateContactResponse<span class="token punctuation">&gt;</span></span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">Title</span> Title <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Color <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">FilmGenres<span class="token punctuation">[</span><span class="token punctuation">]</span></span> FilmGenres <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Continue <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ErrorView <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpdateContactResponse</span> 
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">ResponseStatus</span> ResponseStatus <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/contacts/{Id}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;DELETE&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/contacts/{Id}/delete&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// more accessible from HTML</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeleteContact</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReturnVoid</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Continue <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">namespace</span> Types <span class="token comment">// DTO Types</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Contact</span> 
        <span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> UserAuthId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">public</span> <span class="token return-type class-name">Title</span> Title <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Color <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">public</span> <span class="token return-type class-name">FilmGenres<span class="token punctuation">[</span><span class="token punctuation">]</span></span> FilmGenres <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Title</span>
        <span class="token punctuation">{</span>
            Unspecified<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Description</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Mr.&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> Mr<span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Description</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Mrs.&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> Mrs<span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Description</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Miss.&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> Miss
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">FilmGenres</span>
        <span class="token punctuation">{</span>
            Action<span class="token punctuation">,</span>
            Adventure<span class="token punctuation">,</span>
            Comedy<span class="token punctuation">,</span>
            Drama<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><p>Each UI implements 4 different screens which are linked from:</p><ul><li><a href="http://validation.web-app.io/login-links" target="_blank" rel="noopener noreferrer">Login Page</a> - Sign In to ServiceStack&#39;s built-in Username/Password Credentials Auth Provider</li><li><a href="http://validation.web-app.io/register-links" target="_blank" rel="noopener noreferrer">Registration Page</a> - Calling ServiceStack&#39;s built-in <code>/register</code> Service to register a new User</li><li><a href="http://validation.web-app.io/contact-links" target="_blank" rel="noopener noreferrer">Contacts Page</a> - Contacts Form to Add a new Contact and view list of existing contacts</li><li><a href="http://validation.web-app.io/contact-edit-links" target="_blank" rel="noopener noreferrer">Edit Contact Page</a> - Edit Contact Form</li></ul><h3 id="shared-error-handling-concepts" tabindex="-1">Shared Error Handling Concepts <a class="header-anchor" href="#shared-error-handling-concepts" aria-hidden="true">#</a></h3><p>Despite their respective differences they share the same concepts where all validation errors are populated from the Service&#39;s <code>ResponseStatus</code> Error Response. The UI implementations takes care of binding all matching field errors next to their respective controls whilst the <code>validationSummary</code> or <code>errorResponseExcept</code> methods takes a list of field names that they <strong>should not display</strong> as they&#39;ll already be displayed next to their targeted control.</p><p>We&#39;ll cover just the <strong>Login</strong> and <strong>Contacts</strong> Pages since they&#39;re sufficiently different, to see what this looks like in practice:</p><h2 id="login-page" tabindex="-1">Login Page <a class="header-anchor" href="#login-page" aria-hidden="true">#</a></h2><p>The Login Page contains a standard Bootstrap Username/Password form with labels, placeholders and help text, which initially looks like:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/img/apps/Validation/login-validation.png" alt=""></p><p>What it looks like after submitting an empty form with Server Exception Errors rendered against their respective fields:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/img/apps/Validation/login-validation-failed.png" alt=""></p><h3 id="server-uis" tabindex="-1">Server UIs <a class="header-anchor" href="#server-uis" aria-hidden="true">#</a></h3><p>All Server Examples submits a HTML Form Post and renders full page responses:</p>__VP_STATIC_END__`,48),Qn=a('',9),Kn=a('',11),Yn=a(`__VP_STATIC_START__<h3 id="about-server-implementations-1" tabindex="-1">About Server Implementations <a class="header-anchor" href="#about-server-implementations-1" aria-hidden="true">#</a></h3><p>Both the Contacts UIs and Contacts Services are protected resources which uses a <strong>partial</strong> to protect its pages. Normally <code>redirectIfNotAuthenticated</code> wouldn&#39;t require a URL, but one is needed here so it knows the right login page it should redirect to.</p><h4 id="script-pages" tabindex="-1">#Script Pages <a class="header-anchor" href="#script-pages" aria-hidden="true">#</a></h4><p>In <strong>#Script Pages</strong> our wrist-friendly server controls are back as we start to see more of its features. The arguments of the left of the <code>formInput</code> are for HTML attributes you want rendered on the input control whilst the arguments on the right (or 2nd argument) are to enlist the controls other &quot;high-level features&quot; like <code>values</code> which is used to populate a list of radio and checkboxes or <code>formSelect</code> options. The <code>inline</code> argument tells the control to render multiple controls in-line whilst you can use <code>help</code> to render some help text as an aside.</p><p>We also see the introduction of the <code>sendToGateway</code> method used to send the <code>GetContacts</code> Request DTO to call its Service using the <a href="/service-gateway.html">Service Gateway</a>, the Response of which is used to render the list of contacts on the Server.</p><div><p>Another difference is that there are multiple <code>&lt;form&gt;</code> elements on this page to handle deleting a contact by submitting an empty form post to <code>/contacts/{{Id}}/delete</code>.</p></div><p><strong>#Script Pages</strong> doesn&#39;t need to specify its own <code>ErrorView</code> or <code>Continue</code> Request params as its the default view used for <code>ContactServices</code>:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DefaultView</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/server/contacts&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span> <span class="token comment">// Render custom HTML View for HTML Requests</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ContactServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre></div><p>This is typically all that&#39;s needed, as most real-world Apps would rarely have more than 1 HTML View per Service.</p><h4 id="server-typescript" tabindex="-1">Server TypeScript <a class="header-anchor" href="#server-typescript" aria-hidden="true">#</a></h4><p>With <strong>Server TypeScript</strong> you&#39;re starting to see the additional effort required when you need to use your own custom markup to render form controls.</p><p>It differs with <strong>#Script Pages</strong> in that instead of rendering the list of contacts on the server, it renders the <code>GetContacts</code> Response DTO as JSON which is interpreted in the browser as a native JS Object literal which the <code>render()</code> method uses to render the list of contacts in the browser.</p><p>Deleting a contact is also handled differently where it uses the <code>JsonServiceClient</code> to send the <code>DeleteContact</code> Request DTO from the generated <code>dtos.ts</code>. After the request completes it uses <code>GetContacts</code> to fetch an updated list of Contacts which it re-renders.</p><h4 id="server-jquery" tabindex="-1">Server jQuery <a class="header-anchor" href="#server-jquery" aria-hidden="true">#</a></h4><p><strong>Server jQuery</strong> adopts the same approach as <strong>Server TypeScript</strong> but renders it using jQuery and uses custom routes constructed on the client with jQuery&#39;s Ajax APIs to call the <code>ContactServices</code>.</p><h4 id="server-razor" tabindex="-1">Server Razor <a class="header-anchor" href="#server-razor" aria-hidden="true">#</a></h4><p><strong>Server Razor</strong> is very similar to <strong>#Script Pages</strong> but implemented using Razor. In many cases the built-in script methods in #Script Pages have Razor equivalents, either in the base <code>ViewPage&lt;T&gt;</code> class like <code>RedirectIfNotAuthenticated()</code> or as a <code>@Html</code> helper.</p><h3 id="client-uis-1" tabindex="-1">Client UIs <a class="header-anchor" href="#client-uis-1" aria-hidden="true">#</a></h3>__VP_STATIC_END__`,18),Xn=a(`__VP_STATIC_START__<h3 id="about-client-implementations-1" tabindex="-1">About Client Implementations <a class="header-anchor" href="#about-client-implementations-1" aria-hidden="true">#</a></h3><p><strong>Vuetify</strong> ends up being larger than other implementations as it also handles Edit Contacts functionality which is a separate page in other UIs. It also includes additional functionality like client-side validation enabled in each control using its <code>:rules</code> attribute. One thing that remains consistent is the way to call ServiceStack Services and handle errors by assigning it to <code>this.responseStatus</code> which the reactive <code>errorResponse</code> method uses to bind to each control.</p><p>The remaining client implementations show that whilst the server controls require the least code, if you need custom markup it&#39;s much easier to render the initial markup once, then use <code>bootstrapForm()</code> to bind any validation errors and handle the ajax form submissions. It&#39;s especially valuable when you need to update a form where the same markup can be populated by just assigning the <code>model</code> property as done in the <a href="http://validation.web-app.io/contact-edit-links" target="_blank" rel="noopener noreferrer">Edit Contact Pages</a>:</p><div class="language-ts"><pre><code><span class="token keyword">const</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;form&quot;</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">;</span>
<span class="token function">bootstrapForm</span><span class="token punctuation">(</span>form<span class="token punctuation">,</span><span class="token punctuation">{</span>
    model<span class="token operator">:</span> <span class="token constant">CONTACT</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&#39;/client-ts/contacts/&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The amount of code can be even further reduced when using an SPA framework that allows easy componentization as seen in the <a href="#vue-lite-project-template-features">Vue Form Validation</a> and <a href="#react-lite-project-template-features">React Form Validation</a> examples.</p><h2 id="no-touch-host-configuration" tabindex="-1">&quot;No touch&quot; Host Configuration <a class="header-anchor" href="#no-touch-host-configuration" aria-hidden="true">#</a></h2><p>There&#39;s also a couple of new ServiceStack features that World Validation introduces, the first is that all Auth Configuration logic is encapsulated in a single <a href="https://github.com/NetCoreApps/Validation/blob/master/world/Configure.Auth.cs" target="_blank" rel="noopener noreferrer">Configure.Auth.cs</a>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureAuth</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureAppHost</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Auth configuration logic</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can use this to refactor out different cohesive parts your Host configuration over multiple files and decouple them from your concrete <code>AppHost</code> which ServiceStack automatically runs all <code>IPreConfigureAppHost</code>, <code>IConfigureAppHost</code> and <code>IPostConfigureAppHost</code> interfaces on Startup it can find in either your <code>AppHost</code> Assembly or <strong>Service Assemblies</strong> specified in your AppHost constructor.</p><p>This opens up a number of re-use benefits where you&#39;ll be able to use the same AppHost configuration if your Services are being hosted in <a href="/why-servicestack.html#multiple-hosting-options">different Hosting Options</a>, it makes it easy to maintain a standardized configuration across many of your ServiceStack projects, e.g. you can easily replace <code>Configure.Auth.cs</code> in all your projects to ensure they&#39;re running the same Auth Configuration without impacting any of the projects other bespoke host configuration.</p><p>It also allows you to maintain any necessary Startup configuration that your Services implementation needs alongside the Services themselves.</p><p>E.g. This is used to register the <code>Data.Contact</code> to DTO <code>Contact</code> <a href="/auto-mapping.html">Auto Mapping</a>:</p><div class="language-csharp"><pre><code><span class="token comment">// Register Custom Auto Mapping for converting Contact Data Model to Contact DTO</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ContactsHostConfig</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureAppHost</span></span> 
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        AutoMapping<span class="token punctuation">.</span><span class="token function">RegisterConverter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Data<span class="token punctuation">.</span>Contact</span> from<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> from<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Contact<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token named-parameter punctuation">skipConverters</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>There are <strong>3 different Startup interfaces</strong> you can use depending on when you want your configuration to run.</p><p>Use <code>IPreConfigureAppHost</code> for Startup logic you want to run before the AppHost starts initialization, this is run before <code>AppHost.Config</code> is initialized or Services are registered so has limited configurability but is useful if you want to register additional Service Assemblies with ServiceStack, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureContactsServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IPreConfigureAppHost</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> host<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> host<span class="token punctuation">.</span>ServiceAssemblies<span class="token punctuation">.</span><span class="token function">AddIfNotExists</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyServices</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Assembly<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Use <code>IConfigureAppHost</code> for Startup logic you want to run immediately <strong>before</strong> <code>AppHost.Configure()</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IConfigureAppHost</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Use <code>IPostConfigureAppHost</code> for Startup logic you want to run immediately <strong>after</strong> <code>AppHost.Configure()</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IPostConfigureAppHost</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="auto-mapping" tabindex="-1">Auto Mapping <a class="header-anchor" href="#auto-mapping" aria-hidden="true">#</a></h2><p>We&#39;ve added the number 1 feature request that prevented many Customers from using ServiceStack&#39;s built-in Auto Mapping instead of the more feature-complete <a href="https://automapper.org" target="_blank" rel="noopener noreferrer">AutoMapper</a>.</p><p>Our stance was that you should use a C# Extension Method for any additional Custom Conversions that didn&#39;t follow the intuitive mapping convention, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ConvertExtensions</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">MyDto</span> <span class="token function">ToDto</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">MyViewModel</span> from<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> to <span class="token operator">=</span> from<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyDto<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        to<span class="token punctuation">.</span>Items <span class="token operator">=</span> from<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">ConvertAll</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">ToDto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        to<span class="token punctuation">.</span>CalculatedProperty <span class="token operator">=</span> <span class="token function">Calculate</span><span class="token punctuation">(</span>from<span class="token punctuation">.</span>Seed<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> to<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which would be explicitly called when you want to convert between a Data Model and View Model:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> dto <span class="token operator">=</span> viewModel<span class="token punctuation">.</span><span class="token function">ToDto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Using C# methods ensures conversion is explicit, discoverable, debuggable, fast and flexible with access to the full C# language at your disposal whose conversion logic can be further DRY&#39;ed behind reusable extension methods.</p><p>The problem with his is having to call this extension method manually everywhere you want this conversion to occur.</p><h3 id="register-converters" tabindex="-1">Register Converters <a class="header-anchor" href="#register-converters" aria-hidden="true">#</a></h3><p>No More! You can now register a custom Converter mapping using the new <code>AutoMapping.RegisterConverter()</code> APIs, e.g:</p><div class="language-csharp"><pre><code><span class="token comment">// Data.User -&gt; DTO User</span>
AutoMapping<span class="token punctuation">.</span><span class="token function">RegisterConverter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Data<span class="token punctuation">.</span>User</span> from<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> to <span class="token operator">=</span> from<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token named-parameter punctuation">skipConverters</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// avoid infinite recursion</span>
    to<span class="token punctuation">.</span>FirstName <span class="token operator">=</span> from<span class="token punctuation">.</span>GivenName<span class="token punctuation">;</span>
    to<span class="token punctuation">.</span>LastName <span class="token operator">=</span> from<span class="token punctuation">.</span>Surname<span class="token punctuation">;</span>
    <span class="token keyword">return</span> to<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Car -&gt; String</span>
AutoMapping<span class="token punctuation">.</span><span class="token function">RegisterConverter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Car</span> from<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">from<span class="token punctuation">.</span>Model</span><span class="token punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">from<span class="token punctuation">.</span>Year</span><span class="token punctuation">}</span></span><span class="token string">)&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// WrappedDate -&gt; DateTime</span>
AutoMapping<span class="token punctuation">.</span><span class="token function">RegisterConverter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">WrappedDate</span> from<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> from<span class="token punctuation">.</span><span class="token function">ToDateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// DateTime    -&gt; WrappedDate</span>
AutoMapping<span class="token punctuation">.</span><span class="token function">RegisterConverter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">DateTime</span> from<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WrappedDate</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Where it will be called whenever a conversion between <code>Data.User -&gt; User</code> or <code>Car -&gt; String</code> is needed, inc. nested types and collections.</p><p>Converters can also be used when you want to &quot;take over&quot; and override the default conversion behavior.</p><h3 id="ignore-mapping" tabindex="-1">Ignore Mapping <a class="header-anchor" href="#ignore-mapping" aria-hidden="true">#</a></h3><p>Use the new <code>AutoMapping.IgnoreMapping()</code> API to specify mappings you want to skip entirely, e.g:</p><div class="language-csharp"><pre><code><span class="token comment">// Ignore Data.User -&gt; User</span>
AutoMapping<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">IgnoreMapping</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Data<span class="token punctuation">.</span>User<span class="token punctuation">,</span> User<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Ignore List&lt;Data.User&gt; -&gt; List&lt;User&gt;</span>
AutoMapping<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">IgnoreMapping</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>Data<span class="token punctuation">.</span>User<span class="token punctuation">&gt;</span><span class="token punctuation">,</span> List<span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="support-for-implicit-explicit-type-casts" tabindex="-1">Support for Implicit / Explicit Type Casts <a class="header-anchor" href="#support-for-implicit-explicit-type-casts" aria-hidden="true">#</a></h3><p>This release also extends the built-in Auto Mapping to use any <code>implicit</code> or <code>explicit</code> Value Type Casts when they exists, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">struct</span> <span class="token class-name">A</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">implicit</span> <span class="token keyword">operator</span> <span class="token function">B</span><span class="token punctuation">(</span><span class="token class-name">A</span> from<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">B</span><span class="token punctuation">(</span>from<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">B</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">B</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">implicit</span> <span class="token keyword">operator</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token class-name">B</span> from<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">A</span><span class="token punctuation">(</span>from<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name"><span class="token keyword">var</span></span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">A</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>B<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="powerful-and-capable" tabindex="-1">Powerful and Capable <a class="header-anchor" href="#powerful-and-capable" aria-hidden="true">#</a></h3><p>Due to its heavy reliance in <code>#Script</code> and other parts in ServiceStack, the built-in Auto Mapping is a sophisticated implementation that covers a large number of use-cases and corner cases when they can be intuitively mapped.</p><p>To see a glimpse of its available capabilities check out some of the examples in the docs where it&#39;s able to <a href="/reflection-utils.html#call-any-method-dynamically">call any method or construct any type dynamically</a> using different Types.</p><p>Or how it&#39;s able to <a href="/reflection-utils.html#converting-instances-from-an-object-dictionary">convert any Reference Type into and out of an Object Dictionary</a>, providing a simple approach to dynamically manipulating Types.</p><h2 id="page-based-routing-in-razor" tabindex="-1">Page Based Routing in Razor! <a class="header-anchor" href="#page-based-routing-in-razor" aria-hidden="true">#</a></h2><p>Another feature introduced in the Validation App is the new support for Page Based Routing in <a href="/netcore-razor.html">ASP.NET Core Razor</a> which lets you use a <code>_</code> prefix to declare a variable placeholder for dynamic routes defined solely by directory and file names.</p><p>With this feature we can use a <code>_id</code> directory name to declare an <code>id</code> variable place holder:</p><ul><li><a href="https://github.com/NetCoreApps/Validation/blob/master/world/wwwroot/server-razor/contacts/_id/edit.cshtml" target="_blank" rel="noopener noreferrer">/contacts/_id/edit.cshtml</a></li></ul><p>This will let you navigate to the <code>edit.cshtml</code> page directly to edit a contact using the ideal &quot;pretty url&quot; we want:</p><ul><li><a href="http://validation.web-app.io/server-razor/contacts/1/edit" target="_blank" rel="noopener noreferrer">/contacts/1/edit</a></li></ul><p>Placeholders can be on both directory or file names, e.g:</p><ul><li><code>/contacts/edit/_id.cshtml</code> -&gt; <strong>/contacts/edit/1</strong></li></ul><p>Inside your Razor page you can fetch any populated placeholders from the <code>ViewBag</code>:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> id <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>ViewBag<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> contact <span class="token operator">=</span> Html<span class="token punctuation">.</span><span class="token function">Exec</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Gateway<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">GetContact</span> <span class="token punctuation">{</span> Id <span class="token operator">=</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Result<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Which <a href="https://github.com/NetCoreApps/Validation/blob/master/world/wwwroot/server-razor/contacts/_id/edit.cshtml" target="_blank" rel="noopener noreferrer">/_id/edit.cshtml</a> uses to call the <code>GetContact</code> Service using the <a href="/service-gateway.html">Service Gateway</a>.</p><blockquote><p><code>Html.Exec()</code> is a UX-friendly alternative to using <code>try/catch</code> boilerplate in Razor</p></blockquote><h4 id="limitation" tabindex="-1">Limitation <a class="header-anchor" href="#limitation" aria-hidden="true">#</a></h4><p>One drawback of page based routing is that MVC is unable to resolve Page Based Routes when pre-compiled and will need to disabled with:</p><div class="language-xml"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MvcRazorCompileOnPublish</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MvcRazorCompileOnPublish</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="consider-pretty-urls-for-public-pages" tabindex="-1">Consider &quot;pretty-urls&quot; for public pages <a class="header-anchor" href="#consider-pretty-urls-for-public-pages" aria-hidden="true">#</a></h3><p>A constant eyesore that hurts my aesthetic eye when surfing the web is how you can immediately tell that a Website is written in <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> by its <code>/{Controller}/{Action}</code> routing convention or <code>.aspx</code> suffix. This forces URL abnormalities where instead of choosing the ideal identifier for your public resource, the path tends to adopt internal method and class names that typically makes more sense to its developers than to external users. These dictated conventions also results in the <code>?queryString</code> becoming a data bag of params that should otherwise be hidden or included as part of its public URI identifier.</p><h4 id="permalinks-important-for-seo-usability-and-refactorability" tabindex="-1">Permalinks important for SEO, usability and refactorability <a class="header-anchor" href="#permalinks-important-for-seo-usability-and-refactorability" aria-hidden="true">#</a></h4><p>In general it&#39;s not a good idea to let a technology to dictate what your public routes end up being. Ideally your external routes should be regarded as permalinks and decoupled from their internal implementations as you don&#39;t want internal refactors to cause link rot, break existing inbound navigation or lose any SEO weight they&#39;ve accumulated.</p><p>If you adopt the ideal URL from the start, you&#39;ll never have a reason to change it and the decoupling frees you from being able to refactor it&#39;s mapped implementation or even replacing the underlying technology completely as the ideal routes are already at what they should be that&#39;s free from any technology bias.</p><p>Pretty URLs or <a href="https://en.wikipedia.org/wiki/Clean_URL" target="_blank" rel="noopener noreferrer">Clean URLs</a> also provide important usability and accessibility benefits to non technical users where their prominent location in browsers is a valuable opportunity to add meaningful context on where they are in your Website.</p><h4 id="pre-defined-routes-are-optimal-for-machines" tabindex="-1">Pre-defined Routes are optimal for machines <a class="header-anchor" href="#pre-defined-routes-are-optimal-for-machines" aria-hidden="true">#</a></h4><p>In ServiceStack all Services are automatically available using the <a href="/routing.html#pre-defined-routes">pre-defined routes</a> which is optimal for automated tooling and machinery as they can be predicted without requiring any server meta information.</p><h4 id="optimize-custom-routes-for-humans" tabindex="-1">Optimize Custom Routes for humans <a class="header-anchor" href="#optimize-custom-routes-for-humans" aria-hidden="true">#</a></h4><p>Use <a href="/routing.html#custom-routes">Custom Routes</a> to also make your <strong>Services</strong> available at the optimal Clean URLs for humans. For <strong>Content Pages</strong> you can take advantage of <strong>Page Based Routing</strong> in both <strong>#Script Pages</strong> and now in <strong>Razor</strong> to specify the ideal route for your page which in addition to requiring less effort to define (as they&#39;re implicitly defined) they&#39;re also less effort to implement as <strong>no Controller or Service</strong> are needed. They also benefit from being immediately inferrible by looking at the intuitively mapped directory and file names alone which works equally well in reverse where the page for a route will be exactly where you think it will be.</p><h4 id="designing-clean-urls" tabindex="-1">Designing Clean URLs <a class="header-anchor" href="#designing-clean-urls" aria-hidden="true">#</a></h4><p>Some great references on designing RESTful Pretty URLs are the <a href="https://en.wikipedia.org/wiki/Clean_URL#Structure" target="_blank" rel="noopener noreferrer">Clean URL examples in Wikipedia</a>:</p>__VP_STATIC_END__`,70),Zn=a(`__VP_STATIC_START__<h4 id="get-inspired-by-github" tabindex="-1">Get Inspired by GitHub <a class="header-anchor" href="#get-inspired-by-github" aria-hidden="true">#</a></h4><p>For some real-world inspiration look to <a href="https://github.com" target="_blank" rel="noopener noreferrer">github.com</a> who are masters at it. You can tell a lot of thought went into meticulously choosing the ideal routes they want for all of their sites functionality. This has added tremendous value to GitHub&#39;s usability whose intuitive routes have made deep navigation possible where you can jump directly to the page you want without always having to navigate from their home page as needed in most websites with framework-generated routes who are more susceptible to negatively impacting user engagement in home page redesigns that move around existing links and navigation. GitHub&#39;s logically grouped routes also gets a natural assist from Autocomplete in browsers who are better able to complete previously visited GitHub URLs.</p><h2 id="web-tool" tabindex="-1"><code>web</code> tool <a class="header-anchor" href="#web-tool" aria-hidden="true">#</a></h2><p>Our <code>web</code> (and <code>app</code>) .NET Core tools have graduated to become a versatile invaluable companion for all ServiceStack developers.</p><p>It builds on our last <a href="/releases/v5.4.html">v5.4 release</a> where it served as a <a href="https://sharpscript.net/docs/sharp-apps" target="_blank" rel="noopener noreferrer">Sharp App</a> delivery platform where they can be run as a .NET Core Windows Desktop App with <code>app</code> or as a cross-platform Web App launcher using <code>web</code> and we&#39;ve already how it&#39;s now a <a href="#sharp-scripts"><code>#Script</code> runner</a> with <code>web run</code> and into a <a href="#live-script-with-web-watch">Live <code>#Script</code> playground</a> with <code>web watch</code>.</p><p>They&#39;ve now also gained all existing features from our <a href="https://github.com/ServiceStack/servicestack-cli" target="_blank" rel="noopener noreferrer">@servicestack/cli</a> npm tools so you&#39;ll <strong>no longer need npm</strong> to create ServiceStack projects or Add/Update ServiceStack References.</p><p>To access available features, install with:</p><pre><code>$ dotnet tool install --global web 
</code></pre><p>Or if you had a previous version installed, update with:</p><pre><code>$ dotnet tool update -g web
</code></pre><p>Then run <code>web</code> without any arguments to view Usage:</p><pre><code>$ web
</code></pre><div class="language-"><pre><code>Usage:

  web new                     List available Project Templates
  web new &lt;template&gt; &lt;name&gt;   Create New Project From Template

  web &lt;lang&gt;                  Update all ServiceStack References in directory (recursive)
  web &lt;file&gt;                  Update existing ServiceStack Reference (e.g. dtos.cs)
  web &lt;lang&gt;     &lt;url&gt; &lt;file&gt; Add ServiceStack Reference and save to file name
  web csharp     &lt;url&gt;        Add C# ServiceStack Reference         (Alias &#39;cs&#39;)
  web typescript &lt;url&gt;        Add TypeScript ServiceStack Reference (Alias &#39;ts&#39;)
  web swift      &lt;url&gt;        Add Swift ServiceStack Reference      (Alias &#39;sw&#39;)
  web java       &lt;url&gt;        Add Java ServiceStack Reference       (Alias &#39;ja&#39;)
  web kotlin     &lt;url&gt;        Add Kotlin ServiceStack Reference     (Alias &#39;kt&#39;)
  web dart       &lt;url&gt;        Add Dart ServiceStack Reference       (Alias &#39;da&#39;)
  web fsharp     &lt;url&gt;        Add F# ServiceStack Reference         (Alias &#39;fs&#39;)
  web vbnet      &lt;url&gt;        Add VB.NET ServiceStack Reference     (Alias &#39;vb&#39;)
  web tsd        &lt;url&gt;        Add TypeScript Definition ServiceStack Reference

  web +                       Show available gists
  web +&lt;name&gt;                 Write gist files locally, e.g:
  web +init                   Create empty .NET Core 2.2 ServiceStack App
  web + #&lt;tag&gt;                Search available gists
  web gist &lt;gist-id&gt;          Write all Gist text files to current directory

  web run &lt;name&gt;.ss           Run #Script within context of AppHost   (or &lt;name&gt;.html)
  web watch &lt;name&gt;.ss         Watch #Script within context of AppHost (or &lt;name&gt;.html)

  web run                     Run Sharp App in App folder using local app.settings
  web run path/app.settings   Run Sharp App at folder containing specified app.settings

  web list                    List available Sharp Apps            (Alias &#39;l&#39;)
  web gallery                 Open Sharp App Gallery in a Browser  (Alias &#39;g&#39;)
  web install &lt;name&gt;          Install Sharp App                    (Alias &#39;i&#39;)

  web publish                 Package Sharp App to /publish ready for deployment (.NET Core Required)
  web publish-exe             Package self-contained .exe Sharp App to /publish  (.NET Core Embedded)

  web shortcut                Create Shortcut for Sharp App
  web shortcut &lt;name&gt;.dll     Create Shortcut for .NET Core App

  dotnet tool update -g web   Update to latest version

Options:
    -h, --help, ?             Print this message
    -v, --version             Print this version
    -d, --debug               Run in Debug mode for Development
    -r, --release             Run in Release mode for Production
    -s, --source              Change GitHub Source for App Directory
    -f, --force               Quiet mode, always approve, never prompt
        --clean               Delete downloaded caches
        --verbose             Display verbose logging
</code></pre></div><h3 id="add-update-servicestack-references" tabindex="-1">Add/Update ServiceStack References <a class="header-anchor" href="#add-update-servicestack-references" aria-hidden="true">#</a></h3><p>This shows us we can Add a ServiceStack Reference with <code>web &lt;lang&gt; &lt;baseurl&gt;</code> which will let us create a TypeScript Reference to the new <a href="#world-validation">World Validation</a> App using its <code>ts</code> file extension alias:</p><pre><code>$ web ts http://validation.web-app.io

Saved to: dtos.ts
</code></pre><p>Or create a C# ServiceStack Reference with:</p><pre><code>$ web cs http://validation.web-app.io

Saved to: dtos.cs
</code></pre><p>To update run <code>web &lt;lang&gt;</code> which will recursively update all existing ServiceStack References:</p><pre><code>$ web ts

Updated: dtos.ts
</code></pre><h2 id="web-new-net-s-missing-project-template-system" tabindex="-1"><code>web new</code> - .NET&#39;s missing project template system <a class="header-anchor" href="#web-new-net-s-missing-project-template-system" aria-hidden="true">#</a></h2><p>It&#39;s not often that a tool causes enough friction that it ends up requiring less effort to develop a replacement than it is to continue using the tool. But this has been our experience with maintaining our <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a> Templates in the <a href="https://github.com/ServiceStack/ServiceStackVS" target="_blank" rel="noopener noreferrer">ServiceStackVS</a> <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a> Extension which has been the biggest time sink of all our 3rd Party Integrations where the iteration time to check in a change, wait for CI build, uninstall/re-install the <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a> extension and create and test new projects is measured in hours not minutes. To top off the poor development experience we&#39;ve now appeared to have reached the limits of the number of Project Templates we can bundle in our 5MB <strong>ServiceStackVS.vsix</strong> <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a> Extension as a number of Customers have reported seeing <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a> warning messages that ServiceStackVS is taking too long to load.</p><p>Given all the scenarios ServiceStack can be used in, we needed a quicker way to create, update and test our growing <strong>47 starting project templates</strong>. In the age of simple command-line dev tools like git and .NET Core&#39;s light weight text/human friendly projects, maintaining and creating new .NET project templates still feels archaic &amp; legacy requiring packaging projects as binary blobs in NuGet packages which become stale the moment they&#39;re created.</p><h3 id="github-powered-project-templates" tabindex="-1">GitHub powered Project Templates <a class="header-anchor" href="#github-powered-project-templates" aria-hidden="true">#</a></h3><p>Especially for SPA projects which need to be frequently updated, the existing .NET Project Templates system is a stale solution that doesn&#39;t offer much benefit over maintaining individual GitHub projects, which is exactly what the <code>dotnet-new</code> npm tool and now <code>web new</code> .NET Core are designed around.</p><p>Inside <a href="/dotnet-new.html">dotnet-new</a> and <code>web new</code> is an easier way to create and share any kind of project templates which are easier for developers to create, test, maintain and install. So if you&#39;re looking for a simpler way to be able to create and maintain your own value-added project templates with additional bespoke customizations, functionality, dependencies and configuration, using <code>web new</code> is a great way to maintain and share them.</p><p>Using GitHub for maintaining project templates yields us a lot of natural benefits:</p><ul><li>Uses the same familiar development workflow to create and update Project Templates</li><li>Git commit history provides a public audit trail of changes</li><li>Publish new versions of project templates by creating a new GitHub release</li><li>Compare changes between Project Templates using GitHub&#39;s compare changes viewer</li><li>Browse and Restore Previous Project Releases</li><li>End users can raise issues with individual project templates and send PR contributions</li></ul><h3 id="always-up-to-date" tabindex="-1">Always up to date <a class="header-anchor" href="#always-up-to-date" aria-hidden="true">#</a></h3><p>Importantly end users will always be able to view the latest list of project templates and create projects using the latest available version, even if using older versions of the tools as they query GitHub&#39;s public APIs to list all currently available projects that for installation will use the latest published release (or <strong>master</strong> if there are no published releases), which if available, downloads, caches and creates new projects from the latest published <code>.zip</code> release.</p><h3 id="just-regular-projects" tabindex="-1">Just regular Projects <a class="header-anchor" href="#just-regular-projects" aria-hidden="true">#</a></h3><p>Best of all creating and testing projects are now much easier since project templates are just working projects following a simple naming convention that when a new project is created with:</p><pre><code>$ web new &lt;template&gt; ProjectName
</code></pre><p>Replaces all occurrences in all text files, file and directory names, where:</p><ul><li><code>MyApp</code> is replaced with <code>ProjectName</code></li><li><code>my-app</code> is replaced with <code>project-name</code></li><li><code>My App</code> is replaced with <code>Project Name</code></li></ul><p>The tool installer then inspects the project contents and depending on what it finds will:</p><ul><li>Restore the .NET <code>.sln</code> if it exists</li><li>Install npm packages if <code>package.json</code> exists</li><li>Install libman packages if <code>libman.json</code> exists</li></ul><p>That after installation is complete, results in newly created projects being all setup and ready to run.</p><h3 id="available-project-templates" tabindex="-1">Available project templates <a class="header-anchor" href="#available-project-templates" aria-hidden="true">#</a></h3><p>One missing detail is how it finds which GitHub repo should be installed from the <code>&lt;template&gt;</code> name.</p><p>This can be configured with the <code>APP_SOURCE_TEMPLATES</code> Environment variable to configure the <code>web</code> tool to use your own GitHub organizations instead, e.g:</p><pre><code>APP_SOURCE_TEMPLATES=NetCoreTemplates;NetFrameworkTemplates;NetFrameworkCoreTemplates
</code></pre><p>Optionally you can display a friendly name next to each Organization name, e.g:</p><pre><code>APP_SOURCE_TEMPLATES=NetCoreTemplates .NET Core C# Templates;
</code></pre><p><code>web new</code> will then use the first GitHub Repo that matches the <code>&lt;template&gt;</code> name from all your GitHub Sources, so this does require that all repos have unique names across all your configured GitHub Sources.</p><p>These are the only sources <code>web new</code> looks at to create ServiceStack projects, which by default is configured to use <a href="https://github.com/NetCoreTemplates" target="_blank" rel="noopener noreferrer">NetCoreTemplates</a>, <a href="https://github.com/NetFrameworkTemplates" target="_blank" rel="noopener noreferrer">NetFrameworkTemplates</a> and <a href="https://github.com/NetFrameworkCoreTemplates" target="_blank" rel="noopener noreferrer">NetFrameworkCoreTemplates</a> GitHub Organizations, whose repos will be listed when running:</p><pre><code>$ web new
</code></pre><div class="language-"><pre><code>.NET Core C# Templates:

   1. angular-lite-spa   .NET Core 2.1 Angular 4 Material Design Lite Webpack App
   2. angular-spa        .NET Core 2.1 Angular 8 CLI Bootstrap App
   3. aurelia-spa        .NET Core 2.1 Aurelia CLI Bootstrap App
   4. bare-app        .NET Core 2.1 Bare Sharp Apps
   5. mvc                .NET Core 2.1 MVC Website
   6. mvcauth            .NET Core 2.2 MVC Website integrated with ServiceStack Auth
   7. mvcidentity        .NET Core 2.2 MVC Website integrated with ServiceStack using MVC Identity Auth
   8. mvcidentityserver  .NET Core 2.1 MVC Website integrated with ServiceStack using IdentityServer4 Auth
   9. parcel             .NET Core 2.1 Parcel TypeScript App
  10. parcel-app      .NET Core 2.1 Parcel Sharp Apps
  11. razor              .NET Core 2.1 Website with ServiceStack.Razor
  12. react-lite         .NET Core 2.1 simple + lite (npm-free) React SPA using TypeScript inc bundling + hot reloading
  13. react-spa          .NET Core 2.1 React Create App CLI Bootstrap App
  14. rockwind-app    .NET Core 2.1 Rockwind Sharp Apps
  15. selfhost           .NET Core 2.1 self-hosting Console App
  16. script             .NET Core 2.1 #Script Pages Bootstrap Website
  17. vue-lite           .NET Core 2.1 simple + lite (npm-free) Vue SPA using TypeScript inc bundling + hot reloading
  18. vue-nuxt           .NET Core 2.1 Nuxt.js SPA App with Bootstrap
  19. vue-spa            .NET Core 2.1 Vue CLI Bootstrap App
  20. vuetify-nuxt       .NET Core 2.1 Nuxt.js SPA App with Material Vuetify
  21. vuetify-spa        .NET Core 2.1 Vue CLI App with Material Vuetify
  22. web                .NET Core 2.1 Empty Website

.NET Framework C# Templates:

   1. angular-lite-spa-netfx    .NET Framework Angular 4 Material Design Lite Webpack App
   2. angular-spa-netfx         .NET Framework Angular 8 Bootstrap cli.angular.io App
   3. aurelia-spa-netfx         .NET Framework Aurelia Bootstrap Webpack App
   4. mvc-netfx                 .NET Framework MVC Website
   5. razor-netfx               .NET Framework Website with ServiceStack.Razor
   6. react-desktop-apps-netfx  .NET Framework React Desktop Apps
   7. react-spa-netfx           .NET Framework React Bootstrap Webpack App
   8. selfhost-netfx            .NET Framework self-hosting HttpListener Console App
   9. script-netfx              .NET Framework #Script Pages Bootstrap WebApp
  10. vue-nuxt-netfx            .NET Framework Vue Nuxt.js SPA Web App
  11. vue-spa-netfx             .NET Framework Vue Bootstrap Webpack App
  12. vuetify-nuxt-netfx        .NET Framework Vuetify Material Nuxt.js SPA Web App
  13. vuetify-spa-netfx         .NET Framework Vuetify Material Webpack App
  14. web-netfx                 .NET Framework Empty Website
  15. winservice-netfx          .NET Framework Windows Service

ASP.NET Core Framework Templates:

   1. mvc-corefx         .NET Framework ASP.NET Core MVC Website
   2. razor-corefx       .NET Framework ASP.NET Core Website with ServiceStack.Razor
   3. react-lite-corefx  .NET Framework ASP.NET Core lite (npm-free) React SPA using TypeScript inc bundling + hot reloading
   4. selfhost-corefx    .NET Framework ASP.NET Core self-hosting Console App
   5. script-corefx      .NET Framework ASP.NET Core #Script Pages Bootstrap Website
   6. vue-lite-corefx    .NET Framework ASP.NET Core lite (npm-free) Vue SPA using TypeScript inc bundling + hot reloading
   7. web-corefx         .NET Framework ASP.NET Core Website
   8. empty-corefx       .NET Framework ASP.NET Core Single Project Website
</code></pre></div><h2 id="web-customize-mix-match-projects-from-gists" tabindex="-1"><code>web +</code> - customize mix/match projects from gists! <a class="header-anchor" href="#web-customize-mix-match-projects-from-gists" aria-hidden="true">#</a></h2><p>Whilst we believe <code>web new</code> is a super simple way to create and maintain project templates, we&#39;ve also created an even simpler and lighter way to create projects - from gists!</p><p>We can use <code>web +</code> (read as &quot;apply gist&quot;) to create light-weight customized projects by applying multiple gists on top of each other. One of the major benefits of this approach is that it&#39;s not only limited at project creation time as it&#39;s also a great way to easily add &quot;layered functionality&quot; to existing projects and was the catalyst for the new &quot;no touch&quot; <code>IConfigureAppHost</code> interfaces which allows for easy extension and replacement of isolated AppHost configuration.</p><p>We saw an example of this earlier with how we can use this to <a href="#updating-lite-project-dependencies">easily update dependencies in &quot;lite&quot; projects</a> which is just applying the <strong>vue-lite-lib</strong> and <strong>react-lite-lib</strong> to your existing &quot;lite&quot; projects:</p><pre><code>$ web +vue-lite-lib
</code></pre><h3 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-hidden="true">#</a></h3><p>Similar to <code>web</code> other features, we get the full user experience where we can list, search and apply gists from the commands below:</p><div class="language-"><pre><code>Usage: 
  web +                       Show available gists
  web +&lt;name&gt;                 Write gist files locally, e.g:
  web + #&lt;tag&gt;                Search available gists
  web gist &lt;gist-id&gt;          Write all Gist text files to current directory
</code></pre></div><p>Where we can view all available gists that we can apply to our projects with:</p><pre><code>$ web +
</code></pre><p>Which as of this writing lists:</p><div class="language-"><pre><code>   1. init                 Empty .NET Core 2.2 ServiceStack App                                   to: .                            by @ServiceStack  [project]
   2. init-lts             Empty .NET Core 2.1 LTS ServiceStack App                               to: .                            by @ServiceStack  [project]
   3. init-corefx          Empty ASP.NET Core 2.1 LTS on .NET Framework                           to: .                            by @ServiceStack  [project]
   4. init-sharp-app       Empty ServiceStack Sharp App                                           to: .                            by @ServiceStack  [project]
   5. bootstrap-sharp      Bootstrap + #Script Pages Starter Template                             to: $HOST                        by @ServiceStack  [ui,sharp]
   6. sqlserver            Use OrmLite with SQL Server                                            to: $HOST                        by @ServiceStack  [db]
   7. sqlite               Use OrmLite with SQLite                                                to: $HOST                        by @ServiceStack  [db]
   8. postgres             Use OrmLite with PostgreSQL                                            to: $HOST                        by @ServiceStack  [db]
   9. mysql                Use OrmLite with MySql                                                 to: $HOST                        by @ServiceStack  [db]
  10. auth-db              AuthFeature with OrmLite AuthRepository, CacheClient (requires ui,db)  to: $HOST                        by @ServiceStack  [auth]
  11. auth-memory          AuthFeature with Memory AuthRepository, CacheClient (requires ui)      to: $HOST                        by @ServiceStack  [auth]
  12. validation-contacts  Contacts Validation Example                                            to: $HOST                        by @ServiceStack  [example,sharp]
  13. vue-lite-lib         Update vue-lite projects libraries                                     to: $HOST                        by @ServiceStack  [lib,vue]
  14. react-lite-lib       Update react-lite projects libraries                                   to: $HOST                        by @ServiceStack  [lib,react]
  15. nginx                Nginx reverse proxy config for .NET Core Apps                          to: /etc/nginx/sites-available/  by @ServiceStack  [config]
  16. supervisor           Supervisor config for managed execution of .NET Core Apps              to: /etc/supervisor/conf.d/      by @ServiceStack  [config]
  17. docker               Dockerfile example for .NET Core Web Apps                              to: .                            by @ServiceStack  [config]

 Usage:  web +&lt;name&gt;
         web +&lt;name&gt; &lt;UseName&gt;

Search:  web + #&lt;tag&gt;      Available tags: auth, config, db, example, lib, project, react, sharp, ui, vue
</code></pre></div><p>The way we populate this list is by extending the multi-purpose functionality of Markdown and using it as an &quot;Executable Document&quot; where the human-friendly <a href="https://gist.github.com/gistlyn/f3fa8c016bbd253badc61d80afe399d9" target="_blank" rel="noopener noreferrer">apply.md</a> document below is also reused as the datasource to populate the above list:</p><div class="language-md"><pre><code>\uFEFF<span class="token title important"><span class="token punctuation">##</span> Apply Gists</span>

<span class="token code"><span class="token punctuation">\`\`\`</span><span class="token code-language">txt</span>
<span class="token code-block language-txt">Usage: 
  web +                       Show available gists
  web +&lt;name&gt;                 Write gist files locally, e.g:
  web + #&lt;tag&gt;                Search available gists
  web gist &lt;gist-id&gt;          Write all Gist text files to current directory</span>
<span class="token punctuation">\`\`\`</span></span>

<span class="token title important"><span class="token punctuation">###</span> Available Modifers</span>

The modifiers next to each gist specify where the gist files should be written to:

<span class="token list punctuation">*</span> <span class="token code-snippet code keyword">\`{to:&#39;.&#39;}\`</span> - Write to current directory (default)
<span class="token list punctuation">*</span> <span class="token code-snippet code keyword">\`{to:&#39;$HOST&#39;}\`</span> - Write to host project (1st folder containing either <span class="token code-snippet code keyword">\`appsettings.json,Web.config,App.config,Startup.cs\`</span>)
<span class="token list punctuation">*</span> <span class="token code-snippet code keyword">\`{to:&#39;wwwroot/&#39;}\`</span> - Write to first sub directories named <span class="token code-snippet code keyword">\`wwwroot\`</span>
<span class="token list punctuation">*</span> <span class="token code-snippet code keyword">\`{to:&#39;package.json&#39;}\`</span> - Write to first directory containing <span class="token code-snippet code keyword">\`package.json\`</span>
<span class="token list punctuation">*</span> <span class="token code-snippet code keyword">\`{to:&#39;/etc/nginx/sites-available/&#39;}\`</span> - Write to absolute folder
<span class="token list punctuation">*</span> <span class="token code-snippet code keyword">\`{to:&#39;$HOME/.my-app/&#39;}\`</span> - Write to <span class="token code-snippet code keyword">\`$HOME\`</span> in unix or <span class="token code-snippet code keyword">\`%USERPROFILE%\`</span> on windows
<span class="token list punctuation">*</span> <span class="token code-snippet code keyword">\`{to:&#39;\${EnumName}/.my-app/&#39;}\`</span> - Write to <span class="token code-snippet code keyword">\`Environment.SpecialFolder.{EnumName}\`</span>, e.g:
<span class="token list punctuation">*</span> <span class="token code-snippet code keyword">\`{to:&#39;$UserProfile/.my-app/&#39;}\`</span> - Write to <span class="token code-snippet code keyword">\`Environment.SpecialFolder.UserProfile\`</span>

<span class="token title important"><span class="token punctuation">###</span> File Name features</span>

Use <span class="token code-snippet code keyword">\`\\\`</span> to in gist file names to write files to sub directories, e.g:

<span class="token list punctuation">*</span> <span class="token code-snippet code keyword">\`wwwroot\\js\\script.js\`</span> - Writes gist file to <span class="token code-snippet code keyword">\`wwwroot/js/script.js\`</span>

Use <span class="token code-snippet code keyword">\`?\`</span> at end of filename to indicate optional file that should not be overridden, e.g:

<span class="token list punctuation">*</span> <span class="token code-snippet code keyword">\`wwwroot\\login.html?\`</span> - Only writes to <span class="token code-snippet code keyword">\`wwwroot\\login.html\`</span> if it doesn&#39;t already exist.

<span class="token title important"><span class="token punctuation">###</span> Replacement rules</span>

Any gist file name or contents with different &quot;MyApp&quot; text styles will be replaced with the Project Name in that style, e.g:

<span class="token list punctuation">-</span> <span class="token code-snippet code keyword">\`MyApp\`</span> will be replaced with <span class="token code-snippet code keyword">\`ProjectName\`</span>
<span class="token list punctuation">-</span> <span class="token code-snippet code keyword">\`my-app\`</span> will be replaced with <span class="token code-snippet code keyword">\`project-name\`</span>
<span class="token list punctuation">-</span> <span class="token code-snippet code keyword">\`My App\`</span> will be replaced with <span class="token code-snippet code keyword">\`Project Name\`</span>

<span class="token title important"><span class="token punctuation">###</span> Adding packages</span>

To include nuget package dependencies, create a file in your gist called <span class="token code-snippet code keyword">\`_init\`</span> with the list of <span class="token code-snippet code keyword">\`dotnet\`</span> or <span class="token code-snippet code keyword">\`nuget\`</span> commands:

<span class="token code"><span class="token punctuation">\`\`\`</span>
<span class="token code-block">dotnet add package ServiceStack.OrmLite.Sqlite</span>
<span class="token punctuation">\`\`\`</span></span></code></pre></div><p>This self-documenting list lets you browse all available gists and their contents the same way as the <code>web</code> tool does.</p><p>That just like <code>web new</code> can be configured to use your own <code>apply.md</code> Gist document with:</p><div class="language-"><pre><code>APP_SOURCE_GISTS=&lt;gist id&gt;
</code></pre></div><h3 id="available-gists" tabindex="-1">Available Gists <a class="header-anchor" href="#available-gists" aria-hidden="true">#</a></h3><p>As we expect to see this list of available gists expand greatly in future we&#39;ve also included support for grouping related gists by <code>&lt;tag&gt;</code>, e.g. you can view available starting projects with:</p><pre><code>$ web + #project
</code></pre><div class="language-"><pre><code>Results matching tag [project]:

   1. init            Empty .NET Core 2.2 ServiceStack App          to: .  by @ServiceStack  [project]
   2. init-lts        Empty .NET Core 2.1 LTS ServiceStack App      to: .  by @ServiceStack  [project]
   3. init-corefx     Empty ASP.NET Core 2.1 LTS on .NET Framework  to: .  by @ServiceStack  [project]
   4. init-sharp-app  Empty ServiceStack Sharp App                  to: .  by @ServiceStack  [project]

 Usage:  web +&lt;name&gt;
         web +&lt;name&gt; &lt;UseName&gt;

Search:  web + #&lt;tag&gt; Available tags: auth, config, db, example, lib, project, react, sharp, ui, vue
</code></pre></div><p>Which can be chained together to search for all <code>project</code> and <code>sharp</code> gists we can use for <a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">#Script Pages</a> projects:</p><pre><code>$ web + #project,sharp
</code></pre><div class="language-"><pre><code>Results matching tags [project,sharp]:

   1. init                 Empty .NET Core 2.2 ServiceStack App          to: .      by @ServiceStack  [project]
   2. init-lts             Empty .NET Core 2.1 LTS ServiceStack App      to: .      by @ServiceStack  [project]
   3. init-corefx          Empty ASP.NET Core 2.1 LTS on .NET Framework  to: .      by @ServiceStack  [project]
   4. init-sharp-app       Empty ServiceStack Sharp App                  to: .      by @ServiceStack  [project]
   5. bootstrap-sharp      Bootstrap + #Script Pages Starter Template      to: $HOST  by @ServiceStack  [ui,sharp]
   6. validation-contacts  Contacts Validation Example                   to: $HOST  by @ServiceStack  [example,sharp]

 Usage:  web +&lt;name&gt;
         web +&lt;name&gt; &lt;UseName&gt;

Search:  web + #&lt;tag&gt;      Available tags: auth, config, db, example, lib, project, react, sharp, ui, vue
</code></pre></div><h3 id="creating-customized-projects" tabindex="-1">Creating customized projects <a class="header-anchor" href="#creating-customized-projects" aria-hidden="true">#</a></h3><p>From this list we can see that we can create an <strong>Empty .NET Core 2.2 ServiceStack App</strong> by starting in a new App Folder:</p><pre><code>$ mkdir ProjectName &amp;&amp; cd ProjectName
</code></pre><p>Then applying the <code>init</code> labelled gist which will be saved to the <code>&#39;.&#39;</code> current directory:</p><pre><code>$ web +init
</code></pre><div class="language-"><pre><code>Write files from &#39;init&#39; https://gist.github.com/gistlyn/58030e271595520d87873c5df5e4c2eb to:
  C:\\projects\\Example\\ProjectName.csproj
  C:\\projects\\Example\\Program.cs
  C:\\projects\\Example\\Properties\\launchSettings.json
  C:\\projects\\Example\\ServiceInterface\\MyServices.cs
  C:\\projects\\Example\\ServiceModel\\Hello.cs
  C:\\projects\\Example\\Startup.cs
  C:\\projects\\Example\\appsettings.Development.json
  C:\\projects\\Example\\appsettings.json

Proceed? (n/Y):
</code></pre></div><p>Where its output will let you inspect and verify the gist it&#39;s writing and all the files that it will write to before accepting, by typing <code>y</code> or <code>Enter</code>.</p><p>To instead start with the <strong>latest .NET Core LTS release</strong>, run:</p><pre><code>$ web +init-lts
</code></pre><p>After we&#39;ve created our empty .NET Core project we can configure it to use <strong>PostgreSQL</strong> with:</p><pre><code>$ web +postgres
</code></pre><p>Or we can give it a <strong>Bootstrap #Script Pages UI</strong> with:</p><pre><code>$ web +bootstrap-sharp
</code></pre><p>What&#39;s even better is that gists can be chained, so we can create a <strong>.NET Core 2.2 Bootstrap #Script Pages App using PostgreSQL</strong> with:</p><pre><code>$ web +init+bootstrap-sharp+postgres
</code></pre><p>A <strong>Bootstrap #Script Pages App</strong> that includes a complete <strong>Contacts Validation example</strong> with:</p><pre><code>$ web +init+bootstrap-sharp+validation-contacts
</code></pre><p>The same as above, but its Auth replaced to persist in a <strong>PostgreSQL</strong> backend:</p><pre><code>$ web +init+bootstrap-sharp+validation-contacts+postgres+auth-db
</code></pre><p>If we decided later we wanted to switch to use <strong>SQL Server</strong> instead we can just layer it over the top of our existing App:</p><pre><code>$ web +sqlserver
</code></pre><p>This isn&#39;t just limited to gist projects, you can also apply gists when <strong>creating new projects</strong>:</p><pre><code>$ web new sharp+postgres+auth-db
</code></pre><p>Which will create a <a href="https://github.com/NetCoreTemplates/script" target="_blank" rel="noopener noreferrer">script</a> project configured to use <strong>PostgreSQL Auth</strong>.</p><p>This works despite the <code>sharp</code> project being a <a href="/physical-project-structure.html">multi-project solution</a> thanks to the <code>to: $HOST</code> modifier which says to <strong>apply the gists files</strong> to the <code>HOST</code> project.</p><h3 id="apply-gist-modifiers" tabindex="-1">Apply Gist Modifiers <a class="header-anchor" href="#apply-gist-modifiers" aria-hidden="true">#</a></h3><p>To enable a versatile and fine-grained solution you can use the modifiers below to control how gists are applied:</p><p>The modifiers next to each gist specify where the gist files should be written to:</p><ul><li><code>{to:&#39;.&#39;}</code> - Write to current directory (default)</li><li><code>{to:&#39;$HOST&#39;}</code> - Write to host project (1st folder containing either <code>appsettings.json,Web.config,App.config,Startup.cs</code>)</li><li><code>{to:&#39;wwwroot/&#39;}</code> - Write to first sub directories named <code>wwwroot</code></li><li><code>{to:&#39;package.json&#39;}</code> - Write to first directory containing <code>package.json</code></li><li><code>{to:&#39;/etc/nginx/sites-available/&#39;}</code> - Write to absolute folder</li><li><code>{to:&#39;$HOME/.my-app/&#39;}</code> - Write to <code>$HOME</code> in unix or <code>%USERPROFILE%</code> on windows</li><li><code>{to:&#39;\${EnumName}/.my-app/&#39;}</code> - Write to <code>Environment.SpecialFolder.{EnumName}</code>, e.g:</li><li><code>{to:&#39;$UserProfile/.my-app/&#39;}</code> - Write to <code>Environment.SpecialFolder.UserProfile</code></li></ul><h4 id="file-name-features" tabindex="-1">File Name features <a class="header-anchor" href="#file-name-features" aria-hidden="true">#</a></h4><p>Use <code>\\</code> in gist file names to write files to sub directories, e.g:</p><ul><li><code>wwwroot\\js\\script.js</code> - Writes gist file to <code>wwwroot/js/script.js</code></li></ul><p>Use <code>?</code> at end of filename to indicate optional file that <strong>should not be overridden</strong>, e.g:</p><ul><li><code>wwwroot\\login.html?</code> - Only writes to <code>wwwroot\\login.html</code> if it doesn&#39;t already exist.</li></ul><h4 id="replacement-rules" tabindex="-1">Replacement rules <a class="header-anchor" href="#replacement-rules" aria-hidden="true">#</a></h4><p>Just like <code>web new</code> any gist file name or contents with different &quot;MyApp&quot; text styles will be replaced with the Project Name in that style, e.g:</p><ul><li><code>MyApp</code> will be replaced with <code>ProjectName</code></li><li><code>my-app</code> will be replaced with <code>project-name</code></li><li><code>My App</code> will be replaced with <code>Project Name</code></li></ul><h4 id="adding-packages" tabindex="-1">Adding packages <a class="header-anchor" href="#adding-packages" aria-hidden="true">#</a></h4><p>To include nuget package dependencies, create a file in your gist called <code>_init</code> with the list of <code>dotnet</code> or <code>nuget</code> commands:</p><div class="language-"><pre><code>dotnet add package ServiceStack.OrmLite.Sqlite
</code></pre></div><h3 id="open-for-gists" tabindex="-1">Open for Gists! <a class="header-anchor" href="#open-for-gists" aria-hidden="true">#</a></h3><p>Whilst we intend to use this feature extensively to be able to deliver &quot;pre-set layered functionality&quot; to ServiceStack Users, we&#39;re happy to maintain a curated list of gists that can <strong>help any .NET Core project</strong> as we&#39;ve done with the <code>config</code> gists:</p><pre><code>$ web + #config
</code></pre><div class="language-"><pre><code>Results matching tag [config]:

   1. nginx       by @ServiceStack  Nginx reverse proxy config for .NET Core Apps              to: /etc/nginx/sites-available/  [config]
   2. supervisor  by @ServiceStack  Supervisor config for managed execution of .NET Core Apps  to: /etc/supervisor/conf.d/      [config]
   3. docker      by @ServiceStack  Dockerfile example for .NET Core Web Apps                  to: .                            [config]
</code></pre></div><p>Where being able to apply pre-configured configuration files like this reduces the required steps and effort to <a href="/netcore-deploy-rsync.html">Configure .NET Core Apps to run on Linux</a>.</p><h4 id="how-to-include-your-gist" tabindex="-1">How to include your gist <a class="header-anchor" href="#how-to-include-your-gist" aria-hidden="true">#</a></h4><p>To add your gist to the public list <a href="https://gist.github.com/gistlyn/f3fa8c016bbd253badc61d80afe399d9" target="_blank" rel="noopener noreferrer">add a comment to apply.md</a> with a link to your gist and the modifiers you want it to use.</p><h3 id="apply-adhoc-gists" tabindex="-1">Apply adhoc Gists <a class="header-anchor" href="#apply-adhoc-gists" aria-hidden="true">#</a></h3><p>Alternatively you can share and apply any gists by <strong>gist id</strong> or <strong>URL</strong>, e.g:</p><pre><code>$ web gist 58030e271595520d87873c5df5e4c2eb
$ web gist https://gist.github.com/58030e271595520d87873c5df5e4c2eb
</code></pre><h2 id="sourcelink-enabled-packages" tabindex="-1">SourceLink Enabled Packages <a class="header-anchor" href="#sourcelink-enabled-packages" aria-hidden="true">#</a></h2><p>To maximize the debuggability of ServiceStack packages all ServiceStack projects have been overhauled and converted to utilize <strong>MSBuild generated NuGet packages</strong> where all packages are now embedding <strong>pdb symbols</strong> and have configured <a href="https://github.com/dotnet/sourcelink/" target="_blank" rel="noopener noreferrer">support for SourceLink</a> to improve the debugging experience of ServiceStack Apps as source files can be downloaded on-the-fly from GitHub as you debug.</p><p>Scott Hanselman has written a <a href="https://www.hanselman.com/blog/ExploringNETCoresSourceLinkSteppingIntoTheSourceCodeOfNuGetPackagesYouDontOwn.aspx" target="_blank" rel="noopener noreferrer">nice post on Source Link</a> and how it can be enabled inside <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a> by turning on <strong>Enable source link support</strong>:</p><p><a href="https://www.hanselman.com/blog/ExploringNETCoresSourceLinkSteppingIntoTheSourceCodeOfNuGetPackagesYouDontOwn.aspx" target="_blank" rel="noopener noreferrer"><img src="https://www.hanselman.com/blog/content/binary/Windows-Live-Writer/7e5fb7b6dad8_140AA/image_0c73cb8d-bd5a-406e-a51d-a2eb4af12117.png" alt=""></a></p><p>When enabled it should let you debug into the ServiceStack framework implementation, downloading the correct source files version from GitHub as and when needed.</p><h3 id="all-servicestack-github-projects-now-use-ci-nuget-feed" tabindex="-1">All ServiceStack GitHub projects now use CI NuGet feed <a class="header-anchor" href="#all-servicestack-github-projects-now-use-ci-nuget-feed" aria-hidden="true">#</a></h3><p>In addition to switching to MSBuild generated packages all projects have also switched to using CI NuGet package feeds for external dependencies instead of copying .dll&#39;s in <code>/lib</code> folders. As a consequence you&#39;ll no longer have to build external ServiceStack GitHub projects or use GitHub published releases, as now the <strong>master</strong> repo of all GitHub projects can be built from a clean checkout at anytime.</p><p>The pre-release packages are still published using the <strong>same version number</strong> so if you get a build error from having a cached stale package you&#39;ll need to <a href="/myget.html#redownloading-myget-packages">clear your local packages cache</a> to download the latest build packages from the CI NuGet packages feed.</p><h2 id="authentication" tabindex="-1">Authentication <a class="header-anchor" href="#authentication" aria-hidden="true">#</a></h2><p>For many Customers the improved Authentication support will be the most important part of this release which saw a major focus going into enhancing Authentication integration with <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core&#39;s Claims based Authentication.</p><h3 id="community-auth-providers" tabindex="-1">Community Auth Providers <a class="header-anchor" href="#community-auth-providers" aria-hidden="true">#</a></h3><p>Before we begin, I&#39;d like to give a shoutout to our amazing community who have been filling in the gaps with the <a href="/authentication-and-authorization.html#community-auth-providers">Community Auth Providers</a> when a built-in solution doesn&#39;t exist like the <a href="https://github.com/wwwlicious/servicestack-authentication-identityserver" target="_blank" rel="noopener noreferrer">ServiceStack.Authentication.IdentityServer</a> by <a href="https://github.com/wwwlicious" target="_blank" rel="noopener noreferrer">@wwwlicious</a> to integrate with a remote Identity Server.</p><p>To best way to describe the differences between existing Identity/IdentityServer Auth Providers is that they function on converting token <strong>inputs</strong> into ServiceStack Authenticated Sessions whereas the new <code>NetCoreIdentityAuthProvider</code> creates Authenticated Sessions from the Claims based Authentication <strong>outputs</strong> and so still requires Identity/IdentityServer configured as normal to handle the token Authentication. Depending on your use-case or preferences you may want to continue using and contributing to the existing <a href="/authentication-and-authorization.html#community-auth-providers">Community Auth Providers</a> instead.</p><h3 id="asp-net-core-identity-auth-provider" tabindex="-1"><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Identity Auth Provider <a class="header-anchor" href="#asp-net-core-identity-auth-provider" aria-hidden="true">#</a></h3><p>The central piece that enables integration with <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core&#39;s Claims Based Authentication is the new <code>NetCoreIdentityAuthProvider</code> which is a bi-directional adapter that <strong>for non-ServiceStack requests</strong> converts ServiceStack&#39;s Authenticated UserSession into an <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Identity <code>ClaimsPrincipal</code> and lets you use ServiceStack&#39;s Auth Model in <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core MVC. It also does the inverse where it lets you use <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core&#39;s Identity Auth to protect ServiceStack Services in which case it does the reverse and converts an Authenticated <code>ClaimsPrincipal</code> into a ServiceStack Authenticated User Session.</p><p>This enables <strong>3 new popular integration strategies</strong> which lets you have a single Auth Model to protect your hybrid ServiceStack + MVC Apps:</p><ol><li>Using ServiceStack Auth in MVC</li><li>Using <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Identity in ServiceStack</li><li>Using Identity Server in ServiceStack</li></ol><blockquote><p>Note: Despite the new integration possibilities we&#39;re continuing to invest and enhance in <a href="/authentication-and-authorization.html">ServiceStack Auth</a> where we&#39;re able to provide a simpler integrated experience and more optimal implementation as we have full control over the implementation and is still the better choice if you prefer Roles/Permissions based Authentication (like we do).</p></blockquote><p>In general if your hybrid App only has a small ServiceStack component and a large MVC component than it may make more sense to start with the <strong><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Identity</strong> templates (unless of course, you find ServiceStack Auth to be simpler to use).</p><h3 id="use-existing-attributes" tabindex="-1">Use existing Attributes <a class="header-anchor" href="#use-existing-attributes" aria-hidden="true">#</a></h3><p>Irrespective of what Auth Provider is used, you&#39;d continue to use the same Auth Attributes to protect ServiceStack Services:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authenticate</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">RequiresAuth</span> request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequiresAuthResponse</span> <span class="token punctuation">{</span> Result <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">request<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">!&quot;</span></span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">RequiredRole</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Manager&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">RequiresRole</span> request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequiresRoleResponse</span> <span class="token punctuation">{</span> Result <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">request<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">!&quot;</span></span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">RequiredRole</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>RoleNames<span class="token punctuation">.</span>Admin<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">RequiresAdmin</span> request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequiresAdminResponse</span> <span class="token punctuation">{</span> Result <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">request<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">!&quot;</span></span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>and MVC&#39;s <code>[Authorize]</code> attribute to protect <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core MVC Controllers:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authorize</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">RequiresAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">View</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authorize</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Roles <span class="token operator">=</span> <span class="token string">&quot;Manager&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">RequiresRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">View</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authorize</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Roles <span class="token operator">=</span> <span class="token string">&quot;Admin&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">RequiresAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token function">View</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To quickly get started, we&#39;ve created new pre-configured .NET Core project templates for all 3 scenarios:</p><h2 id="using-servicestack-auth-in-mvc" tabindex="-1">Using ServiceStack Auth in MVC <a class="header-anchor" href="#using-servicestack-auth-in-mvc" aria-hidden="true">#</a></h2><p><a href="https://github.com/NetCoreTemplates/mvcauth" target="_blank" rel="noopener noreferrer">mvcauth</a> is a .NET Core 2.2 MVC Website integrated with ServiceStack Auth:</p><p><a href="https://github.com/NetCoreTemplates/mvcauth" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/mvcauth.png" alt=""></a></p><p>Create new <code>mvcauth</code> project with:</p><pre><code>$ web new mvcauth ProjectName
</code></pre><p>The ServiceStack Auth is pre-configured to persist users in an OrmLite Auth Repository (default SQLite) and enables both local Username/Password Credentials Auth as well as external Sign In&#39;s via Facebook, Twitter, Google and the new Microsoft Graph OAuth providers:</p><div class="language-csharp"><pre><code>container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteConnectionFactory</span><span class="token punctuation">(</span><span class="token string">&quot;:memory:&quot;</span><span class="token punctuation">,</span> SqliteDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteAuthRepository</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        UseDistinctRoleTables <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InitSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// TODO: Replace OAuth App settings in: appsettings.Development.json</span>
Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomUserSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IAuthProvider<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NetCoreIdentityAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Adapter to enable ServiceStack Auth in MVC</span>
            AdminRoles <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;Manager&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Automatically Assign additional roles to Admin Users</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CredentialsAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Sign In with Username / Password credentials </span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FacebookAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">// Create App at: https://developers.facebook.com/apps</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TwitterAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment">// Create App at: https://dev.twitter.com/apps</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GoogleAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token comment">// https://console.developers.google.com/apis/credentials</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MicrosoftGraphAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Create App https://apps.dev.microsoft.com</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    IncludeRegistrationService <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    IncludeAssignRoleServices <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In ServiceStack users with the <code>Admin</code> roles are &quot;super users&quot; with unrestricted access to all protected resources whereas in MVC we need to specify all the Roles Admin Users should have access to with <code>AdminRoles</code> above.</p><p>We also see the built-in <code>Register</code> and <code>AssignRoles</code> Services are enabled to allow new User Registration and assignment of roles/permissions to existing users.</p><p>On Startup, 3 users are created to test out the different access levels:</p><ol><li>A basic Authenticated User</li><li>A Manager with the <code>Manager</code> role</li><li>A Super User with the <code>Admin</code> role</li></ol><div class="language-csharp"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>authRepo<span class="token punctuation">.</span><span class="token function">GetUserAuthByUserName</span><span class="token punctuation">(</span><span class="token string">&quot;user@gmail.com&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> testUser <span class="token operator">=</span> authRepo<span class="token punctuation">.</span><span class="token function">CreateUserAuth</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserAuth</span>
    <span class="token punctuation">{</span>
        DisplayName <span class="token operator">=</span> <span class="token string">&quot;Test User&quot;</span><span class="token punctuation">,</span>
        Email <span class="token operator">=</span> <span class="token string">&quot;user@gmail.com&quot;</span><span class="token punctuation">,</span>
        FirstName <span class="token operator">=</span> <span class="token string">&quot;Test&quot;</span><span class="token punctuation">,</span>
        LastName <span class="token operator">=</span> <span class="token string">&quot;User&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;p@55wOrd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>authRepo<span class="token punctuation">.</span><span class="token function">GetUserAuthByUserName</span><span class="token punctuation">(</span><span class="token string">&quot;manager@gmail.com&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> roleUser <span class="token operator">=</span> authRepo<span class="token punctuation">.</span><span class="token function">CreateUserAuth</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserAuth</span>
    <span class="token punctuation">{</span>
        DisplayName <span class="token operator">=</span> <span class="token string">&quot;Test Manager&quot;</span><span class="token punctuation">,</span>
        Email <span class="token operator">=</span> <span class="token string">&quot;manager@gmail.com&quot;</span><span class="token punctuation">,</span>
        FirstName <span class="token operator">=</span> <span class="token string">&quot;Test&quot;</span><span class="token punctuation">,</span>
        LastName <span class="token operator">=</span> <span class="token string">&quot;Manager&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;p@55wOrd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    authRepo<span class="token punctuation">.</span><span class="token function">AssignRoles</span><span class="token punctuation">(</span>roleUser<span class="token punctuation">,</span> <span class="token named-parameter punctuation">roles</span><span class="token punctuation">:</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token string">&quot;Manager&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>authRepo<span class="token punctuation">.</span><span class="token function">GetUserAuthByUserName</span><span class="token punctuation">(</span><span class="token string">&quot;admin@gmail.com&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> roleUser <span class="token operator">=</span> authRepo<span class="token punctuation">.</span><span class="token function">CreateUserAuth</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserAuth</span>
    <span class="token punctuation">{</span>
        DisplayName <span class="token operator">=</span> <span class="token string">&quot;Admin User&quot;</span><span class="token punctuation">,</span>
        Email <span class="token operator">=</span> <span class="token string">&quot;admin@gmail.com&quot;</span><span class="token punctuation">,</span>
        FirstName <span class="token operator">=</span> <span class="token string">&quot;Admin&quot;</span><span class="token punctuation">,</span>
        LastName <span class="token operator">=</span> <span class="token string">&quot;User&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;p@55wOrd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    authRepo<span class="token punctuation">.</span><span class="token function">AssignRoles</span><span class="token punctuation">(</span>roleUser<span class="token punctuation">,</span> <span class="token named-parameter punctuation">roles</span><span class="token punctuation">:</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token string">&quot;Admin&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can sign in with any of these users and go to the the home page to test the behavior of the different granular protection levels which contains links to both MVC and ServiceStack Public and Protected Pages and Services.</p><p><strong>mvcauth</strong> also comes complete with User Registration where users can Sign up with either Password or using any of the registered OAuth providers:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/mvcauth-login.png" alt=""></p><h3 id="defaults-to-mvc-auth-redirect-conventions" tabindex="-1">Defaults to MVC Auth Redirect Conventions <a class="header-anchor" href="#defaults-to-mvc-auth-redirect-conventions" aria-hidden="true">#</a></h3><p>When using <code>NetCoreIdentityAuthProvider</code> we assume you&#39;re going to use MVC for your UI so it overrides the HTML Redirects that Users will be redirected to when trying to access Pages they don&#39;t have access to:</p><div class="language-csharp"><pre><code>authFeature<span class="token punctuation">.</span>HtmlRedirect <span class="token operator">=</span> <span class="token string">&quot;~/Account/Login&quot;</span><span class="token punctuation">;</span>
authFeature<span class="token punctuation">.</span>HtmlRedirectAccessDenied <span class="token operator">=</span> <span class="token string">&quot;~/Account/AccessDenied&quot;</span><span class="token punctuation">;</span>
authFeature<span class="token punctuation">.</span>HtmlRedirectReturnParam <span class="token operator">=</span> <span class="token string">&quot;ReturnUrl&quot;</span><span class="token punctuation">;</span>
authFeature<span class="token punctuation">.</span>HtmlRedirectReturnPathOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><p>Where non-Authenticated Users will be redirected to MVC&#39;s convention of <code>/Account/Login?ReturnUrl=</code> instead of ServiceStack&#39;s <code>/login?redirect=</code>.</p><p>Alternatively you can retain ServiceStack&#39;s HTML redirect defaults with:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">NetCoreIdentityAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    OverrideHtmlRedirect <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="using-asp-net-identity-auth-in-servicestack" tabindex="-1">Using <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Identity Auth in ServiceStack <a class="header-anchor" href="#using-asp-net-identity-auth-in-servicestack" aria-hidden="true">#</a></h2><p><a href="https://github.com/NetCoreTemplates/mvcidentity" target="_blank" rel="noopener noreferrer">mvcidentity</a> is a .NET Core 2.2 MVC Website integrated with ServiceStack using <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Identity Auth:</p><p><a href="https://github.com/NetCoreTemplates/mvcidentity" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/mvcidentity.png" alt=""></a></p><p>Create new <code>mvcidentity</code> project with:</p><pre><code>$ web new mvcidentity ProjectName
</code></pre><p><a href="https://github.com/NetCoreTemplates/mvcidentity" target="_blank" rel="noopener noreferrer">mvcidentity</a> is essentially the same App with the same functionality as <a href="https://github.com/NetCoreTemplates/mvcauth" target="_blank" rel="noopener noreferrer">mvcauth</a> but rewritten to use <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Identity Auth instead of ServiceStack Auth, including the registration options which are handled implemented using MVC Controllers instead of ServiceStack&#39;s built-in Services:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/mvcidentity-login.png" alt=""></p><p><code>mvcidentity</code> defaults to using EF and SQL Server which we expect to be the most popular configuration:</p><div class="language-csharp"><pre><code>services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDbContext</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ApplicationDbContext<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
    options<span class="token punctuation">.</span><span class="token function">UseSqlServer</span><span class="token punctuation">(</span>Configuration<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span><span class="token string">&quot;DefaultConnection&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddIdentity</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ApplicationUser<span class="token punctuation">,</span> IdentityRole<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        options<span class="token punctuation">.</span>User<span class="token punctuation">.</span>AllowedUserNameCharacters <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddEntityFrameworkStores</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ApplicationDbContext<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddDefaultTokenProviders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The rest of <a href="https://github.com/NetCoreTemplates/mvcidentity/blob/master/MyApp/Startup.cs" target="_blank" rel="noopener noreferrer">Startup.cs</a> contains the standard setup for configuring <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Identity Auth with the same Twitter, Facebook, Google and Microsoft OAuth Providers.</p><p>A custom <a href="https://github.com/NetCoreTemplates/mvcidentity/blob/master/MyApp/Models/ApplicationUser.cs" target="_blank" rel="noopener noreferrer">ApplicationUser</a> EF DataModel is used to better prepare for real world usage to show how to propagate custom User metadata<br> down into Authenticated UserSessions. <code>mvcidentity</code> starts with an extended <code>ApplicationUser</code> that captures basic info about the user and capture external references to any 3rd Party OAuth providers that Users have signed in with:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationUser</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IdentityUser</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> DisplayName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> TwitterUserId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> TwitterScreenName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FacebookUserId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> GoogleUserId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> GoogleProfilePageUrl <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> MicrosoftUserId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ProfileUrl <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="mapping-customizations" tabindex="-1">Mapping Customizations <a class="header-anchor" href="#mapping-customizations" aria-hidden="true">#</a></h3><p>By default the <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Auth/NetCoreIdentityAuthProvider.cs" target="_blank" rel="noopener noreferrer">NetCoreIdentityAuthProvider.cs</a> uses the <code>MapClaimsToSession</code> dictionary to map well known <code>ClaimTypes</code> Properties to their natural <code>AuthUserSession</code> property:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token return-type class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> MapClaimsToSession <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>Email</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>Email<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>Name</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>UserAuthName<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>GivenName</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>FirstName<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>Surname</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>LastName<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>StreetAddress</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>Address<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>Locality</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>City<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>StateOrProvince</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>PostalCode</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>PostalCode<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>Country</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>Country<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>OtherPhone</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>PhoneNumber<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>DateOfBirth</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>BirthDateRaw<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>Gender</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>Gender<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>Dns</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>Dns<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>Rsa</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>Rsa<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>Sid</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>Sid<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>Hash</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>Hash<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>HomePhone</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>HomePhone<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>MobilePhone</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>MobilePhone<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ClaimTypes<span class="token punctuation">.</span>Webpage</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>AuthUserSession<span class="token punctuation">.</span>Webpage<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Which you can also extend or modify to handle any additional straightforward <strong>1:1 mappings</strong>.</p><h3 id="custom-mappings" tabindex="-1">Custom Mappings <a class="header-anchor" href="#custom-mappings" aria-hidden="true">#</a></h3><p>Alternatively you can use <code>PopulateSessionFilter</code> to apply additional logic when creating a <code>UserSession</code> from a <code>ClaimsPrincipal</code> which is what&#39;s needed to copy over <strong>EF Identity Roles</strong> when using EF Identity Auth with ServiceStack.</p><p>As <code>mvcidentity</code> doesn&#39;t have a dependency on OrmLite you could choose to populate roles using EF&#39;s APIs directly:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">NetCoreIdentityAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    PopulateSessionFilter <span class="token operator">=</span> <span class="token punctuation">(</span>session<span class="token punctuation">,</span> principal<span class="token punctuation">,</span> req<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> userManager <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TryResolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>UserManager<span class="token punctuation">&lt;</span>ApplicationUser<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> user <span class="token operator">=</span> userManager<span class="token punctuation">.</span><span class="token function">FindByIdAsync</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> roles <span class="token operator">=</span> userManager<span class="token punctuation">.</span><span class="token function">GetRolesAsync</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span>Result<span class="token punctuation">;</span>        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>Whilst this works it uses &quot;sync over async&quot; which is <a href="https://github.com/davidfowl/AspNetCoreDiagnosticScenarios/blob/master/AsyncGuidance.md" target="_blank" rel="noopener noreferrer">discouraged and problematic in many use-cases</a>, less efficient than just sync and UserManager&#39;s limited API available forces multiple DB calls and more data over the wire than just the role names needed.</p><h3 id="built-in-identity-db-apis" tabindex="-1">Built-in Identity DB APIs <a class="header-anchor" href="#built-in-identity-db-apis" aria-hidden="true">#</a></h3><p>Instead we recommend instead using the more optimal <code>IDbConnection.GetIdentityUserRolesById()</code> API which returns just the role names in a single indexed DB query.</p><p>If you&#39;re not using OrmLite you can utilize EF&#39;s configured <strong>DB Connection</strong> by adding this extension method to your host project:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AppExtensions</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">T</span> <span class="token generic-method"><span class="token function">DbExec</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IServiceProvider</span> services<span class="token punctuation">,</span> <span class="token class-name">Func<span class="token punctuation">&lt;</span>IDbConnection<span class="token punctuation">,</span> T<span class="token punctuation">&gt;</span></span> fn<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> services
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DbContextExec</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ApplicationDbContext<span class="token punctuation">,</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> x<span class="token punctuation">.</span>Database<span class="token punctuation">.</span><span class="token function">OpenConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>Database<span class="token punctuation">.</span><span class="token function">GetDbConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Where you&#39;ll able to use it to perform adhoc DB queries, in this case calling <code>GetIdentityUserRolesById()</code> to populate the Users roles:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">NetCoreIdentityAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    PopulateSessionFilter <span class="token operator">=</span> <span class="token punctuation">(</span>session<span class="token punctuation">,</span> principal<span class="token punctuation">,</span> req<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
    <span class="token punctuation">{</span>
        session<span class="token punctuation">.</span>Roles <span class="token operator">=</span> ApplicationServices<span class="token punctuation">.</span><span class="token function">DbExec</span><span class="token punctuation">(</span>db <span class="token operator">=&gt;</span> db<span class="token punctuation">.</span><span class="token function">GetIdentityUserRolesById</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This gets called whenever <strong>ServiceStack receives an Authenticated Request</strong> which you can intercept and customize how <code>ClaimsPrincipal</code> are mapped to ServiceStack User Sessions.</p><p>To improve performance and save the DB hit, we recommend caching the User Roles into an In Memory Cache:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">NetCoreIdentityAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    PopulateSessionFilter <span class="token operator">=</span> <span class="token punctuation">(</span>session<span class="token punctuation">,</span> principal<span class="token punctuation">,</span> req<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
    <span class="token punctuation">{</span>
        session<span class="token punctuation">.</span>Roles <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">GetMemoryCacheClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetOrCreate</span><span class="token punctuation">(</span>
            IdUtils<span class="token punctuation">.</span><span class="token function">CreateUrn</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>Roles<span class="token punctuation">)</span><span class="token punctuation">,</span> session<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">,</span>
            TimeSpan<span class="token punctuation">.</span><span class="token function">FromMinutes</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ApplicationServices<span class="token punctuation">.</span><span class="token function">DbExec</span><span class="token punctuation">(</span>db <span class="token operator">=&gt;</span> db<span class="token punctuation">.</span><span class="token function">GetIdentityUserRolesById</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><blockquote><p>Alternatively use <code>req.GetCacheClient()</code> if you want to use your registered <code>ICacheClient</code> provider instead.</p></blockquote><h3 id="propagating-extended-user-info" tabindex="-1">Propagating Extended User Info <a class="header-anchor" href="#propagating-extended-user-info" aria-hidden="true">#</a></h3><p>In addition to populating the Users Roles we also want to populate our custom User metadata on our <code>ApplicationUser</code> EF model, for this we can use the new <code>GetIdentityUserById&lt;T&gt;</code> API which we&#39;ll also want to cache.</p><p>This brings us to the end result in <a href="https://github.com/NetCoreTemplates/mvcidentity" target="_blank" rel="noopener noreferrer">mvcidentity</a> project template:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomUserSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IAuthProvider<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NetCoreIdentityAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span> <span class="token comment">// Adapter to enable ASP.NET Identity Auth in ServiceStack</span>
        <span class="token punctuation">{</span>
            AdminRoles <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;Manager&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Automatically Assign additional roles to Admin Users</span>
            PopulateSessionFilter <span class="token operator">=</span> <span class="token punctuation">(</span>session<span class="token punctuation">,</span> principal<span class="token punctuation">,</span> req<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
            <span class="token punctuation">{</span>
                <span class="token comment">//Example of populating ServiceStack Session Roles + Custom Info from EF Identity DB</span>
                <span class="token class-name"><span class="token keyword">var</span></span> user <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">GetMemoryCacheClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetOrCreate</span><span class="token punctuation">(</span>
                    IdUtils<span class="token punctuation">.</span><span class="token function">CreateUrn</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>ApplicationUser<span class="token punctuation">)</span><span class="token punctuation">,</span> session<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">,</span>
                    TimeSpan<span class="token punctuation">.</span><span class="token function">FromMinutes</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// return cached results before refreshing cache from db every 5mins</span>
                    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ApplicationServices<span class="token punctuation">.</span><span class="token function">DbExec</span><span class="token punctuation">(</span>db <span class="token operator">=&gt;</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetIdentityUserById</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ApplicationUser<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                session<span class="token punctuation">.</span>Email <span class="token operator">=</span> session<span class="token punctuation">.</span>Email <span class="token operator">??</span> user<span class="token punctuation">.</span>Email<span class="token punctuation">;</span>
                session<span class="token punctuation">.</span>FirstName <span class="token operator">=</span> session<span class="token punctuation">.</span>FirstName <span class="token operator">??</span> user<span class="token punctuation">.</span>FirstName<span class="token punctuation">;</span>
                session<span class="token punctuation">.</span>LastName <span class="token operator">=</span> session<span class="token punctuation">.</span>LastName <span class="token operator">??</span> user<span class="token punctuation">.</span>LastName<span class="token punctuation">;</span>
                session<span class="token punctuation">.</span>DisplayName <span class="token operator">=</span> session<span class="token punctuation">.</span>DisplayName <span class="token operator">??</span> user<span class="token punctuation">.</span>DisplayName<span class="token punctuation">;</span>
                session<span class="token punctuation">.</span>ProfileUrl <span class="token operator">=</span> user<span class="token punctuation">.</span>ProfileUrl <span class="token operator">??</span> AuthMetadataProvider<span class="token punctuation">.</span>DefaultNoProfileImgUrl<span class="token punctuation">;</span>

                session<span class="token punctuation">.</span>Roles <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">GetMemoryCacheClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetOrCreate</span><span class="token punctuation">(</span>
                    IdUtils<span class="token punctuation">.</span><span class="token function">CreateUrn</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>Roles<span class="token punctuation">)</span><span class="token punctuation">,</span> session<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">,</span>
                    TimeSpan<span class="token punctuation">.</span><span class="token function">FromMinutes</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// return cached results before refreshing cache from db every 5mins</span>
                    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ApplicationServices<span class="token punctuation">.</span><span class="token function">DbExec</span><span class="token punctuation">(</span>db <span class="token operator">=&gt;</span> db<span class="token punctuation">.</span><span class="token function">GetIdentityUserRolesById</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="using-identityserver4-auth-in-servicestack" tabindex="-1">Using IdentityServer4 Auth in ServiceStack <a class="header-anchor" href="#using-identityserver4-auth-in-servicestack" aria-hidden="true">#</a></h2><p><a href="https://github.com/NetCoreTemplates/mvcidentityserver" target="_blank" rel="noopener noreferrer">mvcidentityserver</a> .NET Core 2.1 MVC Website integrated with IdentityServer4 Auth and ServiceStack:</p><p><a href="https://github.com/NetCoreTemplates/mvcidentityserver" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/mvcidentityserver.png" alt=""></a></p><p>The <a href="https://github.com/NetCoreTemplates/mvcidentityserver" target="_blank" rel="noopener noreferrer">mvcidentityserver</a> builds upon Identity Server&#39;s <a href="https://github.com/IdentityServer/IdentityServer4.Samples/tree/master/Quickstarts/5_HybridFlowAuthenticationWithApiAccess" target="_blank" rel="noopener noreferrer">OpenID Connect Hybrid Flow Authentication and API Access Tokens</a> Quickstart project to include integration with ServiceStack and additional OAuth providers.</p><p>The home page has also been customized to contain the same functionality as the other 2 templates with some additional features to validate against custom OAuth App scopes and <strong>Delegation Auth Pages</strong> showing how to make Authenticated API requests to our remote microservices from within MVC Controllers.</p><p>In contrast to integrating Authentication into our App directly, <a href="https://github.com/NetCoreTemplates/mvcidentityserver" target="_blank" rel="noopener noreferrer">mvcidentityserver</a> configures a central <strong>remote IdentityServer instance</strong> with the Auth Features and OAuth providers we want available to our Apps.</p><p>Then when non Authenticated users go to a protected resource they&#39;re redirected to the Sign In page on IdentityServer:</p><p><a href="https://github.com/NetCoreTemplates/mvcidentityserver" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/mvcidentityserver-is4.png" alt=""></a></p><p>Users can sign in using the same Credentials or external OAuth Providers but are presented with an additional <strong>consent</strong> screen to grant the App permission to access their User profile information and access to custom features the App needs:</p><p><a href="https://github.com/NetCoreTemplates/mvcidentityserver" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/mvcidentityserver-is4-allow.png" alt=""></a></p><p>Once granted the Auth information is captured in a stateless IdentityServer Token, stored in a cookie and redirected back to the App.</p><h4 id="physical-project-structure" tabindex="-1">Physical Project Structure <a class="header-anchor" href="#physical-project-structure" aria-hidden="true">#</a></h4><p><a href="https://github.com/NetCoreTemplates/mvcidentityserver" target="_blank" rel="noopener noreferrer">mvcidentityserver</a> is pre-configured with <strong>3 Host projects</strong>:</p><ul><li><a href="https://github.com/NetCoreTemplates/mvcidentityserver/tree/master/IdentityServer" target="_blank" rel="noopener noreferrer">/IdentityServer</a> - The Central IdentityServer Auth Server (port <strong>5000</strong>)</li><li><a href="https://github.com/NetCoreTemplates/mvcidentityserver/tree/master/MyApp" target="_blank" rel="noopener noreferrer">/ProjectName</a> - Our Hybrid MVC + ServiceStack App (port <strong>5002</strong>)</li><li><a href="https://github.com/NetCoreTemplates/mvcidentityserver/tree/master/MyApp.Api" target="_blank" rel="noopener noreferrer">/ProjectName.Api</a> - Example Microservice API used by Hybrid App (port <strong>5001</strong>)</li></ul><h3 id="identityserver" tabindex="-1">IdentityServer <a class="header-anchor" href="#identityserver" aria-hidden="true">#</a></h3><p>The IdentityServer instance is configured in <a href="https://github.com/NetCoreTemplates/mvcidentityserver/blob/master/IdentityServer/Startup.cs" target="_blank" rel="noopener noreferrer">Startup.cs</a> which contains all <strong>external OAuth providers</strong> we want to allow Sign Ins from, the <strong>OpenId Connect Endpoint</strong> which allows Sign Ins from another external IdentityServer on <a href="https://demo.identityserver.io/" target="_blank" rel="noopener noreferrer">demo.identityserver.io</a> and all its pre-configured Users, Identity Resources, API Resources and Clients defined in <a href="https://github.com/NetCoreTemplates/mvcidentityserver/blob/master/IdentityServer/Config.cs" target="_blank" rel="noopener noreferrer">Config.cs</a>.</p><h3 id="app" tabindex="-1">App <a class="header-anchor" href="#app" aria-hidden="true">#</a></h3><p>The App&#39;s <a href="https://github.com/NetCoreTemplates/mvcidentityserver/blob/master/MyApp/Startup.cs" target="_blank" rel="noopener noreferrer">Startup.cs</a> consists of configuring the OpenId Connect Endpoint to our Central <strong>IdentityServer</strong> containing additional customizations to control what <code>Claims</code> the Authenticated <code>ClaimsPrincipal</code> will have:</p><div class="language-csharp"><pre><code>services<span class="token punctuation">.</span><span class="token function">AddAuthentication</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        options<span class="token punctuation">.</span>DefaultScheme <span class="token operator">=</span> <span class="token string">&quot;Cookies&quot;</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>DefaultChallengeScheme <span class="token operator">=</span> <span class="token string">&quot;oidc&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddCookie</span><span class="token punctuation">(</span><span class="token string">&quot;Cookies&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddOpenIdConnect</span><span class="token punctuation">(</span><span class="token string">&quot;oidc&quot;</span><span class="token punctuation">,</span> options <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        options<span class="token punctuation">.</span>SignInScheme <span class="token operator">=</span> <span class="token string">&quot;Cookies&quot;</span><span class="token punctuation">;</span>

        options<span class="token punctuation">.</span>Authority <span class="token operator">=</span> <span class="token string">&quot;http://localhost:5000&quot;</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>RequireHttpsMetadata <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        options<span class="token punctuation">.</span>ClientId <span class="token operator">=</span> <span class="token string">&quot;mvc&quot;</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>ClientSecret <span class="token operator">=</span> <span class="token string">&quot;secret&quot;</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>ResponseType <span class="token operator">=</span> <span class="token string">&quot;code id_token&quot;</span><span class="token punctuation">;</span>

        options<span class="token punctuation">.</span>SaveTokens <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>GetClaimsFromUserInfoEndpoint <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        options<span class="token punctuation">.</span>Scope<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;api1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>Scope<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;offline_access&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        options<span class="token punctuation">.</span>ClaimActions<span class="token punctuation">.</span><span class="token function">MapJsonKey</span><span class="token punctuation">(</span><span class="token string">&quot;website&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;website&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>ClaimActions<span class="token punctuation">.</span><span class="token function">MapJsonKey</span><span class="token punctuation">(</span><span class="token string">&quot;role&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;role&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>ClaimActions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AdminRolesClaimAction</span><span class="token punctuation">(</span><span class="token string">&quot;Manager&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Employee&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        options<span class="token punctuation">.</span>TokenValidationParameters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TokenValidationParameters</span>
        <span class="token punctuation">{</span>
            NameClaimType <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>
            RoleClaimType <span class="token operator">=</span> <span class="token string">&quot;role&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        options<span class="token punctuation">.</span>Events <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenIdConnectEvents</span> <span class="token punctuation">{</span>
            OnRemoteFailure <span class="token operator">=</span> CustomHandlers<span class="token punctuation">.</span>HandleCancelAction<span class="token punctuation">,</span>
            OnTokenResponseReceived <span class="token operator">=</span> CustomHandlers<span class="token punctuation">.</span>CopyAllowedScopesToUserClaims<span class="token punctuation">,</span>                        
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The only customization needed in ServiceStack is to specify the different custom name being used for <code>RoleClaimType</code>:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomUserSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IAuthProvider<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span>
        <span class="token comment">// Adapter to enable ASP.NET Core Identity Auth in ServiceStack</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NetCoreIdentityAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            RoleClaimType <span class="token operator">=</span> <span class="token string">&quot;role&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>MapJsonKey</code> contains a whitelist of properties in Identity Server&#39;s Token we want propagated to <code>Claims</code>. The <code>AdminRolesClaimAction</code> is a custom <code>ClaimAction</code> we can use to add additional <code>AdminRoles</code> to users with the <code>RoleNames.Admin</code> role:</p><div class="language-csharp"><pre><code><span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// Use this class to assign additional roles to Admin Users</span>
<span class="token comment">/// &lt;/summary&gt;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdminRolesClaimAction</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ClaimAction</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> AdminRoles <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">AdminRolesClaimAction</span><span class="token punctuation">(</span><span class="token keyword">params</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> adminRoles<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token string">&quot;role&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> AdminRoles <span class="token operator">=</span> adminRoles<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token class-name">JObject</span> userData<span class="token punctuation">,</span> <span class="token class-name">ClaimsIdentity</span> identity<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> issuer<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">HasAdminRole</span><span class="token punctuation">(</span>userData<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> role <span class="token keyword">in</span> AdminRoles<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            identity<span class="token punctuation">.</span><span class="token function">AddClaim</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Claim</span><span class="token punctuation">(</span><span class="token string">&quot;role&quot;</span><span class="token punctuation">,</span> role<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">HasAdminRole</span><span class="token punctuation">(</span><span class="token class-name">JObject</span> userData<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> jtoken <span class="token operator">=</span> userData<span class="token punctuation">?</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>ClaimType<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>jtoken <span class="token keyword">is</span> <span class="token class-name">JValue</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>jtoken<span class="token punctuation">?.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> RoleNames<span class="token punctuation">.</span>Admin<span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>jtoken <span class="token keyword">is</span> <span class="token class-name">JArray</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> obj <span class="token keyword">in</span> jtoken<span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">?.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> RoleNames<span class="token punctuation">.</span>Admin<span class="token punctuation">)</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>OpenIdConnectEvents</code> lets us intercept the original IdentityServer token so we can extract the custom <strong>OAuth scopes</strong> the User has granted the App and add them to <code>scope</code> Claims:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">CustomHandlers</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary&gt;</span>
    <span class="token comment">/// Use this handler to copy requested Scopes to User Claims so they can be validated using a Policy  </span>
    <span class="token comment">/// &lt;/summary&gt;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Task</span> <span class="token function">CopyAllowedScopesToUserClaims</span><span class="token punctuation">(</span><span class="token class-name">TokenResponseReceivedContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> scopes <span class="token operator">=</span> context<span class="token punctuation">.</span>ProtocolMessage<span class="token punctuation">.</span>Scope<span class="token punctuation">?.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string character">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>scopes <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>Principal<span class="token punctuation">.</span>Identity <span class="token keyword">is</span> <span class="token class-name">ClaimsIdentity</span> identity<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> scope <span class="token keyword">in</span> scopes<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                identity<span class="token punctuation">.</span><span class="token function">AddClaim</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Claim</span><span class="token punctuation">(</span><span class="token string">&quot;scope&quot;</span><span class="token punctuation">,</span> scope<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> Task<span class="token punctuation">.</span>CompletedTask<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Task</span> <span class="token function">HandleCancelAction</span><span class="token punctuation">(</span><span class="token class-name">RemoteFailureContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span>Response<span class="token punctuation">.</span><span class="token function">Redirect</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">HandleResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Task<span class="token punctuation">.</span>CompletedTask<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now that our populated claims contains the granted OAuth scopes we can validate against it in ServiceStack Services using the new <code>[RequiredClaim]</code> attribute:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">RequiredClaim</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;scope&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;profile&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">RequiresScope</span> request<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequiresScopeResponse</span> <span class="token punctuation">{</span> Result <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello, </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">request<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">!&quot;</span></span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In MVC we need create a custom Auth Policy:</p><div class="language-csharp"><pre><code>services<span class="token punctuation">.</span><span class="token function">AddAuthorization</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    options<span class="token punctuation">.</span><span class="token function">AddPolicy</span><span class="token punctuation">(</span><span class="token string">&quot;ProfileScope&quot;</span><span class="token punctuation">,</span> policy <span class="token operator">=&gt;</span>
        policy<span class="token punctuation">.</span><span class="token function">RequireClaim</span><span class="token punctuation">(</span><span class="token string">&quot;scope&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;profile&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>That can then be used in our MVC Controllers using the <code>[Authorize]</code> attribute, referencing our custom policy:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authorize</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Policy <span class="token operator">=</span> <span class="token string">&quot;ProfileScope&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IActionResult<span class="token punctuation">&gt;</span></span> <span class="token function">RequiresScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> accessToken <span class="token operator">=</span> <span class="token keyword">await</span> HttpContext<span class="token punctuation">.</span><span class="token function">GetTokenAsync</span><span class="token punctuation">(</span><span class="token string">&quot;access_token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">View</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="delegated-auth-pages" tabindex="-1">Delegated Auth Pages <a class="header-anchor" href="#delegated-auth-pages" aria-hidden="true">#</a></h4><p><a href="https://github.com/NetCoreTemplates/mvcidentityserver" target="_blank" rel="noopener noreferrer">mvcidentityserver</a> also contains examples showing how to make Authenticated API Requests to a remote Web API Service using <code>HttpClient</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IActionResult<span class="token punctuation">&gt;</span></span> <span class="token function">CallWebApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> accessToken <span class="token operator">=</span> <span class="token keyword">await</span> HttpContext<span class="token punctuation">.</span><span class="token function">GetTokenAsync</span><span class="token punctuation">(</span><span class="token string">&quot;access_token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span>DefaultRequestHeaders<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthenticationHeaderValue</span><span class="token punctuation">(</span><span class="token string">&quot;Bearer&quot;</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> content <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetStringAsync</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5001/webapi-identity&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ViewBag<span class="token punctuation">.</span>Json <span class="token operator">=</span> JArray<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">View</span><span class="token punctuation">(</span><span class="token string">&quot;json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The same <code>HttpClient</code> request to call an Authenticated ServiceStack Service:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IActionResult<span class="token punctuation">&gt;</span></span> <span class="token function">CallServiceStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> accessToken <span class="token operator">=</span> <span class="token keyword">await</span> HttpContext<span class="token punctuation">.</span><span class="token function">GetTokenAsync</span><span class="token punctuation">(</span><span class="token string">&quot;access_token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span>DefaultRequestHeaders<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthenticationHeaderValue</span><span class="token punctuation">(</span><span class="token string">&quot;Bearer&quot;</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span>DefaultRequestHeaders<span class="token punctuation">.</span>Accept<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">MediaTypeWithQualityHeaderValue</span><span class="token punctuation">(</span>MimeTypes<span class="token punctuation">.</span>Json<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token class-name"><span class="token keyword">var</span></span> json <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetStringAsync</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5001/servicestack-identity&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ViewBag<span class="token punctuation">.</span>Json <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">IndentJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">View</span><span class="token punctuation">(</span><span class="token string">&quot;json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We need the additional <code>Accept</code> JSON HTTP header to tell ServiceStack which of the registered Content Types we want to receive the response in.</p><p>Alternatively we can make Authenticated Requests using the more typed and terse <a href="/csharp-client.html">C#/.NET Service Client</a>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IActionResult<span class="token punctuation">&gt;</span></span> <span class="token function">CallServiceClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> accessToken <span class="token operator">=</span> <span class="token keyword">await</span> HttpContext<span class="token punctuation">.</span><span class="token function">GetTokenAsync</span><span class="token punctuation">(</span><span class="token string">&quot;access_token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonServiceClient</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5001/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        BearerToken <span class="token operator">=</span> accessToken
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">GetIdentity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ViewBag<span class="token punctuation">.</span>Json <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">ToJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">IndentJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">View</span><span class="token punctuation">(</span><span class="token string">&quot;json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-hidden="true">#</a></h3><p>The API&#39;s <a href="https://github.com/NetCoreTemplates/mvcidentityserver/blob/master/MyApp.Api/Startup.cs" target="_blank" rel="noopener noreferrer">Startup.cs</a> is configured to accept Bearer Tokens issued by our central <strong>IdentityServer</strong>:</p><div class="language-csharp"><pre><code>services<span class="token punctuation">.</span><span class="token function">AddAuthentication</span><span class="token punctuation">(</span><span class="token string">&quot;Bearer&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">AddJwtBearer</span><span class="token punctuation">(</span><span class="token string">&quot;Bearer&quot;</span><span class="token punctuation">,</span> options <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        options<span class="token punctuation">.</span>Authority <span class="token operator">=</span> <span class="token string">&quot;http://localhost:5000&quot;</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>RequireHttpsMetadata <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        options<span class="token punctuation">.</span>Audience <span class="token operator">=</span> <span class="token string">&quot;api1&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Nothing special is needed for ServiceStack here other than registering the Identity Auth Provider adapter:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthUserSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IAuthProvider<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NetCoreIdentityAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>GetIdentity</code> ServiceStack Service then returns the populated <code>AuthUserSession</code> and all claims contained in the Bearer Token:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/servicestack-identity&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetIdentity</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IReturn<span class="token punctuation">&lt;</span>GetIdentityResponse<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetIdentityResponse</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>Property<span class="token punctuation">&gt;</span></span> Claims <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">AuthUserSession</span> Session <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authenticate</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IdentityService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">GetIdentity</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GetIdentityResponse</span> <span class="token punctuation">{</span>
            Claims <span class="token operator">=</span> Request<span class="token punctuation">.</span><span class="token function">GetClaims</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Property</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> x<span class="token punctuation">.</span>Type<span class="token punctuation">,</span> Value <span class="token operator">=</span> x<span class="token punctuation">.</span>Value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Session <span class="token operator">=</span> <span class="token generic-method"><span class="token function">SessionAs</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthUserSession<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="servicestack" tabindex="-1">ServiceStack <a class="header-anchor" href="#servicestack" aria-hidden="true">#</a></h2><h3 id="appsettings-net-core-configuration-conventions" tabindex="-1">AppSettings .NET Core Configuration conventions <a class="header-anchor" href="#appsettings-net-core-configuration-conventions" aria-hidden="true">#</a></h3><p>To improve integration with .NET Core&#39;s Configuration API, using the <code>:</code> in your AppSettings Key can be used to navigate nested configuration, e.g:</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
    <span class="token property">&quot;A&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
        <span class="token property">&quot;B&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
            <span class="token property">&quot;C&quot;</span><span class="token operator">:</span> <span class="token string">&quot;value&quot;</span> 
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can retrieve the nested configuration above with:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> <span class="token keyword">value</span> <span class="token operator">=</span> AppSettings<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span><span class="token string">&quot;A:B:C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>See <a href="https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.Common.Tests/Configuration/NetCoreAppSettingsTests.cs" target="_blank" rel="noopener noreferrer">NetCoreAppSettingsTests.cs</a> for more examples.</p><h3 id="update-servicestack-license-configuration" tabindex="-1">Update <code>servicestack:license</code> configuration <a class="header-anchor" href="#update-servicestack-license-configuration" aria-hidden="true">#</a></h3><p>This is a <strong>breaking change</strong> if you were relying on Auto License Key registration in <code>appsettings.json</code> with:</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
    <span class="token property">&quot;servicestack:license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{LICENSE_KEY}&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which now needs to be changed to:</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
    <span class="token property">&quot;servicestack&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{LICENSE_KEY}&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Alternatively you can use your own key without <code>:</code> and register your license key manually:</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
    <span class="token property">&quot;servicestack_license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{LICENSE_KEY}&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then you can register the key as a normal string app setting, e.g:</p><div class="language-csharp"><pre><code>Licensing<span class="token punctuation">.</span><span class="token function">RegisterLicense</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span><span class="token string">&quot;servicestack_license&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="new-auth-providers" tabindex="-1">New Auth Providers <a class="header-anchor" href="#new-auth-providers" aria-hidden="true">#</a></h3><p>In coordination with winding down our support for <a href="https://www.nuget.org/packages/ServiceStack.Authentication.OAuth2" target="_blank" rel="noopener noreferrer">ServiceStack.Authentication.OAuth2</a> and <a href="https://www.nuget.org/packages/ServiceStack.Authentication.OpenId" target="_blank" rel="noopener noreferrer">ServiceStack.Authentication.OpenId</a> packages that depends on the abandoned <strong>DotNetOpenAuth</strong>, we&#39;ve rewritten the remaining popular Auth Providers to not have any dependencies where they&#39;re now included in <a href="https://github.com/ServiceStack/ServiceStack/tree/master/src/ServiceStack/Auth" target="_blank" rel="noopener noreferrer">ServiceStack.Auth</a> and can be used in all .NET Framework and .NET Core hosts:</p><ul><li><code>LinkedInAuthProvider</code></li><li><code>GoogleAuthProvider</code></li></ul><h3 id="microsoft-graph-auth-provider" tabindex="-1">Microsoft Graph Auth Provider <a class="header-anchor" href="#microsoft-graph-auth-provider" aria-hidden="true">#</a></h3><p>We&#39;ve also added a new Microsoft Auth Provider to authenticate using <a href="https://graph.microsoft.com" target="_blank" rel="noopener noreferrer">Microsoft&#39;s Graph API</a>:</p><ul><li><code>MicrosoftGraphAuthProvider</code></li></ul><p>To get started quickly with the Microsoft and Google Auth providers, create a new <a href="https://github.com/NetCoreTemplates/mvcauth" target="_blank" rel="noopener noreferrer">mvcauth</a> project with:</p><pre><code>$ web new mvcauth ProjectName
</code></pre><p><a href="https://github.com/NetCoreTemplates/mvcauth" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/mvcauth-login.png" alt=""></a></p><h4 id="oauth-setup" tabindex="-1">OAuth Setup <a class="header-anchor" href="#oauth-setup" aria-hidden="true">#</a></h4><p>You&#39;ll need to Replace the <code>oauth.*</code> App settings with your own in <code>appsettings.Development.json</code> for local development and <code>appsettings.json</code> for production deployments. Follow the links below to create OAuth Apps for the different external providers:</p><ul><li>Twitter - <a href="https://dev.twitter.com/apps" target="_blank" rel="noopener noreferrer">Create Twitter App</a> with <code>{BaseUrl}/auth/twitter</code> referrer</li><li>Facebook - <a href="https://developers.facebook.com/apps" target="_blank" rel="noopener noreferrer">Create Facebook App</a> with <code>{BaseUrl}/auth/facebook</code> referrer</li><li>Google - <a href="https://console.developers.google.com/apis/credentials" target="_blank" rel="noopener noreferrer">Create Google App</a> with <code>{BaseUrl}/auth/google</code> referrer</li><li>Microsoft - <a href="https://apps.dev.microsoft.com" target="_blank" rel="noopener noreferrer">Create Microsoft App</a> with <code>{BaseUrl}/auth/microsoft</code> referrer</li></ul><h3 id="microsoft-graph-savephoto" tabindex="-1">Microsoft Graph SavePhoto <a class="header-anchor" href="#microsoft-graph-savephoto" aria-hidden="true">#</a></h3><p>The additional <code>SavePhoto</code> and <code>SavePhotoSize</code> options are specific to Microsoft&#39;s Graph provider to workaround it not providing a publicly servable image for the Users avatar so we can provide the same experience and have <code>IAuthSession.GetProfileUrl()</code> return the Users avatar.</p><p>Enabling <code>SavePhoto</code> downloads the users avatar on Authentication, resizes it to the dimensions in <code>SavePhotoSize</code> then convert into a <strong>URL embedded with the PNG image data</strong> of the avatar.</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;oauth.microsoftgraph.SavePhoto&quot;</span><span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;oauth.microsoftgraph.SavePhotoSize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;32x32&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="new-claim-apis" tabindex="-1">New Claim APIs <a class="header-anchor" href="#new-claim-apis" aria-hidden="true">#</a></h3><p>A few new APIs were added to make accessing and working claims easier in ServiceStack, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> claims <span class="token operator">=</span> <span class="token keyword">base</span><span class="token punctuation">.</span>Request<span class="token punctuation">.</span><span class="token function">GetClaims</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
claims<span class="token punctuation">.</span><span class="token function">HasRole</span><span class="token punctuation">(</span>roleName<span class="token punctuation">)</span><span class="token punctuation">;</span>
claims<span class="token punctuation">.</span><span class="token function">HasScope</span><span class="token punctuation">(</span>scopeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
claims<span class="token punctuation">.</span><span class="token function">HasClaim</span><span class="token punctuation">(</span>claimType<span class="token punctuation">,</span> claimValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Use the new <code>[RequiredClaim]</code> attribute to check for specific claims when using ServiceStack with Claims Based Auth:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">RequiredClaim</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;scope&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;profile&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">RequiresScope</span> request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="iserviceprovider-request-extensions" tabindex="-1">IServiceProvider Request Extensions <a class="header-anchor" href="#iserviceprovider-request-extensions" aria-hidden="true">#</a></h3><p>You can <strong>access scoped <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core dependencies</strong> and create Custom IOC Scopes using the new <code>IRequest</code> extension methods:</p><ul><li><code>IRequest.TryResolveScoped&lt;T&gt;()</code></li><li><code>IRequest.TryResolveScoped()</code></li><li><code>IRequest.ResolveScoped&lt;T&gt;()</code></li><li><code>IRequest.ResolveScoped()</code></li><li><code>IRequest.CreateScope()</code></li><li><code>IRequest.GetServices()</code></li><li><code>IRequest.GetServices&lt;T&gt;()</code></li></ul><h3 id="enable-same-site-cookies" tabindex="-1">Enable Same Site Cookies <a class="header-anchor" href="#enable-same-site-cookies" aria-hidden="true">#</a></h3><p><a href="https://www.sjoerdlangkemper.nl/2016/04/14/preventing-csrf-with-samesite-cookie-attribute/" target="_blank" rel="noopener noreferrer">Same Site Cookies</a> are a good default to use in your Apps which restricts cookies from being sent cross-site in order to prevent against cross-site request forgery (CSRF) attacks.</p><p>Configure it with:</p><div class="language-csharp"><pre><code><span class="token function">SetConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HostConfig</span>
<span class="token punctuation">{</span>
    UseSameSiteCookies <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This restriction will prevent features reliant on cross-site cookies from working so you&#39;ll need to verify it&#39;s safe to enable in your Apps. This restriction works with most Auth Providers except for <code>TwitterAuthProvider</code> who doesn&#39;t yet support the OAuth <code>state</code> callback that could be used instead of Session cookies.</p><h3 id="cookie-filters" tabindex="-1">Cookie Filters <a class="header-anchor" href="#cookie-filters" aria-hidden="true">#</a></h3><p>Further customization of Cookies can be enabled by overriding the host-specific methods in your <code>AppHost</code>:</p><div class="language-csharp"><pre><code><span class="token comment">//ASP.NET Core</span>
<span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CookieOptionsFilter</span><span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie<span class="token punctuation">,</span> <span class="token class-name">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Http<span class="token punctuation">.</span>CookieOptions</span> cookieOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">//Classic ASP.NET</span>
<span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">HttpCookieFilter</span><span class="token punctuation">(</span><span class="token class-name">HttpCookie</span> cookie<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="secure-cookies-enabled-by-default" tabindex="-1">Secure Cookies enabled by default <a class="header-anchor" href="#secure-cookies-enabled-by-default" aria-hidden="true">#</a></h3><p><a href="https://en.wikipedia.org/wiki/Secure_cookie" target="_blank" rel="noopener noreferrer">Secure Cookies</a> ensure that Cookies added over HTTPS are only resent in subsequent secure connections.</p><p>They&#39;re now <strong>enabled by default</strong> for <strong>Cookies added over SSL</strong>, they can be disabled with:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HostConfig</span> <span class="token punctuation">{</span>
    UseSecureCookies <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="override-authorization-http-header" tabindex="-1">Override Authorization HTTP Header <a class="header-anchor" href="#override-authorization-http-header" aria-hidden="true">#</a></h3><p>Request Filters can override the Authorization HTTP Header used in Auth Providers with:</p><div class="language-csharp"><pre><code>httpReq<span class="token punctuation">.</span>Items<span class="token punctuation">[</span>Keywords<span class="token punctuation">.</span>Authorization<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;Bearer </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">token</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>
</code></pre></div><h3 id="get-authenticate-requests-are-disabled-by-default" tabindex="-1">GET Authenticate Requests are disabled by default <a class="header-anchor" href="#get-authenticate-requests-are-disabled-by-default" aria-hidden="true">#</a></h3><p>We&#39;re disabling <strong>GET</strong> <code>/auth/{provider}</code> requests by default to discourage sending confidential information in the URL.</p><p>The current exceptions which still allow <strong>GET</strong> requests include:</p><ul><li><code>/auth</code> - Used to check if a User is Authenticated</li><li><code>/auth/logout</code> - Logging Out</li><li>All OAuth Providers who starts their OAuth flow by navigating to <code>/auth/{provider}</code></li></ul><p>This is a potential breaking change if you&#39;re currently using GET requests to Authenticate and can be reverted with:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span> <span class="token punctuation">{</span>
    AllowGetAuthenticateRequests <span class="token operator">=</span> req <span class="token operator">=&gt;</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Although it&#39;s recommended to instead update or existing code to use <code>POST</code> instead of <code>GET</code> requests. Otherwise you can use the <code>IRequest req</code> parameter to check against a white list of known requests types.</p><h3 id="usersession-validation" tabindex="-1">UserSession validation <a class="header-anchor" href="#usersession-validation" aria-hidden="true">#</a></h3><p>Custom User Sessions can override <code>AuthUserSession.Validate()</code> to add additional logic for validating whether to allow a User to Authenticate, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomUserSession</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AuthUserSession</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">IHttpResult</span> <span class="token function">Validate</span><span class="token punctuation">(</span><span class="token class-name">IServiceBase</span> authService<span class="token punctuation">,</span> <span class="token class-name">IAuthSession</span> session<span class="token punctuation">,</span> 
        <span class="token class-name">IAuthTokens</span> tokens<span class="token punctuation">,</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> authInfo<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">ValidateEmail</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>Email<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> HttpError<span class="token punctuation">.</span><span class="token function">BadRequest</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">nameof</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>Email<span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> is invalid&quot;</span></span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">IHttpResult</span><span class="token punctuation">;</span>
        
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Returning any <code>IHttpResult</code> will cause Authentication to fail with the returned <code>IHttpResult</code> written to the response.</p><h3 id="intercept-service-requests" tabindex="-1">Intercept Service Requests <a class="header-anchor" href="#intercept-service-requests" aria-hidden="true">#</a></h3><p>As an alternative to creating a <a href="/customize-http-responses.html#using-a-custom-servicerunner">Custom Service Runner</a> to intercept different events when processing ServiceStack Requests, you can instead override the <code>OnBeforeExecute()</code>, <code>OnAfterExecute()</code> and <code>OnExceptionAsync()</code> callbacks in your <code>Service</code> class (or base class) to intercept and modify Request DTOs, Responses or Error Responses, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">class</span> <span class="token class-name">MyServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// Log all Request DTOs that implement IHasSessionId</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnBeforeExecute</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> requestDto<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>requestDto <span class="token keyword">is</span> <span class="token class-name">IHasSessionId</span> dtoSession<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Log<span class="token punctuation">.</span><span class="token function">Debug</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">nameof</span><span class="token punctuation">(</span>OnBeforeExecute<span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">dtoSession<span class="token punctuation">.</span>SessionId</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//Return Response DTO Name in HTTP Header with Response</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">OnAfterExecute</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> response<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpResult</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Headers <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token punctuation">[</span><span class="token string">&quot;X-Response&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//Return custom error with additional metadata</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token function">OnExceptionAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> requestDto<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> error <span class="token operator">=</span> DtoUtils<span class="token punctuation">.</span><span class="token function">CreateErrorResponse</span><span class="token punctuation">(</span>requestDto<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">is</span> <span class="token class-name">IHttpError</span> httpError<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>                
            <span class="token class-name"><span class="token keyword">var</span></span> errorStatus <span class="token operator">=</span> httpError<span class="token punctuation">.</span>Response<span class="token punctuation">.</span><span class="token function">GetResponseStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            errorStatus<span class="token punctuation">.</span>Meta <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
                <span class="token punctuation">[</span><span class="token string">&quot;InnerType&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> ex<span class="token punctuation">.</span>InnerException<span class="token punctuation">?.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> Task<span class="token punctuation">.</span><span class="token function">FromResult</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If you&#39;re implementing <code>IService</code> instead of inheriting the concrete <code>Service</code> class, you can implement the interfaces directly:</p><div class="language-csharp"><pre><code><span class="token comment">// Handle all callbacks</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IService</span><span class="token punctuation">,</span> <span class="token class-name">IServiceFilters</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">//..</span>
<span class="token punctuation">}</span>

<span class="token comment">// Or individually, just the callbacks you want</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IService</span><span class="token punctuation">,</span> <span class="token class-name">IServiceBeforeFilter</span><span class="token punctuation">,</span> <span class="token class-name">IServiceAfterFilter</span><span class="token punctuation">,</span> <span class="token class-name">IServiceErrorFilter</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">//..</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="fluent-validation" tabindex="-1">Fluent Validation <a class="header-anchor" href="#fluent-validation" aria-hidden="true">#</a></h3><p>You can change ServiceStack&#39;s built-in FluentValidation to throw Exceptions on Warnings with:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationFeature</span> <span class="token punctuation">{</span>
    TreatInfoAndWarningsAsErrors <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Thanks to <a href="https://github.com/DeonHeyns" target="_blank" rel="noopener noreferrer">@DeonHeyns</a> for this feature.</p><h3 id="auto-batching" tabindex="-1">Auto Batching <a class="header-anchor" href="#auto-batching" aria-hidden="true">#</a></h3><p>The current index of the Auto Batched Request being processed is now being maintained in <code>IRequest.Items[Keywords.AutoBatchIndex]</code>.</p><p>In Error Responses the index of the request that failed is now being populated in your Response DTO&#39;s <code>ResponseStatus.Meta[&quot;AutoBatchIndex&quot;]</code>.</p><p>To also maintain the active <code>AutoBatchIndex</code> in <a href="/auto-batched-requests.html#custom-batched-requests-implementations">Custom Batched Requests Implementations</a> you can use the <code>IRequest.EachRequest()</code> extension method, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">GetCustomAutoBatchIndex<span class="token punctuation">[</span><span class="token punctuation">]</span></span> requests<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> responses <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>GetAutoBatchIndexResponse<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Request<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">EachRequest</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GetCustomAutoBatchIndex<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>dto <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        responses<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token function">Any</span><span class="token punctuation">(</span>dto<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> responses<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Thanks to <a href="https://github.com/georgehemmings" target="_blank" rel="noopener noreferrer">@georgehemmings</a> for this feature.</p><h3 id="hot-reload" tabindex="-1">Hot Reload <a class="header-anchor" href="#hot-reload" aria-hidden="true">#</a></h3><p>ServiceStack includes 2 Hot Reloading solutions to automatically detect file changes and reload your page on save.</p><h4 id="hot-reload-script-pages" tabindex="-1">Hot Reload #Script Pages <a class="header-anchor" href="#hot-reload-script-pages" aria-hidden="true">#</a></h4><p>The <a href="https://sharpscript.net/docs/hot-reloading" target="_blank" rel="noopener noreferrer">Hot Reloading</a> support in #Script Pages enables the <code>HotReloadFilesService</code> when registering the <code>SharpPagesFeature</code>, e.g:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SharpPagesFeature</span> <span class="token punctuation">{</span>
    EnableHotReload <span class="token operator">=</span> Config<span class="token punctuation">.</span>DebugMode <span class="token comment">//default</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This is enabled in your pages with this snippet which renders the hot reload client script during development:</p>__VP_STATIC_END__`,336),ns=n("div",null,[n("div",{class:"language-html"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("i")]),s(),n("span",{class:"token attr-name"},"hidden"),n("span",{class:"token punctuation"},">")]),s("{{ '/js/hot-loader.js' | ifDebugIncludeScript }}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("i")]),n("span",{class:"token punctuation"},">")]),s(`
`)])])])],-1),ss=a(`__VP_STATIC_START__<p>Which starts a long poll that calls the smart <code>HotReloadFilesService</code> which recursively inspects the current tokenized <a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">#Script Pages</a> to find if it or any dependent layouts, partials or file includes have changed.</p><p>Sharp Page&#39;s Hot Reload feature now also monitors <strong>Paged Based Routing Pages</strong> and <strong>View Pages</strong>.</p><h3 id="hot-reload-static-files" tabindex="-1">Hot Reload Static Files <a class="header-anchor" href="#hot-reload-static-files" aria-hidden="true">#</a></h3><p>If you&#39;re not developing your Website with <code>#Script</code> or are developing a Single Page App where it&#39;s mostly contained in static files you can use the <code>HotReloadFeature</code> instead which has added support for monitoring multiple File Search Patterns and can now be configured to monitor a different VFS provider (defaults to WebRoot).</p><p>The new &quot;lite&quot; projects utilize both these features for its hot reloading support:</p><div class="language-csharp"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>Config<span class="token punctuation">.</span>DebugMode<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HotReloadFeature</span> <span class="token punctuation">{</span>
        DefaultPattern <span class="token operator">=</span> <span class="token string">&quot;*.html;*.js;*.css&quot;</span><span class="token punctuation">,</span>
        VirtualFiles <span class="token operator">=</span> VirtualFiles <span class="token comment">// Monitor ContentRoot to detect changes in /src</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which is enabled during development in <code>_layout.html</code> by including <code>/js/hot-fileloader.js</code>:</p>__VP_STATIC_END__`,7),as=n("div",null,[n("div",{class:"language-html"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("i")]),s(),n("span",{class:"token attr-name"},"hidden"),n("span",{class:"token punctuation"},">")]),s("{{ '/js/hot-fileloader.js' | ifDebugIncludeScript }}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("i")]),n("span",{class:"token punctuation"},">")]),s(`
`)])])])],-1),ts=a(`__VP_STATIC_START__<h3 id="image-utils" tabindex="-1">Image Utils <a class="header-anchor" href="#image-utils" aria-hidden="true">#</a></h3><p>New <code>Image.ResizeToPng()</code> and <code>Image.CropToPng()</code> <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/ImageExtensions.cs" target="_blank" rel="noopener noreferrer">extension methods</a> can be used to resize and crop <code>System.Drawing</code> Images, e.g:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AddHeader</span><span class="token attribute-arguments"><span class="token punctuation">(</span>ContentType <span class="token operator">=</span> <span class="token string">&quot;image/png&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">Stream</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token class-name">Resize</span> request<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> imageFile <span class="token operator">=</span> VirtualFiles<span class="token punctuation">.</span><span class="token function">GetFile</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>imageFile <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> HttpError<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Path <span class="token operator">+</span> <span class="token string">&quot; was not found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> stream <span class="token operator">=</span> imageFile<span class="token punctuation">.</span><span class="token function">OpenRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> img <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token function">FromStream</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> img<span class="token punctuation">.</span><span class="token function">ResizeToPng</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AddHeader</span><span class="token attribute-arguments"><span class="token punctuation">(</span>ContentType <span class="token operator">=</span> <span class="token string">&quot;image/png&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">Stream</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token class-name">Crop</span> request<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> imageFile <span class="token operator">=</span> VirtualFiles<span class="token punctuation">.</span><span class="token function">GetFile</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>imageFile <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> HttpError<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Path <span class="token operator">+</span> <span class="token string">&quot; was not found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> stream <span class="token operator">=</span> imageFile<span class="token punctuation">.</span><span class="token function">OpenRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> img <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token function">FromStream</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> img<span class="token punctuation">.</span><span class="token function">CropToPng</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> request<span class="token punctuation">.</span>Height<span class="token punctuation">,</span> request<span class="token punctuation">.</span>StartX<span class="token punctuation">,</span> request<span class="token punctuation">.</span>StartY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="enum-utils" tabindex="-1">Enum Utils <a class="header-anchor" href="#enum-utils" aria-hidden="true">#</a></h3><p>The new <code>EnumUtils.GetValues()</code>, <code>IEnumerable&lt;Enum&gt;.ToKeyValuePairs()</code> and <code>Enum.ToDescription()</code> extension methods makes it easy to create data sources from Enums that can be annotated with <code>[ApiMember]</code> and <code>[Description]</code> attributes:</p><div class="language-csharp"><pre><code><span class="token return-type class-name">List<span class="token punctuation">&lt;</span>KeyValuePair<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> Titles <span class="token operator">=&gt;</span> EnumUtils<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetValues</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Title<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x <span class="token operator">!=</span> Title<span class="token punctuation">.</span>Unspecified<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ToKeyValuePairs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> FilmGenres <span class="token operator">=&gt;</span> EnumUtils<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetValues</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>FilmGenres<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">ToDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="open-api-feature" tabindex="-1">Open API Feature <a class="header-anchor" href="#open-api-feature" aria-hidden="true">#</a></h2><h3 id="customizable-security-definitions" tabindex="-1">Customizable Security Definitions <a class="header-anchor" href="#customizable-security-definitions" aria-hidden="true">#</a></h3><p>The <code>OpenApiFeature</code> now allows customizable <code>SecurityDefinitions</code> and includes a couple of pre-set configurations, e.g. to configure <code>swagger-ui</code> to allow authentication via HTTP Bearer Token (via JWT or API Key Auth) use:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiFeature</span>
<span class="token punctuation">{</span>
    UseBearerSecurity <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This will customize the Open API metadata Response to specify your authenticated Services would like to use Swagger&#39;s API Key authentication, e.g:</p><p><img src="https://i.stack.imgur.com/fmFbv.png" alt=""></p><p>As the <strong>value</strong> field is for the entire <code>Authorization</code> HTTP Header you&#39;d need to add your JWT Token or API Key prefixed with <code>Bearer </code>:</p><pre><code>Bearer {JWT or API Key}
</code></pre><p>Alternatively you can force using HTTP Basic Auth instead with:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiFeature</span>
<span class="token punctuation">{</span>
    UseBasicSecurity <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>By default if you&#39;ve registered a <code>BasicAuthProvider</code> it will use <code>UseBasicSecurity</code> otherwise it default to using <code>UseBearerSecurity</code>.</p><h3 id="customize-swaggerui" tabindex="-1">Customize SwaggerUI <a class="header-anchor" href="#customize-swaggerui" aria-hidden="true">#</a></h3><p>Open API lets you <a href="/openapi.html#overriding-openapi-embedded-resources">override embedded resources</a> to customize the embedded <code>/swagger-ui</code> where you can add a <code>/swagger-ui/patch.js</code> to add additional JavaScript at the end of the page, you can now also add <code>/swagger-ui/patch-preload.js</code> to modify the <code>window.swaggerUi</code> configuration object before it&#39;s loaded with <code>window.swaggerUi.load()</code>:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>text/javascript<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">//...</span>

<span class="token comment">// contents of /swagger-ui/patch-preload.js</span>

window<span class="token punctuation">.</span>swaggerUi<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="disable-auto-html-pages" tabindex="-1">Disable Auto HTML Pages <a class="header-anchor" href="#disable-auto-html-pages" aria-hidden="true">#</a></h3><p>ServiceStack&#39;s fallback <a href="/html5reportformat.html">Auto HTML Report Pages</a> can now be disabled with:</p><div class="language-csharp"><pre><code><span class="token function">SetConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HostConfig</span> <span class="token punctuation">{</span>
    EnableAutoHtmlResponses <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>When disabled it will render Response DTOs from Browser requests (i.e. <code>Accept:text/html</code>) in the next <code>Config.PreferredContentTypes</code> - (JSON by default).</p><h2 id="typescript" tabindex="-1">TypeScript <a class="header-anchor" href="#typescript" aria-hidden="true">#</a></h2><h3 id="partial-constructors" tabindex="-1">Partial Constructors <a class="header-anchor" href="#partial-constructors" aria-hidden="true">#</a></h3><p>All <a href="/typescript-add-servicestack-reference.html">TypeScript Reference DTOs</a> now includes support for <strong>Partial Constructors</strong> making them much nicer to populate using object initializer syntax we&#39;re used to in C#, so instead of:</p><div class="language-ts"><pre><code><span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Authenticate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span>provider <span class="token operator">=</span> <span class="token string">&#39;credentials&#39;</span>
request<span class="token punctuation">.</span>userName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userName<span class="token punctuation">;</span>
request<span class="token punctuation">.</span>password <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password<span class="token punctuation">;</span>
request<span class="token punctuation">.</span>rememberMe <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rememberMe<span class="token punctuation">;</span>
<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can now populate DTOs with object literal syntax without any loss of TypeScript&#39;s Type Safety benefits:</p><div class="language-ts"><pre><code><span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Authenticate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    provider<span class="token operator">:</span> <span class="token string">&#39;credentials&#39;</span><span class="token punctuation">,</span>
    userName<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userName<span class="token punctuation">,</span>
    password<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password<span class="token punctuation">,</span>
    rememberMe<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rememberMe<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="defaultimports" tabindex="-1">DefaultImports <a class="header-anchor" href="#defaultimports" aria-hidden="true">#</a></h3><p>There&#39;s new <code>Symbol:module</code> short-hand syntax for specifying additional imports in your generated TypeScript DTOs, e.g:</p><div class="language-ts"><pre><code><span class="token comment">/* Options:
...
DefaultImports: Symbol:module,Zip:./ZipValidator
*/</span>
</code></pre></div><p>Which will generate the popular import form of:</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Symbol <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Zip <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./ZipValidator&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="messaging" tabindex="-1">Messaging <a class="header-anchor" href="#messaging" aria-hidden="true">#</a></h2><p>All <a href="/messaging.html">MQ Servers</a> now support the ability to specify a whitelist of Requests you <strong>only</strong> want to publish <code>.outq</code> for:</p><div class="language-csharp"><pre><code>PublishToOutqWhitelist <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>MyRequest<span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre></div><p>Alternatively all <code>.outq</code> messages can be disabled with:</p><div class="language-csharp"><pre><code>DisablePublishingToOutq <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><h3 id="background-mq-stats" tabindex="-1">Background MQ Stats <a class="header-anchor" href="#background-mq-stats" aria-hidden="true">#</a></h3><p>Additional stats are available for <a href="/background-mq.html">Background MQ</a> to gain more insight into the processing of background operations, e.g. you can get info on the Queue Collection for a specific DTO Type with:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> bgService <span class="token operator">=</span> <span class="token punctuation">(</span>BackgroundMqService<span class="token punctuation">)</span>HostContext<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IMessageService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> mqCollection <span class="token operator">=</span> bgService<span class="token punctuation">.</span><span class="token function">GetCollection</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Poco</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">long</span><span class="token punctuation">&gt;</span></span> statsMap <span class="token operator">=</span> mqCollection<span class="token punctuation">.</span><span class="token function">GetDescriptionMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Which returns the text info that [mqCollection.GetDescription()][/background-mq#mq-status] returns, but in a structured Dictionary using the keys:</p><ul><li><code>ThreadCount</code></li><li><code>TotalMessagesAdded</code></li><li><code>TotalMessagesTaken</code></li><li><code>TotalOutQMessagesAdded</code></li><li><code>TotalDlQMessagesAdded</code></li></ul><p>The dictionary also includes each the snapshot counts of each queue in the MQ Collection, e.g:</p><ul><li><code>mq:Poco.inq</code></li><li><code>mq:Poco.priorityq</code></li><li><code>mq:Poco.outq</code></li><li><code>mq:Poco.dlq</code></li></ul><p>You can also get the Stats of each MQ Worker, or if you have multiple workers for a Request Type you can access them with:</p><div class="language-csharp"><pre><code><span class="token class-name">IMqWorker<span class="token punctuation">[</span><span class="token punctuation">]</span></span> workers <span class="token operator">=</span> bgService<span class="token punctuation">.</span><span class="token function">GetWorkers</span><span class="token punctuation">(</span>QueueNames<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span><span class="token punctuation">.</span>In<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List<span class="token punctuation">&lt;</span>IMessageHandlerStats<span class="token punctuation">&gt;</span></span> stats <span class="token operator">=</span> workers<span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">GetStats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then combine them to get their cumulative result:</p><div class="language-csharp"><pre><code><span class="token class-name">IMessageHandlerStats</span> combinedStats <span class="token operator">=</span> stats<span class="token punctuation">.</span><span class="token function">CombineStats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="aws-sqs-server" tabindex="-1">Aws SQS Server <a class="header-anchor" href="#aws-sqs-server" aria-hidden="true">#</a></h3><h3 id="intercepting-filters" tabindex="-1">Intercepting Filters <a class="header-anchor" href="#intercepting-filters" aria-hidden="true">#</a></h3><p>A number of new filters have been added to <code>SqsMqServer</code> and <code>SqsMqClient</code> which will let you intercept and apply custom logic before SQS messages are sent and received:</p><div class="language-csharp"><pre><code>Action<span class="token operator">&lt;</span>SendMessageRequest<span class="token punctuation">,</span>IMessage<span class="token operator">&gt;</span> SendMessageRequestFilter
Action<span class="token operator">&lt;</span>ReceiveMessageRequest<span class="token operator">&gt;</span> ReceiveMessageRequestFilter
Action<span class="token operator">&lt;</span>Amazon<span class="token punctuation">.</span>SQS<span class="token punctuation">.</span>Model<span class="token punctuation">.</span>Message<span class="token punctuation">,</span> IMessage<span class="token operator">&gt;</span> ReceiveMessageResponseFilter
Action<span class="token operator">&lt;</span>DeleteMessageRequest<span class="token operator">&gt;</span> DeleteMessageRequestFilter
Action<span class="token operator">&lt;</span>ChangeMessageVisibilityRequest<span class="token operator">&gt;</span> ChangeMessageVisibilityRequestFilter
</code></pre></div><h3 id="polling-duration" tabindex="-1">Polling Duration <a class="header-anchor" href="#polling-duration" aria-hidden="true">#</a></h3><p>The polling duration used to poll SQS queues can be configured with:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SqsMqServer</span> <span class="token punctuation">{</span>
    PollingDuration <span class="token operator">=</span> TimeSpan<span class="token punctuation">.</span><span class="token function">FromMilliseconds</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token comment">//default</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ormlite" tabindex="-1">OrmLite <a class="header-anchor" href="#ormlite" aria-hidden="true">#</a></h2><p>OrmLite continues to receive a number of enhancements in response to Customer Feature Requests:</p><h3 id="insert-into-select" tabindex="-1">INSERT INTO SELECT <a class="header-anchor" href="#insert-into-select" aria-hidden="true">#</a></h3><p>You can use OrmLite&#39;s Typed <code>SqlExpression</code> to create a subselect expression that you can use to create and execute a typed <strong>INSERT INTO SELECT</strong> <code>SqlExpression</code> with:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> q <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>UserName <span class="token operator">==</span> <span class="token string">&quot;UserName&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">.</span>UserName<span class="token punctuation">,</span> 
        x<span class="token punctuation">.</span>Email<span class="token punctuation">,</span> 
        GivenName <span class="token operator">=</span> x<span class="token punctuation">.</span>FirstName<span class="token punctuation">,</span> 
        Surname <span class="token operator">=</span> x<span class="token punctuation">.</span>LastName<span class="token punctuation">,</span> 
        FullName <span class="token operator">=</span> x<span class="token punctuation">.</span>FirstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> x<span class="token punctuation">.</span>LastName
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> id <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">InsertIntoSelect</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CustomUser<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>
</code></pre></div><h3 id="postgresql-rich-data-types" tabindex="-1">PostgreSQL Rich Data Types <a class="header-anchor" href="#postgresql-rich-data-types" aria-hidden="true">#</a></h3><p>By default all arrays of .NET&#39;s built-in <strong>numeric</strong>, <strong>string</strong> and <strong>DateTime</strong> types will be stored in PostgreSQL array types:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Table</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Guid</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Ints <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Longs <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">float</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Floats <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Doubles <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Decimals <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Strings <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime<span class="token punctuation">[</span><span class="token punctuation">]</span></span> DateTimes <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTimeOffset<span class="token punctuation">[</span><span class="token punctuation">]</span></span> DateTimeOffsets <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can opt-in to annotate other collections like <code>List&lt;T&gt;</code> to also be stored in array types by annotating them with <code>[Pgsql*]</code> attributes, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Table</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Guid</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PgSqlIntArray</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> ListInts <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PgSqlBigIntArray</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">long</span><span class="token punctuation">&gt;</span></span> ListLongs <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PgSqlFloatArray</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">float</span><span class="token punctuation">&gt;</span></span> ListFloats <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PgSqlDoubleArray</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">double</span><span class="token punctuation">&gt;</span></span> ListDoubles <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PgSqlDecimalArray</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span> ListDecimals <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PgSqlTextArray</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> ListStrings <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PgSqlTimestamp</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>DateTime<span class="token punctuation">&gt;</span></span> ListDateTimes <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PgSqlTimestampTz</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>DateTimeOffset<span class="token punctuation">&gt;</span></span> ListDateTimeOffsets <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Alternatively if you <strong>always</strong> want <code>List&lt;T&gt;</code> stored in Array types, you can register them in the <code>PostgreSqlDialect.Provider</code>:</p><div class="language-csharp"><pre><code>PostgreSqlDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterConverter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PostgreSqlStringArrayConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PostgreSqlDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterConverter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PostgreSqlIntArrayConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PostgreSqlDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterConverter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span><span class="token keyword">long</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PostgreSqlLongArrayConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PostgreSqlDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterConverter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span><span class="token keyword">float</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PostgreSqlFloatArrayConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PostgreSqlDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterConverter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span><span class="token keyword">double</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PostgreSqlDoubleArrayConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PostgreSqlDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterConverter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PostgreSqlDecimalArrayConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PostgreSqlDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterConverter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>DateTime<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PostgreSqlDateTimeTimeStampArrayConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PostgreSqlDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterConverter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>DateTimeOffset<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PostgreSqlDateTimeOffsetTimeStampTzArrayConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="hstore-support" tabindex="-1">Hstore support <a class="header-anchor" href="#hstore-support" aria-hidden="true">#</a></h3><p>To use <code>hstore</code>, its extension needs to be enabled in your PostgreSQL RDBMS by running:</p><pre><code>CREATE EXTENSION hstore;
</code></pre><p>Which can then be enabled in OrmLite with:</p><div class="language-csharp"><pre><code>PostgreSqlDialect<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span>UseHstore <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><p>Where it will now store <strong>string Dictionaries</strong> in <code>Hstore</code> columns:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TableHstore</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> Dictionary <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> IDictionary <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DropAndCreateTable</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TableHstore<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

db<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">TableHstore</span>
<span class="token punctuation">{</span>
    Id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    Dictionary <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    IDictionary <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token punctuation">{</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Where they can than be queried in postgres using <a href="https://www.postgresql.org/docs/9.0/hstore.html" target="_blank" rel="noopener noreferrer">Hstore SQL Syntax</a>:</p><div class="language-csharp"><pre><code>db<span class="token punctuation">.</span><span class="token function">Single</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>PostgreSqlTypes<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary -&gt; &#39;A&#39; = &#39;1&#39;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Id <span class="token comment">//= 1</span>
</code></pre></div><p>Thanks to <a href="https://forums.servicestack.net/users/cthames/activity" target="_blank" rel="noopener noreferrer">@cthames</a> for this feature.</p><h3 id="json-data-types" tabindex="-1">JSON data types <a class="header-anchor" href="#json-data-types" aria-hidden="true">#</a></h3><p>If you instead wanted to store arbitrary complex types in PostgreSQL&#39;s rich column types to enable deep querying in postgres, you&#39;d instead annotate them with <code>[PgSqlJson]</code> or <code>[PgSqlJsonB]</code>, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TableJson</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PgSqlJson</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ComplexType</span> ComplexTypeJson <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">PgSqlJsonB</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">ComplexType</span> ComplexTypeJsonb <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

db<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">TableJson</span>
<span class="token punctuation">{</span>
    Id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    ComplexTypeJson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ComplexType</span> <span class="token punctuation">{</span>
        Id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> SubType <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SubType</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;JSON&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ComplexTypeJsonb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ComplexType</span> <span class="token punctuation">{</span>
        Id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> SubType <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SubType</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;JSONB&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Where they can then be queried on the server with <a href="https://www.postgresql.org/docs/9.3/functions-json.html" target="_blank" rel="noopener noreferrer">JSON SQL Syntax and functions</a>:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Single</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TableJson<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;table_json-&gt;&#39;SubType&#39;-&gt;&gt;&#39;Name&#39; = &#39;JSON&#39;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="new-keyvaluepair-k-v-top-level-apis" tabindex="-1">New KeyValuePair&lt;K,V&gt; top-level APIs <a class="header-anchor" href="#new-keyvaluepair-k-v-top-level-apis" aria-hidden="true">#</a></h3><p>The new <code>db.KeyValuePair&lt;K,V&gt;</code> API is similar to <code>db.Dictionary&lt;K,V&gt;</code> where it uses the <strong>first 2 columns</strong> for its Key/Value Pairs to create a Dictionary but is more appropriate when the results can contain duplicate Keys or when ordering needs to be preserved:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> q <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>StatsLog<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">GroupBy</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> x<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> Count <span class="token operator">=</span> Sql<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">OrderByDescending</span><span class="token punctuation">(</span><span class="token string">&quot;Count&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> results <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">KeyValuePairs</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>*Async</code> variants also available</p></blockquote><h3 id="select-constant-expressions" tabindex="-1">SELECT Constant Expressions <a class="header-anchor" href="#select-constant-expressions" aria-hidden="true">#</a></h3><p>You can now mix+match Constant C# Expressions with RDBMS Expressions in the same query:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> q <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token keyword">new</span>
    <span class="token punctuation">{</span>
        x<span class="token punctuation">.</span>Field<span class="token punctuation">,</span>
        param <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        str <span class="token operator">=</span> <span class="token string">&quot;hi&quot;</span><span class="token punctuation">,</span>
        date <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="select-distinct-in-selectmulti" tabindex="-1">SELECT DISTINCT in SelectMulti <a class="header-anchor" href="#select-distinct-in-selectmulti" aria-hidden="true">#</a></h3><p><a href="https://github.com/ServiceStack/ServiceStack.OrmLite#selecting-multiple-columns-across-joined-tables" target="_blank" rel="noopener noreferrer">SelectMulti</a> APIs for populating multiple tables now supports <strong>SELECT DISTINCT</strong> with:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> tuples <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">SelectMulti</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Customer<span class="token punctuation">,</span> CustomerAddress<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">SelectDistinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="new-tablealias-replaces-joinalias" tabindex="-1">New TableAlias replaces JoinAlias <a class="header-anchor" href="#new-tablealias-replaces-joinalias" aria-hidden="true">#</a></h3><p>The new <code>TableAlias</code> APIs is a new expression visitor replacement that replaces the existing JoinAlias APIs which you can use in Queries with multiple self-reference joins, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> q <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Page<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>db<span class="token punctuation">.</span><span class="token function">TableAlias</span><span class="token punctuation">(</span><span class="token string">&quot;p1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Join</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Page<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
        p1<span class="token punctuation">.</span>PageId <span class="token operator">==</span> p2<span class="token punctuation">.</span>PageId <span class="token operator">&amp;&amp;</span> 
        p2<span class="token punctuation">.</span>ActivityId <span class="token operator">==</span> activityId<span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">TableAlias</span><span class="token punctuation">(</span><span class="token string">&quot;p2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Join</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Page<span class="token punctuation">,</span>Category<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>p2<span class="token punctuation">,</span>c<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Sql<span class="token punctuation">.</span><span class="token function">TableAlias</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>Category<span class="token punctuation">)</span> <span class="token operator">==</span> c<span class="token punctuation">.</span>Id<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Join</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Page<span class="token punctuation">,</span>Page<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span>p2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Sql<span class="token punctuation">.</span><span class="token function">TableAlias</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>Rank<span class="token punctuation">,</span><span class="token string">&quot;p1&quot;</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> Sql<span class="token punctuation">.</span><span class="token function">TableAlias</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>Rank<span class="token punctuation">,</span><span class="token string">&quot;p2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Page<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>p <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token punctuation">{</span>
        ActivityId <span class="token operator">=</span> Sql<span class="token punctuation">.</span><span class="token function">TableAlias</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>ActivityId<span class="token punctuation">,</span> <span class="token string">&quot;p2&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> rows <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="gettablenames-and-gettablenameswithrowcounts-apis" tabindex="-1">GetTableNames and GetTableNamesWithRowCounts APIs <a class="header-anchor" href="#gettablenames-and-gettablenameswithrowcounts-apis" aria-hidden="true">#</a></h3><p>As the queries for retrieving table names can vary amongst different RDBMS&#39;s, we&#39;ve abstracted their implementations behind uniform APIs where you can now get a list of table names and their row counts for all supported RDBMS&#39;s with:</p><div class="language-csharp"><pre><code><span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> tableNames <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">GetTableNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List<span class="token punctuation">&lt;</span>KeyValuePair<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> tableNamesWithRowCounts <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">GetTableNamesWithRowCounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>*Async</code> variants also available</p></blockquote><p>Both APIs can be called with an optional <code>schema</code> if you only want the tables for a specific schema. It defaults to using the more efficient RDBMS APIs, which if offered typically returns an approximate estimate of rowcounts in each table.</p><p>If you need exact table row counts, you can specify <code>live:true</code>:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> tablesWithRowCounts <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">GetTableNamesWithRowCounts</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">live</span><span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="dapper-updated" tabindex="-1">Dapper updated <a class="header-anchor" href="#dapper-updated" aria-hidden="true">#</a></h3><p>The internal <code>ServiceStack.OrmLite.Dapper</code> was updated to the latest <strong>v1.60.1</strong> release thanks to <a href="https://github.com/wwwlicious" target="_blank" rel="noopener noreferrer">@wwwlicious</a>.</p><h3 id="db-scripts-can-open-different-connections" tabindex="-1">DB Scripts can open different connections <a class="header-anchor" href="#db-scripts-can-open-different-connections" aria-hidden="true">#</a></h3><p>By default the <code>DbScripts</code> will use the registered <code>IDbConnectionFactory</code> in the IOC or when <a href="/multitenancy.html">Multi tenancy</a> is configured it will use the connection configured for that request.</p><p>You can also specify to use a different DB connection using the <code>namedConnection</code> and <code>connectionString</code> arguments:</p>__VP_STATIC_END__`,110),es=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"sql"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbSelect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"namedConnection"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"sql"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbSelect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"connectionString"),n("span",{class:"token punctuation"},":"),n("span",{class:"token variable"},"sqlServerConnString"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"provider"),n("span",{class:"token punctuation"},":"),n("span",{class:"token string"},'"mssql"'),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),os=a(`__VP_STATIC_START__<p>Both Named Connections and Dialect providers can be registered in your <code>IDbConnectionFactory</code>, e.g:</p><div class="language-csharp"><pre><code>dbFactory<span class="token punctuation">.</span><span class="token function">RegisterConnection</span><span class="token punctuation">(</span>namedConnection<span class="token punctuation">,</span> connString<span class="token punctuation">,</span> SqlServer2012Dialect<span class="token punctuation">.</span>Provider<span class="token punctuation">)</span><span class="token punctuation">;</span>
dbFactory<span class="token punctuation">.</span><span class="token function">RegisterProvider</span><span class="token punctuation">(</span><span class="token string">&quot;mssql&quot;</span><span class="token punctuation">,</span> SqlServer2017Dialect<span class="token punctuation">.</span>Provider<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="redis" tabindex="-1">Redis <a class="header-anchor" href="#redis" aria-hidden="true">#</a></h2><p>All Redis Clients are initialized with a unique <code>ClientId</code> which is now prefixed in Debug/Error logging <code>#{ClientId} </code> to make it easier to trace the history for specific clients.</p><p>Improved auto-reconnection / auto retry operations on failed requests.</p><h2 id="servicestack-text" tabindex="-1">ServiceStack.Text <a class="header-anchor" href="#servicestack-text" aria-hidden="true">#</a></h2><p>In addition to significant Auto Mapping improvements covered above, there&#39;s a couple of UX Friendly Generic collections to reduce the boilerplate if you&#39;re repeatedly using these collections:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> objDict <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ObjectDictionary</span> <span class="token punctuation">{</span> <span class="token comment">//inherits Dictionary&lt;string,object&gt;</span>
    <span class="token punctuation">[</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;bar&quot;</span>
<span class="token punctuation">}</span>

<span class="token class-name"><span class="token keyword">var</span></span> strDict <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StringDictionary</span> <span class="token punctuation">{</span> <span class="token comment">//inherits Dictionary&lt;string,string&gt;</span>
    <span class="token punctuation">[</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;bar&quot;</span>
<span class="token punctuation">}</span>

<span class="token class-name"><span class="token keyword">var</span></span> kvps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">KeyValuePairs</span> <span class="token punctuation">{</span>
    KeyValuePairs<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    KeyValuePairs<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//instead of</span>
<span class="token class-name"><span class="token keyword">var</span></span> kvps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>KeyValuePair<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">KeyValuePair<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">KeyValuePair<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="servicestack-azure" tabindex="-1">ServiceStack.Azure <a class="header-anchor" href="#servicestack-azure" aria-hidden="true">#</a></h2><p>Large blobs <code>&gt;100MB</code> are now streamed in chunks thanks to <a href="https://github.com/DeonHeyns" target="_blank" rel="noopener noreferrer">@DeonHeyns</a>.</p><h1 id="v5-4-release-notes" tabindex="-1"><a href="/releases/v5.4.html">v5.4 Release Notes</a> <a class="header-anchor" href="#v5-4-release-notes" aria-hidden="true">#</a></h1>__VP_STATIC_END__`,11),is=`{"title":"v5.5 Release Notes","description":"","frontmatter":{"title":"v5.5 Release Notes","slug":"v5-5"},"headers":[{"level":2,"title":"ServiceStack turns 10!","slug":"servicestack-turns-10"},{"level":3,"title":"DTO-first Services on the outside","slug":"dto-first-services-on-the-outside"},{"level":3,"title":"Clean architecture on the inside","slug":"clean-architecture-on-the-inside"},{"level":3,"title":"Thank You!","slug":"thank-you"},{"level":2,"title":"ASP.NET Core on .NET Framework","slug":"asp-net-core-on-net-framework"},{"level":3,"title":"ASP.NET Core - still our top recommendation for .NET Framework","slug":"asp-net-core-still-our-top-recommendation-for-net-framework"},{"level":3,"title":"ServiceStack's multi-targeted Packages","slug":"servicestack-s-multi-targeted-packages"},{"level":3,"title":"Future proofed and continually developed","slug":"future-proofed-and-continually-developed"},{"level":2,"title":"New Vue and React \\"lite\\" ASP.NET Core Templates","slug":"new-vue-and-react-lite-asp-net-core-templates"},{"level":2,"title":"Introducing new \\"lite\\" npm-free project templates","slug":"introducing-new-lite-npm-free-project-templates"},{"level":3,"title":"Light on Complexity, Big on Features","slug":"light-on-complexity-big-on-features"},{"level":2,"title":"Install","slug":"install"},{"level":3,"title":"vue-lite","slug":"vue-lite"},{"level":3,"title":"react-lite","slug":"react-lite"},{"level":3,"title":"Development workflow","slug":"development-workflow"},{"level":3,"title":"Update TypeScript DTOs","slug":"update-typescript-dtos"},{"level":3,"title":"Integrated Bundling","slug":"integrated-bundling"},{"level":3,"title":"Pre-compiled minified production bundles","slug":"pre-compiled-minified-production-bundles"},{"level":3,"title":"Minified bundles with cache breakers","slug":"minified-bundles-with-cache-breakers"},{"level":3,"title":"Available in Razor Helpers","slug":"available-in-razor-helpers"},{"level":3,"title":"vue-lite Project Template features","slug":"vue-lite-project-template-features"},{"level":3,"title":"Validation Error Binding","slug":"validation-error-binding"},{"level":3,"title":"Vue Global State Management","slug":"vue-global-state-management"},{"level":3,"title":"react-lite Project Template features","slug":"react-lite-project-template-features"},{"level":3,"title":"React Global State Management","slug":"react-global-state-management"},{"level":3,"title":"\\"lite\\" Project Structure","slug":"lite-project-structure"},{"level":3,"title":"Updating \\"lite\\" project dependencies","slug":"updating-lite-project-dependencies"},{"level":3,"title":"Empty MemoryVirtualFiles now registered in VirtualFileSources","slug":"empty-memoryvirtualfiles-now-registered-in-virtualfilesources"},{"level":2,"title":"#Script!","slug":"script"},{"level":3,"title":"#Script (fka ServiceStack Templates)","slug":"script-fka-servicestack-templates"},{"level":3,"title":"Optimal for generating HTML and Live Scripting Environments","slug":"optimal-for-generating-html-and-live-scripting-environments"},{"level":3,"title":"Sharp Apps","slug":"sharp-apps"},{"level":3,"title":"Sharp APIs","slug":"sharp-apis"},{"level":3,"title":"Sharp Scripts","slug":"sharp-scripts"},{"level":3,"title":"Adhoc reports","slug":"adhoc-reports"},{"level":3,"title":"textDump","slug":"textdump"},{"level":3,"title":"AWS Dashboards","slug":"aws-dashboards"},{"level":3,"title":"Azure Dashboards","slug":"azure-dashboards"},{"level":2,"title":"Live #Script with web watch","slug":"live-script-with-web-watch"},{"level":3,"title":"Live Transformations","slug":"live-transformations"},{"level":3,"title":"Live Session","slug":"live-session"},{"level":3,"title":"Usage in .NET","slug":"usage-in-net"},{"level":3,"title":"Evaluating Scripts with return values","slug":"evaluating-scripts-with-return-values"},{"level":3,"title":"Optimized for .NET","slug":"optimized-for-net"},{"level":3,"title":"Auto Async I/O and Stream Transformations","slug":"auto-async-i-o-and-stream-transformations"},{"level":2,"title":"Breaking Changes","slug":"breaking-changes"},{"level":3,"title":"ServiceStack.Script rebrand","slug":"servicestack-script-rebrand"},{"level":3,"title":"Migration to new Script APIs","slug":"migration-to-new-script-apis"},{"level":3,"title":"Request Params are no longer imported by default","slug":"request-params-are-no-longer-imported-by-default"},{"level":3,"title":"No impact on page based routing","slug":"no-impact-on-page-based-routing"},{"level":3,"title":"Request Param Methods","slug":"request-param-methods"},{"level":2,"title":"World Validation","slug":"world-validation"},{"level":3,"title":"Benefits of Services","slug":"benefits-of-services"},{"level":3,"title":"API First Development Model","slug":"api-first-development-model"},{"level":3,"title":"Validation from all the things","slug":"validation-from-all-the-things"},{"level":3,"title":"About","slug":"about"},{"level":3,"title":"Server Rendered HTML UIs","slug":"server-rendered-html-uis"},{"level":3,"title":"Client HTML UIs","slug":"client-html-uis"},{"level":3,"title":"Server Implementation","slug":"server-implementation"},{"level":3,"title":"Shared Error Handling Concepts","slug":"shared-error-handling-concepts"},{"level":2,"title":"Login Page","slug":"login-page"},{"level":3,"title":"Server UIs","slug":"server-uis"},{"level":3,"title":"About Server Implementations","slug":"about-server-implementations"},{"level":3,"title":"Client UIs","slug":"client-uis"},{"level":3,"title":"About Client Implementations","slug":"about-client-implementations"},{"level":2,"title":"Contacts Page","slug":"contacts-page"},{"level":3,"title":"Server UIs","slug":"server-uis-1"},{"level":3,"title":"About Server Implementations","slug":"about-server-implementations-1"},{"level":3,"title":"Client UIs","slug":"client-uis-1"},{"level":3,"title":"About Client Implementations","slug":"about-client-implementations-1"},{"level":2,"title":"\\"No touch\\" Host Configuration","slug":"no-touch-host-configuration"},{"level":2,"title":"Auto Mapping","slug":"auto-mapping"},{"level":3,"title":"Register Converters","slug":"register-converters"},{"level":3,"title":"Ignore Mapping","slug":"ignore-mapping"},{"level":3,"title":"Support for Implicit / Explicit Type Casts","slug":"support-for-implicit-explicit-type-casts"},{"level":3,"title":"Powerful and Capable","slug":"powerful-and-capable"},{"level":2,"title":"Page Based Routing in Razor!","slug":"page-based-routing-in-razor"},{"level":3,"title":"Consider \\"pretty-urls\\" for public pages","slug":"consider-pretty-urls-for-public-pages"},{"level":2,"title":"web tool","slug":"web-tool"},{"level":3,"title":"Add/Update ServiceStack References","slug":"add-update-servicestack-references"},{"level":2,"title":"web new - .NET's missing project template system","slug":"web-new-net-s-missing-project-template-system"},{"level":3,"title":"GitHub powered Project Templates","slug":"github-powered-project-templates"},{"level":3,"title":"Always up to date","slug":"always-up-to-date"},{"level":3,"title":"Just regular Projects","slug":"just-regular-projects"},{"level":3,"title":"Available project templates","slug":"available-project-templates"},{"level":2,"title":"web + - customize mix/match projects from gists!","slug":"web-customize-mix-match-projects-from-gists"},{"level":3,"title":"Usage","slug":"usage"},{"level":3,"title":"Available Gists","slug":"available-gists"},{"level":3,"title":"Creating customized projects","slug":"creating-customized-projects"},{"level":3,"title":"Apply Gist Modifiers","slug":"apply-gist-modifiers"},{"level":3,"title":"Open for Gists!","slug":"open-for-gists"},{"level":3,"title":"Apply adhoc Gists","slug":"apply-adhoc-gists"},{"level":2,"title":"SourceLink Enabled Packages","slug":"sourcelink-enabled-packages"},{"level":3,"title":"All ServiceStack GitHub projects now use CI NuGet feed","slug":"all-servicestack-github-projects-now-use-ci-nuget-feed"},{"level":2,"title":"Authentication","slug":"authentication"},{"level":3,"title":"Community Auth Providers","slug":"community-auth-providers"},{"level":3,"title":"ASP.NET Core Identity Auth Provider","slug":"asp-net-core-identity-auth-provider"},{"level":3,"title":"Use existing Attributes","slug":"use-existing-attributes"},{"level":2,"title":"Using ServiceStack Auth in MVC","slug":"using-servicestack-auth-in-mvc"},{"level":3,"title":"Defaults to MVC Auth Redirect Conventions","slug":"defaults-to-mvc-auth-redirect-conventions"},{"level":2,"title":"Using ASP.NET Identity Auth in ServiceStack","slug":"using-asp-net-identity-auth-in-servicestack"},{"level":3,"title":"Mapping Customizations","slug":"mapping-customizations"},{"level":3,"title":"Custom Mappings","slug":"custom-mappings"},{"level":3,"title":"Built-in Identity DB APIs","slug":"built-in-identity-db-apis"},{"level":3,"title":"Propagating Extended User Info","slug":"propagating-extended-user-info"},{"level":2,"title":"Using IdentityServer4 Auth in ServiceStack","slug":"using-identityserver4-auth-in-servicestack"},{"level":3,"title":"IdentityServer","slug":"identityserver"},{"level":3,"title":"App","slug":"app"},{"level":3,"title":"API","slug":"api"},{"level":2,"title":"ServiceStack","slug":"servicestack"},{"level":3,"title":"AppSettings .NET Core Configuration conventions","slug":"appsettings-net-core-configuration-conventions"},{"level":3,"title":"Update servicestack:license configuration","slug":"update-servicestack-license-configuration"},{"level":3,"title":"New Auth Providers","slug":"new-auth-providers"},{"level":3,"title":"Microsoft Graph Auth Provider","slug":"microsoft-graph-auth-provider"},{"level":3,"title":"Microsoft Graph SavePhoto","slug":"microsoft-graph-savephoto"},{"level":3,"title":"New Claim APIs","slug":"new-claim-apis"},{"level":3,"title":"IServiceProvider Request Extensions","slug":"iserviceprovider-request-extensions"},{"level":3,"title":"Enable Same Site Cookies","slug":"enable-same-site-cookies"},{"level":3,"title":"Cookie Filters","slug":"cookie-filters"},{"level":3,"title":"Secure Cookies enabled by default","slug":"secure-cookies-enabled-by-default"},{"level":3,"title":"Override Authorization HTTP Header","slug":"override-authorization-http-header"},{"level":3,"title":"GET Authenticate Requests are disabled by default","slug":"get-authenticate-requests-are-disabled-by-default"},{"level":3,"title":"UserSession validation","slug":"usersession-validation"},{"level":3,"title":"Intercept Service Requests","slug":"intercept-service-requests"},{"level":3,"title":"Fluent Validation","slug":"fluent-validation"},{"level":3,"title":"Auto Batching","slug":"auto-batching"},{"level":3,"title":"Hot Reload","slug":"hot-reload"},{"level":3,"title":"Hot Reload Static Files","slug":"hot-reload-static-files"},{"level":3,"title":"Image Utils","slug":"image-utils"},{"level":3,"title":"Enum Utils","slug":"enum-utils"},{"level":2,"title":"Open API Feature","slug":"open-api-feature"},{"level":3,"title":"Customizable Security Definitions","slug":"customizable-security-definitions"},{"level":3,"title":"Customize SwaggerUI","slug":"customize-swaggerui"},{"level":3,"title":"Disable Auto HTML Pages","slug":"disable-auto-html-pages"},{"level":2,"title":"TypeScript","slug":"typescript"},{"level":3,"title":"Partial Constructors","slug":"partial-constructors"},{"level":3,"title":"DefaultImports","slug":"defaultimports"},{"level":2,"title":"Messaging","slug":"messaging"},{"level":3,"title":"Background MQ Stats","slug":"background-mq-stats"},{"level":3,"title":"Aws SQS Server","slug":"aws-sqs-server"},{"level":3,"title":"Intercepting Filters","slug":"intercepting-filters"},{"level":3,"title":"Polling Duration","slug":"polling-duration"},{"level":2,"title":"OrmLite","slug":"ormlite"},{"level":3,"title":"INSERT INTO SELECT","slug":"insert-into-select"},{"level":3,"title":"PostgreSQL Rich Data Types","slug":"postgresql-rich-data-types"},{"level":3,"title":"Hstore support","slug":"hstore-support"},{"level":3,"title":"JSON data types","slug":"json-data-types"},{"level":3,"title":"New KeyValuePair top-level APIs","slug":"new-keyvaluepair-k-v-top-level-apis"},{"level":3,"title":"SELECT Constant Expressions","slug":"select-constant-expressions"},{"level":3,"title":"SELECT DISTINCT in SelectMulti","slug":"select-distinct-in-selectmulti"},{"level":3,"title":"New TableAlias replaces JoinAlias","slug":"new-tablealias-replaces-joinalias"},{"level":3,"title":"GetTableNames and GetTableNamesWithRowCounts APIs","slug":"gettablenames-and-gettablenameswithrowcounts-apis"},{"level":3,"title":"Dapper updated","slug":"dapper-updated"},{"level":3,"title":"DB Scripts can open different connections","slug":"db-scripts-can-open-different-connections"},{"level":2,"title":"Redis","slug":"redis"},{"level":2,"title":"ServiceStack.Text","slug":"servicestack-text"},{"level":2,"title":"ServiceStack.Azure","slug":"servicestack-azure"}],"relativePath":"releases/v5.5.md","lastUpdated":1634495308442}`,ps={};function cs(c){return(l,i)=>(e(),o("div",null,[_,I,R,N,E,j,D,M,U,F,V,H,O,L,W,G,B,z,$,J,Q,K,Y,X,Z,nn,sn,an,tn,en,on,pn,cn,n("p",null,[t(p(A))]),ln,un,rn,kn,dn,hn,gn,mn,bn,vn,fn,yn,wn,Sn,An,Tn,qn,Cn,xn,Pn,_n,In,Rn,Nn,En,jn,Dn,Mn,Un,Fn,Vn,Hn,On,n("p",null,[t(p(P))]),Ln,Wn,Gn,Bn,zn,$n,Jn,n("div",null,[t(h)]),Qn,n("p",null,[t(g)]),Kn,n("p",null,[t(m)]),Yn,n("p",null,[t(b)]),Xn,n("p",null,[t(p(v))]),Zn,ns,ss,as,ts,es,os]))}const us=Object.assign(ps,{setup:cs});export{is as __pageData,us as default};
