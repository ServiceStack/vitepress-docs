import{_ as t,c as e,o,a,b as n,e as s}from"./app.14440598.js";const xn=`{"title":"v5.6 Release Notes","description":"","frontmatter":{"title":"v5.6 Release Notes","slug":"v5-6"},"headers":[{"level":2,"title":"ASP.NET Core App Composition","slug":"asp-net-core-app-composition"},{"level":3,"title":"ServiceStack's Plugins","slug":"servicestack-s-plugins"},{"level":2,"title":"Modular Startup","slug":"modular-startup"},{"level":3,"title":"Scan Multiple Assemblies","slug":"scan-multiple-assemblies"},{"level":3,"title":"Skip Assembly Scanning","slug":"skip-assembly-scanning"},{"level":3,"title":"Using AspNetCore's IStartup instead","slug":"using-aspnetcore-s-istartup-instead"},{"level":3,"title":"Ignore Startup Classes","slug":"ignore-startup-classes"},{"level":3,"title":"no-touch Startup Configuration Examples","slug":"no-touch-startup-configuration-examples"},{"level":2,"title":"Mix n' Match .NET Core Apps","slug":"mix-n-match-net-core-apps"},{"level":3,"title":"mix-enabled dotnet tools","slug":"mix-enabled-dotnet-tools"},{"level":3,"title":"mix Usage","slug":"mix-usage"},{"level":3,"title":"Mix in Features into ASP.NET Core Apps","slug":"mix-in-features-into-asp-net-core-apps"},{"level":3,"title":"Mix in DB Support","slug":"mix-in-db-support"},{"level":3,"title":"Composable Features","slug":"composable-features"},{"level":3,"title":"Undo mix","slug":"undo-mix"},{"level":3,"title":"Encapsulated Features","slug":"encapsulated-features"},{"level":3,"title":"Mix in Auth Repository","slug":"mix-in-auth-repository"},{"level":3,"title":"Mix in MQ Server","slug":"mix-in-mq-server"},{"level":3,"title":"Mix in Prebuilt Recipes and Working Examples","slug":"mix-in-prebuilt-recipes-and-working-examples"},{"level":3,"title":"example-validation","slug":"example-validation"},{"level":3,"title":"feature-mq","slug":"feature-mq"},{"level":3,"title":"feature-authrepo","slug":"feature-authrepo"},{"level":3,"title":"Modular Startup Prioritization","slug":"modular-startup-prioritization"},{"level":3,"title":"AppHost Startup classes","slug":"apphost-startup-classes"},{"level":3,"title":"Register ASP.NET Core dependencies in AppHost","slug":"register-asp-net-core-dependencies-in-apphost"},{"level":3,"title":"IPreInitPlugin Breaking Change","slug":"ipreinitplugin-breaking-change"},{"level":2,"title":"Unified Navigation","slug":"unified-navigation"},{"level":3,"title":"Load from Configuration","slug":"load-from-configuration"},{"level":3,"title":"Populate from Code","slug":"populate-from-code"},{"level":3,"title":"UI Feature Integration","slug":"ui-feature-integration"},{"level":3,"title":"Navigation Renderers","slug":"navigation-renderers"},{"level":3,"title":"#Script Pages","slug":"script-pages"},{"level":3,"title":"Razor Pages","slug":"razor-pages"},{"level":2,"title":"SPA Component Libraries","slug":"spa-component-libraries"},{"level":3,"title":"@servicestack/vue","slug":"servicestack-vue"},{"level":3,"title":"@servicestack/react","slug":"servicestack-react"},{"level":3,"title":"@servicestack/angular","slug":"servicestack-angular"},{"level":3,"title":"UI Component List","slug":"ui-component-list"},{"level":3,"title":"Bootstrap UI Form Controls","slug":"bootstrap-ui-form-controls"},{"level":3,"title":"Navigation Components","slug":"navigation-components"},{"level":3,"title":"Vue","slug":"vue"},{"level":3,"title":"React","slug":"react"},{"level":3,"title":"Angular","slug":"angular"},{"level":3,"title":"Mobile and Desktop Apps","slug":"mobile-and-desktop-apps"},{"level":2,"title":"SVG","slug":"svg"},{"level":3,"title":"In Memory Bundled CSS files","slug":"in-memory-bundled-css-files"},{"level":3,"title":"Viewing SVG Icons","slug":"viewing-svg-icons"},{"level":3,"title":"Loading SVG from FileSystem","slug":"loading-svg-from-filesystem"},{"level":3,"title":"Register Custom SVG Images via API","slug":"register-custom-svg-images-via-api"},{"level":2,"title":"Using SVG images in CSS","slug":"using-svg-images-in-css"},{"level":3,"title":"Inline CSS","slug":"inline-css"},{"level":2,"title":"Using SVG images in #Script","slug":"using-svg-images-in-script"},{"level":3,"title":"Using SVG images in Razor","slug":"using-svg-images-in-razor"},{"level":3,"title":"Server Controls","slug":"server-controls"},{"level":3,"title":"Mix in SVG Images","slug":"mix-in-svg-images"},{"level":2,"title":"Embedded Bootstrap CSS","slug":"embedded-bootstrap-css"},{"level":2,"title":"Refined Project Templates","slug":"refined-project-templates"},{"level":3,"title":"Auth Enabled Project Templates","slug":"auth-enabled-project-templates"},{"level":3,"title":"Optimal Library Bundles","slug":"optimal-library-bundles"},{"level":3,"title":"New Auth #Script methods","slug":"new-auth-script-methods"},{"level":3,"title":"Razor base methods","slug":"razor-base-methods"},{"level":2,"title":"#Script Features","slug":"script-features"},{"level":3,"title":"All Script Methods can be used as Extension Methods!","slug":"all-script-methods-can-be-used-as-extension-methods"},{"level":3,"title":"JavaScript Array Support","slug":"javascript-array-support"},{"level":3,"title":"VFS Script Methods Object API","slug":"vfs-script-methods-object-api"},{"level":3,"title":"Code Blocks","slug":"code-blocks"},{"level":3,"title":"Shell Scripts","slug":"shell-scripts"},{"level":3,"title":"Other #Script Features","slug":"other-script-features"},{"level":3,"title":"GitHubPlugin","slug":"githubplugin"},{"level":2,"title":"Gist VFS Provider","slug":"gist-vfs-provider"},{"level":3,"title":"New Virtual File System APIs","slug":"new-virtual-file-system-apis"},{"level":2,"title":"GitHubGateway","slug":"githubgateway"},{"level":2,"title":"Gist Desktop Apps","slug":"gist-desktop-apps"},{"level":3,"title":"Windows .NET Core Desktop Apps","slug":"windows-net-core-desktop-apps"},{"level":3,"title":"Instant Run without Installation","slug":"instant-run-without-installation"},{"level":3,"title":"Cross Platform","slug":"cross-platform"},{"level":3,"title":"Always Up-to-date","slug":"always-up-to-date"},{"level":3,"title":"Run Apps Offline","slug":"run-apps-offline"},{"level":3,"title":"Gist Sharp Apps","slug":"gist-sharp-apps"},{"level":3,"title":"Publishing Gist Apps","slug":"publishing-gist-apps"},{"level":3,"title":"GitHub Sharp Apps","slug":"github-sharp-apps"},{"level":3,"title":"GitHub Sharp App Commands","slug":"github-sharp-app-commands"},{"level":3,"title":"Run Apps from URLs","slug":"run-apps-from-urls"},{"level":3,"title":"Gist or GitHub App Server Deployments","slug":"gist-or-github-app-server-deployments"},{"level":3,"title":"Customized App Settings","slug":"customized-app-settings"},{"level":3,"title":"Hosted Gist Apps","slug":"hosted-gist-apps"},{"level":2,"title":"ServiceStack Updates","slug":"servicestack-updates"},{"level":3,"title":"Fluent Validation Upgraded","slug":"fluent-validation-upgraded"},{"level":3,"title":"Enums displayed in Metadata pages","slug":"enums-displayed-in-metadata-pages"},{"level":3,"title":"Auth Enhancements","slug":"auth-enhancements"},{"level":3,"title":"Auth Repository Features","slug":"auth-repository-features"},{"level":3,"title":"ServerEventsClient AllRequestFilters","slug":"servereventsclient-allrequestfilters"},{"level":3,"title":"Return Refresh Tokens in Token Cookies","slug":"return-refresh-tokens-in-token-cookies"},{"level":3,"title":"Service Clients Async WebProxy","slug":"service-clients-async-webproxy"},{"level":3,"title":"Extensible Client DTOs","slug":"extensible-client-dtos"},{"level":3,"title":"Native Types","slug":"native-types"},{"level":3,"title":"ServiceStack Dart","slug":"servicestack-dart"},{"level":3,"title":"RabbitMQ","slug":"rabbitmq"},{"level":3,"title":"Logging","slug":"logging"},{"level":3,"title":"AutoQuery","slug":"autoquery"},{"level":2,"title":"OrmLite","slug":"ormlite"},{"level":3,"title":"Enum Char Values","slug":"enum-char-values"},{"level":3,"title":"Multi Table Typed OrderBy Expressions","slug":"multi-table-typed-orderby-expressions"},{"level":3,"title":"Consistent String Param Lengths","slug":"consistent-string-param-lengths"},{"level":3,"title":"PopulatedObjectFilter","slug":"populatedobjectfilter"},{"level":3,"title":"Firebird 4 Support","slug":"firebird-4-support"},{"level":2,"title":"ServiceStack.Redis","slug":"servicestack-redis"},{"level":3,"title":"Send Binary Pub/Sub Messages","slug":"send-binary-pub-sub-messages"},{"level":3,"title":"Change SslProtocols","slug":"change-sslprotocols"},{"level":2,"title":"ServiceStack.Text","slug":"servicestack-text"},{"level":3,"title":"Intercept AutoMapping Conversions","slug":"intercept-automapping-conversions"}],"relativePath":"releases/v5.6.md","lastUpdated":1634495308446}`,p={},c=a(`<p>Many features in this release are focused on providing a more enjoyable, integrated and refined development experience for creating ServiceStack Apps. Starting with <a href="#modular-startup">Modular Startup</a> to enable a &quot;no-touch&quot;, layerable composition of <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps, the <a href="#mix-enabled-dotnet-tools"><code>mix</code> dotnet tools</a> for being able to add hand-picked features with a single command from its <a href="#mix-usage">extensible library </a> of composable features. <a href="#unified-navigation">Unified Navigation</a> allows features to provide even deeper integration into your Apps and its <a href="#navigation-renderers">native navigation renderers</a> makes it effortless to maintain your Apps dynamic navigation menus across ServiceStack&#39;s most popular App types.</p><p>High-level <a href="/server-ui-controls.html">UI Controls</a> available to <a href="#script-pages">Sharp and Razor Pages</a> Web Apps as well as rich client Component Libraries for <a href="#navigation-components">Vue, React and Angular Apps</a> provide an integrated experience for <a href="#bootstrap-ui-form-controls">User Input Validation</a> and App <a href="#navigation-components">Routing and Navigation</a>.</p><p>The new <a href="#svg">SVG support</a> takes care of maintaining libraries of SVG image-sets to produce optimal .css bundles and a variety of different ways to easily <a href="#viewing-svg-icons">make usage of SVG images</a> into your App without any reliance on external or build tooling.</p><p>The easiest way to take advantage of these features is to create a new <a href="https://docs.servicestack.net/web-new" target="_blank" rel="noopener noreferrer">ASP.NET Core Project Template</a> which have them pre-configured along with integrated Auth including auth-redirect flow of protected Service APIs and Pages.</p><p><code>#Script</code> has gained a <a href="#script-features">number of exciting features</a>, graduating it to where it&#39;s now our preferred way to create cross-platform shell scripts that&#39;s now an enjoyable productive experience with the <a href="#live-shell-scripting-preview">real-time feedback of watched scripts</a>. However its most exciting new capability is being able to <strong><a href="#gist-desktop-apps">Run Desktop Apps from Gists!</a></strong> Resolving many of the <a href="#windows-net-core-desktop-apps">disadvantages of Desktop Apps</a> along the way, which are <a href="#always-up-to-date">Always Up-to-date</a>, requires no install, can be <a href="#run-apps-from-urls">run from URL of a Gist</a>, GitHub Repo or Release Archive or when needed, <a href="#run-apps-offline">offline</a>, using the last run version. The same Sharp App can also be <a href="#cross-platform">run cross-platform</a> on Windows, macOS and Linux and hosted on a Server that can be <a href="#deploy-updates">deployed and updated</a> in the <a href="#gist-or-github-app-server-deployments">easiest process imaginable</a> thanks to its built-in support for <a href="#publishing-gist-apps">publishing</a> and <a href="#instant-run-without-installation">installation</a>.</p><p>We hope you love these new features and can&#39;t wait to see what new creations you build using them \u{1F603}</p><h1 id="table-of-contents" tabindex="-1">Table of Contents <a class="header-anchor" href="#table-of-contents" aria-hidden="true">#</a></h1><ul><li><a href="#aspnet-core-app-composition">ASP.NET Core App Composition</a></li><li><a href="#modular-startup">Modular Startup</a><ul><li><a href="#scan-multiple-assemblies">Scan Multiple Assemblies</a></li><li><a href="#skip-assembly-scanning">Skip Assembly Scanning</a></li><li><a href="#using-aspnetcores-istartup-instead">Using AspNetCore&#39;s IStartup instead</a></li><li><a href="#ignore-startup-classes">Ignore Startup Classes</a></li><li><a href="#no-touch-startup-configuration-examples">no-touch Startup Configuration Examples</a></li></ul></li><li><a href="#mix-n-match-net-core-apps">Mix n&#39; Match .NET Core Apps</a><ul><li><a href="#mix-enabled-dotnet-tools">mix-enabled dotnet tools</a></li><li><a href="#mix-usage">mix Usage</a></li><li><a href="#mix-in-features-into-aspnet-core-apps">Mix in Features into ASP.NET Core Apps</a></li><li><a href="#mix-in-db-support">Mix in DB Support</a></li><li><a href="#composable-features">Composable Features</a></li><li><a href="#undo-mix">Undo mix</a></li><li><a href="#encapsulated-features">Encapsulated Features</a></li><li><a href="#mix-in-auth-repository">Mix in Auth Repository</a></li><li><a href="#mix-in-mq-server">Mix in MQ Server</a></li><li><a href="#mix-in-prebuilt-recipes-and-working-examples">Mix in Prebuilt Recipes and Working Examples</a><ul><li><a href="#example-validation">example-validation</a></li><li><a href="#feature-mq">feature-mq</a></li><li><a href="#feature-authrepo">feature-authrepo</a></li></ul></li><li><a href="#modular-startup-prioritization">Modular Startup prioritization</a></li><li><a href="#apphost-startup-classes">AppHost Startup classes</a></li><li><a href="./.html">Register ASP.NET Core dependencies in AppHost</a><ul><li><a href="#ipreinitplugin-breaking-change">IPreInitPlugin Breaking Change</a></li></ul></li></ul></li><li><a href="#unified-navigation">Unified Navigation</a><ul><li><a href="#load-from-configuration">Load from Configuration</a></li><li><a href="#ui-feature-integration">UI Feature Integration</a></li><li><a href="#navigation-renderers">Navigation Renderers</a><ul><li><a href="#script-pages">#Script Pages</a></li><li><a href="#razor-pages">Razor Pages</a></li></ul></li></ul></li><li><a href="#spa-component-libraries">SPA Component Libraries</a><ul><li><a href="#servicestackvue">@servicestack/vue</a></li><li><a href="#servicestackreact">@servicestack/react</a></li><li><a href="#servicestackangular">@servicestack/angular</a></li><li><a href="#ui-component-list">UI Component List</a></li><li><a href="#bootstrap-ui-form-controls">Bootstrap UI Form Controls</a></li><li><a href="#navigation-components">Navigation Components</a><ul><li><a href="#vue">Vue</a></li><li><a href="#react">React</a></li><li><a href="#angular">Angular</a></li><li><a href="#mobile-and-desktop-apps">Mobile and Desktop Apps</a></li></ul></li></ul></li><li><a href="#svg">SVG</a><ul><li><a href="#in-memory-bundled-css-files">In Memory Bundled CSS files</a></li><li><a href="#viewing-svg-icons">Viewing SVG Icons</a></li><li><a href="#loading-svg-from-filesystem">Loading SVG from FileSystem</a></li><li><a href="#register-custom-svg-images-via-api">Register Custom SVG Images via API</a></li><li><a href="#using-svg-images-in-css">Using SVG images in CSS</a></li><li><a href="#using-svg-images-in-script">Using SVG images in #Script</a></li><li><a href="#using-svg-images-in-razor">Using SVG images in Razor</a></li><li><a href="#server-controls">Server Controls</a></li><li><a href="#mix-in-svg-images">Mix in SVG Images</a></li></ul></li><li><a href="#embedded-bootstrap-css">Embedded Bootstrap CSS</a></li><li><a href="#refined-project-templates">Refined Project Templates</a><ul><li><a href="#auth-enabled-project-templates">Auth Enabled Project Templates</a></li><li><a href="#optimal-library-bundles">Optimal Library Bundles</a></li><li><a href="#new-auth-script-methods">New Auth #Script methods</a></li><li><a href="#razor-base-methods">Razor base methods</a></li></ul></li><li><a href="#script-features">#Script Features</a><ul><li><a href="#all-script-methods-can-be-used-as-extension-methods">All Script Methods can be used as Extension Methods!</a></li><li><a href="#javascript-array-support">JavaScript Array Support</a></li><li><a href="#vfs-script-methods-object-api">VFS Script Methods Object API</a></li><li><a href="#code-blocks">Code Blocks</a><ul><li><a href="#preprocessor-code-transformations">Preprocessor Code Transformations</a></li></ul></li><li><a href="#shell-scripts">Shell Scripts</a><ul><li><a href="#live-shell-scripting-preview">Live Shell Scripting Preview</a></li><li><a href="#explore-http-apis-in-real-time">Explore HTTP APIs in real-time</a></li><li><a href="#live-querying-of-databases">Live Querying of Databases</a></li><li><a href="#utilize-high-level-servicestack-features">Utilize high-level ServiceStack Features</a></li></ul></li><li><a href="#other-script-features">Other #Script Features</a><ul><li><a href="#iferrorreturn">ifErrorReturn</a></li><li><a href="#to">to</a></li></ul></li><li><a href="#githubplugin">GitHubPlugin</a></li></ul></li><li><a href="#gist-vfs-provider">Gist VFS Provider</a><ul><li><a href="#new-virtual-file-system-apis">New Virtual File System APIs</a></li></ul></li><li><a href="#githubgateway">GitHubGateway</a></li><li><a href="#gist-desktop-apps">Gist Desktop Apps</a><ul><li><a href="#windows-net-core-desktop-apps">Windows .NET Core Desktop Apps</a></li><li><a href="#instant-run-without-installation">Instant Run without Installation</a></li><li><a href="#cross-platform">Cross Platform</a></li><li><a href="#always-up-to-date">Always Up-to-date</a></li><li><a href="#run-apps-offline">Run Apps Offline</a></li><li><a href="#gist-sharp-apps">Gist Sharp Apps</a><ul><li><a href="#spirals">spirals</a></li><li><a href="#blog">blog</a></li><li><a href="#rockwind">rockwind</a></li><li><a href="#plugins">plugins</a></li></ul></li><li><a href="#publishing-gist-apps">Publishing Gist Apps</a></li><li><a href="#github-sharp-apps">GitHub Sharp Apps</a></li><li><a href="#github-sharp-app-commands">GitHub Sharp App Commands</a></li><li><a href="#run-apps-from-urls">Run Apps from URLs</a></li><li><a href="#gist-or-github-app-server-deployments">Gist or GitHub App Server Deployments</a><ul><li><a href="#configure-nginx">Configure Nginx</a></li><li><a href="#configure-supervisor">Configure Supervisor</a></li><li><a href="#deploy-updates">Deploy Updates</a></li></ul></li><li><a href="#customized-app-settings">Customized App Settings</a></li><li><a href="#hosted-gist-apps">Hosted Gist Apps</a></li></ul></li><li><a href="#servicestack-updates">ServiceStack Updates</a><ul><li><a href="#fluent-validation-upgraded">Fluent Validation Upgraded</a></li><li><a href="#enums-displayed-in-metadata-pages">Enums displayed in Metadata pages</a></li><li><a href="#auth-enhancements">Auth Enhancements</a></li><li><a href="#auth-repository-features">Auth Repository Features</a><ul><li><a href="#ravendb-breaking-change">RavenDB Breaking Change</a></li></ul></li><li><a href="#servereventsclient-allrequestfilters">ServerEventsClient AllRequestFilters</a></li><li><a href="#return-refresh-tokens-in-token-cookies">Return Refresh Tokens in Token Cookies</a></li><li><a href="#service-clients-async-webproxy">Service Clients Async WebProxy</a></li><li><a href="#extensible-client-dtos">Extensible Client DTOs</a></li><li><a href="#native-types">Native Types</a></li><li><a href="#rabbitmq">RabbitMQ</a></li><li><a href="#logging">Logging</a></li><li><a href="#autoquery">AutoQuery</a></li></ul></li><li><a href="#ormlite">OrmLite</a><ul><li><a href="#enum-char-values">Enum Char Values</a></li><li><a href="#multi-table-typed-orderby-expressions">Multi Table Typed OrderBy Expressions</a></li><li><a href="#consistent-string-param-lengths">Consistent String Param Lengths</a></li><li><a href="#populatedobjectfilter">PopulatedObjectFilter</a></li><li><a href="#firebird-4-support">Firebird 4 Support</a></li></ul></li><li><a href="#servicestackredis">ServiceStack.Redis</a><ul><li><a href="#send-binary-pubsub-messages">Send Binary Pub/Sub Messages</a></li><li><a href="#change-sslprotocols">Change SslProtocols</a></li></ul></li><li><a href="#servicestacktext">ServiceStack.Text</a><ul><li><a href="#intercept-automapping-conversions">Intercept AutoMapping Conversions</a></li></ul></li></ul><h2 id="asp-net-core-app-composition" tabindex="-1"><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core App Composition <a class="header-anchor" href="#asp-net-core-app-composition" aria-hidden="true">#</a></h2><p>An area of <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core that&#39;s less than ideal is app composability which involves using opaque RPC <a href="https://en.wikipedia.org/wiki/Mystery_meat_navigation" target="_blank" rel="noopener noreferrer">&quot;mystery meat&quot;</a> extension methods to enable features by slotting them in different sections of your Startup class.</p><p>There&#39;s a lack of consistency with how each feature is enabled, some require both Services and App registration, some use a configuration lambda to configure the feature, other use a builder pattern, some require multiple app registrations, and in some cases like MVC Tag Helpers, also need configuration in external files.</p><p>App construction via opaque RPC mutations makes it hard to introspect and discover what features are enabled, how they were configured, how different features can interact with each other, to be able to attach additional custom logic and registration or to replace or disable any pre-existing conflicting features.</p><p>They also require more moving parts to build a feature which typically requires separate classes for exposing an Extension method, configuration object and any classes for its implementation, and another set of classes again if the feature requires registering any dependencies in the IOC.</p><h3 id="servicestack-s-plugins" tabindex="-1">ServiceStack&#39;s Plugins <a class="header-anchor" href="#servicestack-s-plugins" aria-hidden="true">#</a></h3><p>By contrast you could implement the same feature in a single cohesive Plugin class like <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/CorsFeature.cs" target="_blank" rel="noopener noreferrer">CorsFeature</a>, encapsulating both configuration and implementation and exposes an ideal natural declarative typed API that takes advantage of C#&#39;s class and property initialization syntax sugar for simplified typed configuration. They also naturally benefit from all the introspection, discoverability and modularity of being maintained within a generic List collection that&#39;s accessible from everywhere.</p><p>Most ServiceStack features are encapsulated within <a href="/plugins.html">Plugins</a> which are all registered the same way - by adding a declarative class instance to the <code>Plugins</code> collection. Plugins encapsulate the entire feature, taking care of all IOC registrations and how to configure itself with ServiceStack.</p><p>So if you wanted to enable <a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">#Script Pages</a> (alternative to MVC) and give all pages access to OrmLite&#39;s DB functionality - it can all be configured with a single declarative expression:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SharpPagesFeature</span> <span class="token punctuation">{</span>
    ScriptMethods <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DbScriptsAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Other features independent of your AppHost are able to easily extend other plugins before they&#39;re registered, e.g. the new AuthRepo UI Feature ensures #Script Pages is registered and extends it with its own functionality with:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AssertPlugin</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SharpPagesFeature<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ScriptMethods<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserAuthScripts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Modular plugins makes it easy to <a href="/plugins.html#disabling-plugins-via-feature-enum-flags">toggle on/off features with feature flags</a>:</p><div class="language-csharp"><pre><code><span class="token function">SetConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HostConfig</span> <span class="token punctuation">{</span> 
    EnableFeatures <span class="token operator">=</span> Feature<span class="token punctuation">.</span>All<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>Feature<span class="token punctuation">.</span>Csv <span class="token operator">|</span> Feature<span class="token punctuation">.</span>Html<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Or just by removing them from the <code>Plugins</code> collection:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">RemoveAll</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x <span class="token keyword">is</span> <span class="token class-name">CsvFormat</span> <span class="token operator">||</span> x <span class="token keyword">is</span> <span class="token class-name">HtmlFormat</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Other functionality that&#39;s not possible with <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core&#39;s app mutation model is a implementing a dynamic plugin system as done in <a href="https://sharpscript.net/docs/sharp-apps#plugins" target="_blank" rel="noopener noreferrer">Sharp Apps Plugins</a> where it&#39;s possible to both register and configure plugins without compilation, dynamically, using a simple <code>app.settings</code> text file, e.g:</p><div class="language-"><pre><code>features CustomPlugin, OpenApiFeature, PostmanFeature, CorsFeature, ValidationFeature
CustomPlugin { ShowProcessLinks: true }
ValidationFeature { ScanAppHostAssemblies: true }
</code></pre></div><p>Where it specifies which Plugins the App should register and the order they should be registered with, where any additional configuration can be configured using a JS Object Literal, together the above configuration is equivalent to:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomPlugin</span> <span class="token punctuation">{</span> ShowProcessLinks <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PostmanFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CorsFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationFeature</span> <span class="token punctuation">{</span> ScanAppHostAssemblies <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <strong>features</strong> app.setting also supports adding <code>plugins/*</code> to the end of the features list which <a href="https://sharpscript.net/docs/sharp-apps#netcore-extensibility" target="_blank" rel="noopener noreferrer">enables no-touch extensibility</a> where Apps can automatically register all <code>IPlugin</code> it can find in any <code>.dll</code> dropped into the App&#39;s <code>/plugin</code> folder.</p><p>The consequence of <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a>&#39;s app mutation configuration model is that adding features are less intuitive, less discoverable and require more documentation and knowledge then they otherwise should. Having all features slotted into different parts of the same Startup class also makes copying and maintaining individual features across a suite of .NET Core Apps unnecessarily cumbersome.</p><h2 id="modular-startup" tabindex="-1">Modular Startup <a class="header-anchor" href="#modular-startup" aria-hidden="true">#</a></h2><p>We want to dramatically simplify and improve the experience for configuring <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps and make them truly composable, where we can drop-in files that auto configures itself with both <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core and ServiceStack&#39;s AppHost so they can encapsulate an entire feature and provide instant utility without needing to wade through different steps of how they should be manually configured at different places in your Startup configuration class.</p><p>This functionality is enabled via the <code>ModularStartup</code> base class which can be leveraged in any <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core App (i.e. not just ServiceStack Apps) by modifying the standard <code>Startup</code> class with injected <code>IConfiguration</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Startup</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">IConfiguration</span> Configuration <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IHostingEnvironment</span> env<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>and change it to inherit from <code>ModularStartup</code> instead:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Startup</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ModularStartup</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">new</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IHostingEnvironment</span> env<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>The <code>new</code> modifier isn&#39;t strictly necessary but does resolve a compiler warning</p></blockquote><p>This change now makes it possible to maintain configuration in independent &quot;no-touch&quot; cohesive configuration files by implementing any of the below interfaces to register dependencies in <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core&#39;s IOC or App handlers:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IConfigureServices</span> 
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IConfigureApp</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="scan-multiple-assemblies" tabindex="-1">Scan Multiple Assemblies <a class="header-anchor" href="#scan-multiple-assemblies" aria-hidden="true">#</a></h3><p>By default the <code>ModularStartup</code> class only scans for types in the Host project (i.e. containing the Startup class), the base constructor can also specify a list of assemblies it should scan to find and register other &quot;no-touch&quot; configuration files, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Startup</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ModularStartup</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span> 
      <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Startup</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Assembly<span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">AltAssemblyType</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Assembly<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="skip-assembly-scanning" tabindex="-1">Skip Assembly Scanning <a class="header-anchor" href="#skip-assembly-scanning" aria-hidden="true">#</a></h3><p>Assembly scanning can also be avoided entirely by specifying the list of Types implementing Startup interfaces you want registered, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Startup</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ModularStartup</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span> 
      <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ConfigureRedis</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ConfigureDb</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>Although in this case it ceases to be &quot;no-touch&quot; as it would require manual registration of each Startup class</p></blockquote><h3 id="using-aspnetcore-s-istartup-instead" tabindex="-1">Using AspNetCore&#39;s IStartup instead <a class="header-anchor" href="#using-aspnetcore-s-istartup-instead" aria-hidden="true">#</a></h3><p>If preferred your features configuration classes can avoid any dependency to ServiceStack by having them implement <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core&#39;s <strong>Microsoft.AspNetCore.Hosting</strong> <code>IStartup</code> class instead:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IStartup</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Note: return value is ignored</span>
    <span class="token return-type class-name">IServiceProvider</span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which <code>ModularStartup</code> also auto-registers.</p><h3 id="ignore-startup-classes" tabindex="-1">Ignore Startup Classes <a class="header-anchor" href="#ignore-startup-classes" aria-hidden="true">#</a></h3><p>The <code>IgnoreTypes</code> collection or <code>LoadType</code> predicate can be used to specify which Startup classes that <code>ModularStartup</code> should ignore, so you could skip configuring Redis in your App with:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Startup</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ModularStartup</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        IgnoreTypes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ConfigureRedis</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="no-touch-startup-configuration-examples" tabindex="-1">no-touch Startup Configuration Examples <a class="header-anchor" href="#no-touch-startup-configuration-examples" aria-hidden="true">#</a></h3><p>The benefit of <code>ModularStartup</code> is that we can now start composing App features like lego building blocks, so we could configure Redis with our <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core App by dropping in a <code>Configure.Redis.cs</code> like:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureRedis</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureServices</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRedisClientsManager<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisManagerPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which will be auto-registered by <code>ModularStartup</code> and add the <code>IRedisClientsManager</code> dependency to .NET Core&#39;s IOC where it&#39;s available to all of <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core (including ServiceStack).</p><p>If a feature requires access to <code>IConfiguration</code> it can either use constructor injection or property injection by implementing <code>IRequireConfiguration</code>, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureRedis</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureServices</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">IConfiguration</span> Configuration <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">ConfigureRedis</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRedisClientsManager<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisManagerPool</span><span class="token punctuation">(</span>Configuration<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span><span class="token string">&quot;redis&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can then start adding other features depending on Redis independently without disrupting and mutating existing configuration source files, so we can register to use a Redis Auth Repository by dropping in a <code>Configure.AuthRepository.cs</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureAuthRepository</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureServices</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
        c <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisAuthRepository</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRedisClientsManager<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Or utilize Redis MQ by dropping in a <code>Configure.Mq.cs</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureMq</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureServices</span><span class="token punctuation">,</span> <span class="token class-name">IAfterInitAppHost</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IMessageService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
        c <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisMqServer</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRedisClientsManager<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AfterInit</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IMessageService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which other isolated features can further extend by registering which of its ServiceStack Services they want to make available via MQ:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFeature</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureAppHost</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IMessageService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">RegisterHandler</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyRequest<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>appHost<span class="token punctuation">.</span>ExecuteMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Here we can see how we can easily compose our App&#39;s functionality like lego by dropping in cohesive features that can replace features in isolation without disrupting other parts of the App. For example we could use a different Auth Repository by overwriting <code>Configure.AuthRepository.cs</code> and replace <code>Configure.Mq.cs</code> to use a different MQ Server all without disrupting any of the App&#39;s other features, including feature extensions like <code>MyFeature</code> which registers its Service the overwritten MQ Server - unaware that it had been replaced.</p><p>We can then easily replicate the same consistent technology choices you want to standardize on across all Apps, by copying feature in piecemeal units at the file-level, without fear of breaking existing Apps as any no other App-specific configuration is disrupted - a process which could now be automated with shell scripts.</p><p>Ultimately the driving force behind enabling modular App composition is to reduce the knowledge and effort required to add, remove and replace features. So instead of having to wade through a set of documentation around learning how to add and configure each feature we can reduce the steps down to just choosing the features we want and have them include the minimum configuration needed to register it with our App.</p><h2 id="mix-n-match-net-core-apps" tabindex="-1">Mix n&#39; Match .NET Core Apps <a class="header-anchor" href="#mix-n-match-net-core-apps" aria-hidden="true">#</a></h2><p>To complete the picture of making it easy as possible to compose <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps we&#39;ve created the <code>mix</code> dotnet tool to easily install features which can be installed with:</p><pre><code>$ dotnet tool install --global mix
</code></pre><p>The same functionality is also built into the cross-platform <a href="/dotnet-tool.html">x</a> and Windows <a href="/netcore-windows-desktop.html"><code>app</code></a> dotnet tools which can be updated to the latest version with:</p><pre><code>$ dotnet tool update -g web
$ dotnet tool update -g app
</code></pre><h3 id="mix-enabled-dotnet-tools" tabindex="-1">mix-enabled dotnet tools <a class="header-anchor" href="#mix-enabled-dotnet-tools" aria-hidden="true">#</a></h3><p><code>mix</code> works exactly the same in all dotnet tools, which just needs the tool name prefixed before the <code>mix</code> command:</p><pre><code>$ mix ...
$ web mix ...
$ app mix ...
</code></pre><h3 id="mix-usage" tabindex="-1">mix Usage <a class="header-anchor" href="#mix-usage" aria-hidden="true">#</a></h3><p>The <code>mix</code> tool is designed around applying <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core features captured in GitHub gists to your local .NET Core projects.</p><p>Type <code>mix ?</code> for a quick Usage Summary:</p><div class="language-"><pre><code>View all published gists:
   mix

Simple Usage:
   mix &lt;name&gt; &lt;name&gt; ...

Mix using numbered list index instead:
   mix 1 3 5 ...

Delete previously mixed gists:
   mix -delete &lt;name&gt; &lt;name&gt; ...

Use custom project name instead of current folder name (replaces MyApp):
   mix -name ProjectName &lt;name&gt; &lt;name&gt; ...

Replace additional tokens before mixing:
   mix -replace term=with &lt;name&gt; &lt;name&gt; ...

Multi replace with escaped string example:
   mix -replace term=with -replace &quot;This Phrase&quot;=&quot;With This&quot; &lt;name&gt; &lt;name&gt; ...

Only display available gists with a specific tag:
  mix [tag]
  mix [tag1,tag2]
</code></pre></div><p>Although most of the time you&#39;re only going to run 2 commands, viewing available features with:</p><pre><code>$ mix
</code></pre><p>Where it displays different features that can be added to your App, where they&#39;re added to and the author of the Gist:</p><div class="language-"><pre><code> 1. init                 Empty .NET Core 2.2 ServiceStack App         to: .      by @ServiceStack  [project]
 2. init-lts             Empty .NET Core 2.1 LTS ServiceStack App     to: .      by @ServiceStack  [project]
 3. init-corefx          Empty ASP.NET Core 2.1 LTS on .NET Framework to: .      by @ServiceStack  [project]
 4. init-sharp-app       Empty ServiceStack Sharp App                 to: .      by @ServiceStack  [project]
 5. bootstrap-sharp      Bootstrap + #Script Pages Starter Template   to: $HOST  by @ServiceStack  [ui,sharp]
 6. redis                Use ServiceStack.Redis                       to: $HOST  by @ServiceStack  [db]
 7. sqlserver            Use OrmLite with SQL Server                  to: $HOST  by @ServiceStack  [db]
 8. sqlite               Use OrmLite with SQLite                      to: $HOST  by @ServiceStack  [db]
 9. postgres             Use OrmLite with PostgreSQL                  to: $HOST  by @ServiceStack  [db]
10. mysql                Use OrmLite with MySql                       to: $HOST  by @ServiceStack  [db]
11. oracle               Use OrmLite with Oracle                      to: $HOST  by @ServiceStack  [db]
12. firebird             Use OrmLite with Firebird                    to: $HOST  by @ServiceStack  [db]
13. dynamodb             Use AWS DynamoDB and PocoDynamo              to: $HOST  by @ServiceStack  [db]
14. mongodb              Use MongoDB                                  to: $HOST  by @ServiceStack  [db]
15. ravendb              Use RavenDB                                  to: $HOST  by @ServiceStack  [db]
16. marten               Use Marten NoSQL with PostgreSQL             to: $HOST  by @ServiceStack  [db]
17. auth                 Configure AuthFeature                        to: $HOST  by @ServiceStack  [auth]
18. auth-db              Use OrmLite Auth Repository (requires auth)  to: $HOST  by @ServiceStack  [auth]
19. auth-redis           Use Redis Auth Repository (requires auth)    to: $HOST  by @ServiceStack  [auth]
20. auth-memory          Use Memory Auth Repository (requires auth)   to: $HOST  by @ServiceStack  [auth]
21. auth-dynamodb        Use DynamoDB Auth Repository (requires auth) to: $HOST  by @ServiceStack  [auth]
22. auth-mongodb         Use MongoDB Auth Repository (requires auth)  to: $HOST  by @ServiceStack  [auth]
23. auth-ravendb         Use RavenDB Auth Repository (requires auth)  to: $HOST  by @ServiceStack  [auth]
24. auth-marten          Use Marten Auth Repository (requires auth)   to: $HOST  by @ServiceStack  [auth]
25. backgroundmq         Use Memory Background MQ                     to: $HOST  by @ServiceStack  [mq]
26. rabbitmq             Use RabbitMQ                                 to: $HOST  by @ServiceStack  [mq]
27. sqs                  Use AWS SQS MQ                               to: $HOST  by @ServiceStack  [mq]
28. servicebus           Use Azure Service Bus MQ                     to: $HOST  by @ServiceStack  [mq]
29. redismq              Use Redis MQ                                 to: $HOST  by @ServiceStack  [mq]
30. vue-lite-lib         Update vue-lite projects libraries           to: $HOST  by @ServiceStack  [lib,vue]
31. react-lite-lib       Update react-lite projects libraries         to: $HOST  by @ServiceStack  [lib,react]
32. validation-contacts  Contacts Validation Example                  to: $HOST  by @ServiceStack  [example]
33. feature-mq           Simple MQ Feature to test sending Messages   to: $HOST  by @ServiceStack  [feature,mq]
34. feature-authrepo     List and Search Users registered in AuthRepo to: $HOST  by @ServiceStack  [feature]
37. docker               Dockerfile example for .NET Core Sharp Apps  to: .      by @ServiceStack  [config]
38. svg-action           Material Design Action Icons                 to: svg/   by @ServiceStack  [svg]
39. svg-alert            Material Design Alert Icons                  to: svg/   by @ServiceStack  [svg]
40. svg-av               Material Design Audio Visual Icons           to: svg/   by @ServiceStack  [svg]
41. svg-communication    Material Design Communication Icons          to: svg/   by @ServiceStack  [svg]
42. svg-content          Material Design Content Icons                to: svg/   by @ServiceStack  [svg]
43. svg-device           Material Design Device Icons                 to: svg/   by @ServiceStack  [svg]
44. svg-editor           Material Design Editor Icons                 to: svg/   by @ServiceStack  [svg]
45. svg-file             Material Design File Icons                   to: svg/   by @ServiceStack  [svg]
46. svg-hardware         Material Design Hardware Icons               to: svg/   by @ServiceStack  [svg]
47. svg-image            Material Design Image Icons                  to: svg/   by @ServiceStack  [svg]
48. svg-maps             Material Design Maps Icons                   to: svg/   by @ServiceStack  [svg]
49. svg-navigation       Material Design Navigation Icons             to: svg/   by @ServiceStack  [svg]
50. svg-places           Material Design Places Icons                 to: svg/   by @ServiceStack  [svg]
51. svg-social           Material Design Social Icons                 to: svg/   by @ServiceStack  [svg]
52. svg-toggle           Material Design Toggle Icons                 to: svg/   by @ServiceStack  [svg]


   Usage:  mix &lt;name&gt; &lt;name&gt; ...

  Search:  mix [tag] Available tags: auth, config, db, feature, lib, mq, project, react, sharp, svg, ui, vue

Advanced:  mix ?
</code></pre></div><p>Then choosing which features you want to add to your project with <code>mix &lt;name&gt;</code>, e.g:</p><pre><code>$ mix redis
</code></pre><p>The entire list of available features is maintained in the self-documenting human and machine readable <a href="https://gist.github.com/gistlyn/9b32b03f207a191099137429051ebde8" target="_blank" rel="noopener noreferrer">mix.md</a> feature index.</p><blockquote><p>To publish your feature here and make it available to all <code>mix</code> users, please <a href="https://gist.github.com/gistlyn/9b32b03f207a191099137429051ebde8#comments" target="_blank" rel="noopener noreferrer">link to it in the comments</a>.</p></blockquote><h3 id="mix-in-features-into-asp-net-core-apps" tabindex="-1">Mix in Features into <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps <a class="header-anchor" href="#mix-in-features-into-asp-net-core-apps" aria-hidden="true">#</a></h3><p>It should be noted that <code>ModularStartup</code> and <code>mix</code> dotnet tool aren&#39;t limited to ServiceStack Apps, they&#39;re a generic solution that can easily add features to any .NET Core App. E.g. some of ServiceStack features relies on external dependencies which utilizes the same dependency registration used in all <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps, e.g running:</p><pre><code>$ mix mongodb
</code></pre><p>Applies the <code>mongodb</code> feature to your HOST project as instructed by the <code>to: $HOST</code> modifier above that it finds by using the first folder containing either <code>appsettings.json</code>, <code>Program.cs</code> or <code>Startup.cs</code> and writing the following <a href="https://gist.github.com/gistlyn/f777396583262127a66e2369ae475d3f" target="_blank" rel="noopener noreferrer">mongodb Gist file</a>:</p><div class="language-csharp"><pre><code><span class="token keyword">namespace</span> <span class="token namespace">MyApp</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureMongoDb</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureServices</span></span>
    <span class="token punctuation">{</span>
        <span class="token return-type class-name">IConfiguration</span> Configuration <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token function">ConfigureMongoDb</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> mongoClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MongoClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">IMongoDatabase</span> mongoDatabase <span class="token operator">=</span> mongoClient<span class="token punctuation">.</span><span class="token function">GetDatabase</span><span class="token punctuation">(</span><span class="token string">&quot;MyApp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            container<span class="token punctuation">.</span><span class="token function">AddSingleton</span><span class="token punctuation">(</span>mongoDatabase<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>    
<span class="token punctuation">}</span>
</code></pre></div><p>With all <code>MyApp</code> tokens replaced with the <strong>Project Name</strong> using the same replacement rules as new projects, i.e:</p><ul><li><code>MyApp</code> will be replaced with <code>ProjectName</code></li><li><code>my-app</code> will be replaced with <code>project-name</code></li><li><code>My App</code> will be replaced with <code>Project Name</code></li></ul><p>By default it assumes the folder name is the project name, that&#39;s overridable using the <code>-name</code> flag:</p><pre><code>$ mix -name ProjectName mongodb
</code></pre><p>This feature also installs the <strong>MongoDB.Driver</strong> NuGet package as instructed by the <code>_init</code> command in the <a href="https://gist.github.com/gistlyn/f777396583262127a66e2369ae475d3f" target="_blank" rel="noopener noreferrer">mongodb feature</a>.</p><p>So after just a single <code>mix</code> command and App restart, it&#39;s now configured and running with MongoDB!</p><h4 id="registering-mongodb-auth-repository" tabindex="-1">Registering MongoDB Auth Repository <a class="header-anchor" href="#registering-mongodb-auth-repository" aria-hidden="true">#</a></h4><p>As a design goal <code>mix</code> features are designed to be layerable where you can existing features that builds upon existing registrations, for example you can later configure your App to <strong>enable auth</strong> and configure it to use a <code>MongoDbAuthRepository</code> with:</p><pre><code>$ mix auth auth-mongodb
</code></pre><blockquote><p>This release also includes .NET Core Support for <code>MongoDbAuthRepository</code> and has been upgraded to use the latest <strong>MongoDB.Driver v2.8.1</strong></p></blockquote><h3 id="mix-in-db-support" tabindex="-1">Mix in DB Support <a class="header-anchor" href="#mix-in-db-support" aria-hidden="true">#</a></h3><p>All DB servers are just as easily configurable, which we can quickly find using a <code>[db]</code> tag search:</p><pre><code>$ mix [db]
</code></pre><p>Which will list all available <code>[db]</code> providers:</p><div class="language-"><pre><code>Results matching tag [db]:

   1. redis      Use ServiceStack.Redis            to: $HOST  by @ServiceStack  [db]
   2. sqlserver  Use OrmLite with SQL Server       to: $HOST  by @ServiceStack  [db]
   3. sqlite     Use OrmLite with SQLite           to: $HOST  by @ServiceStack  [db]
   4. postgres   Use OrmLite with PostgreSQL       to: $HOST  by @ServiceStack  [db]
   5. mysql      Use OrmLite with MySql            to: $HOST  by @ServiceStack  [db]
   6. oracle     Use OrmLite with Oracle           to: $HOST  by @ServiceStack  [db]
   7. firebird   Use OrmLite with Firebird         to: $HOST  by @ServiceStack  [db]
   8. dynamodb   Use AWS DynamoDB and PocoDynamo   to: $HOST  by @ServiceStack  [db]
   9. mongodb    Use MongoDB                       to: $HOST  by @ServiceStack  [db]
  10. ravendb    Use RavenDB                       to: $HOST  by @ServiceStack  [db]
  11. marten     Use Marten NoSQL with PostgreSQL  to: $HOST  by @ServiceStack  [db]

   Usage:  mix &lt;name&gt; &lt;name&gt; ...

  Search:  mix [tag] Available tags: auth, config, db, feature, lib, mq, project, react, sharp, svg, ui, vue

Advanced:  mix ?
</code></pre></div><p>So we can install Redis with:</p><pre><code>$ mix redis
</code></pre><p>Where it will apply the <a href="https://gist.github.com/gistlyn/512309b3cb7d734bb0f7323907499b08" target="_blank" rel="noopener noreferrer">Redis Gist</a> below:</p><div class="language-csharp"><pre><code><span class="token keyword">namespace</span> <span class="token namespace">MyApp</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureRedis</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureServices</span><span class="token punctuation">,</span> <span class="token class-name">IConfigureAppHost</span></span>
    <span class="token punctuation">{</span>
        <span class="token return-type class-name">IConfiguration</span> Configuration <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token function">ConfigureRedis</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRedisClientsManager<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisManagerPool</span><span class="token punctuation">(</span>Configuration<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span><span class="token string">&quot;Redis&quot;</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">&quot;localhost:6379&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetPlugin</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SharpPagesFeature<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">?.</span>ScriptMethods<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisScripts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The configuration is declarative where it only runs <code>Configure(IAppHost appHost)</code> in ServiceStack Apps and only adds the <code>RedisScripts</code> if it&#39;s configured with <a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">#Script Pages</a>, otherwise any additional configuration is inert and isn&#39;t run.</p><p>Typically DB&#39;s will require you to specify your App DB&#39;s connection string to your external DB (with a default fallback) - where typically the most effort required to enable a feature is adding a Connection String in your <code>appsettings.json</code>.</p><h3 id="composable-features" tabindex="-1">Composable Features <a class="header-anchor" href="#composable-features" aria-hidden="true">#</a></h3><p>A nice characteristic about &quot;no-touch&quot; layerable features are that they&#39;re composable, where <code>mix</code> will let you hand-pick all features you want in a single command. For example you can enable Authentication, register an RDBMS Auth Repository using SQL Server with:</p><pre><code>$ mix auth auth-db sqlserver
</code></pre><p>Which will apply the <a href="https://gist.github.com/gistlyn/1ec54e10d44f87e0f20daaf7e2248fea" target="_blank" rel="noopener noreferrer">Configure.Auth.cs</a>, <a href="https://gist.github.com/gistlyn/16fddde0763b3eee516d670ab9fab194" target="_blank" rel="noopener noreferrer">Configure.AuthRepository.cs</a> and <a href="https://gist.github.com/gistlyn/7075e53e1fe69d3da12996677b5f3a5a" target="_blank" rel="noopener noreferrer">Configure.Db.cs</a> gists.</p><p>If you later wanted to switch to PostgreSQL, you can <code>mix</code> it in with:</p><pre><code>$ mix postgres
</code></pre><p>Where it will override <a href="https://gist.github.com/gistlyn/faf62da8b8ef30849506631025a5d06c" target="_blank" rel="noopener noreferrer">Configure.Db.cs</a> to use the postgres version, leaving any custom logic in <code>Configure.Auth.cs</code> or <code>Configure.AuthRepository.cs</code> untouched.</p><p>Or if you later want to change the Auth Repository to use Redis instead, you can run:</p><pre><code>$ mix auth-redis
</code></pre><p>Where it will override the existing <code>Configure.AuthRepository.cs</code> added by <strong>auth-db</strong>.</p><h3 id="undo-mix" tabindex="-1">Undo mix <a class="header-anchor" href="#undo-mix" aria-hidden="true">#</a></h3><p>In addition to being easy to add, <code>mix</code> makes it easy to undo where you can specify the <code>-delete</code> flag to remove all the Gist files added by all features, e.g:</p><pre><code>$ mix -delete auth auth-db sqlserver
</code></pre><p>Which will let you review all the files in each Gist that will deleted, then hit <code>Enter</code> to confirm:</p><div class="language-"><pre><code>Delete 1 file from &#39;auth&#39; https://gist.github.com/gistlyn/1ec54e10d44f87e0f20daaf7e2248fea:

C:\\Projects\\app\\Configure.Auth.cs

Delete 1 file from &#39;auth-db&#39; https://gist.github.com/gistlyn/16fddde0763b3eee516d670ab9fab194:

C:\\Projects\\app\\Configure.AuthRepository.cs

Delete 1 file from &#39;sqlserver&#39; https://gist.github.com/gistlyn/7075e53e1fe69d3da12996677b5f3a5a:

C:\\Projects\\app\\Configure.Db.cs

Proceed? (n/Y):
</code></pre></div><h3 id="encapsulated-features" tabindex="-1">Encapsulated Features <a class="header-anchor" href="#encapsulated-features" aria-hidden="true">#</a></h3><p>A nice benefit of decoupling features into modular classes is that you&#39;re able to a richer and more customizable out-of-the-box experience.</p><p>Instead of overloading users with daunting amounts of configuration required in common medium-sized Apps, most templates will start with an empty slate and leave it for users to read about each feature then decide how to hand-pick different configuration to slot it into their own App&#39;s configuration.</p><p>On the flip-side if you provide too much configuration Developers wont be confident to know what configuration belongs to which feature and which feature are interconnected or can be safely removed without breaking their App.</p><p>With modular features we can encapsulate configuration in a single <code>.cs</code> file that&#39;s primed with the popular well-known configuration for the feature. E.g. The Auth Repositories include an example of maintaining a custom <code>UserAuth</code> model, registering the <a href="/sessions.html#session-events">Auth Event</a> to populate their additional fields on Authentication and sample code necessary for ensuring a specific Admin User is created on <code>Startup</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">namespace</span> <span class="token namespace">MyApp</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Custom User Table with extended Metadata properties</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppUser</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">UserAuth</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ProfileUrl <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastLoginIp <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">DateTime<span class="token punctuation">?</span></span> LastLoginDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppUserAuthEvents</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AuthEvents</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnAuthenticated</span><span class="token punctuation">(</span><span class="token class-name">IRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">IAuthSession</span> session<span class="token punctuation">,</span> <span class="token class-name">IServiceBase</span> authService<span class="token punctuation">,</span> 
            <span class="token class-name">IAuthTokens</span> tokens<span class="token punctuation">,</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> authInfo<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> authRepo <span class="token operator">=</span> HostContext<span class="token punctuation">.</span>AppHost<span class="token punctuation">.</span><span class="token function">GetAuthRepository</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">using</span> <span class="token punctuation">(</span>authRepo <span class="token keyword">as</span> <span class="token class-name">IDisposable</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name"><span class="token keyword">var</span></span> userAuth <span class="token operator">=</span> <span class="token punctuation">(</span>AppUser<span class="token punctuation">)</span>authRepo<span class="token punctuation">.</span><span class="token function">GetUserAuth</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>UserAuthId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                userAuth<span class="token punctuation">.</span>ProfileUrl <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">GetProfileUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                userAuth<span class="token punctuation">.</span>LastLoginIp <span class="token operator">=</span> req<span class="token punctuation">.</span>UserHostAddress<span class="token punctuation">;</span>
                userAuth<span class="token punctuation">.</span>LastLoginDate <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">;</span>
                authRepo<span class="token punctuation">.</span><span class="token function">SaveUserAuth</span><span class="token punctuation">(</span>userAuth<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigureAuthRepository</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureAppHost</span><span class="token punctuation">,</span> <span class="token class-name">IConfigureServices</span><span class="token punctuation">,</span> <span class="token class-name">IPreInitPlugin</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteAuthRepository<span class="token punctuation">&lt;</span>AppUser<span class="token punctuation">,</span> UserAuthDetails<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    UseDistinctRoleTables <span class="token operator">=</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> authRepo <span class="token operator">=</span> appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            authRepo<span class="token punctuation">.</span><span class="token function">InitSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">CreateUser</span><span class="token punctuation">(</span>authRepo<span class="token punctuation">,</span> <span class="token string">&quot;admin@email.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Admin User&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;p@55wOrd&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">roles</span><span class="token punctuation">:</span><span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> RoleNames<span class="token punctuation">.</span>Admin <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">BeforePluginsLoaded</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            appHost<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AssertPlugin</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AuthFeature<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>AuthEvents<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AppUserAuthEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Add initial Users to the configured Auth Repository</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token class-name">IAuthRepository</span> authRepo<span class="token punctuation">,</span> 
            <span class="token class-name"><span class="token keyword">string</span></span> email<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> roles<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>authRepo<span class="token punctuation">.</span><span class="token function">GetUserAuthByUserName</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name"><span class="token keyword">var</span></span> newAdmin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AppUser</span> <span class="token punctuation">{</span> Email <span class="token operator">=</span> email<span class="token punctuation">,</span> DisplayName <span class="token operator">=</span> name <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token class-name"><span class="token keyword">var</span></span> user <span class="token operator">=</span> authRepo<span class="token punctuation">.</span><span class="token function">CreateUserAuth</span><span class="token punctuation">(</span>newAdmin<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
                authRepo<span class="token punctuation">.</span><span class="token function">AssignRoles</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> roles<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>All captured within a working configuration. You can start appreciating the instant utility of <code>mix</code> once you imagine what it was like before with how much time an effort it would&#39;ve taken to scan through docs, learn about each feature independently to be able to piece together equivalent functionality.</p><h3 id="mix-in-auth-repository" tabindex="-1">Mix in Auth Repository <a class="header-anchor" href="#mix-in-auth-repository" aria-hidden="true">#</a></h3><p>As it can take a while to piece together how to configure your preferred Auth Repository, use a Custom User Model and utilize <a href="/sessions.html#session-events">Auth Events</a> to populate it, we now recommend using <code>mix</code> to configure your preferred Auth Repository, which you can query with:</p><pre><code>$ mix [auth]
</code></pre><p>To display the current list of available Auth Repositories:</p><div class="language-"><pre><code>Results matching tag [auth]:

   1. auth              Configure AuthFeature                        to: $HOST  by @ServiceStack [auth]
   2. auth-db           Use OrmLite Auth Repository (requires auth)  to: $HOST  by @ServiceStack [auth]
   3. auth-redis        Use Redis Auth Repository (requires auth)    to: $HOST  by @ServiceStack [auth]
   4. auth-memory       Use Memory Auth Repository (requires auth)   to: $HOST  by @ServiceStack [auth]
   5. auth-dynamodb     Use DynamoDB Auth Repository (requires auth) to: $HOST  by @ServiceStack [auth]
   6. auth-mongodb      Use MongoDB Auth Repository (requires auth)  to: $HOST  by @ServiceStack [auth]
   7. auth-ravendb      Use RavenDB Auth Repository (requires auth)  to: $HOST  by @ServiceStack [auth]
   8. auth-marten       Use Marten Auth Repository (requires auth)   to: $HOST  by @ServiceStack [auth]
   9. feature-authrepo  List and Search Users in an Auth Repo        to: $HOST  by @ServiceStack [feature,auth]
</code></pre></div><h3 id="mix-in-mq-server" tabindex="-1">Mix in MQ Server <a class="header-anchor" href="#mix-in-mq-server" aria-hidden="true">#</a></h3><p>Likewise we now recommend using <code>mix</code> to configure your preferred MQ Service, other than being quicker to add, it proposes adopting a naming convention in app settings and file names that other <code>mix</code> features can also make use of:</p><pre><code>$ mix [mq]
</code></pre><p>Currently available list of MQ Services:</p><div class="language-"><pre><code>Results matching tag [mq]:

   1. backgroundmq  Use Memory Background MQ                    to: $HOST  by @ServiceStack  [mq]
   2. rabbitmq      Use RabbitMQ                                to: $HOST  by @ServiceStack  [mq]
   3. sqs           Use AWS SQS MQ                              to: $HOST  by @ServiceStack  [mq]
   4. servicebus    Use Azure Service Bus MQ                    to: $HOST  by @ServiceStack  [mq]
   5. redismq       Use Redis MQ                                to: $HOST  by @ServiceStack  [mq]
   6. feature-mq    Simple MQ Feature to test sending Messages  to: $HOST  by @ServiceStack  [feature,mq,sharp]
</code></pre></div><h3 id="mix-in-prebuilt-recipes-and-working-examples" tabindex="-1">Mix in Prebuilt Recipes and Working Examples <a class="header-anchor" href="#mix-in-prebuilt-recipes-and-working-examples" aria-hidden="true">#</a></h3><p><code>ModularStartup</code> and <code>mix</code> can scale up to complete working examples which can provide instant utility and integration of a feature into your existing App. By contrast most working examples are typically made available off to the side in stale projects which need to be downloaded and run in isolation. If it still works you&#39;d then have to compare the project files with your project and carefully copy over the differences you&#39;d think your App needs to replicate its functionality. This can be very time consuming to the point where a lot of users will skip trying to download &amp; run the example and instead try to manually configure it in their App.</p><p>All <code>mix</code> features add their files to your App&#39;s <a href="/physical-project-structure.html">Physical Project Structure</a> where configuration is added to your <code>Host</code> Project, Service Contracts are added to your <code>ServiceModel/</code> folder and Service Implementations added to your <code>ServiceInterface/</code> folder and any Web assets added to your App&#39;s <code>wwwroot/</code>.</p><p>They can also be added to both multi and single project solutions in which case they&#39;ll be added to <code>ServiceInterface</code> and <code>ServiceModel</code> folders in your App&#39;s project folder using the same namespace as used in multi-project solutions, making it easy to upgrade to a multi-project solution later.</p><h3 id="example-validation" tabindex="-1">example-validation <a class="header-anchor" href="#example-validation" aria-hidden="true">#</a></h3><p>The <code>example-validation</code> <strong>mix</strong> is a complete working validation example that&#39;s typical of a real-world validation example complete with Authentication integration allowing each authenticated user to manage their own private Contacts list.</p><p><a href="https://youtu.be/udrLtICylj8" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/mix/example-validation-900.gif" alt=""></a></p><blockquote><p>YouTube: <a href="https://youtu.be/udrLtICylj8" target="_blank" rel="noopener noreferrer">youtu.be/udrLtICylj8</a></p></blockquote><p>To follow video&#39;s example, start with a new <strong>Acme</strong> project from <code>sharp</code> .NET Core Template:</p><pre><code>$ x new script Acme
</code></pre><p>Add the <code>example-validation</code> mix:</p><pre><code>$ cd Acme
$ web mix example-validation
</code></pre><p>Which will prompt you with a link to the gist and the files that will be added to your project:</p><div class="language-"><pre><code>Write files from &#39;example-validation&#39; https://gist.github.com/gistlyn/33873ed2857b2c5a9623629c6210d665 to:

  C:\\projects\\Acme\\Acme\\Configure.Contacts.cs
  C:\\projects\\Acme\\Acme.ServiceInterface\\ContactServices.cs
  C:\\projects\\Acme\\Acme.ServiceModel\\Contacts.cs
  C:\\projects\\Acme\\Acme\\wwwroot\\contacts\\_id\\edit.html
  C:\\projects\\Acme\\Acme\\wwwroot\\contacts\\_requires-auth-partial.html
  C:\\projects\\Acme\\Acme\\wwwroot\\contacts\\index.html

Proceed? (n/Y):
</code></pre></div><p>Now after restarting your App you&#39;ll be able to add contacts by clicking on the new <strong>Contacts</strong> link in your App&#39;s main menu:</p><pre><code>$ cd Acme
$ dotnet run
</code></pre><p>After you&#39;re done reviewing the example you can either refactor it to handle your App&#39;s requirements or completely remove it from your App with:</p><pre><code>$ mix -delete example-validation
</code></pre><h3 id="feature-mq" tabindex="-1">feature-mq <a class="header-anchor" href="#feature-mq" aria-hidden="true">#</a></h3><p>The <code>feature-mq</code> adds MQ support to your App, complete with UI and includes 2 different ways of calling MQ Services in ServiceStack, just like <code>example-validation</code> above, <code>feature-mq</code> is another complete working example with both UI and Service implementation in the following files:</p><ul><li><a href="https://gist.github.com/gistlyn/355338cd60a32ee9c9fc4761269f7782#file-configure-mq-cs" target="_blank" rel="noopener noreferrer">Configure.Mq.cs?</a></li><li><a href="https://gist.github.com/gistlyn/355338cd60a32ee9c9fc4761269f7782#file-feature-mq-cs" target="_blank" rel="noopener noreferrer">Feature.Mq.cs</a></li><li><a href="https://gist.github.com/gistlyn/355338cd60a32ee9c9fc4761269f7782#file-serviceinterface-mqservices-cs" target="_blank" rel="noopener noreferrer">ServiceInterface\\MqServices.cs </a></li><li><a href="https://gist.github.com/gistlyn/355338cd60a32ee9c9fc4761269f7782#file-servicemodel-mq-cs" target="_blank" rel="noopener noreferrer">ServiceModel\\Mq.cs</a></li><li><a href="https://gist.github.com/gistlyn/355338cd60a32ee9c9fc4761269f7782#file-wwwroot-messaging-html" target="_blank" rel="noopener noreferrer">wwwroot\\messaging.html</a></li></ul><p>As <code>Configure.Mq.cs?</code> is optional it will only add it if doesn&#39;t already exist, so it will either use your existing MQ configuration or configure your App to use the In Memory <code>BackgroundMqService</code> implementation.</p><p>Add <code>feature-mq</code> to your project with:</p><pre><code>$ mix feature-mq
</code></pre><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/nav/feature-mq.png" alt=""></p><p>This will add the <code>TestMq</code> Service and make it available to your MQ endpoint. <code>TestMq</code> is a regular service that updates values in the App&#39;s registered <code>ICacheClient</code> and returns the Cache&#39;s current values as well as the internal Stats of the MQ:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MqServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IMessageService</span> MqService <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">PublishMq</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">PublishMessage</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ConvertTo</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TestMq<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">TestMq</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">)</span>
            Cache<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;mq.name&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>Add <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            Cache<span class="token punctuation">.</span><span class="token function">Increment</span><span class="token punctuation">(</span><span class="token string">&quot;mq.counter&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">uint</span><span class="token punctuation">)</span>request<span class="token punctuation">.</span>Add<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>Add <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            Cache<span class="token punctuation">.</span><span class="token function">Decrement</span><span class="token punctuation">(</span><span class="token string">&quot;mq.counter&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">uint</span><span class="token punctuation">)</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Add <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TestMqResponse</span> <span class="token punctuation">{</span>
            Name <span class="token operator">=</span> Cache<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;mq.name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Counter <span class="token operator">=</span> Cache<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">long</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;mq.counter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            StatsDescription <span class="token operator">=</span> MqService<span class="token punctuation">.</span><span class="token function">GetStatsDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The 2 ways to call a MQ Service is directly using the <code>publish</code> or <code>sendOneWay</code> APIs (available in all ServiceStack Service Clients) where it send the request to the Service&#39;s <code>/oneway</code> endpoint which will automatically publish it to the registered MQ.</p><p>Alternatively you can publish the Request DTO yourself from a different Service Implementation as done in <code>PublishMq</code>, as-is typical for Services that queues sending emails without blocking Service Execution.</p><p>The feature&#39;s UI allows you to publish <code>TestMq</code> messages using either approach:</p><div class="language-js"><pre><code>client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> oneway <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;input[name=mq-publish]:checked&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">&quot;OneWay&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>oneway<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    client<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TestMq</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> $txtName<span class="token punctuation">.</span>value<span class="token punctuation">,</span> add<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    client<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PublishMq</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> $txtName<span class="token punctuation">.</span>value<span class="token punctuation">,</span> add<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Both approaches end with the same result with the <code>TestMq</code> Request DTO published and executed by the registered MQ Service as shown in the UI which is periodically updated with the current state in the Cache and the internal stats of the MQ Service showing how many messages it processed.</p><h3 id="feature-authrepo" tabindex="-1">feature-authrepo <a class="header-anchor" href="#feature-authrepo" aria-hidden="true">#</a></h3><p>Another UI feature <code>mix</code> available in this release is a UI to browse and search for registered users in an Auth Repository.</p><p>This wasn&#39;t generically possible before as <code>IAuthRepository</code> didn&#39;t previously provide any API&#39;s to be able to query all Users, which is now available in the new <code>IQueryUserAuth</code> API:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IQueryUserAuth</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>IUserAuth<span class="token punctuation">&gt;</span></span> <span class="token function">GetUserAuths</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> orderBy <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> skip <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> take <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>IUserAuth<span class="token punctuation">&gt;</span></span> <span class="token function">SearchUserAuths</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> query<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> orderBy <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> skip <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> take <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is now implemented in all ServiceStack Auth Repositories although there are limitations depending on the queryability of the underlying data provider.</p><p>Searching in these Auth Repositories are efficient and searches in <strong>UserName</strong>, <strong>Email</strong>, <strong>DisplayName</strong> and <strong>Company</strong> fields:</p><ul><li><code>OrmLiteAuthRepository</code></li><li><code>InMemoryAuthRepository</code></li><li><code>MongoDbAuthRepository</code></li></ul><p>For RavenDB it reuses the existing Username/Email indexes so only searches <strong>UserName</strong>, <strong>Email</strong> fields and only performs a StartsWith/EndsWith search as allowed by RavenDB:</p><ul><li><code>RavenDbUserAuthRepository</code></li></ul><p>Searches and Order By&#39;s are very inefficient in Redis as it needs to deserialize all users to perform the querying/sorting on the client. Just paging through users with skip/take is efficient as it only needs to deserialize the partial resultset.</p><ul><li><code>RedisAuthRepository</code></li></ul><p>All queries performs a table scan in DynamoDB but searches all fields:</p><ul><li><code>DynamoDbAuthRepository</code></li></ul><h4 id="api-usage" tabindex="-1">API Usage <a class="header-anchor" href="#api-usage" aria-hidden="true">#</a></h4><p>These API&#39;s are accessible from an <code>IAuthRepository</code> dependency, if you&#39;re using a custom Auth Repository it will need to implement <code>IQueryUserAuth</code> otherwise calling these APIs (and feature) will throw a <code>NotSupportedException</code>:</p><div class="language-csharp"><pre><code>AuthRepository<span class="token punctuation">.</span>GetUserAuths<span class="token return-type class-name"><span class="token punctuation">(</span>orderBy<span class="token punctuation">:</span>fieldName<span class="token punctuation">,</span> skip<span class="token punctuation">:</span>skip<span class="token punctuation">,</span> take<span class="token punctuation">:</span>take<span class="token punctuation">)</span></span>
AuthRepository<span class="token punctuation">.</span><span class="token function">SearchUserAuths</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">query</span><span class="token punctuation">:</span>q<span class="token punctuation">,</span> <span class="token named-parameter punctuation">orderBy</span><span class="token punctuation">:</span>fieldName<span class="token punctuation">,</span> <span class="token named-parameter punctuation">skip</span><span class="token punctuation">:</span>skip<span class="token punctuation">,</span> <span class="token named-parameter punctuation">take</span><span class="token punctuation">:</span>take<span class="token punctuation">)</span>
</code></pre></div><p>The <code>orderBy</code> is the field name you want to order the results by, e.g. <code>UserName</code> and can suffixed with the <code>DESC</code> modifier to order results in descending order, e.g. <code>UserName DESC</code>.</p><p>In <code>#Script</code> these API&#39;s are available in <code>camelCase</code> off <code>authRepo</code> using a JS Object literal as seen in <code>users.html</code> page usage of this feature:</p>`,196),i=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"authRepo"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"searchUserAuths"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"query"),n("span",{class:"token punctuation"},":"),n("span",{class:"token variable"},"qs"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"q"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"take"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"pageSize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"skip"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"pageSize"),n("span",{class:"token punctuation"},"*"),n("span",{class:"token variable"},"page"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"to"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"users"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),l=a(`<h4 id="users-ui" tabindex="-1">Users UI <a class="header-anchor" href="#users-ui" aria-hidden="true">#</a></h4><p>Clicking the <strong>Users</strong> menu item will show you a list of searchable and pageable registered Users in a summary view:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/mix/feature-authrepo.png" alt=""></p><p>Clicking on a user will show you a complete list of fields stored for that user, including any custom fields, if you&#39;re using a Custom <code>UserAuth</code> table:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/mix/feature-authrepo-admin.png" alt=""></p><h3 id="modular-startup-prioritization" tabindex="-1">Modular Startup Prioritization <a class="header-anchor" href="#modular-startup-prioritization" aria-hidden="true">#</a></h3><p>Ideally features would not be order dependent, but if need to, you can use the <code>[Priority]</code> attribute to control the prioritization of different features implementing the .NET Core Startup interfaces:</p><ul><li><code>IConfigureServices</code> - Register IOC dependencies</li><li><code>IConfigureApp</code> - Register <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Modules</li><li><code>IStartup</code> - Configure both IOC and App Modules</li></ul><p>Startup classes with <code>Priority &lt; 0</code> are executed before your App&#39;s <code>Startup</code> otherwise they&#39;re executed after your AppHost, in ascending order.</p><p>The example configuration below shows the order in which each Startup class is executed:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Priority</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPreConfigureServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureServices</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;#1&quot;</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfigureServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureServices</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;#4&quot;</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Priority</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPostConfigureServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureServices</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;#5&quot;</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Priority</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyStartup</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IStartup</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IServiceProvider</span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;#2&quot;</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;#6&quot;</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Startup</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ModularStartup</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">new</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;#3&quot;</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IHostingEnvironment</span> env<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;#8&quot;</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Priority</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPreConfigureApp</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureApp</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token string">&quot;#7&quot;</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfigureApp</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IConfigureApp</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token string">&quot;#9&quot;</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="apphost-startup-classes" tabindex="-1">AppHost Startup classes <a class="header-anchor" href="#apphost-startup-classes" aria-hidden="true">#</a></h3><p>The <code>[Priority]</code> attribute can also be used in ServiceStack AppHost&#39;s Startup classes:</p><ul><li><code>IPreConfigureAppHost</code> - Customize <code>AppHost</code> before <code>Configure()</code> is run (e.g. to add ServiceAssemblies)</li><li><code>IConfigureAppHost</code> - Run external &quot;no-touch&quot; <code>AppHost</code> configuration</li><li><code>IAfterInitAppHost</code> - Run custom logic after <code>AppHost</code> has initialized (e.g. to start MQ Server)</li></ul><p>In addition to the above Interfaces, <code>IPlugin</code> can also implement the plugin interfaces below:</p><ul><li><code>IPreInitPlugin</code> - Run custom logic just before Plugins are registered</li><li><code>IPostInitPlugin</code> - Run custom logic just after Plugins are registered</li></ul><h3 id="register-asp-net-core-dependencies-in-apphost" tabindex="-1">Register <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core dependencies in AppHost <a class="header-anchor" href="#register-asp-net-core-dependencies-in-apphost" aria-hidden="true">#</a></h3><p>A limitation of <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core is that all dependencies need to be registered in <code>ConfigureServices()</code> before any App Modules which is the reason why dependencies registered in ServiceStack&#39;s AppHost <code>Configure()</code> are only accessible from ServiceStack and not the rest of <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core.</p><p>But as <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core&#39;s <code>AppHostBase</code> now implements <code>IConfigureServices</code>, you&#39;re now able to register IOC dependencies in your <code>AppHost</code> class by registering them in <code>Configure(IServiceCollection)</code> where they&#39;ll now be accessible to both ServiceStack and the rest of your <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core App, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppHost</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AppHostBase</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRedisClientsManager<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisManagerPool</span><span class="token punctuation">(</span>Configuration<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span><span class="token string">&quot;redis&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> redisManager <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRedisClientsManager<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can take this even further and have your ServiceStack AppHost implement <code>IConfigureApp</code> where it can also contain the logic to register itself as an alternative to registering ServiceStack in your <code>Startup</code> class, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppHost</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AppHostBase</span><span class="token punctuation">,</span> <span class="token class-name">IConfigureApp</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        app<span class="token punctuation">.</span><span class="token function">UseServiceStack</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AppHost</span>
        <span class="token punctuation">{</span>
            AppSettings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NetCoreAppSettings</span><span class="token punctuation">(</span>Configuration<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/***/</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This will let you drop-in your custom <code>AppHost</code> into a <code>ModularStartup</code> enabled <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core App to enable the same &quot;no-touch&quot; auto-registration.</p><h3 id="ipreinitplugin-breaking-change" tabindex="-1">IPreInitPlugin Breaking Change <a class="header-anchor" href="#ipreinitplugin-breaking-change" aria-hidden="true">#</a></h3><p>In order for Startup classes to be able to implement multiple Startup interfaces and avoiding naming collisions, the <code>IPreInitPlugin</code> interface was changed from:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IPreInitPlugin</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>to:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IPreInitPlugin</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">BeforePluginsLoaded</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Any of your plugins implementing <code>IPreInitPlugin</code> will need to be rename its <code>Configure()</code> method to <code>BeforePluginsLoaded()</code>.</p><h2 id="unified-navigation" tabindex="-1">Unified Navigation <a class="header-anchor" href="#unified-navigation" aria-hidden="true">#</a></h2><p>With the new App composition model in <code>ModularStartup</code> we want to enable features to be able to have deep integration with your App for instant utility and to reduce the effort required to integrate it with your App.</p><p>A problem with being able to add an integrated feature that combines both UI and functionality is the large variety of different kind of Apps that can be created with ServiceStack. To give you some idea, the <a href="/world-validation.html">World Validation</a> contains <strong>10 different client/server rendered</strong> Web App development strategies - which doesn&#39;t even cover all the major SPA that ServiceStack has first-class support for, not including any native Desktop or Mobile Apps.</p><p>To be able to provide higher-level functionality with instant utility we need a standard navigation API that all Apps can use to register functionality that all ServiceStack Apps can make use of.</p><p>To support this, we use the new <code>NavItem</code> below to capture hierarchical Navigation information about a single Navigation Item:</p><div class="language-csharp"><pre><code><span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// NavItem in View.NavItems and View.NavItemsMap</span>
<span class="token comment">/// &lt;/summary&gt;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NavItem</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IMeta</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">/// Link Label</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Label <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token comment">/// Link href</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Href <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token comment">/// Whether NavItem should only be considered active when paths </span>
    <span class="token comment">/// are an exact match otherwise checks if ActivePath starts with Path</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span><span class="token punctuation">?</span></span> Exact <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">/// Emit id=&quot;{Id}&quot;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">/// Override class=&quot;{Class}&quot;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ClassName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">/// Icon class (if any)</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> IconClass <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> 
    
    <span class="token comment">/// Only show if NavOptions.Attributes.Contains(Show) </span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Show <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token comment">/// Do not show if NavOptions.Attributes.Contains(Hide) </span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Hide <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token comment">/// Sub Menu Child NavItems</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>NavItem<span class="token punctuation">&gt;</span></span> Children <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token comment">/// Additional custom Metadata to attach to this Nav Item</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> Meta <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>There&#39;s also 2 built-in collections you can add Navigation Items to:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">View</span>
<span class="token punctuation">{</span>
    <span class="token comment">// The App&#39;s main navigation</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> List<span class="token operator">&lt;</span>NavItem<span class="token operator">&gt;</span> NavItems

    <span class="token comment">// Maintain any other number of custom Navigation lists</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> Dictionary<span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> List<span class="token operator">&lt;</span>NavItem<span class="token operator">&gt;&gt;</span> NavItemsMap
<span class="token punctuation">}</span>
</code></pre></div><p>Simply <code>View.NavItems</code> can be used to maintain your App&#39;s primary navigation whilst <code>NavItemsMap</code> lets you maintain any number of additional navigation item groups.</p><p>For example ServiceStack uses <code>NavItemsMap</code> to maintain Navigation items for each OAuth provider in the <code>auth</code> NavItem collection which is now able to generate an auto dynamic list of Auth Sign In Options from the existing list of Auth Providers registered in your App&#39;s <code>AuthFeature</code>, e.g:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthUserSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IAuthProvider<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CredentialsAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FacebookAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GoogleAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MicrosoftGraphAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TwitterAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GithubAuthProvider</span><span class="token punctuation">(</span>AppSettings<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Will render the following list of OAuth Sign In buttons in new ServiceStack Project Templates:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/nav/auth-navitems.png" alt=""></p><p>This is enabled by each OAuth Provider defining their own Navigation Item which is used to populate the <code>auth</code> NavItems collection, here&#39;s an example from <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Auth/FacebookAuthProvider.cs" target="_blank" rel="noopener noreferrer">FacebookAuthProvider</a>:</p><div class="language-csharp"><pre><code>NavItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span>
    Href <span class="token operator">=</span> <span class="token string">&quot;/auth/&quot;</span> <span class="token operator">+</span> Name<span class="token punctuation">,</span>
    Label <span class="token operator">=</span> <span class="token string">&quot;Sign in with Facebook&quot;</span><span class="token punctuation">,</span>
    Id <span class="token operator">=</span> <span class="token string">&quot;btn-&quot;</span> <span class="token operator">+</span> Name<span class="token punctuation">,</span>
    ClassName <span class="token operator">=</span> <span class="token string">&quot;btn-social btn-facebook&quot;</span><span class="token punctuation">,</span>
    IconClass <span class="token operator">=</span> <span class="token string">&quot;fab svg-facebook&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="load-from-configuration" tabindex="-1">Load from Configuration <a class="header-anchor" href="#load-from-configuration" aria-hidden="true">#</a></h3><p>To start with, the NavItems collections can be initialized from <code>appsettings.json</code> by populating the <code>NavItems</code> and <code>NavItemsMap</code> collections, e.g:</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;NavItems&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>                   <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Home&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;exact&quot;</span><span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/about&quot;</span><span class="token punctuation">,</span>              <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;About&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/services&quot;</span><span class="token punctuation">,</span>           <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Services&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/contact&quot;</span><span class="token punctuation">,</span>            <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Contact&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/contact/me&quot;</span><span class="token punctuation">,</span>    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Me&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/contact/email&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Email&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;-&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/contact/phone&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Phone&quot;</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span>      <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Sign In&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;hide&quot;</span><span class="token operator">:</span><span class="token string">&quot;auth&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/profile&quot;</span><span class="token punctuation">,</span>    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Profile&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;show&quot;</span><span class="token operator">:</span><span class="token string">&quot;auth&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/admin&quot;</span><span class="token punctuation">,</span>      <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Admin&quot;</span><span class="token punctuation">,</span>   <span class="token property">&quot;show&quot;</span><span class="token operator">:</span><span class="token string">&quot;role:Admin&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;NavItemsMap&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;aside&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/faq&quot;</span><span class="token punctuation">,</span>     <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;FAQ&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;footer&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/terms&quot;</span><span class="token punctuation">,</span>   <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Terms&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/privacy&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Privacy&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="populate-from-code" tabindex="-1">Populate from Code <a class="header-anchor" href="#populate-from-code" aria-hidden="true">#</a></h3><p>Or if preferred you can create the navigation in code:</p><div class="language-csharp"><pre><code>View<span class="token punctuation">.</span>NavItems<span class="token punctuation">.</span><span class="token function">AddRange</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>NavItem<span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span> Href <span class="token operator">=</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>         Label <span class="token operator">=</span> <span class="token string">&quot;Home&quot;</span><span class="token punctuation">,</span>    Exact <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span> Href <span class="token operator">=</span> <span class="token string">&quot;/about&quot;</span><span class="token punctuation">,</span>    Label <span class="token operator">=</span> <span class="token string">&quot;About&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span> Href <span class="token operator">=</span> <span class="token string">&quot;/services&quot;</span><span class="token punctuation">,</span> Label <span class="token operator">=</span> <span class="token string">&quot;services&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span>
    <span class="token punctuation">{</span>
        Href <span class="token operator">=</span> <span class="token string">&quot;/contact&quot;</span><span class="token punctuation">,</span> Label <span class="token operator">=</span> <span class="token string">&quot;Contact&quot;</span><span class="token punctuation">,</span>
        Children <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>NavItem<span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span> Href <span class="token operator">=</span> <span class="token string">&quot;/contact/me&quot;</span><span class="token punctuation">,</span> Label <span class="token operator">=</span> <span class="token string">&quot;Me&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span> Href <span class="token operator">=</span> <span class="token string">&quot;/contact/email&quot;</span><span class="token punctuation">,</span> Label <span class="token operator">=</span> <span class="token string">&quot;Email&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span> Label <span class="token operator">=</span> <span class="token string">&quot;-&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span> Href <span class="token operator">=</span> <span class="token string">&quot;/contact/phone&quot;</span><span class="token punctuation">,</span> Label <span class="token operator">=</span> <span class="token string">&quot;Phone&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span> Href <span class="token operator">=</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span>    Label <span class="token operator">=</span> <span class="token string">&quot;Sign In&quot;</span><span class="token punctuation">,</span> Hide <span class="token operator">=</span> <span class="token string">&quot;auth&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span> Href <span class="token operator">=</span> <span class="token string">&quot;/profile&quot;</span><span class="token punctuation">,</span>  Label <span class="token operator">=</span> <span class="token string">&quot;Profile&quot;</span><span class="token punctuation">,</span> Show <span class="token operator">=</span> <span class="token string">&quot;auth&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span> Href <span class="token operator">=</span> <span class="token string">&quot;/admin&quot;</span><span class="token punctuation">,</span>    Label <span class="token operator">=</span> <span class="token string">&quot;Admin&quot;</span><span class="token punctuation">,</span>   Show <span class="token operator">=</span> <span class="token string">&quot;role:Admin&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Which when used to render your main menu navigation in a Bootstrap Web App, looks something like:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/nav/appsettings.png" alt=""></p><h3 id="ui-feature-integration" tabindex="-1">UI Feature Integration <a class="header-anchor" href="#ui-feature-integration" aria-hidden="true">#</a></h3><p>The <code>NavItems</code> generic collections can be further extended programmatically which allows UI plugins to register their functionality with the App&#39;s UI.</p><p>Here are some examples that the new <a href="https://gist.github.com/gistlyn/9fe61f1967c53d85984402118ee03017" target="_blank" rel="noopener noreferrer">feature-authrepo</a> and <a href="https://gist.github.com/gistlyn/355338cd60a32ee9c9fc4761269f7782" target="_blank" rel="noopener noreferrer">feature-mq</a> <code>mix</code> features use to register their pages with the running Web App:</p><h4 id="feature-userauth-cs" tabindex="-1">Feature.UserAuth.cs <a class="header-anchor" href="#feature-userauth-cs" aria-hidden="true">#</a></h4><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AfterPluginsLoaded</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    View<span class="token punctuation">.</span>NavItems<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span>
        Label <span class="token operator">=</span> <span class="token string">&quot;Users&quot;</span><span class="token punctuation">,</span>
        Href <span class="token operator">=</span> <span class="token string">&quot;/admin/users&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// Show = &quot;role:Admin&quot; // Uncomment to only show menu item to Admin Users</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which adds the <strong>Users</strong> Menu Item linking to the <a href="https://gist.github.com/gistlyn/9fe61f1967c53d85984402118ee03017#file-wwwroot-admin-users-html" target="_blank" rel="noopener noreferrer">/admin/users.html</a> page:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/nav/feature-authrepo.png" alt=""></p><h4 id="feature-mq-cs" tabindex="-1">Feature.Mq.cs <a class="header-anchor" href="#feature-mq-cs" aria-hidden="true">#</a></h4><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AfterPluginsLoaded</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    View<span class="token punctuation">.</span>NavItems<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavItem</span> <span class="token punctuation">{</span>
        Label <span class="token operator">=</span> <span class="token string">&quot;Messaging&quot;</span><span class="token punctuation">,</span>
        Href <span class="token operator">=</span> <span class="token string">&quot;/messaging&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which adds the <strong>Messaging</strong> Menu Item linking to its <a href="https://gist.github.com/gistlyn/355338cd60a32ee9c9fc4761269f7782#file-wwwroot-messaging-html" target="_blank" rel="noopener noreferrer">messaging.html</a> page:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/nav/feature-mq.png" alt=""></p><h3 id="navigation-renderers" tabindex="-1">Navigation Renderers <a class="header-anchor" href="#navigation-renderers" aria-hidden="true">#</a></h3><p>The <code>NavItem</code> classes capture the Navigation information which is used together with the <code>NavOptions</code> class below:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NavOptions</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// User Attributes for conditional rendering, e.g:</span>
    <span class="token comment">///  - auth - User is Authenticated</span>
    <span class="token comment">///  - role:name - User Role</span>
    <span class="token comment">///  - perm:name - User Permission </span>
    <span class="token keyword">public</span> <span class="token return-type class-name">HashSet<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> Attributes <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token comment">/// Path Info that should set as active </span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ActivePath <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token comment">/// Prefix to include before NavItem.Path (if any)</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> BaseHref <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// Custom classes applied to different navigation elements (defaults to Bootstrap classes)</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> NavClass <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> NavItemClass <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> NavLinkClass <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ChildNavItemClass <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ChildNavLinkClass <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ChildNavMenuClass <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ChildNavMenuItemClass <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To customize how navigation items are rendered using the new navigation controls available for each of ServiceStack&#39;s most popular Project Types.</p><p>All components are customizable in the same way and render the same markup, apart from Angular due to how it renders components where it includes additional &quot;wrapper&quot; HTML tags around each component.</p><h3 id="script-pages" tabindex="-1"><code>#Script</code> Pages <a class="header-anchor" href="#script-pages" aria-hidden="true">#</a></h3><p>In <a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">#Script Pages</a> you can use render the <code>navbar</code> and <code>navButtonGroup</code> methods to render NavItems:</p><h4 id="navbar" tabindex="-1">Navbar <a class="header-anchor" href="#navbar" aria-hidden="true">#</a></h4><p>You can render the <strong>main menu</strong> navigation using the <a href="https://github.com/NetCoreTemplates/sharp/blob/50b77454950ef0590042e08cf327aae602a2ab0a/MyApp/wwwroot/_layout.html#L30" target="_blank" rel="noopener noreferrer">navbar</a> script method:</p>`,72),r=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"navbar"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),u=n("p",null,[s("Which by default renders the "),n("code",null,"View.NavItems"),s(" main navigation, using the default "),n("code",null,"NavOptions"),s(" and User Attributes (if authenticated):")],-1),k=n("p",null,[n("img",{src:"https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/nav/appsettings.png",alt:""})],-1),d=n("p",null,[s("You can also render a "),n("strong",null,"different Navigation List"),s(" with:")],-1),h=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"navbar"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"navItems"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'submenu'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),g=n("p",null,[s("Which can be customized using the different "),n("code",null,"NavOptions"),s(" properties above, in camelCase:")],-1),m=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"navbar"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"navItems"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'submenu'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"navClass"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'navbar-nav navbar-light bg-light'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),b=n("h4",{id:"rewritten-using-script-extension-methods",tabindex:"-1"},[s("Rewritten using #Script Extension methods "),n("a",{class:"header-anchor",href:"#rewritten-using-script-extension-methods","aria-hidden":"true"},"#")],-1),f=n("p",null,[s("Thanks to "),n("code",null,"#Script"),s(" new ability to be able to call any script methods as extension methods, this can also be rewritten as:")],-1),v=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token string"},"'submenu'"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"navItems"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"navbar"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"navClass"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'navbar-nav navbar-light bg-light'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),y=n("h4",{id:"button-group",tabindex:"-1"},[s("Button group "),n("a",{class:"header-anchor",href:"#button-group","aria-hidden":"true"},"#")],-1),w=n("p",null,[s("The "),n("code",null,"navButtonGroup"),s(" script can render NavItems in a button group, e.g. the "),n("a",{href:"https://github.com/NetCoreTemplates/sharp/blob/50b77454950ef0590042e08cf327aae602a2ab0a/MyApp/wwwroot/login.html#L46",target:"_blank",rel:"noopener noreferrer"},"OAuth buttons"),s(" are rendered with:")],-1),S=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token string"},"'auth'"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"navItems"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"navButtonGroup"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"navClass"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"''"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"navItemClass"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'btn btn-block btn-lg'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),A=a(`<p>Which renders a vertical, spaced list of buttons which look like:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/nav/auth-navitems.png" alt=""></p><h3 id="razor-pages" tabindex="-1">Razor Pages <a class="header-anchor" href="#razor-pages" aria-hidden="true">#</a></h3><p>The same server controls are available in ServiceStack.Razor Apps as HTML Helper extension methods:</p><h4 id="navbar-1" tabindex="-1">Navbar <a class="header-anchor" href="#navbar-1" aria-hidden="true">#</a></h4><div class="language-csharp"><pre><code>@Html<span class="token punctuation">.</span><span class="token function">Navbar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

@Html<span class="token punctuation">.</span><span class="token function">Navbar</span><span class="token punctuation">(</span>Html<span class="token punctuation">.</span><span class="token function">GetNavItems</span><span class="token punctuation">(</span><span class="token string">&quot;submenu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

@Html<span class="token punctuation">.</span><span class="token function">Navbar</span><span class="token punctuation">(</span>Html<span class="token punctuation">.</span><span class="token function">GetNavItems</span><span class="token punctuation">(</span><span class="token string">&quot;submenu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavOptions</span> <span class="token punctuation">{</span>
    NavClass <span class="token operator">=</span> <span class="token string">&quot;navbar-nav navbar-light bg-light&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="navbuttongroup" tabindex="-1">NavButtonGroup <a class="header-anchor" href="#navbuttongroup" aria-hidden="true">#</a></h4><div class="language-csharp"><pre><code>@Html<span class="token punctuation">.</span><span class="token function">NavButtonGroup</span><span class="token punctuation">(</span>Html<span class="token punctuation">.</span><span class="token function">GetNavItems</span><span class="token punctuation">(</span><span class="token string">&quot;auth&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NavOptions</span> <span class="token punctuation">{</span>
    NavClass <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    NavItemClass <span class="token operator">=</span> <span class="token string">&quot;btn btn-block btn-lg&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="spa-component-libraries" tabindex="-1">SPA Component Libraries <a class="header-anchor" href="#spa-component-libraries" aria-hidden="true">#</a></h2><p>To lay the foundation for richer and more tightly integrated UI controls, we&#39;ve created UI and common component libraries for the 3 most popular JS frameworks:</p><h3 id="servicestack-vue" tabindex="-1"><a href="https://github.com/ServiceStack/servicestack-vue" target="_blank" rel="noopener noreferrer">@servicestack/vue</a> <a class="header-anchor" href="#servicestack-vue" aria-hidden="true">#</a></h3><h3 id="servicestack-react" tabindex="-1"><a href="https://github.com/ServiceStack/servicestack-react" target="_blank" rel="noopener noreferrer">@servicestack/react</a> <a class="header-anchor" href="#servicestack-react" aria-hidden="true">#</a></h3><h3 id="servicestack-angular" tabindex="-1"><a href="https://github.com/ServiceStack/servicestack-angular" target="_blank" rel="noopener noreferrer">@servicestack/angular</a> <a class="header-anchor" href="#servicestack-angular" aria-hidden="true">#</a></h3><p>All new <a href="/templates-single-page-apps.html">Single Page App Project Templates</a> have been pre-configured to use these libraries which will make it a lot easier to deliver new UI components and updates to existing SPA Apps with just an npm upgrade.</p><h3 id="ui-component-list" tabindex="-1">UI Component List <a class="header-anchor" href="#ui-component-list" aria-hidden="true">#</a></h3><p>On this first release the component libraries include common Bootstrap UI Form Controls, Navigation Components and a generic <code>Forbidden</code> page to handle when users don&#39;t have access to a protected route.</p><p>Side-by-side comparison displaying the names for the different Component Type in each JS Framework:</p><table><thead><tr><th>Control</th><th>vue</th><th>react</th><th>angular</th></tr></thead><tbody><tr><td>Forbidden</td><td>Forbidden</td><td>Forbidden</td><td>ForbiddenComponent</td></tr><tr><td>ErrorSummary</td><td>error-summary</td><td>ErrorSummary</td><td>error-summary</td></tr><tr><td>Input</td><td>v-input</td><td>Input</td><td>ng-input</td></tr><tr><td>Select</td><td>v-select</td><td>Select</td><td></td></tr><tr><td>CheckBox</td><td>v-checkbox</td><td>CheckBox</td><td>ng-checkbox</td></tr><tr><td>Button</td><td>v-button</td><td>Button</td><td>ng-button</td></tr><tr><td>SvgImage</td><td>v-svg</td><td>SvgImage</td><td></td></tr><tr><td>Link</td><td>v-link</td><td>ALink</td><td>ng-link</td></tr><tr><td>LinkButton</td><td>link-button</td><td>LinkButton</td><td>link-button</td></tr><tr><td>Nav</td><td>v-nav</td><td>Nav</td><td></td></tr><tr><td>Navbar</td><td>navbar</td><td>Navbar</td><td>navbar</td></tr><tr><td>NavLink</td><td>nav-link</td><td>NavLink</td><td>nav-link</td></tr><tr><td>NavButtonGroup</td><td>nav-button-group</td><td>NavButtonGroup</td><td>nav-button-group</td></tr><tr><td>NavLinkButton</td><td>nav-link-button</td><td>NavLinkButton</td><td>nav-link-button</td></tr></tbody></table><h3 id="bootstrap-ui-form-controls" tabindex="-1">Bootstrap UI Form Controls <a class="header-anchor" href="#bootstrap-ui-form-controls" aria-hidden="true">#</a></h3><p>The Bootstrap UI form controls include built-in support for validation where they can render validation errors from ServiceStack&#39;s <code>ResponseStatus</code> object, e.g the <a href="https://github.com/NetCoreTemplates/vue-spa/blob/master/MyApp/src/components/SignIn.vue" target="_blank" rel="noopener noreferrer">SignIn.vue</a> page used in all Vue project templates:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">@submit.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ error:responseStatus, loading }<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-summary</span> <span class="token attr-name">except</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName,password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:responseStatus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>responseStatus<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:responseStatus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>responseStatus<span class="token punctuation">&quot;</span></span> 
                 <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">help</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Email you signed up with<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Password<span class="token punctuation">&quot;</span></span> 
                <span class="token attr-name">:responseStatus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>responseStatus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">help</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6 characters or more<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>v-checkbox</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rememberMe<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rememberMe<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:responseStatus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>responseStatus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            Remember Me
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>v-checkbox</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-lg btn-primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link-button</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/signup<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lg</span> <span class="token attr-name">outline-secondary</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ml-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Register New User<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>link-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Initially renders the following UI:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/spa/vue-form-components.png" alt=""></p><p>All form validation is typically performed the same way, by sending a populated ServiceStack Request DTO and capturing any Service Client exceptions in the components <code>responseStatus</code> property, e.g:</p><div class="language-typescript"><pre><code><span class="token keyword">protected</span> <span class="token keyword">async</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>responseStatus <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Authenticate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            provider<span class="token operator">:</span> <span class="token string">&#39;credentials&#39;</span><span class="token punctuation">,</span>
            userName<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userName<span class="token punctuation">,</span>
            password<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password<span class="token punctuation">,</span>
            rememberMe<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rememberMe<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;signin&#39;</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>redirect <span class="token keyword">as</span> <span class="token builtin">string</span> <span class="token operator">||</span> Routes<span class="token punctuation">.</span>Home<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>responseStatus <span class="token operator">=</span> e<span class="token punctuation">.</span>responseStatus <span class="token operator">||</span> e<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Where it automatically applies the field validation error next to their respective control:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/spa/vue-form-components-invalid.png" alt=""></p><p>Conversely you can unset the <code>responseStatus</code> to reset all form validation errors:</p><div class="language-ts"><pre><code><span class="token keyword">this</span><span class="token punctuation">.</span>responseStatus <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="navigation-components" tabindex="-1">Navigation Components <a class="header-anchor" href="#navigation-components" aria-hidden="true">#</a></h3><p>All navigation components are populated the same way for all JavaScript FX&#39;s where it embeds the navigation data structure in the page by serializing the response of the <code>GetNavItems</code> Service to JSON that&#39;s embedded in the layout page where it&#39;s only loaded once upon the initial page request (immediately, without an Ajax network request):</p>`,31),q=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),n("span",{class:"token block keyword"},"#script}}"),s(`
`),n("span",{class:"token variable"},"NAV_ITEMS"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token string"},"'GetNavItems'"),s("  "),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"execService"),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"json"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token variable"},"AUTH"),s("      "),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token string"},"'Authenticate'"),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"execService"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"ifErrorReturn"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},'"null"'),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"json"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"script"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),x=a(`<p>The navigation items data structure is used with new Navigation Components for each JavaScript FX to render the menu navigation which is initially captured in a state object containing the NavItems data structure, the Users Session and the list of User Attributes generated from the Authenticated Users Session (if any), e.g:</p><h3 id="vue" tabindex="-1">Vue <a class="header-anchor" href="#vue" aria-hidden="true">#</a></h3><p>In Vue the Nav and User Information is maintained in a global <code>store</code> object which uses <code>UserAttributes.fromSession()</code> from the <code>@servicestack/client</code> library to generate the list of User Attributes:</p><div class="language-ts"><pre><code><span class="token keyword">export</span> <span class="token keyword">const</span> store<span class="token operator">:</span> State <span class="token operator">=</span> <span class="token punctuation">{</span>
  nav<span class="token operator">:</span> global<span class="token punctuation">.</span><span class="token constant">NAV_ITEMS</span> <span class="token keyword">as</span> GetNavItemsResponse<span class="token punctuation">,</span>
  userSession<span class="token operator">:</span> global<span class="token punctuation">.</span><span class="token constant">AUTH</span> <span class="token keyword">as</span> AuthenticateResponse<span class="token punctuation">,</span>
  userAttributes<span class="token operator">:</span> UserAttributes<span class="token punctuation">.</span><span class="token function">fromSession</span><span class="token punctuation">(</span>global<span class="token punctuation">.</span><span class="token constant">AUTH</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>The built-in list of User Attributes include:</p><ul><li><code>auth</code> - Authenticated User</li><li><code>role:TheRole</code> - Authenticated User with <code>TheRole</code> role.</li><li><code>perm:ThePermission</code> - Authenticated User with <code>ThePermission</code> permission.</li></ul><p>This list can be further extended to include your own custom User Attributes, these are used to control whether to display the navigation item based on if the attribute is an exact match for the <code>Show</code> and <code>Hide</code> properties of the <code>NavItem</code>. E.g. Navigation Items populated with:</p><div class="language-json"><pre><code>  <span class="token property">&quot;NavItems&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span>      <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Sign In&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;hide&quot;</span><span class="token operator">:</span><span class="token string">&quot;auth&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/profile&quot;</span><span class="token punctuation">,</span>    <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Profile&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;show&quot;</span><span class="token operator">:</span><span class="token string">&quot;auth&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;/admin&quot;</span><span class="token punctuation">,</span>      <span class="token property">&quot;label&quot;</span><span class="token operator">:</span><span class="token string">&quot;Admin&quot;</span><span class="token punctuation">,</span>   <span class="token property">&quot;show&quot;</span><span class="token operator">:</span><span class="token string">&quot;role:Admin&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Will hide the <strong>Sign In</strong> and show the <strong>Profile</strong> nav items to Authenticated Users and only show the <strong>Admin</strong> nav item to Admin Users.</p><p>The <code>navbar</code> component uses these data structures to <a href="https://github.com/NetCoreTemplates/vue-spa/blob/24ce35d67dcec0f4e00f0dd2f40cf2e8f0c58c7c/MyApp/src/App.vue#L9" target="_blank" rel="noopener noreferrer">render the main menu</a>:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navbar</span> <span class="token attr-name">:items</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>store.nav.results<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:attributes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>store.userAttributes<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>The rendering of the component can be further customized using any of the <code>NavOptions</code> properties, in <strong>camelCase</strong>.</p><p>Which also applies to the list of <a href="https://github.com/NetCoreTemplates/vue-spa/blob/24ce35d67dcec0f4e00f0dd2f40cf2e8f0c58c7c/MyApp/src/App.vue#L9" target="_blank" rel="noopener noreferrer">registered OAuth provider buttons</a> rendered with <code>&lt;nav-button-group&gt;</code>:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav-button-group</span> <span class="token attr-name">:items</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>store.nav.navItemsMap.auth<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:attributes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>store.userAttributes<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">:baseHref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>store.nav.baseUrl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">block</span> <span class="token attr-name">lg</span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>In addition to <code>NavOptions</code> properties, new Bootstrap UI Controls (in each JavaScript FX) can also use these common bootstrap attributes to stylize their components:</p><div class="language-ts"><pre><code><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">BootstrapBase</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
    primary<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    outlinePrimary<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    secondary<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    outlineSecondary<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    success<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    outlineSuccess<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    info<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    outlineInfo<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    warning<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    outlineWarning<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    danger<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    outlineDanger<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    light<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    outlineLight<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    dark<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    outlineDark<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    lg<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    md<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    sm<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    xs<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    block<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    vertical<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    horizontal<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>camelCase properties like <code>outlinePrimary</code> are exposed as <strong>kebab-case</strong> in components, e.g. <code>outline-primary</code></p></blockquote><h3 id="react" tabindex="-1">React <a class="header-anchor" href="#react" aria-hidden="true">#</a></h3><p>These same components are <a href="https://github.com/NetCoreTemplates/react-spa/blob/7bee202a4ceff4b5a191df178633c45f7f736073/MyApp/src/App.tsx#L46" target="_blank" rel="noopener noreferrer">available in React</a> from the new <code>@servicestack/react</code> library, except the JSX Components use PascalCase, e.g:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Navbar</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{state.nav.results}</span> <span class="token attr-name">attributes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{state.userAttributes}</span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>Likewise for <a href="https://github.com/NetCoreTemplates/react-spa/blob/7bee202a4ceff4b5a191df178633c45f7f736073/MyApp/src/components/SignIn.tsx#L93" target="_blank" rel="noopener noreferrer">NavButtonGroup</a>:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NavButtonGroup</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{state.nav.navItemsMap.auth}</span> <span class="token attr-name">attributes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{state.userAttributes}</span> 
                <span class="token attr-name">baseHref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{state.nav.baseUrl}</span> <span class="token attr-name">block</span> <span class="token attr-name">lg</span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="angular" tabindex="-1">Angular <a class="header-anchor" href="#angular" aria-hidden="true">#</a></h3><p>Likewise for Angular from the new <code>@servicestack/angular</code> package where the main menu is rendered using the <a href="https://github.com/NetCoreTemplates/angular-spa/blob/278a965d3b8d922f6ea55408269308ff90913263/MyApp/src/app/app.component.html#L9" target="_blank" rel="noopener noreferrer">navbar component</a>:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navbar</span> <span class="token attr-name">[items]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav.results<span class="token punctuation">&quot;</span></span> <span class="token attr-name">[attributes]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userAttributes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navbar</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>And the OAuth Button list is rendered using the <a href="https://github.com/NetCoreTemplates/angular-spa/blob/278a965d3b8d922f6ea55408269308ff90913263/MyApp/src/app/signin/index.ts#L49" target="_blank" rel="noopener noreferrer">nav-button-group component</a> in kebab-case:</p><div class="language-html"><pre><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav-button-group</span> <span class="token attr-name">[items]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav.navItemsMap.auth<span class="token punctuation">&quot;</span></span> <span class="token attr-name">[attributes]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userAttributes<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">[baseHref]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav.baseUrl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">block</span> <span class="token attr-name">lg</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav-button-group</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="mobile-and-desktop-apps" tabindex="-1">Mobile and Desktop Apps <a class="header-anchor" href="#mobile-and-desktop-apps" aria-hidden="true">#</a></h3><p>Whilst there are no native components developed for different Mobile and Desktop UI&#39;s, the same navigation information can be accessed by calling the <code>GetNavItems</code> Service, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">GetNavItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="svg" tabindex="-1">SVG <a class="header-anchor" href="#svg" aria-hidden="true">#</a></h2><p>A common performance drain in Web Apps is serving images whose large binary blobs can have a significant impact on your App&#39;s Request throughput, and why they&#39;re often hosted behind CDN&#39;s which can complicate the deployment process and introduce subtle caching issues.</p><p>A popular image format that&#39;s seen its popularity rise on the Web is SVG - a text vector image format that scales beautifully to support different resolutions. SVG&#39;s are typically small in size and have great support in browsers where they can be optimally cached in <code>.css</code> style sheets to reduce the number of required image requests.</p><p>Unless you&#39;re using an npm based build system there hasn&#39;t been great support for managing SVG images in .NET beyond treating them as individual images, that is until now with the new <code>SvgFeature</code> plugin (pre-registered by default) and the <code>Svg</code> class - providing programmatic access to registering SVG image collections and accessing them in a variety of different formats and colors.</p><h3 id="in-memory-bundled-css-files" tabindex="-1">In Memory Bundled CSS files <a class="header-anchor" href="#in-memory-bundled-css-files" aria-hidden="true">#</a></h3><p><code>SvgFeature</code> works by creating an in memory bundled <code>.css</code> file for each &quot;image set&quot; that&#39;s registered at the path <code>/css/{image-set}.css</code>, e.g. it&#39;s pre-configured with the <strong>svg-auth</strong> and <strong>svg-icons</strong> svg groups:</p><ul><li><strong>/css/svg-auth.css</strong> - Vendor Icons for each of the popular 3rd Party OAuth Providers</li><li><strong>/css/svg-icons.css</strong> - Generic User Avatars (used as the default profile image)</li></ul><p>SVG files are simply stored as strings in regular collections maintained in <code>Svg.CssFiles</code> and <code>Svg.Images</code> dictionaries which can be modified/extended as normal.</p><h3 id="viewing-svg-icons" tabindex="-1">Viewing SVG Icons <a class="header-anchor" href="#viewing-svg-icons" aria-hidden="true">#</a></h3><p>One thing that sets SVG apart from normal images is the multitude of ways they can be referenced. SVG&#39;s are commonly bundled in <code>.css</code> files and referenced by classes, but they can also be embedded in a native <code>&lt;img&gt;</code> tag and <code>&lt;svg&gt;</code> block element where they can be displayed in different colors.</p><p>To make it as easy as possible to reference SVG images in different contexts we&#39;ve created the dynamic <code>/metadata/svg</code> page (also available under the <strong>SVG Images</strong> link in your <a href="/metadata-page.html#debug-links">/metadata page Debug Links</a>) where you can view all your App&#39;s registered SVG images complete with different usage examples, code fragments and links to access SVG Image <code>.css</code> collections or individual SVG images:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/svg/metadata-svg.png" alt=""></p><p>The <strong>entire page is clickable</strong> where you can first click on the SVG image you want to use then <strong>click on any text fragment</strong> to copy it, ready for pasting it in your web page.</p><h3 id="loading-svg-from-filesystem" tabindex="-1">Loading SVG from FileSystem <a class="header-anchor" href="#loading-svg-from-filesystem" aria-hidden="true">#</a></h3><p>The most user-friendly way to load custom SVG images is to load them from a custom directory, e.g:</p><pre><code>/svg
    /svg-icons
        vue.svg
        spirals.html
    /my-icons
        myicon.svg
</code></pre><p>Then in your <code>AppHost</code> you can register all SVG images using <code>Svg.Load()</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Svg<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span>RootDirectory<span class="token punctuation">.</span><span class="token function">GetDirectory</span><span class="token punctuation">(</span><span class="token string">&quot;/svg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>VirtualFiles</code> is configured to your projects <strong>ContentRoot</strong>, use <code>VirtualFileSources</code> to use your <strong>WebRoot</strong>, <code>RootDirectory</code> uses the FileSystem VFS in <code>VirtualFileSources</code> whereas <code>ContentRootDirectory</code> looks in <code>VirtualFiles</code></p></blockquote><p>This will load all the SVG images in the <code>/svg</code> directory with the <strong>sub directory</strong> used for the <strong>cssfile</strong> (aka image-set) you want to add them to and the <strong>file name</strong> (without extension) used as the SVG identifier.</p><p>It will also evaluate any <code>.html</code> files in the directory with <a href="https://sharpscript.net" target="_blank" rel="noopener noreferrer">#Script</a> and add the rendered SVG output, e.g. we can load the generated SVG from the <a href="https://github.com/mythz/spirals" target="_blank" rel="noopener noreferrer">Spirals Sharp App</a>:</p><h5 id="svg-svg-icons-spirals-html" tabindex="-1">/svg/svg-icons/spirals.html <a class="header-anchor" href="#svg-svg-icons-spirals-html" aria-hidden="true">#</a></h5>`,52),C=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"svg"),s(),n("span",{class:"token variable"},"height"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"640"'),s(),n("span",{class:"token variable"},"width"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"240"'),n("span",{class:"token punctuation"},">"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"each"),s(),n("span",{class:"token variable"},"range"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"180"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token number"},"120"),s(),n("span",{class:"token punctuation"},"+"),s(),n("span",{class:"token number"},"100"),s(),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token variable"},"cos"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),s("  "),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token variable"},"it"),s(),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token number"},"0.02827"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"to"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"x"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token number"},"320"),s(),n("span",{class:"token punctuation"},"+"),s(),n("span",{class:"token number"},"300"),s(),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token variable"},"sin"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s("  "),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token variable"},"it"),s(),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token number"},"0.02827"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"to"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"y"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"<"),n("span",{class:"token variable"},"circle"),s(),n("span",{class:"token variable"},"cx"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"{{x}}"'),s(),n("span",{class:"token variable"},"cy"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"{{y}}"'),s(),n("span",{class:"token variable"},"r"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"{{it*0.1}}"'),s(),n("span",{class:"token variable"},"fill"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"#556080"'),s(),n("span",{class:"token variable"},"stroke"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"black"'),s(),n("span",{class:"token variable"},"stroke-width"),n("span",{class:"token punctuation"},"="),n("span",{class:"token string"},'"1"'),n("span",{class:"token punctuation"},">"),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"circle"),n("span",{class:"token punctuation"},">"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"each"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"svg"),n("span",{class:"token punctuation"},">"),s(`
`)])])])],-1),T=a(`<p>and the SVG rendered output will be registered as a normal static SVG Image.</p><h3 id="register-custom-svg-images-via-api" tabindex="-1">Register Custom SVG Images via API <a class="header-anchor" href="#register-custom-svg-images-via-api" aria-hidden="true">#</a></h3><p>You can also register your own SVG images programmatically with:</p><div class="language-csharp"><pre><code>Svg<span class="token punctuation">.</span><span class="token function">AddImage</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;svg width=&#39;100&#39; height=&#39;100&#39; viewBox=&#39;0 0 100 100&#39;&gt;...&lt;/svg&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;myicon&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;my-icons&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Where it will register the SVG under the <strong>myicon</strong> name and include it in the <code>/css/my-icons.css</code> css file.</p><p>The same icon can also be included in multiple stylesheets by adding its name to the <code>Svg.CssFiles</code> collection, e.g:</p><div class="language-csharp"><pre><code>Svg<span class="token punctuation">.</span>CssFiles<span class="token punctuation">[</span><span class="token string">&quot;svg-icons&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;myicon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="svg-apis" tabindex="-1">SVG APIs <a class="header-anchor" href="#svg-apis" aria-hidden="true">#</a></h4><p>Once added you can access your SVG images from the available <code>Svg</code> APIs:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> svg <span class="token operator">=</span> Svg<span class="token punctuation">.</span><span class="token function">GetImage</span><span class="token punctuation">(</span><span class="token string">&quot;myicon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> dataUri <span class="token operator">=</span> Svg<span class="token punctuation">.</span><span class="token function">GetDataUri</span><span class="token punctuation">(</span><span class="token string">&quot;myicon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>All SVG images are also available from the <code>Svg.Images</code> collection if you need to access them programmatically:</p><div class="language-csharp"><pre><code><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> entry <span class="token keyword">in</span> Svg<span class="token punctuation">.</span>Images<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> name <span class="token operator">=</span> entry<span class="token punctuation">.</span>Key<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> svg <span class="token operator">=</span> entry<span class="token punctuation">.</span>Value<span class="token punctuation">;</span>
    <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">svg</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="recommended-svg-conventions" tabindex="-1">Recommended SVG conventions <a class="header-anchor" href="#recommended-svg-conventions" aria-hidden="true">#</a></h4><p>All built-in SVG&#39;s are <code>100x100</code> in size, it&#39;s not necessary but for consistency it&#39;s good for your SVG icons also retain the same size, but as they&#39;re vector images they can be easily resized when referencing them in your App.</p><p>If your icons use the <strong>fill</strong> colors registered in:</p><div class="language-csharp"><pre><code>Svg<span class="token punctuation">.</span>FillColors <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;#ffffff&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#556080&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>You will be able replace the fill colors with:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> svg <span class="token operator">=</span> Svg<span class="token punctuation">.</span><span class="token function">GetImage</span><span class="token punctuation">(</span><span class="token string">&quot;myicon&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#e33&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> dataUri <span class="token operator">=</span> Svg<span class="token punctuation">.</span><span class="token function">GetDataUri</span><span class="token punctuation">(</span><span class="token string">&quot;myicon&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#e33&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="using-svg-images-in-css" tabindex="-1">Using SVG images in CSS <a class="header-anchor" href="#using-svg-images-in-css" aria-hidden="true">#</a></h2><p>On Startup ServiceStack generates <code>.css</code> files for all SVG icons in <code>Svg.CssFiles</code> so you can import all icons with a single stylesheet reference with all icons in each CSS file available from <code>/css/{name}.css</code>, e.g:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/css/svg-icons.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Each CSS file includes 2 CSS classes for each SVG image that are both configured with the SVG as a background image:</p><div class="language-css"><pre><code><span class="token selector">.svg-myicon, .fa-myicon</span> <span class="token punctuation">{</span> <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>...<span class="token punctuation">)</span></span> <span class="token punctuation">}</span>
</code></pre></div><p>Use the <code>svg-myicon</code> class when you want to set an HTML Element to use your SVG as its background:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon svg-myicon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>A good way to set the size of all related icons is to use a shared class, e.g:</p><div class="language-css"><pre><code><span class="token selector">.icon</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">background-size</span><span class="token punctuation">:</span> 50px 50px<span class="token punctuation">;</span>
  <span class="token property">background-repeat</span><span class="token punctuation">:</span> no-repeat<span class="token punctuation">;</span>
  <span class="token property">background-position</span><span class="token punctuation">:</span> 2px 2px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>fa-myicon</code> class follows <a href="https://fontawesome.com" target="_blank" rel="noopener noreferrer">Font Awesome</a> convention which you can use to render SVG icons inside buttons, e.g:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-block btn-social btn-light<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fab fa-myicon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> Label
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>You can either use <a href="https://getbootstrap.com/docs/4.3/components/buttons/#examples" target="_blank" rel="noopener noreferrer">Bootstrap Button colors</a> to select the button color you want or use a custom <code>btn-myicon</code> class to choose different backgrounds for each SVG, e.g:</p><div class="language-css"><pre><code><span class="token selector">.btn-myicon</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #212529<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #dae0e5<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> #d3d9df<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The buttons requires the <a href="https://lipis.github.io/bootstrap-social/" target="_blank" rel="noopener noreferrer">Social Buttons for Bootstrap</a> which is also embedded in ServiceStack.dll that can be referenced from <code>/css/buttons.css</code>, e.g:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/css/buttons.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/css/svg-icons.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="inline-css" tabindex="-1">Inline CSS <a class="header-anchor" href="#inline-css" aria-hidden="true">#</a></h3><p>An alternative to using external stylesheet references above, is to embed them as inline styles in your page which can benefit in reduced network requests as well as provide better isolation than including all CSS your App&#39;s use in each page.</p><p>You can use <code>cssIncludes</code> to embed the contents of multiple css files in <code>#Script</code> pages with:</p>`,36),I=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token string"},"'buttons,svg-icons'"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"cssIncludes"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),_=a(`<p>Or in Razor with:</p><div class="language-html"><pre><code>@Html.CssIncludes(&quot;buttons&quot;,&quot;svg-icons&quot;)
</code></pre></div><h2 id="using-svg-images-in-script" tabindex="-1">Using SVG images in <code>#Script</code> <a class="header-anchor" href="#using-svg-images-in-script" aria-hidden="true">#</a></h2><p>In <a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">#Script Pages</a> you can embed SVG xml with the <code>svgImage</code> and <code>svgDataUri</code> scripts:</p>`,4),P=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token string"},"'myicon'"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"svgImage"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token string"},"'myicon'"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"svgImage"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'#e33'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),R=n("p",null,"Inside an HTML IMG element using its data URI:",-1),N=n("div",null,[n("div",{class:"language-html"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("img")]),s(),n("span",{class:"token attr-name"},"src"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("{{ "),n("span",{class:"token punctuation"},"'"),s("myicon"),n("span",{class:"token punctuation"},"'"),s(".svgDataUri() }}"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("img")]),s(),n("span",{class:"token attr-name"},"src"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("{{ "),n("span",{class:"token punctuation"},"'"),s("myicon"),n("span",{class:"token punctuation"},"'"),s(".svgDataUri("),n("span",{class:"token punctuation"},"'"),s("#e33"),n("span",{class:"token punctuation"},"'"),s(") }}"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
`)])])]),n("p",null,"Or as a background image in a custom CSS class:"),n("div",{class:"language-css"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token selector"},".myicon"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token property"},"width"),n("span",{class:"token punctuation"},":"),s(" 150px"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token property"},"height"),n("span",{class:"token punctuation"},":"),s(" 150px"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token property"},"background-size"),n("span",{class:"token punctuation"},":"),s(" 142px"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token property"},"background-position"),n("span",{class:"token punctuation"},":"),s(" 4px"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token property"},"background-repeat"),n("span",{class:"token punctuation"},":"),s(" no-repeat"),n("span",{class:"token punctuation"},";"),s(`
  `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token string"},"'myicon'"),s("."),n("span",{class:"token function"},"svgBackgroundImageCss"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(` 
`),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),M=a(`<p>Where you can use the class name to apply the above CSS to an element:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myicon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="using-svg-images-in-razor" tabindex="-1">Using SVG images in Razor <a class="header-anchor" href="#using-svg-images-in-razor" aria-hidden="true">#</a></h3><p>Likewise there are HTML Helpers with the same name available in Razor Pages, where you can embed SVG images directly with:</p><div class="language-csharp"><pre><code>@Html<span class="token punctuation">.</span><span class="token function">SvgImage</span><span class="token punctuation">(</span><span class="token string">&quot;myicon&quot;</span><span class="token punctuation">)</span>
@Html<span class="token punctuation">.</span><span class="token function">SvgImage</span><span class="token punctuation">(</span><span class="token string">&quot;myicon&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#e33&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>Inside an HTML IMG element using its data URI:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>@Html.SvgDataUri(<span class="token punctuation">&quot;</span>myicon<span class="token punctuation">&quot;</span>)<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>@Html.SvgDataUri(<span class="token punctuation">&quot;</span>myicon<span class="token punctuation">&quot;</span>, <span class="token punctuation">&quot;</span>#e33<span class="token punctuation">&quot;</span>)<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Or inside a CSS class:</p><div class="language-css"><pre><code><span class="token selector">.myicon</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">background-size</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">background-repeat</span><span class="token punctuation">:</span> no-repeat<span class="token punctuation">;</span>
  @Html.<span class="token function">SvgBackgroundImageCss</span><span class="token punctuation">(</span><span class="token string">&quot;myicon&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="server-controls" tabindex="-1">Server Controls <a class="header-anchor" href="#server-controls" aria-hidden="true">#</a></h3><p>Use these <code>#Script</code> methods to reference and modify individual SVG images in <a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">#Script Pages</a>:</p><div class="language-csharp"><pre><code><span class="token function">svgImage</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Svg<span class="token punctuation">.</span><span class="token function">GetImage</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token function">svgImage</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> fillColor<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Svg<span class="token punctuation">.</span>GetImage<span class="token return-type class-name"><span class="token punctuation">(</span>name<span class="token punctuation">,</span> fillColor<span class="token punctuation">)</span></span>
<span class="token function">svgDataUri</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Svg<span class="token punctuation">.</span><span class="token function">GetDataUri</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token function">svgDataUri</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> fillColor<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Svg<span class="token punctuation">.</span>GetDataUri<span class="token return-type class-name"><span class="token punctuation">(</span>name<span class="token punctuation">,</span> fillColor<span class="token punctuation">)</span></span>
<span class="token function">svgFill</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> svg<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> color<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Svg<span class="token punctuation">.</span>Fill<span class="token return-type class-name"><span class="token punctuation">(</span>svg<span class="token punctuation">,</span> color<span class="token punctuation">)</span></span>

<span class="token function">svgBackgroundImageCss</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Svg<span class="token punctuation">.</span><span class="token function">GetBackgroundImageCss</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token function">svgBackgroundImageCss</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> fillColor<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Svg<span class="token punctuation">.</span>GetBackgroundImageCss<span class="token return-type class-name"><span class="token punctuation">(</span>name<span class="token punctuation">,</span> fillColor<span class="token punctuation">)</span></span>
<span class="token function">svgInBackgroundImageCss</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> svg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Svg<span class="token punctuation">.</span><span class="token function">InBackgroundImageCss</span><span class="token punctuation">(</span>svg<span class="token punctuation">)</span>

<span class="token function">svgBaseUrl</span><span class="token punctuation">(</span><span class="token class-name">ScriptScopeContext</span> scope<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
    <span class="token function">req</span><span class="token punctuation">(</span>scope<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ResolveAbsoluteUrl</span><span class="token punctuation">(</span>HostContext<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AssertPlugin</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SvgFeature<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>RoutePath<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token return-type class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token function">svgImages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Svg<span class="token punctuation">.</span>Images<span class="token punctuation">;</span>
<span class="token return-type class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token function">svgDataUris</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Svg<span class="token punctuation">.</span>DataUris<span class="token punctuation">;</span>
<span class="token return-type class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">svgCssFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Svg<span class="token punctuation">.</span>CssFiles<span class="token punctuation">;</span>
</code></pre></div><p>The same API&#39;s are also available in ServiceStack.Razor pages using the <code>@Html</code> helpers below:</p><div class="language-csharp"><pre><code>Html<span class="token punctuation">.</span><span class="token function">SvgImage</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
Html<span class="token punctuation">.</span>SvgImage<span class="token return-type class-name"><span class="token punctuation">(</span>name<span class="token punctuation">,</span> fillColor<span class="token punctuation">)</span></span>
Html<span class="token punctuation">.</span><span class="token function">SvgDataUri</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
Html<span class="token punctuation">.</span>SvgDataUri<span class="token return-type class-name"><span class="token punctuation">(</span>name<span class="token punctuation">,</span> fillColor<span class="token punctuation">)</span></span>
Html<span class="token punctuation">.</span><span class="token function">SvgFill</span><span class="token punctuation">(</span>svg<span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>

Html<span class="token punctuation">.</span><span class="token function">SvgBackgroundImageCss</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
Html<span class="token punctuation">.</span>SvgBackgroundImageCss<span class="token return-type class-name"><span class="token punctuation">(</span>name<span class="token punctuation">,</span> fillColor<span class="token punctuation">)</span></span>
Html<span class="token punctuation">.</span><span class="token function">SvgInBackgroundImageCss</span><span class="token punctuation">(</span>svg<span class="token punctuation">)</span>

Html<span class="token punctuation">.</span><span class="token function">SvgBaseUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="mix-in-svg-images" tabindex="-1">Mix in SVG Images <a class="header-anchor" href="#mix-in-svg-images" aria-hidden="true">#</a></h3><p>A nice consequence of the SVG support is being able to easily create a customized bundles of hand-picked SVG image assets as opposed to being forced to choose from a limited library in a fixed bundle.</p><p>As creating svg bundles just involves dropping SVG images inside your <code>/svg/{group}/</code> folder, we&#39;re also able take advantage of <code>mix</code> to import SVG image-sets into your App with a single command. You can view the current list of all SVG image-sets on <code>mix</code> with:</p><pre><code>$ mix [svg]
</code></pre><p>Currently all <a href="https://material.io/resources/icons/?style=baseline" target="_blank" rel="noopener noreferrer">Material Design Icons</a> are available separately by their logical group names:</p><div class="language-"><pre><code>Results matching tag [svg]:

   1. svg-action         Material Design Action Icons         to: svg/  by @ServiceStack  [svg]
   2. svg-alert          Material Design Alert Icons          to: svg/  by @ServiceStack  [svg]
   3. svg-av             Material Design Audio Visual Icons   to: svg/  by @ServiceStack  [svg]
   4. svg-communication  Material Design Communication Icons  to: svg/  by @ServiceStack  [svg]
   5. svg-content        Material Design Content Icons        to: svg/  by @ServiceStack  [svg]
   6. svg-device         Material Design Device Icons         to: svg/  by @ServiceStack  [svg]
   7. svg-editor         Material Design Editor Icons         to: svg/  by @ServiceStack  [svg]
   8. svg-file           Material Design File Icons           to: svg/  by @ServiceStack  [svg]
   9. svg-hardware       Material Design Hardware Icons       to: svg/  by @ServiceStack  [svg]
  10. svg-image          Material Design Image Icons          to: svg/  by @ServiceStack  [svg]
  11. svg-maps           Material Design Maps Icons           to: svg/  by @ServiceStack  [svg]
  12. svg-navigation     Material Design Navigation Icons     to: svg/  by @ServiceStack  [svg]
  13. svg-places         Material Design Places Icons         to: svg/  by @ServiceStack  [svg]
  14. svg-social         Material Design Social Icons         to: svg/  by @ServiceStack  [svg]
  15. svg-toggle         Material Design Toggle Icons         to: svg/  by @ServiceStack  [svg]
</code></pre></div><p>Once imported, you have the flexibility to further customize them individually to create your App&#39;s custom designer bundle. You also have access to <code>#Script</code> to generate parts of your SVG image dynamically if needed, as seen above in <code>spirals.html</code>.</p><h2 id="embedded-bootstrap-css" tabindex="-1">Embedded Bootstrap CSS <a class="header-anchor" href="#embedded-bootstrap-css" aria-hidden="true">#</a></h2><p>This release also embeds the latest v4.3.1 of Bootstrap which enables built-in UI features like the above dynamic SVG page and 3rd Party OAuth Provider buttons without needing any external references:</p><ul><li><strong>/css/bootstrap.css</strong> - v4.3.1 of bootstrap.min.css</li><li><strong>/css/buttons.css</strong> - Alternative to using <a href="https://lipis.github.io/bootstrap-social/" target="_blank" rel="noopener noreferrer">Social Buttons for Bootstrap</a> and <a href="http://fontawesome.io" target="_blank" rel="noopener noreferrer">fontawesome.io</a></li></ul><p>Note: We intend to keep the embedded resources uptodate with the latest stable Bootstrap version at each ServiceStack release</p><h2 id="refined-project-templates" tabindex="-1">Refined Project Templates <a class="header-anchor" href="#refined-project-templates" aria-hidden="true">#</a></h2><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/ssvs/spa-templates-overview.png" alt=""></p><p>The <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Project Templates have been upgraded to use the latest external dependencies and have all been rewritten to take advantage of the ServiceStack Features added in this release, namely:</p><ul><li><strong>ModularStartup</strong> - <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps can take advantage of the modularity benefits and extensibility of <code>mix</code> features</li><li><strong>Navigation Items</strong> - Simplified maintenance and dynamic navigation items rendering using Navigation controls</li><li><strong>Auth Enabled</strong> - Integrated Auth including dynamic menu, protected pages, auth redirect flow inc. Forbidden pages</li><li><strong>SVG</strong> - Pre-configured to use <code>svg/</code> folder, ready to drop in your App&#39;s assets and go</li><li><strong>Optimal Library Bundles</strong> - CSS/JS bundles are split into optimal hashed library and frequently changing App bundles</li><li><strong>SSL</strong> - As it&#39;s recommended for Web Apps to use SSL, all templates now use <code>https://localhost:5001</code> and configured to use Same Site Cookies by default</li></ul><h3 id="auth-enabled-project-templates" tabindex="-1">Auth Enabled Project Templates <a class="header-anchor" href="#auth-enabled-project-templates" aria-hidden="true">#</a></h3><p>Most Project Templates are now integrated with Credentials Auth and Facebook, Google and Facebook 3rd Party OAuth providers, complete with protected Pages and Services and auth redirect flow to Sign In and Forbidden pages.</p><h4 id="angular-spa" tabindex="-1">angular-spa <a class="header-anchor" href="#angular-spa" aria-hidden="true">#</a></h4><blockquote><p>Angular 8 CLI Bootstrap App</p></blockquote><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/auth/signin/angular-spa.png" alt=""></p><pre><code>$ x new angular-spa ProjectName            # .NET Core
$ x new angular-spa-netfx ProjectName      # Classic ASP.NET on .NET Framework
</code></pre><h4 id="mvcauth" tabindex="-1">mvcauth <a class="header-anchor" href="#mvcauth" aria-hidden="true">#</a></h4><blockquote><p>.NET Core 2.2 MVC Website integrated with ServiceStack Auth</p></blockquote><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/auth/signin/mvcauth.png" alt=""></p><pre><code>$ x new mvcauth ProjectName                # .NET Core
</code></pre><h4 id="mvcidentity" tabindex="-1">mvcidentity <a class="header-anchor" href="#mvcidentity" aria-hidden="true">#</a></h4><blockquote><p>.NET Core 2.2 MVC Website integrated with ServiceStack using MVC Identity Auth</p></blockquote><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/auth/signin/mvcidentity.png" alt=""></p><pre><code>$ x new mvcidentity ProjectName            # .NET Core
</code></pre><h4 id="mvcidentityserver" tabindex="-1">mvcidentityserver <a class="header-anchor" href="#mvcidentityserver" aria-hidden="true">#</a></h4><blockquote><p>.NET Core 2.1 MVC Website integrated with ServiceStack using IdentityServer4 Auth</p></blockquote><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/auth/signin/mvcidentityserver.png" alt=""></p><pre><code>$ x new mvcidentityserver ProjectName      # .NET Core
</code></pre><h4 id="razor" tabindex="-1">razor <a class="header-anchor" href="#razor" aria-hidden="true">#</a></h4><blockquote><p>ServiceStack.Razor Bootstrap Website</p></blockquote><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/auth/signin/razor.png" alt=""></p><pre><code>$ x new razor ProjectName                  # .NET Core
$ x new razor-corefx ProjectName           # ASP.NET Core on .NET Framework
$ x new razor-netfx ProjectName            # Classic ASP.NET on .NET Framework
</code></pre><h4 id="react-spa" tabindex="-1">react-spa <a class="header-anchor" href="#react-spa" aria-hidden="true">#</a></h4><blockquote><p>React Create App CLI Bootstrap App</p></blockquote><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/auth/signin/react-spa.png" alt=""></p><pre><code>$ x new react-spa ProjectName              # .NET Core
$ x new react-spa-netfx ProjectName        # Classic ASP.NET on .NET Framework
</code></pre><h4 id="react-lite" tabindex="-1">react-lite <a class="header-anchor" href="#react-lite" aria-hidden="true">#</a></h4><blockquote><p><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Simple + lite (npm-free) React SPA using TypeScript</p></blockquote><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/auth/signin/react-lite.png" alt=""></p><pre><code>$ x new react-lite ProjectName             # .NET Core
$ x new react-lite-corefx ProjectName      # ASP.NET Core on .NET Framework
</code></pre><h4 id="script" tabindex="-1">script <a class="header-anchor" href="#script" aria-hidden="true">#</a></h4><blockquote><p>#Script Pages Bootstrap Website</p></blockquote><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/auth/signin/script.png" alt=""></p><pre><code>$ x new script ProjectName                 # .NET Core
$ x new script-corefx ProjectName          # ASP.NET Core on .NET Framework
$ x new script-netfx ProjectName           # Classic ASP.NET on .NET Framework
</code></pre><h4 id="vue-spa" tabindex="-1">vue-spa <a class="header-anchor" href="#vue-spa" aria-hidden="true">#</a></h4><blockquote><p>Vue CLI Bootstrap App</p></blockquote><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/auth/signin/vue-spa.png" alt=""></p><pre><code>$ x new vue-spa ProjectName                # .NET Core
$ x new vue-spa-netfx ProjectName          # Classic ASP.NET on .NET Framework
</code></pre><h4 id="vue-lite" tabindex="-1">vue-lite <a class="header-anchor" href="#vue-lite" aria-hidden="true">#</a></h4><blockquote><p><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Simple + lite (npm-free) Vue SPA using TypeScript</p></blockquote><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/auth/signin/vue-lite.png" alt=""></p><pre><code>$ x new vue-lite ProjectName               # .NET Core
$ x new vue-lite-corefx ProjectName        # ASP.NET Core on .NET Framework
</code></pre><h4 id="vue-nuxt" tabindex="-1">vue-nuxt <a class="header-anchor" href="#vue-nuxt" aria-hidden="true">#</a></h4><blockquote><p>Nuxt.js SPA App with Bootstrap</p></blockquote><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/auth/signin/vue-nuxt.png" alt=""></p><pre><code>$ x new vue-nuxt ProjectName               # .NET Core
$ x new vue-nuxt-netfx ProjectName         # Classic ASP.NET on .NET Framework
</code></pre><h3 id="optimal-library-bundles" tabindex="-1">Optimal Library Bundles <a class="header-anchor" href="#optimal-library-bundles" aria-hidden="true">#</a></h3><p>To facilitate splitting JS and CSS assets into multiple bundles without needing to create artificial directories for each bundle you can use the <code>!</code> prefix to exclude files from bundles.</p><p>Example from <code>sharp</code> <a href="https://github.com/NetCoreTemplates/sharp/blob/master/MyApp/wwwroot/_layout.html" target="_blank" rel="noopener noreferrer">_layout.html</a>:</p>`,78),G=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"debug"),s(),n("span",{class:"token variable"},"?"),s(),n("span",{class:"token string"},"''"),s(),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'[hash].min'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"to"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"min"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),s(),n("span",{class:"token string"},"'!/assets/css/default.css'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'/assets/css/'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'/css/buttons.css'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'/css/svg-auth.css'"),n("span",{class:"token punctuation"},","),s(` 
     `),n("span",{class:"token string"},"'/css/svg-icons.css'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'/css/app.css'"),s(),n("span",{class:"token punctuation"},"]"),s(`
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleCss"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"css"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"css"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),s(),n("span",{class:"token string"},"'/assets/css/default.css'"),n("span",{class:"token punctuation"},"]"),s(`
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleCss"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"css"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"css"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),U=n("p",null,[s("Here the App specific "),n("code",null,"default.css"),s(" is excluded when bundling all other "),n("code",null,".css"),s(" files in the "),n("code",null,"/assets/css/"),s(" directory as it's included on its own in a separate app "),n("strong",null,"bundle.css"),s(" below.")],-1),E=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token punctuation"},"["),s(),n("span",{class:"token string"},"'!/assets/js/dtos.js'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'!/assets/js/default.js'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'/assets/js/jquery.min.js'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'/assets/js/'"),s(),n("span",{class:"token punctuation"},"]"),s(`
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleJs"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"lib"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(` 

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"["),s(),n("span",{class:"token string"},"'/assets/js/dtos.js'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'/assets/js/default.js'"),s(),n("span",{class:"token punctuation"},"]"),s(`
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"bundleJs"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"minify"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"cache"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"disk"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"out"),n("span",{class:"token punctuation"},":"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"bundle$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"min"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"js"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),H=a(`<p>Likewise the App specific <code>dtos.js</code> and <code>default.js</code> files are excluded from the library bundle and included in its own app <strong>bundle.js</strong>.</p><p>The equivalent bundle API&#39;s are also available in ServiceStack.Razor projects as seen in the <code>razor</code> template&#39;s <a href="https://github.com/NetCoreTemplates/razor/blob/master/MyApp/Views/Shared/_Layout.cshtml" target="_blank" rel="noopener noreferrer">_Layout.cshtml</a>:</p><div class="language-csharp"><pre><code>@<span class="token punctuation">{</span> 
  <span class="token class-name"><span class="token keyword">var</span></span> debug <span class="token operator">=</span> DebugMode<span class="token punctuation">;</span>
  <span class="token class-name"><span class="token keyword">var</span></span> min <span class="token operator">=</span> debug <span class="token punctuation">?</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;[hash].min&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

@Html<span class="token punctuation">.</span><span class="token function">BundleCss</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">BundleOptions</span> <span class="token punctuation">{</span>
    Sources <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;!/assets/css/default.css&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;/assets/css/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;/css/buttons.css&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;/css/svg-auth.css&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;/css/svg-icons.css&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;/css/app.css&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    SaveToDisk <span class="token operator">=</span> <span class="token operator">!</span>debug<span class="token punctuation">,</span>
    OutputTo <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;/css/lib.bundle</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">min</span><span class="token punctuation">}</span></span><span class="token string">.css&quot;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

@Html<span class="token punctuation">.</span><span class="token function">BundleCss</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">BundleOptions</span> <span class="token punctuation">{</span>
    Sources <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;/assets/css/default.css&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Minify <span class="token operator">=</span> <span class="token operator">!</span>debug<span class="token punctuation">,</span>
    Cache <span class="token operator">=</span> <span class="token operator">!</span>debug<span class="token punctuation">,</span>
    SaveToDisk <span class="token operator">=</span> <span class="token operator">!</span>debug<span class="token punctuation">,</span>
    OutputTo <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;/css/bundle</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">min</span><span class="token punctuation">}</span></span><span class="token string">.css&quot;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//...</span>

@Html<span class="token punctuation">.</span><span class="token function">BundleJs</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">BundleOptions</span> <span class="token punctuation">{</span>
    Sources <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;!/assets/js/dtos.js&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;!/assets/js/default.js&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;/assets/js/jquery.min.js&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;/assets/js/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    SaveToDisk <span class="token operator">=</span> <span class="token operator">!</span>debug<span class="token punctuation">,</span>
    OutputTo <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;/js/lib.bundle</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">min</span><span class="token punctuation">}</span></span><span class="token string">.js&quot;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

@Html<span class="token punctuation">.</span><span class="token function">BundleJs</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">BundleOptions</span> <span class="token punctuation">{</span>
    Sources <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;/assets/js/dtos.js&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;/assets/js/default.js&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Minify <span class="token operator">=</span> <span class="token operator">!</span>debug<span class="token punctuation">,</span>
    Cache <span class="token operator">=</span> <span class="token operator">!</span>debug<span class="token punctuation">,</span>
    SaveToDisk <span class="token operator">=</span> <span class="token operator">!</span>debug<span class="token punctuation">,</span>
    OutputTo <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;/js/bundle</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">min</span><span class="token punctuation">}</span></span><span class="token string">.js&quot;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Single Page App Templates also makes use of <code>cssIncludes</code> to embed multiple <code>*.css</code> files inline in the initial page request, avoiding external resource requests as seen in the <code>vue-lite</code> template <a href="https://github.com/NetCoreTemplates/vue-lite/blob/master/wwwroot/_layout.html" target="_blank" rel="noopener noreferrer">_layout.html</a>:</p>`,4),F=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token string"},"'buttons,svg-auth,app,/assets/css/default.css'"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"cssIncludes"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token string"},"'svg-icons'"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"cssIncludes"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"svgFill"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'#41B883'"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),O=a('<p>By default <code>cssIncludes</code> references files in the format <code>/css/{name}.css</code> which can be overridden by specifying the Virtual Path to the file. It can be useful to use in conjunction with <code>svgFill</code> to change the <strong>fill</strong> color of all SVG images in the SVG CSS bundle as seen above.</p><h3 id="new-auth-script-methods" tabindex="-1">New Auth <code>#Script</code> methods <a class="header-anchor" href="#new-auth-script-methods" aria-hidden="true">#</a></h3><ul><li>Use <code>hasRole</code> and <code>hasPermission</code> methods to validate Authenticated Users</li><li>Use <code>assertRole</code> and <code>assertPermission</code> to validate that Users have role/permission otherwise returns <strong>403 Forbidden</strong> response <ul><li>If configured, browsers will return <a href="/error-handling.html#fallback-error-pages">Fallback Error Page</a> response</li></ul></li></ul><p>Example Usage a the top of <code>sharp</code> template&#39;s <strong>Admin</strong> only <a href="https://github.com/NetCoreTemplates/sharp/blob/master/MyApp/wwwroot/admin/index.html" target="_blank" rel="noopener noreferrer">/admin/index.html</a> page:</p>',4),V=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token string"},"'requires-auth'"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"partial"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"role"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'Admin'"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),D=n("p",null,[n("a",{href:"https://github.com/NetCoreTemplates/sharp/blob/master/MyApp/wwwroot/_requires-auth-partial.html",target:"_blank",rel:"noopener noreferrer"},"_requires-auth-partial.html"),s(" validates User is authenticated (otherwise redirects to "),n("code",null,"/login"),s(" page) and contains any specified roles and permissions (otherwise returns "),n("code",null,"/forbidden"),s(" page):")],-1),j=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"redirectIfNotAuthenticated"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"if"),s(),n("span",{class:"token variable"},"role"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"assertRole"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"role"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"if"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"if"),s(),n("span",{class:"token variable"},"permission"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"assertPermission"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"permission"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"if"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),L=a(`<h3 id="razor-base-methods" tabindex="-1">Razor base methods <a class="header-anchor" href="#razor-base-methods" aria-hidden="true">#</a></h3><p>The same API&#39;s are also available in Razor Pages:</p><ul><li><code>AssertRoleAsync()</code> <code>AssertPermissionAsync()</code></li><li><code>AssertRole()</code> and <code>AssertPermission()</code></li><li><code>RedirectTo()</code> and <code>RedirectToAsync()</code></li></ul><p>Example usage in <code>razor</code> template&#39;s <a href="https://github.com/NetCoreTemplates/razor/blob/master/MyApp/wwwroot/admin/default.cshtml" target="_blank" rel="noopener noreferrer">/admin/default.cshtml</a> page:</p><div class="language-csharp"><pre><code><span class="token return-type class-name">@<span class="token keyword">await</span></span> Html<span class="token punctuation">.</span><span class="token function">PartialAsync</span><span class="token punctuation">(</span><span class="token string">&quot;RequiresRole&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Admin&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>Which is defined in <a href="https://github.com/NetCoreTemplates/razor/blob/master/MyApp/Views/Shared/RequiresRole.cshtml" target="_blank" rel="noopener noreferrer">/Views/Shared/RequiresRole.cshtml</a> as:</p><div class="language-csharp"><pre><code>    
@model <span class="token keyword">string</span>
@<span class="token punctuation">{</span>
    <span class="token function">RedirectIfNotAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">AssertRoleAsync</span><span class="token punctuation">(</span>Model<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="script-features" tabindex="-1"><code>#Script</code> Features <a class="header-anchor" href="#script-features" aria-hidden="true">#</a></h2><p>We&#39;re happy to be able to share some exciting features added to <code>#Script</code> that greatly improves the usability of the language.</p><h3 id="all-script-methods-can-be-used-as-extension-methods" tabindex="-1">All Script Methods can be used as Extension Methods! <a class="header-anchor" href="#all-script-methods-can-be-used-as-extension-methods" aria-hidden="true">#</a></h3><p>A core feature of <code>#Script</code> is that it runs in a sandbox and only has access to functionality that&#39;s configured in its <code>ScriptContext</code> that it runs in, so by design <code>#Script</code> is prohibited from calling instance methods so they only have a read-only view of your objects unless you explicitly register <code>ScriptMethods</code> that allows them to change them.</p><p>This frees up the <code>instance.method()</code> syntax to be put to other use which can now be used to call every script method as an extension method. This can greatly improve the readability and execution flow of code, e,g. we can rewrite our previous <a href="https://docs.servicestack.net/js-utils#eval" target="_blank" rel="noopener noreferrer">JS Utils Eval</a> example:</p><div class="language-js"><pre><code><span class="token function">itemsOf</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token function">padRight</span><span class="token punctuation">(</span><span class="token function">reverse</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&#39;_&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>into the more readable form using the same methods as extension methods off the first argument, e.g:</p><div class="language-js"><pre><code><span class="token number">3.</span><span class="token function">itemsOf</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padRight</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&#39;_&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>It&#39;s been a joy being able to rewrite existing <code>#Script</code> code to use extension methods where it improves readability as done when <a href="https://github.com/ServiceStack/sharpscript/commit/1794c11494c678bf35eef651352043a7364ec286" target="_blank" rel="noopener noreferrer">rewriting LINQ examples</a>.</p><p>As an example, C#&#39;s 101 LINQ examples <a href="https://sharpscript.net/linq/grouping-operators#linq43-groupby---nested" target="_blank" rel="noopener noreferrer">most complicated LINQ expression</a> can now be rewritten from its original source:</p>`,17),B=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"customers"),s(` 
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"map"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token punctuation"},"{"),s(` 
        `),n("span",{class:"token variable"},"CompanyName"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"CompanyName"),n("span",{class:"token punctuation"},","),s(` 
        `),n("span",{class:"token variable"},"YearGroups"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"map"),s(),n("span",{class:"token punctuation"},"("),s(`
            `),n("span",{class:"token variable"},"groupBy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Orders"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"it"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"OrderDate"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Year"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token variable"},"yg"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token punctuation"},"{"),s(` 
                `),n("span",{class:"token variable"},"Year"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"yg"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Key"),n("span",{class:"token punctuation"},","),s(`
                `),n("span",{class:"token variable"},"MonthGroups"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"map"),s(),n("span",{class:"token punctuation"},"("),s(`
                    `),n("span",{class:"token variable"},"groupBy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"yg"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"o"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"o"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"OrderDate"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Month"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
                    `),n("span",{class:"token variable"},"mg"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"Month"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"mg"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Key"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Orders"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"mg"),s(),n("span",{class:"token punctuation"},"}"),s(`
                `),n("span",{class:"token punctuation"},")"),s(` 
            `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},")"),s(` 
     `),n("span",{class:"token punctuation"},"}"),s(`
     `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"htmlDump"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),$=n("p",null,"to use extension methods which greatly improves its readability as its execution flow is now able to read from left-to-right:",-1),W=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token variable"},"customers"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"map"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token punctuation"},"{"),s(` 
    `),n("span",{class:"token variable"},"CompanyName"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"CompanyName"),n("span",{class:"token punctuation"},","),s(` 
    `),n("span",{class:"token variable"},"YearGroups"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"groupBy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"it"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"OrderDate"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Year"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"yg"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(`
        `),n("span",{class:"token punctuation"},"{"),s(` 
            `),n("span",{class:"token variable"},"Year"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"yg"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Key"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token variable"},"MonthGroups"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"yg"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"groupBy"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"o"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"o"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"OrderDate"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Month"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"map"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"mg"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(` 
                `),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"Month"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"mg"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"Key"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Orders"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"mg"),s(),n("span",{class:"token punctuation"},"}"),s(`
            `),n("span",{class:"token punctuation"},")"),s(` 
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},")"),s(` 
   `),n("span",{class:"token punctuation"},"}"),s(`
   `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"htmlDump"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),z=a(`<p>Which we believe now makes it even more readable than the <a href="https://sharpscript.net/linq/grouping-operators#linq43-groupby---nested" target="_blank" rel="noopener noreferrer">original C# LINQ Expression</a>:</p><div class="language-csharp"><pre><code><span class="token class-name">List</span> customers <span class="token operator">=</span> <span class="token function">GetCustomerList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token class-name"><span class="token keyword">var</span></span> customerOrderGroups <span class="token operator">=</span> 
    <span class="token keyword">from</span> c <span class="token keyword">in</span> customers 
    <span class="token keyword">select</span> 
        <span class="token keyword">new</span> 
        <span class="token punctuation">{</span> 
            c<span class="token punctuation">.</span>CompanyName<span class="token punctuation">,</span> 
            YearGroups <span class="token operator">=</span> 
                <span class="token keyword">from</span> o <span class="token keyword">in</span> c<span class="token punctuation">.</span>Orders 
                <span class="token keyword">group</span> o <span class="token keyword">by</span> o<span class="token punctuation">.</span>OrderDate<span class="token punctuation">.</span>Year <span class="token keyword">into</span> yg 
                <span class="token keyword">select</span> 
                    <span class="token keyword">new</span> 
                    <span class="token punctuation">{</span> 
                        Year <span class="token operator">=</span> yg<span class="token punctuation">.</span>Key<span class="token punctuation">,</span> 
                        MonthGroups <span class="token operator">=</span> 
                            <span class="token keyword">from</span> o <span class="token keyword">in</span> yg 
                            <span class="token keyword">group</span> o <span class="token keyword">by</span> o<span class="token punctuation">.</span>OrderDate<span class="token punctuation">.</span>Month <span class="token keyword">into</span> mg 
                            <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> Month <span class="token operator">=</span> mg<span class="token punctuation">.</span>Key<span class="token punctuation">,</span> Orders <span class="token operator">=</span> mg <span class="token punctuation">}</span> 
                    <span class="token punctuation">}</span> 
        <span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="javascript-array-support" tabindex="-1">JavaScript Array Support <a class="header-anchor" href="#javascript-array-support" aria-hidden="true">#</a></h3><p>With the new extension method support allowing us to add instance methods on any object, we took the opportunity to add JS Array methods support to further improve <code>#Script</code> source compatibility with JavaScript.</p><p>This also provides a good opportunity to showcase <code>#Script</code> other exciting feature, it&#39;s new support for <strong>code</strong> blocks.</p><p>Here are <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer">Mozilla&#39;s Array examples</a> in <code>#Script</code>:</p><pre><code>\`\`\`code
\`Create an Array\`
[&#39;Apple&#39;, &#39;Banana&#39;] | to =&gt; fruits
fruits.Count

\`\\nAccess (index into) an Array Item\`
fruits[0] | to =&gt; first
first

\`\\nLoop over an Array\`
#each item in fruits
    \`\${item}, \${index}\`
/each

[] | to =&gt; sb
fruits.forEach((item,index,array) =&gt; sb.push(\`\${item}, \${index}\`))
sb.join(\`\\n\`)

\`\\nAdd to the end of an Array\`

fruits.push(&#39;Orange&#39;) | to =&gt; newLength
newLength

\`\\nRemove from the end of an Array\`
fruits.pop() | to =&gt; last
last

\`\\nRemove from the front of an Array\`
fruits.shift() | to =&gt; first
first

\`\\nAdd to the front of an Array\`
fruits.unshift(&#39;Strawberry&#39;) | to =&gt; newLength
newLength

\`\\nFind the index of an item in the Array\`
fruits.push(&#39;Mango&#39;) | end

fruits.indexOf(&#39;Banana&#39;) | to =&gt; pos
pos

\`\\nRemove an item by index position\`
fruits.splice(pos, 1) | to =&gt; removedItem
removedItem | join
fruits | join

\`\\nRemove items from an index position\`
[&#39;Cabbage&#39;, &#39;Turnip&#39;, &#39;Radish&#39;, &#39;Carrot&#39;] | to =&gt; vegetables 
vegetables | join

1 | to =&gt; pos
2 | to =&gt; n

vegetables.splice(pos, n) | to =&gt; removedItems 
vegetables | join
removedItems | join

\`\\nCopy an Array\`
fruits.slice() | join
\`\`\`
</code></pre><p>Which can be run with <code>web run &lt;script&gt;.ss</code> to view its expected output:</p><pre><code>Create an Array
2

Access (index into) an Array Item
Apple

Loop over an Array
Apple, 0
Banana, 1

Apple, 0
Banana, 1

Add to the end of an Array
3

Remove from the end of an Array
Orange

Remove from the front of an Array
Apple

Add to the front of an Array
2

Find the index of an item in the Array
1

Remove an item by index position
Banana
Strawberry,Mango

Remove items from an index position
Cabbage,Turnip,Radish,Carrot
Cabbage,Carrot
Turnip,Radish

Copy an Array
Strawberry,Mango
</code></pre><p>Most JS Array methods are supported, including the latest additions from ES2019:</p><ul><li><code>concat</code></li><li><code>every</code></li><li><code>filter</code></li><li><code>find</code></li><li><code>findIndex</code></li><li><code>flat</code></li><li><code>flatMap</code></li><li><code>forEach</code></li><li><code>includes</code></li><li><code>indexOf</code></li><li><code>join</code></li><li><code>keys</code></li><li><code>lastIndexOf</code></li><li><code>map</code></li><li><code>pop</code></li><li><code>push</code></li><li><code>reduce</code></li><li><code>reverse</code></li><li><code>shift</code></li><li><code>slice</code></li><li><code>some</code></li><li><code>sort</code></li><li><code>splice</code></li><li><code>toString</code></li><li><code>unshift</code></li><li><code>values</code></li></ul><h3 id="vfs-script-methods-object-api" tabindex="-1">VFS Script Methods Object API <a class="header-anchor" href="#vfs-script-methods-object-api" aria-hidden="true">#</a></h3><p>This now makes it possible to provide a more natural OOP API over object instances using just script methods, e.g. all <a href="https://sharpscript.net/docs/protected-scripts#virtual-file-system-apis" target="_blank" rel="noopener noreferrer">Protected Scripts Virtual File System APIs</a> are executed against the <code>ScriptContext.VirtualFiles</code> which in #Script Pages is configured to the <strong>WebRoot</strong> FileSystem by default:</p><div class="language-js"><pre><code><span class="token function">allFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>With the new extension method support we&#39;re able to include an overloaded method that includes <code>IVirtualPathProvider</code> as its first argument:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>IVirtualFile<span class="token punctuation">&gt;</span></span> <span class="token function">allFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">allFiles</span><span class="token punctuation">(</span>VirtualFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>IVirtualFile<span class="token punctuation">&gt;</span></span> <span class="token function">allFiles</span><span class="token punctuation">(</span><span class="token class-name">IVirtualPathProvider</span> vfs<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> vfs<span class="token punctuation">.</span><span class="token function">GetAllFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This allows being able to use the same script method name against any VFS provider by calling it like an instance method, e.g:</p><div class="language-js"><pre><code><span class="token function">vfsFileSystem</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> fs

fs<span class="token punctuation">.</span><span class="token function">allFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Which is now supported on all VFS APIs on the left with its C# implementation where <code>vfs</code> is an instance of <code>IVirtualPathProvider</code>:</p><table><thead><tr><th style="text-align:left;">Protected VFS Script Method</th><th style="text-align:left;">C# Implementation</th></tr></thead><tbody><tr><td style="text-align:left;">allFiles()</td><td style="text-align:left;">vfs.GetAllFiles()</td></tr><tr><td style="text-align:left;">allRootFiles()</td><td style="text-align:left;">vfs.GetRootFiles()</td></tr><tr><td style="text-align:left;">allRootDirectories()</td><td style="text-align:left;">vfs.GetRootDirectories()</td></tr><tr><td style="text-align:left;">dir(virtualPath)</td><td style="text-align:left;">vfs.GetDirectory(virtualPath)</td></tr><tr><td style="text-align:left;">dirExists(virtualPath)</td><td style="text-align:left;">vfs.DirectoryExists(virtualPath)</td></tr><tr><td style="text-align:left;">dirFile(dirPath, fileName)</td><td style="text-align:left;">vfs.GetDirectory(dirPath)?.GetFile(fileName)</td></tr><tr><td style="text-align:left;">dirFiles(virtualPath)</td><td style="text-align:left;">vfs.GetDirectory(dirPath)?.GetFiles()</td></tr><tr><td style="text-align:left;">dirDirectory(dirPath, dirName)</td><td style="text-align:left;">vfs.GetDirectory(dirPath)?.GetDirectory(dirName)</td></tr><tr><td style="text-align:left;">dirDirectories(dirPath)</td><td style="text-align:left;">vfs.GetDirectory(dirPath)?.GetDirectories()</td></tr><tr><td style="text-align:left;">findFilesInDirectory(dirPath, globPattern)</td><td style="text-align:left;">vfs.GetDirectory(dirPath)?.GetAllMatchingFiles(globPattern)</td></tr><tr><td style="text-align:left;">findFiles(globPattern)</td><td style="text-align:left;">vfs.GetAllMatchingFiles(globPattern)</td></tr><tr><td style="text-align:left;">fileExists(virtualPath)</td><td style="text-align:left;">vfs.FileExists(virtualPath)</td></tr><tr><td style="text-align:left;">file(virtualPath)</td><td style="text-align:left;">vfs.GetFile(virtualPath)</td></tr><tr><td style="text-align:left;">writeFile(virtualPath, contents)</td><td style="text-align:left;">vfs.WriteFile(virtualPath, contents)</td></tr><tr><td style="text-align:left;">writeFiles(files)</td><td style="text-align:left;">vfs.WriteFiles(files)</td></tr><tr><td style="text-align:left;">writeTextFiles(textFiles)</td><td style="text-align:left;">vfs.WriteFiles(textFiles)</td></tr><tr><td style="text-align:left;">appendToFile(virtualPath, contents)</td><td style="text-align:left;">vfs.AppendFile(virtualPath, contents)</td></tr><tr><td style="text-align:left;">deleteFile(virtualPath)</td><td style="text-align:left;">vfs.DeleteFile(virtualPath)</td></tr><tr><td style="text-align:left;">deleteDirectory(virtualPath)</td><td style="text-align:left;">vfs.DeleteFolder(virtualPath)</td></tr><tr><td style="text-align:left;">fileTextContents(virtualPath)</td><td style="text-align:left;">vfs.GetFile(virtualPath)?.ReadAllText()</td></tr><tr><td style="text-align:left;">fileBytesContent(virtualPath)</td><td style="text-align:left;">vfs.GetFile(virtualPath)?.ReadAllBytes()</td></tr><tr><td style="text-align:left;">fileHash(virtualPath)</td><td style="text-align:left;">vfs.GetFileHash(virtualPath)</td></tr></tbody></table><p>All above VFS APIs work against the built-in VFS providers below:</p><div class="language-js"><pre><code><span class="token function">vfsMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                  <span class="token operator">|</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> memFs
<span class="token function">vfsFileSystem</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span>       <span class="token operator">|</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> fs
<span class="token function">vfsGist</span><span class="token punctuation">(</span>gistId<span class="token punctuation">,</span> accessToken<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> gistFs
<span class="token function">vfsGist</span><span class="token punctuation">(</span>gistId<span class="token punctuation">)</span>              <span class="token operator">|</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> gistReadOnlyFs
</code></pre></div><p>They can also be used against AWS S3 and Azure Blob storage providers if you configure your <code>ScriptContext</code> with <code>AwsScripts</code> from <strong>ServiceStack.Aws</strong> package or <code>AzureScripts</code> from <strong>ServiceStack.Azure</strong>:</p><div class="language-js"><pre><code><span class="token function">vfsS3</span><span class="token punctuation">(</span>accessKey<span class="token punctuation">,</span> secretAccessKey<span class="token punctuation">,</span> region<span class="token punctuation">,</span> bucketName<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> s3Fs
<span class="token function">vfsAzureBlob</span><span class="token punctuation">(</span>connectionString<span class="token punctuation">,</span> containerName<span class="token punctuation">)</span>         <span class="token operator">|</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> azureBlobFs
</code></pre></div><h3 id="code-blocks" tabindex="-1">Code Blocks <a class="header-anchor" href="#code-blocks" aria-hidden="true">#</a></h3><p>We&#39;ve caught a glimpse of <code>#Script</code> new <code>code</code> blocks feature in the JavaScript Array Example above which dramatically reduces the boilerplate that would&#39;ve otherwise been needed where each statement would&#39;ve needed to be wrapped in an expression block.</p><p>They&#39;re akin to Razor&#39;s statement blocks which inverts Razor&#39;s <strong>mode</strong> of emitting text to treating text inside statement blocks as code, e.g:</p><div class="language-csharp"><pre><code>@<span class="token punctuation">{</span> 
    <span class="token class-name"><span class="token keyword">var</span></span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Basic Calc
a <span class="token operator">+</span> b <span class="token operator">=</span> @<span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span>
</code></pre></div><p>The equivalent in <code>#Script</code> using code blocks:</p><div class="language-"><pre><code>    \`\`\`code
    1 | to =&gt; a
    2 | to =&gt; b
    \`\`\`
    Basic Calc
    a + b = &lt;code v-pre&gt;{{a + b}}&lt;/code&gt;
</code></pre></div><p>The entire <strong>code</strong> feature is implemented within a <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/Script/ScriptPreprocessors.cs" target="_blank" rel="noopener noreferrer">simple TransformCodeBlocks PreProcessor</a> that&#39;s pre-configured by default and so can be removed by clearing the <code>Preprocessors</code> List:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ScriptContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span>Preprocessors<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="preprocessor-code-transformations" tabindex="-1">Preprocessor Code Transformations <a class="header-anchor" href="#preprocessor-code-transformations" aria-hidden="true">#</a></h4>`,33),Q=n("div",null,[n("p",null,[s("It performs a basic transformation that assumes every statement is an expression and wraps them in an "),n("code",null,"{{...}}"),s(" expression block, the exception are expressions which are already within an expression block which are ignored and you still need to use to wrap multi-line expressions in "),n("code",null,"code"),s(" blocks.")]),n("p",null,[s("The other transformation "),n("code",null,"code"),s(" blocks perform is collapsing new lines and trimming each line, this is so scripts which are primarily structured and indented for readability aren't reflected in its text output.")]),n("p",null,[s("We can see an example of how "),n("code",null,"code"),s(" blocks work from the example below:")]),n("div",{class:"language-"},[n("pre",{"v-pre":""},[n("code",null,`    <!--
    title: The title
    -->

    # {{title}}

    {{ 1 + 1 }}

    \`\`\`code
    * Odd numbers < 5 *
    #each i in range(1,5)

        #if i.isOdd()
            \`\${i} is odd\`
        else
            \`\${i} is even\`
        /if

    /each
    \`\`\`

    \`\`\`code
    1 + 2 * 3
    \`\`\`

    \`\`\`code
        {{ 1 + 1 }}

        {{#if debug}}
            {{ range(1,5) 
            | where => it.isOdd() 
            | map => it * it   
            | join(',')
            }}
        {{/if}}
    \`\`\`
`)])])],-1),J=n("p",null,[s("Before this script is run it's processed by the "),n("a",{href:"https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/Script/ScriptPreprocessors.cs",target:"_blank",rel:"noopener noreferrer"},"TransformCodeBlocks PreProcessor"),s(" which transforms it to the normal "),n("code",null,"#Script"),s(" code:")],-1),Y=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},"!"),n("span",{class:"token variable"},"--"),s(`
`),n("span",{class:"token variable"},"title"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"The"),s(),n("span",{class:"token variable"},"title"),s(`
`),n("span",{class:"token variable"},"--"),n("span",{class:"token punctuation"},">"),s(`

`),n("span",{class:"token punctuation"},"#"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"title"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token number"},"1"),s(),n("span",{class:"token punctuation"},"+"),s(),n("span",{class:"token number"},"1"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token variable"},"Odd"),s(),n("span",{class:"token variable"},"numbers"),s(),n("span",{class:"token punctuation"},"<"),s(),n("span",{class:"token number"},"5"),s(),n("span",{class:"token punctuation"},"*"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"each"),s(),n("span",{class:"token variable"},"i"),s(),n("span",{class:"token variable"},"in"),s(),n("span",{class:"token variable"},"range"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"if"),s(),n("span",{class:"token variable"},"i"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"isOdd"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"i"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token variable"},"is"),s(),n("span",{class:"token variable"},"odd"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"else"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"i"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token variable"},"is"),s(),n("span",{class:"token variable"},"even"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"if"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"each"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token number"},"1"),s(),n("span",{class:"token punctuation"},"+"),s(),n("span",{class:"token number"},"2"),s(),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token number"},"1"),s(),n("span",{class:"token punctuation"},"+"),s(),n("span",{class:"token number"},"1"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"if"),s(),n("span",{class:"token variable"},"debug"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"range"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"where"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"it"),n("span",{class:"token punctuation"},"."),n("span",{class:"token variable"},"isOdd"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"map"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"it"),s(),n("span",{class:"token punctuation"},"*"),s(),n("span",{class:"token variable"},"it"),s(`
`),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"join"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"','"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"if"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),K=a(`<p>The resulting output when executed is:</p><div class="language-"><pre><code># The title

2

1 is odd
2 is even
3 is odd
4 is even
5 is odd

7

2
1,9,25
</code></pre></div><h3 id="shell-scripts" tabindex="-1">Shell Scripts <a class="header-anchor" href="#shell-scripts" aria-hidden="true">#</a></h3><p>Unlike most languages, <code>#Script</code> has 2 outputs, the side-effect of the script itself and its textual output which makes it ideal for literate programming where executable snippets can be embedded inside an executable document.</p><p><code>code</code> blocks are a convenient markup for embedding executable scripts within a document without the distracting boilerplate of wrapping each statement in expression blocks. Together with <code>web watch</code>, <code>#Script</code> allows for an iterative, exploratory style of programming in a live programming environment that benefits many domains whose instant progressive feedback unleashes an unprecedented amount of productivity, one of those areas it benefits is shell scripting where the iterative feedback is invaluable in working towards a solution for automating the desired task.</p><p>Other protected script methods added in this release to improve Usage in shell scripts, include:</p><ul><li><code>string proc(string exeFileName, {arguments:string, dir:string})</code><ul><li><strong>arguments</strong>: command line args</li><li><strong>dir</strong>: working directory</li></ul></li><li><code>sh(cmdArgs, {dir:string})</code><ul><li>Executes shell commands. Uses <code>cmd.exe /C {cmdArgs}</code> in Windows, otherwise <code>/bin/bash -c {cmdArgs}</code> on macOS/Linux</li></ul></li><li><code>string exePath(string exeName)</code><ul><li>Returns the full path to an executable located in the users <strong>$PATH</strong></li></ul></li><li><code>string osPaths(string path)</code><ul><li>Rewrite paths to use <code>\\</code> for Windows, otherwise uses <code>/</code></li></ul></li></ul><p>From this list, you&#39;re likely to use <code>sh</code> the most to execute arbitrary commands with:</p><div class="language-hbs"><pre><code><span class="token variable">cmd</span> <span class="token punctuation">|</span> <span class="token variable">sh</span>
</code></pre></div><blockquote><p>As with any <code>#Script</code> method, it can also be executed using the less natural forms of <code>cmd.sh()</code> or <code>sh(cmd)</code></p></blockquote><p>Which will emit the <strong>StandardOutput</strong> of the command if successful, otherwise it throws an Exception if anything was written to the <strong>StandardError</strong>. Checkout the <a href="https://sharpscript.net/docs/error-handling" target="_blank" rel="noopener noreferrer">Error Handling docs</a> for how to handle exceptions.</p><p>With the features in this release, <code>#Script</code> has now became our preferred way to create x-plat shell scripts which can be run with the Windows <a href="/netcore-windows-desktop.html">app</a> or x-plat <a href="/dotnet-tool.html">x</a> dotnet tool which runs everywhere .NET Core does.</p><p>As such, all scripts in <a href="https://github.com/ServiceStack/mix" target="_blank" rel="noopener noreferrer">ServiceStack/mix</a> provides a good collection of <code>.ss</code> scripts to check out which are used to maintain the Gist content that powers the new <code>mix</code> feature.</p><h4 id="live-shell-scripting-preview" tabindex="-1">Live Shell Scripting Preview <a class="header-anchor" href="#live-shell-scripting-preview" aria-hidden="true">#</a></h4><p>To provide a glimpse of the productivity of this real-time exploratory programming-style, here&#39;s an example of a task we needed to automate to import and rename <strong>48px</strong> SVG images from <a href="https://github.com/google/material-design-icons" target="_blank" rel="noopener noreferrer">Material Design Icons Project</a> folders into the form needed in the <code>mix</code> Gists:</p><p><a href="https://youtu.be/joXSHtfb_7g" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/mix/rename-icons.gif" alt=""></a></p><blockquote><p>YouTube: <a href="https://youtu.be/joXSHtfb_7g" target="_blank" rel="noopener noreferrer">youtu.be/joXSHtfb_7g</a></p></blockquote><p>Here we can see how we&#39;re able to progressively arrive at our solution without leaving the source code, with the <strong>watched</strong> script automatically updated at each <code>Ctrl+S</code> save point where we&#39;re able to easily infer its behavior from its descriptive textual output.</p><h4 id="explore-http-apis-in-real-time" tabindex="-1">Explore HTTP APIs in real-time <a class="header-anchor" href="#explore-http-apis-in-real-time" aria-hidden="true">#</a></h4><p>The real-time scriptability of <code>#Script</code> makes it ideal for a whole host of explanatory programming tasks that would otherwise be painful in the slow code/build/debug cycles of a compiled language like C#, like being able to cut, sort &amp; slice HTTP APIs with ease:</p><p><a href="https://youtu.be/Yjx_9Tp91bQ" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/mix/github-api.gif" alt=""></a></p><blockquote><p>YouTube: <a href="https://youtu.be/Yjx_9Tp91bQ" target="_blank" rel="noopener noreferrer">youtu.be/Yjx_9Tp91bQ</a></p></blockquote><h4 id="live-querying-of-databases" tabindex="-1">Live Querying of Databases <a class="header-anchor" href="#live-querying-of-databases" aria-hidden="true">#</a></h4><p>It also serves a great tool for data exploration, akin to a programmable SQL Studio environment with instant feedback:</p><p><a href="https://youtu.be/HCjxVJ8RyPc" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/mix/query-northwind.gif" alt=""></a></p><blockquote><p>YouTube: <a href="https://youtu.be/HCjxVJ8RyPc" target="_blank" rel="noopener noreferrer">youtu.be/HCjxVJ8RyPc</a></p></blockquote><p>That benefits from being able to maintain reusable queries in simple, executable text files that can be organized along with other shell scripts and treated like source code where it can be checked into a versionable repo, that anyone will be able to checkout and run from the command-line in Windows, macOS or Linux OS&#39;s.</p><h4 id="utilize-high-level-servicestack-features" tabindex="-1">Utilize high-level ServiceStack Features <a class="header-anchor" href="#utilize-high-level-servicestack-features" aria-hidden="true">#</a></h4><p>Here&#39;s another example showing the expressive power of <code>#Script</code> and its <a href="https://sharpscript.net/docs/scripts-reference" target="_blank" rel="noopener noreferrer">comprehensive high-level library</a> which is used to update all library dependencies of the <a href="/templates-lite.html">Vue and React &quot;lite&quot; Project Templates</a>:</p><div class="language-"><pre><code>    \`\`\`code
    * Update /libraries gists           *
    * Usage: web run libraries.ss &lt;id&gt;? *

    {{
        {
            &#39;react-lite-lib&#39;: &#39;ad42adc11337c243ee203f9e9f84622c&#39;,
            &#39;vue-lite-lib&#39;:   &#39;717258cd4c26ba612e5eed0615d8d61c&#39;,
        }
        | to =&gt; gistMap
    }}

    (ARGV.Length &gt; 0 ? ARGV : gistMap.Keys) | to =&gt; keys

    #each id in keys
        gistMap[id] | to =&gt; gistId

        {} | to =&gt; files

        vfsFileSystem(\`libraries/\${id}\`) | to =&gt; fs
        #each file in fs.allFiles()
            files.putItem(file.VirtualPath.replace(&#39;/&#39;,&#39;\\\\&#39;), file.fileContents()) | end
        /each

        \`Writing to \${files.count()} files to \${id} &#39;\${gistId}&#39; ...\` | raw
        vfsGist(gistId, &#39;GITHUB_GIST_TOKEN&#39;.envVariable()) | to =&gt; gist
        gist.writeFiles(files)
    /each
    \`\`\`
</code></pre></div><p>Running without any arguments:</p><div class="language-"><pre><code>    $ web run libraries.ss
</code></pre></div><p>will update both React and Vue dependencies:</p><div class="language-"><pre><code>Writing to 26 files to react-lite-lib &#39;ad42adc11337c243ee203f9e9f84622c&#39; ...
Writing to 41 files to vue-lite-lib &#39;717258cd4c26ba612e5eed0615d8d61c&#39; ...
</code></pre></div><p>Alternatively it can be limited to updating a single Framework dependencies with:</p><div class="language-"><pre><code>    $ web run libraries.ss vue-lite-lib
</code></pre></div><h3 id="other-script-features" tabindex="-1">Other #Script Features <a class="header-anchor" href="#other-script-features" aria-hidden="true">#</a></h3><p>Two other noteworthy additions to <code>#Script</code> that you&#39;ll see more of in the latest project Templates include:</p><h4 id="iferrorreturn" tabindex="-1">ifErrorReturn <a class="header-anchor" href="#iferrorreturn" aria-hidden="true">#</a></h4><p>You can use <code>ifErrorReturn</code> in all Script Methods that <a href="https://sharpscript.net/docs/error-handling#implementing-method-exceptions" target="_blank" rel="noopener noreferrer">throw Managed Exceptions</a> to specify a return value to use instead of throwing the Exception.</p><p>This is used in SPA project templates to catch the <code>Unauthorized</code> Exception thrown when the <code>Authenticate</code> Service is called from an unauthenticated Request, e.g:</p>`,41),X=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),n("span",{class:"token block keyword"},"#script}}"),s(`
`),n("span",{class:"token variable"},"AUTH"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token string"},"'Authenticate'"),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"execService"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"ifErrorReturn"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},'"null"'),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"json"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"script"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),Z=n("p",null,[s("The new "),n("code",null,"execService"),s(" method is a readable alternative to calling a service via "),n("a",{href:"https://sharpscript.net/docs/servicestack-scripts#sendtogateway",target:"_blank",rel:"noopener noreferrer"},"sendToGateway"),s(" without arguments, e.g:")],-1),nn=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token variable"},"AUTH"),s(),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"sendToGateway"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Authenticate'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"ifErrorReturn"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},'"null"'),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"json"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])])])],-1),sn=n("h4",{id:"to",tabindex:"-1"},[s("to "),n("a",{class:"header-anchor",href:"#to","aria-hidden":"true"},"#")],-1),an=n("p",null,[s("Generally we prefer to use descriptive symbol names in "),n("code",null,"#Script"),s(" for their improved readability, but for frequently used methods brevity is often preferred to reduce noise so we've added "),n("code",null,"to"),s(" method as an alias for "),n("code",null,"assignTo"),s(" which can be used interchangeably, e.g:")],-1),tn=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s(),n("span",{class:"token number"},"1"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"to"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"a"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"a"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"assignTo"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token variable"},"a"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),en=a(`<p>We also like using <code>to</code> in combination with the <code>=&gt;</code> arrow expression syntax as it&#39;s a more visual descriptive behavior of the assignment method.</p><h3 id="githubplugin" tabindex="-1">GitHubPlugin <a class="header-anchor" href="#githubplugin" aria-hidden="true">#</a></h3><p>ServiceStack&#39;s GitHub integration available in this release can be used in your <code>#Script</code> by adding <code>GitHubPlugin</code> to your <code>ScriptContext</code> or <code>SharpPagesFeature</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ScriptContext</span> <span class="token punctuation">{</span>
    Plugins <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GitHubPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This is enabled by default in the <code>web</code> and <code>app</code> dotnet tools so they can be used in <code>#Script</code> <strong>.ss</strong> scripts.</p><p>Checkout <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/Script/Methods/GitHubScripts.cs" target="_blank" rel="noopener noreferrer">GitHubScripts.cs</a> for the full API available. Here&#39;s <a href="https://developer.github.com/v3/gists/#example" target="_blank" rel="noopener noreferrer">GitHub&#39;s Gist API</a> example of creating gists in <code>#Script</code>:</p>`,6),on=n("div",null,[n("div",{class:"language-"},[n("pre",{"v-pre":""},[n("code",null,`githubGateway('GITHUB_GIST_TOKEN'.envVariable()) | to => gateway

{{ gateway.githubCreateGist('Hello World Examples', {
     'hello_world_ruby.txt':   'Run \`ruby hello_world.rb\` to print Hello World',
     'hello_world_python.txt': 'Run \`python hello_world.py\` to print Hello World',
   })
   | to => newGist }}

{ ...newGist, Files: null, Owner: null } | textDump({ caption: 'new gist' })
`)])])],-1),pn=n("p",null,"View Gist files and metadata example:",-1),cn=n("div",null,[n("div",{class:"language-"},[n("pre",{"v-pre":""},[n("code",null,`gateway.githubGist(gistId) | to => gist

{ ...gist, Files: null, Owner: null } | textDump({ caption: 'gist' })

\`#### Gist Files\`
#each file in gist.Files.Keys
    gist.Files[file] | textDump({ caption: file })
/each
`)])])],-1),ln=a(`<p>Which renders the following GitHub Flavored Markdown output:</p><table><thead><tr><th style="text-align:left;">gist</th><th style="text-align:left;"></th></tr></thead><tbody><tr><td style="text-align:left;">Node Id</td><td style="text-align:left;">MDQ6R2lzdDRjNWQ5NWVjNGIyNTk0YjRjZGQyMzg5ODdmZTdhMTVh</td></tr><tr><td style="text-align:left;">Git Pull Url</td><td style="text-align:left;"><a href="https://gist.github.com/4c5d95ec4b2594b4cdd238987fe7a15a.git" target="_blank" rel="noopener noreferrer">https://gist.github.com/4c5d95ec4b2594b4cdd238987fe7a15a.git</a></td></tr><tr><td style="text-align:left;">Git Push Url</td><td style="text-align:left;"><a href="https://gist.github.com/4c5d95ec4b2594b4cdd238987fe7a15a.git" target="_blank" rel="noopener noreferrer">https://gist.github.com/4c5d95ec4b2594b4cdd238987fe7a15a.git</a></td></tr><tr><td style="text-align:left;">Forks Url</td><td style="text-align:left;"><a href="https://api.github.com/gists/4c5d95ec4b2594b4cdd238987fe7a15a/forks" target="_blank" rel="noopener noreferrer">https://api.github.com/gists/4c5d95ec4b2594b4cdd238987fe7a15a/forks</a></td></tr><tr><td style="text-align:left;">Commits Url</td><td style="text-align:left;"><a href="https://api.github.com/gists/4c5d95ec4b2594b4cdd238987fe7a15a/commits" target="_blank" rel="noopener noreferrer">https://api.github.com/gists/4c5d95ec4b2594b4cdd238987fe7a15a/commits</a></td></tr><tr><td style="text-align:left;">Comments</td><td style="text-align:left;">0</td></tr><tr><td style="text-align:left;">Comments Url</td><td style="text-align:left;"><a href="https://api.github.com/gists/4c5d95ec4b2594b4cdd238987fe7a15a/comments" target="_blank" rel="noopener noreferrer">https://api.github.com/gists/4c5d95ec4b2594b4cdd238987fe7a15a/comments</a></td></tr><tr><td style="text-align:left;">Truncated</td><td style="text-align:left;">False</td></tr><tr><td style="text-align:left;">Owner</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Id</td><td style="text-align:left;">4c5d95ec4b2594b4cdd238987fe7a15a</td></tr><tr><td style="text-align:left;">Url</td><td style="text-align:left;"><a href="https://api.github.com/gists/4c5d95ec4b2594b4cdd238987fe7a15a" target="_blank" rel="noopener noreferrer">https://api.github.com/gists/4c5d95ec4b2594b4cdd238987fe7a15a</a></td></tr><tr><td style="text-align:left;">Html Url</td><td style="text-align:left;"><a href="https://gist.github.com/4c5d95ec4b2594b4cdd238987fe7a15a" target="_blank" rel="noopener noreferrer">https://gist.github.com/4c5d95ec4b2594b4cdd238987fe7a15a</a></td></tr><tr><td style="text-align:left;">Files</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Public</td><td style="text-align:left;">True</td></tr><tr><td style="text-align:left;">Created at</td><td style="text-align:left;">2019-06-15</td></tr><tr><td style="text-align:left;">Updated At</td><td style="text-align:left;">2019-06-15</td></tr><tr><td style="text-align:left;">Description</td><td style="text-align:left;">Hello World Examples</td></tr><tr><td style="text-align:left;">User Id</td><td style="text-align:left;"></td></tr></tbody></table><h4 id="gist-files" tabindex="-1">Gist Files <a class="header-anchor" href="#gist-files" aria-hidden="true">#</a></h4><table><thead><tr><th>hello_world_python.txt</th><th></th></tr></thead><tbody><tr><td>Filename</td><td>hello_world_python.txt</td></tr><tr><td>Type</td><td>text/plain</td></tr><tr><td>Language</td><td>Text</td></tr><tr><td>Raw Url</td><td><a href="https://gist.githubusercontent.com/gistlyn/.../hello_world_python.txt" target="_blank" rel="noopener noreferrer">https://gist.githubusercontent.com/gistlyn/.../hello_world_python.txt</a></td></tr><tr><td>Size</td><td>48</td></tr><tr><td>Truncated</td><td>False</td></tr><tr><td>Content</td><td>Run <code>python hello_world.py</code> to print Hello World</td></tr></tbody></table><table><thead><tr><th>hello_world_ruby.txt</th><th></th></tr></thead><tbody><tr><td>Filename</td><td>hello_world_ruby.txt</td></tr><tr><td>Type</td><td>text/plain</td></tr><tr><td>Language</td><td>Text</td></tr><tr><td>Raw Url</td><td><a href="https://gist.githubusercontent.com/gistlyn/.../hello_world_ruby.txt" target="_blank" rel="noopener noreferrer">https://gist.githubusercontent.com/gistlyn/.../hello_world_ruby.txt</a></td></tr><tr><td>Size</td><td>46</td></tr><tr><td>Truncated</td><td>False</td></tr><tr><td>Content</td><td>Run <code>ruby hello_world.rb</code> to print Hello World</td></tr></tbody></table><h2 id="gist-vfs-provider" tabindex="-1">Gist VFS Provider <a class="header-anchor" href="#gist-vfs-provider" aria-hidden="true">#</a></h2><p>The new <code>GistVirtualFiles</code> is a particular exciting addition to the collection of available <a href="/virtual-file-system.html#virtual-file-systems-available">Virtual File System providers</a>. Gist&#39;s are the perfect way to capture and share a publicly versionable snapshot of files that&#39;s validated against a authenticated user account - adding an important layer of trust and verification over an anonymous archive download.</p><p>GitHub also provide public HTTP API&#39;s to access Gist&#39;s and their metadata, that scales nicely to support small fileset snapshots where all content is returned in the public API resource request, as well as supporting larger fileset snapshots where the contents of the gist are truncated and its contents are instead downloaded from its <code>raw_url</code> in an alternative HTTP Request.</p><p><code>GistVirtualFiles</code> provides a transparent VFS abstraction over GitHub&#39;s Gist APIs so they can be used interchangeably with all other VFS providers.</p><h4 id="heirachal-and-binary-file-support" tabindex="-1">Heirachal and Binary file Support <a class="header-anchor" href="#heirachal-and-binary-file-support" aria-hidden="true">#</a></h4><p>On its surface Gists appear to only support a flat list of text files, but <code>GistVirtualFiles</code> is able to overcome these limitations by transparently encoding Binary files to <strong>Base 64</strong> behind the scenes and utilizing <code>\\</code> back-slashes in file names to maintain a heirachal file structure where it&#39;s able to implement the full VFS Provider abstraction.</p><p>ServiceStack includes good heuristics for determining which files are binary on its extension and Content Type, if your Binary file isn&#39;t recognized you can register its extension with a known binary content type or override the <code>IsBinaryFilter</code> predicate:</p><div class="language-csharp"><pre><code>MimeTypes<span class="token punctuation">.</span>ExtensionMimeTypes<span class="token punctuation">[</span>ext<span class="token punctuation">]</span> <span class="token operator">=</span> contentType<span class="token punctuation">;</span> <span class="token comment">// e.g. MimeTypes.Binary</span>
<span class="token comment">//MimeTypes.IsBinaryFilter = contentType =&gt; ...;</span>
</code></pre></div><h4 id="read-write-and-readonly-gists" tabindex="-1">Read/Write and ReadOnly Gists <a class="header-anchor" href="#read-write-and-readonly-gists" aria-hidden="true">#</a></h4><p>It supports both public read-only and read/write gists with a GitHub <code>accessToken</code> being needed in order to perform any writes:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> gistFs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GistVirtualFiles</span><span class="token punctuation">(</span>gistId<span class="token punctuation">,</span> accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> gistFsReadOnly <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GistVirtualFiles</span><span class="token punctuation">(</span>gistId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="gist-refresh" tabindex="-1">Gist Refresh <a class="header-anchor" href="#gist-refresh" aria-hidden="true">#</a></h4><p>Behaviourally they differ from other VFS providers in that they&#39;re used more as a snapshot instead of a actively modified file system and their updates and are noticeably slower to both read and write then the other VFS providers.</p><p>To maximize performance the files are stored in memory after the first access and its internal cache only updated when a <strong>Write</strong> operation is performed.</p><p>If you&#39;re instead using a Gist that changes frequently you can specify how long before refreshing the cache:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> gistFs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GistVirtualFiles</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    RefreshAfter <span class="token operator">=</span> TimeSpan<span class="token punctuation">.</span><span class="token function">FromHours</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>GitHub truncates large Gists which <code>GistVirtualFiles</code> transparently fetches behind-the-scenes on-demand, you can also eagerly fetch all truncated content with:</p><div class="language-csharp"><pre><code><span class="token keyword">await</span> gistFs<span class="token punctuation">.</span><span class="token function">LoadAllTruncatedFilesAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="new-virtual-file-system-apis" tabindex="-1">New Virtual File System APIs <a class="header-anchor" href="#new-virtual-file-system-apis" aria-hidden="true">#</a></h3><p>As Gist HTTP API&#39;s are relatively slow, we&#39;ve added <strong>batched APIs</strong> to all VFS providers so multiple files can be updated in a single HTTP Request.</p><p>The new <code>object</code> Content APIs allow VFS Providers to implement more efficient file access which by default returns <code>ReadOnlyMemory&lt;char&gt;</code> for text files and <code>ReadOnlyMemory&lt;byte&gt;</code> for binary files:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IVirtualFile</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">GetContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The single and multi-write File APIs support <code>object</code> content values of either <code>string</code>, <code>ReadOnlyMemory&lt;char&gt;</code>, <code>byte[]</code>, <code>ReadOnlyMemory&lt;byte&gt;</code>, <code>Stream</code> and <code>IVirtualFile</code> Types:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IVirtualFiles</span> 
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">WriteFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> filePath<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">object</span></span> contents<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AppendFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> filePath<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">object</span></span> contents<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">WriteFiles</span><span class="token punctuation">(</span><span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> textFiles<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//text files only</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">WriteFiles</span><span class="token punctuation">(</span><span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> files<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//binary or text files</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Additional allocation-efficient <code>ReadOnlyMemory&lt;T&gt;</code> APIs are also available as extension methods:</p><div class="language-csharp"><pre><code><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">WriteFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> path<span class="token punctuation">,</span> <span class="token class-name">ReadOnlyMemory<span class="token punctuation">&lt;</span><span class="token keyword">char</span><span class="token punctuation">&gt;</span></span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">WriteFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> path<span class="token punctuation">,</span> <span class="token class-name">ReadOnlyMemory<span class="token punctuation">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">&gt;</span></span> bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AppendFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> path<span class="token punctuation">,</span> <span class="token class-name">ReadOnlyMemory<span class="token punctuation">&lt;</span><span class="token keyword">char</span><span class="token punctuation">&gt;</span></span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AppendFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> path<span class="token punctuation">,</span> <span class="token class-name">ReadOnlyMemory<span class="token punctuation">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">&gt;</span></span> bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The new APIs let you use the same source code to read/write both text and binary files which VFS providers can implement more efficiently:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> content <span class="token operator">=</span> vfs<span class="token punctuation">.</span><span class="token function">GetFile</span><span class="token punctuation">(</span>fromVirtualPath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vfs<span class="token punctuation">.</span><span class="token function">WriteFile</span><span class="token punctuation">(</span>toVirtualPath<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In <code>#Script</code> you can access a files text or binary contents with either:</p><div class="language-js"><pre><code>vfs<span class="token punctuation">.</span><span class="token function">fileContents</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> fileContents
vfs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> fileContents<span class="token punctuation">)</span>

vfs<span class="token punctuation">.</span><span class="token function">fileTextContents</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> textContents
vfs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> textContents<span class="token punctuation">)</span>

vfs<span class="token punctuation">.</span><span class="token function">fileBytesContent</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> binaryContents
vfs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> binaryContents<span class="token punctuation">)</span>
</code></pre></div><h2 id="githubgateway" tabindex="-1">GitHubGateway <a class="header-anchor" href="#githubgateway" aria-hidden="true">#</a></h2><p>The new <code>GitHubGateway</code> provides a number of typed APIs for querying GitHub Repos and managing gists.</p><p>The <code>IGistGateway</code> and <code>IGitHubGateway</code> interfaces contains the public API and functionality available:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IGistGateway</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">Gist</span> <span class="token function">CreateGist</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> description<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> isPublic<span class="token punctuation">,</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> files<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Gist</span> <span class="token function">CreateGist</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> description<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> isPublic<span class="token punctuation">,</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> textFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Gist</span> <span class="token function">GetGist</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> gistId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>Gist<span class="token punctuation">&gt;</span></span> <span class="token function">GetGistAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> gistId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">WriteGistFiles</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> gistId<span class="token punctuation">,</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> files<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">WriteGistFiles</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> gistId<span class="token punctuation">,</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> textFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CreateGistFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> gistId<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> filePath<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> contents<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">WriteGistFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> gistId<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> filePath<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> contents<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DeleteGistFiles</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> gistId<span class="token punctuation">,</span> <span class="token keyword">params</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> filePaths<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IGitHubGateway</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IGistGateway</span></span> 
<span class="token punctuation">{</span>
    <span class="token return-type class-name">Tuple<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token function">FindRepo</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> orgs<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> useFork<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">GetSourceZipUrl</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> user<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> repo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetSourceZipUrlAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> user<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> repo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>GithubRepo<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetSourceReposAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> orgName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>GithubRepo<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetUserAndOrgReposAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> githubOrgOrUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">GithubRepo</span> <span class="token function">GetRepo</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userOrOrg<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> repo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>GithubRepo<span class="token punctuation">&gt;</span></span> <span class="token function">GetRepoAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userOrOrg<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> repo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>GithubRepo<span class="token punctuation">&gt;</span></span> <span class="token function">GetUserRepos</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> githubUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>GithubRepo<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetUserReposAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> githubUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>GithubRepo<span class="token punctuation">&gt;</span></span> <span class="token function">GetOrgRepos</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> githubOrg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>GithubRepo<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetOrgReposAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> githubOrg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DownloadFile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> downloadUrl<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">GetJson</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> route<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">T</span> <span class="token generic-method"><span class="token function">GetJson</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> route<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetJsonAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> route<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">GetJsonAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> route<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">StreamJsonCollection</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> route<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">GetJsonCollectionAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> route<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>GetJson</code> and <code>*JsonCollection</code> APIs can be used to query other <a href="https://developer.github.com/v3/" target="_blank" rel="noopener noreferrer">GitHub HTTP APIs</a> not included where they&#39;ll utilize the same configured HTTP Client and is able to stream GitHub&#39;s linked multi-paged HTTP Results.</p><h2 id="gist-desktop-apps" tabindex="-1">Gist Desktop Apps <a class="header-anchor" href="#gist-desktop-apps" aria-hidden="true">#</a></h2><p>We&#39;re extremely excited to bring ServiceStack&#39;s enhancements in this release to <a href="https://sharpscript.net/docs/sharp-apps" target="_blank" rel="noopener noreferrer">Sharp Apps</a> giving it additional liveness capabilities unseen in .NET Core Apps where they can now be <strong>run on-the-fly without installation!</strong></p><p>To recap <a href="https://sharpscript.net/docs/sharp-apps" target="_blank" rel="noopener noreferrer">Sharp Apps</a> enable a dramatically simplified and productive workflow where entire Apps can be developed in a real-time dev workflow without compilation using a <a href="https://sharpscript.net/docs/syntax" target="_blank" rel="noopener noreferrer">JavaScript inspired syntax</a> with access to a <a href="https://sharpscript.net/docs/scripts-reference" target="_blank" rel="noopener noreferrer">comprehensive default library</a> that includes built-in support for the <a href="https://sharpscript.net/docs/sharp-apps#multi-platform-configurations" target="_blank" rel="noopener noreferrer">most popular RDBMS&#39;s</a>, <a href="https://sharpscript.net/docs/redis-scripts" target="_blank" rel="noopener noreferrer">Redis</a>, AWS and Azure support.</p><p>Although they&#39;re not only limited to the built-in functionality as they can be further extended with <a href="https://sharpscript.net/docs/sharp-apps#plugins" target="_blank" rel="noopener noreferrer">plugins</a> where any functionality it finds in its <code>plugins/*.dll</code> are automatically made available to the Sharp App</p><h3 id="windows-net-core-desktop-apps" tabindex="-1">Windows .NET Core Desktop Apps <a class="header-anchor" href="#windows-net-core-desktop-apps" aria-hidden="true">#</a></h3><p>Major disadvantages to developing Desktop Apps today include limitations in available UI frameworks not being as flexible and feature-rich as modern browser rendering engines, slow development/iteration times, large downloads, forced upfront installations, stale versions and cumbersome upgrades - resulting in both increased cost to develop Desktop Apps and reduced accessibility and potential popularity with the additional barrier to entry of forced installations.</p><p>Electron resolves some of these issues which has seen a surge of popularity vs Native Apps with its more productive web development model and partial support for auto updating, but it still requires a large download and upfront installation.</p><p>By contrast the majority of the download size of Sharp Apps is in the local .NET Core installation and <a href="/netcore-windows-desktop.html">app</a> dotnet tool which are shared by all Sharp Apps, only the app-specific web assets and <code>#Script</code> source files need to be downloaded, making them a lot smaller and quicker to download (and run instantly).</p><p>They can even be further reduced by utilizing the resources embedded into <strong>ServiceStack.dll</strong> like the built-in SVG icons and stylesheet and <code>/css/bootstrap.css</code>, which many Sharp Apps take advantage of to reduce their footprint.</p><p>Now everyone can launch a Windows Desktop Sharp App by specifying the name of the App they want to open with:</p><pre><code>$ app open redis    
</code></pre>`,51),rn=n("iframe",{width:"896",height:"525",src:"https://www.youtube.com/embed/FlKeaav0gt8",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,-1),un=a(`<blockquote><p>OSX or Linux users can run Sharp Apps with the cross-platform <a href="https://docs.servicestack.net/dotnet-tool" target="_blank" rel="noopener noreferrer">web</a> dotnet tool instead</p></blockquote><h4 id="redis" tabindex="-1">redis <a class="header-anchor" href="#redis" aria-hidden="true">#</a></h4><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/app/app-redis.png" alt=""></p><h3 id="instant-run-without-installation" tabindex="-1">Instant Run without Installation <a class="header-anchor" href="#instant-run-without-installation" aria-hidden="true">#</a></h3><p>This searches the <a href="https://gist.github.com/gistlyn/802daba52b6fe6e2ed1430348dc596cb" target="_blank" rel="noopener noreferrer">app.md</a> global App directory for the link to the App, and in this case launches the Redis Sharp App within a Chromium Desktop shell as seen above.</p><p>The list of available apps is also visible from the command-line with:</p><pre><code>$ app open
</code></pre><div class="language-"><pre><code>1. redis       Simple, lightweight, versatile Redis Admin UI                            by @ServiceStack
2. spirals     Explore and generate different Spirals with SVG                          by @ServiceStack
3. blog        Minimal, multi-user Twitter Auth blogging app                            by @ServiceStack
4. rockwind    Example combining Rockstars website + data-driven Northwind Browser      by @ServiceStack
5. redis-html  Redis Admin Viewer developed as server-generated HTML Website            by @sharp-apps
6. plugins     Extend Apps with Plugins, ServiceStack Services and other C# extensions  by @sharp-apps
7. chat        Extensible App with custom AppHost using OAuth + SSE for real-time Chat  by @sharp-apps
</code></pre></div><p>Making Sharp Apps both easy to discover as well as launch.</p><h3 id="cross-platform" tabindex="-1">Cross Platform <a class="header-anchor" href="#cross-platform" aria-hidden="true">#</a></h3><p>If you&#39;re using macOS or Linux you can run all Sharp Apps using the cross-platform <a href="/dotnet-tool.html">x</a> dotnet tool where it will launch in your preferred Web Browser instead:</p><pre><code>$ web open redis    
</code></pre><h3 id="always-up-to-date" tabindex="-1">Always Up-to-date <a class="header-anchor" href="#always-up-to-date" aria-hidden="true">#</a></h3><p>Thanks to their minimal footprint, another unique characteristic of Sharp Apps launched with <code>open</code> is that they <strong>always run the latest version</strong> of the App, thereby avoiding the need to implement an Update feature or maintain patch release versions.</p><h3 id="run-apps-offline" tabindex="-1">Run Apps Offline <a class="header-anchor" href="#run-apps-offline" aria-hidden="true">#</a></h3><p>When App&#39;s are launched with <code>open</code> it creates a folder in the Users <code>.sharp-apps</code> directory, e.g:</p><pre><code>$HOME\\.sharp-apps\\redis
</code></pre><p>This is the current directory that the App is run from and where any files created by App&#39;s will be saved to and preserved across App runs.</p><p>For Gist Apps this is an empty folder as the Gist files are loaded into memory, however to support being able to run Apps offline it also serializes all Gist files (after fetching all truncated files) to JSON at:</p><pre><code>$HOME\\.sharp-apps\\redis.gist
</code></pre><p>This is so after App&#39;s <strong>are launched once</strong> with <code>open</code>, they can then be <strong>run locally</strong> with:</p><pre><code>$ app run redis
</code></pre><p>Which will load the Gist files from the serialized <strong>redis.gist</strong> JSON blob instead of downloading them from the gist on GitHub which is useful for times you don&#39;t have an Internet connection or GitHub is down. However as small App&#39;s like <strong>redis</strong> start instantly it&#39;s preferred to run them with <code>app open redis</code> so you&#39;re always running the latest version.</p><h4 id="uninstall-apps" tabindex="-1">Uninstall Apps <a class="header-anchor" href="#uninstall-apps" aria-hidden="true">#</a></h4><p>As Gist App&#39;s are downloaded on-the-fly and loaded into memory there&#39;s not much to uninstall just an empty folder and a <code>&lt;app-name.gist&gt;</code> JSON blob which you can either manually delete or get the dotnet tool to do it for you.</p><p>To view all App&#39;s you&#39;ve opened, run:</p><pre><code>$ app uninstall
</code></pre><p>This displays a list of Sharp App&#39;s you&#39;ve run at least once:</p><div class="language-"><pre><code>Usage: app uninstall &lt;app&gt;

Installed Apps:
  blog
  chat
  plugins
  redis
  rockwind
  spirals
</code></pre></div><p>To delete all traces of <code>redis</code> from your system, run:</p><pre><code>$ app uninstall redis
</code></pre><p>Which removes the empty <code>$HOME\\.sharp-apps\\redis</code> folder and <code>$HOME\\.sharp-apps\\redis.gist</code>.</p><h3 id="gist-sharp-apps" tabindex="-1">Gist Sharp Apps <a class="header-anchor" href="#gist-sharp-apps" aria-hidden="true">#</a></h3><p>If we peek into the <a href="https://gist.githubusercontent.com/gistlyn/802daba52b6fe6e2ed1430348dc596cb/raw/2b90536198e14fb0e3494bc5f89dbc55c72c8e88/apps.md" target="_blank" rel="noopener noreferrer">markdown of app.md</a> we can see the different ways Sharp Apps can be hosted, for <strong>redis</strong> we see that the entire App is <a href="https://gist.github.com/gistlyn/6de7993333b457445793f51f6f520ea8" target="_blank" rel="noopener noreferrer">published in a Gist</a>:</p><div class="language-"><pre><code> - [redis](https://gist.github.com/gistlyn/6de7993333b457445793f51f6f520ea8) 
</code></pre></div><p>Thanks to the new <code>GistVirtualFiles</code> support in this release, Gist Apps were trivial to support which only required launching the ServiceStack App with a configured <code>GistVirtualFiles</code> that references the <strong>redis</strong> Gist, i.e:</p><div class="language-csharp"><pre><code>appHost<span class="token punctuation">.</span>InsertVirtualFileSources<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">GistVirtualFiles</span><span class="token punctuation">(</span><span class="token string">&quot;6de7993333b457445793f51f6f520ea8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Hosting Apps in Gists provides numerous benefits: predominantly they&#39;re effectively a free, public, distributed app host which are tied to Authenticated GitHub Accounts and have a public version history of every commit so each change is visible.</p><p>GitHub also provide both a Web UI and HTTP UI to manage gists making them easy to modify, both manually and programmatically where you can use their Web UI to make a quick fix which is instantly available the next time the app is launched.</p><p>We&#39;ve already had quick look of the <strong>redis</strong> Gist App that provides a nice UI for querying and editing a Redis instance (an example of an App that can&#39;t be implemented as a website), lets have a look at some other Gist Apps that are well suited for development as Sharp Apps:</p><h4 id="spirals" tabindex="-1">spirals <a class="header-anchor" href="#spirals" aria-hidden="true">#</a></h4><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/app/app-spirals.png" alt=""></p><p>Open with:</p><pre><code>$ app open spirals
</code></pre><p>Spirals in an example of a minimally useful App to explore and generate different Spirals with SVG that showcases the productivity and live Development experience of Sharp Apps where you can create an App from scratch with just a text editor and the <code>web</code> tool, without a single re-compile or app restart:</p>`,45),kn=n("iframe",{width:"896",height:"525",src:"https://www.youtube.com/embed/Cf-vstYXrmY",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,-1),dn=a(`<h3 id="publishing-gist-apps" tabindex="-1">Publishing Gist Apps <a class="header-anchor" href="#publishing-gist-apps" aria-hidden="true">#</a></h3><p>Now that we&#39;ve created an App it&#39;s time to publish it to a Gist, to do this we need to <a href="https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line" target="_blank" rel="noopener noreferrer">Creating a personal access token</a> with the <strong>gist</strong> permission so it&#39;s able to create gists.</p><p>You can provide your access token via either the <code>-token</code> command-line argument:</p><pre><code>$ app publish -token {GITHUB_TOKEN}
</code></pre><p>But our recommendation is instead to set it in the <code>GITHUB_GIST_TOKEN</code> Environment Variable to avoid needing to provide it each time.</p><p>Before publishing our App, our <strong>app.settings</strong> looks something like:</p><div class="language-"><pre><code>debug true
name Spirals
CefConfig { width:1100, height:900 }
</code></pre></div><p>Then in your App&#39;s home directory (containing the <strong>app.settings</strong>), run:</p><pre><code>$ app publish
</code></pre><p>This creates a new Gist with your App as confirmed by its successful response:</p><div class="language-"><pre><code>App published to: https://api.github.com/gists/4e06df1f1b9099526a7c97721aa7f69c

Publish App to the public registry by re-publishing with app.settings:

appName     &lt;app alias&gt;    # required: alpha-numeric snake-case characters only, 30 chars max
description &lt;app summary&gt;  # optional: 20-150 chars
tags        &lt;app tags&gt;     # optional: space delimited, alpha-numeric snake-case, 3 tags max
</code></pre></div><p>It also modifies your <code>app.settings</code> to include the gist that your App was published to:</p><div class="language-"><pre><code>debug true
name Spirals
CefConfig { width:1100, height:900 }
publish https://gist.github.com/gistlyn/4e06df1f1b9099526a7c97721aa7f69c
</code></pre></div><p>Containing the location your App will be published to in future.</p><p>At this point anyone will now be able to run your App locally with the link its published to:</p><pre><code>$ app open https://gist.github.com/gistlyn/4e06df1f1b9099526a7c97721aa7f69c
</code></pre><p>Or if preferred, using just the <strong>gist id</strong>:</p><pre><code>$ app open 4e06df1f1b9099526a7c97721aa7f69c
</code></pre><p>Or you can give it a friendlier name and make it more discoverable by publishing it to the global App Directory by updating your app.settings to include <strong>appName</strong>, <strong>description</strong> and <strong>tags</strong> settings, e.g:</p><div class="language-"><pre><code>debug true
name Spirals
CefConfig { width:1100, height:900 }
publish https://gist.github.com/gistlyn/4e06df1f1b9099526a7c97721aa7f69c
appName spirals
description Explore and generate different Spirals with SVG
tags svg
</code></pre></div><p>Now when you re-publish your App:</p><pre><code>$ app publish
</code></pre><p>It will update your App&#39;s gist, register <strong>spirals</strong> with the App directory and output the command everyone will be able to run your App with:</p><div class="language-"><pre><code>App updated at: https://gist.github.com/gistlyn/4e06df1f1b9099526a7c97721aa7f69c

Run published App:

    app open spirals
</code></pre></div><p>Users that are not on Windows can use the <code>web</code> tool instead to launch your App in their preferred browser:</p><pre><code>$ web open spirals
</code></pre><p>With its built-in publishing support, it means you can create an App from scratch, publish it to a gist, register it in the App directory - where your creations are ready for the world to use in minutes! We&#39;re not aware of any other Desktop App solution that comes close to this level of turn around time.</p><h4 id="blog" tabindex="-1">blog <a class="header-anchor" href="#blog" aria-hidden="true">#</a></h4><p>Spirals are cool, but lets explore some more useful real-world Apps:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/app/app-blog.png" alt=""></p><p>Open with:</p><pre><code>$ app open blog
</code></pre><p><strong>blog</strong> is an sqlite-powered multi-user blogging system, that in addition to supporting Markdown, also lets you use <code>#Script</code> in your posts so you&#39;re able to post <strong>&quot;live executable literate documents&quot;</strong> that can mix both content and executable scripts.</p><p>As we envisage sqlite to a popular storage option we&#39;ll go through a couple of ways to make use of it in Gist Apps as your App&#39;s Gist files are read-only and loaded in memory where as SQLite needs to access it on disk.</p><p>Firstly to configure your App to use SQLite, add <strong>db sqlite</strong> and <strong>db.connection dbname.sqlite</strong> to:</p><h4 id="app-settings" tabindex="-1"><a href="https://gist.github.com/gistlyn/ddc064f62cafc91ead200552d9d8ad89#file-app-settings" target="_blank" rel="noopener noreferrer">app.settings</a> <a class="header-anchor" href="#app-settings" aria-hidden="true">#</a></h4><div class="language-"><pre><code>debug false
name Blog Web App
db sqlite
db.connection blog.sqlite
</code></pre></div><p>This will create an empty file at <code>$HOME\\.sharp-apps\\blog\\blog.sqlite</code> when your App is first launched.</p><p>You can then create your DB Schema and populate your database using the <a href="https://sharpscript.net/docs/db-scripts" target="_blank" rel="noopener noreferrer">Database Scripts</a> in a file called <code>_init.html</code> which is executed just before your App is launched.</p><p>The <strong>blog</strong> App uses this approach for creating its database and populating it with initial seed data if the database is empty, e.g:</p><h4 id="init-html" tabindex="-1"><a href="https://gist.github.com/gistlyn/ddc064f62cafc91ead200552d9d8ad89#file-_init-html" target="_blank" rel="noopener noreferrer">_init.html</a> <a class="header-anchor" href="#init-html" aria-hidden="true">#</a></h4>`,41),hn=n("div",null,[n("div",{class:"language-hbs"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token delimiter punctuation"},"{{"),s("  "),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"CREATE"),s(),n("span",{class:"token variable"},"TABLE"),s(),n("span",{class:"token variable"},"IF"),s(),n("span",{class:"token variable"},"NOT"),s(),n("span",{class:"token variable"},"EXISTS"),s(),n("span",{class:"token string"},'"Post"'),s(` 
    `),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token string"},'"Id"'),s(),n("span",{class:"token variable"},"INTEGER"),s(),n("span",{class:"token variable"},"PRIMARY"),s(),n("span",{class:"token variable"},"KEY"),s(),n("span",{class:"token variable"},"AUTOINCREMENT"),n("span",{class:"token punctuation"},","),s(` 
        `),n("span",{class:"token string"},'"Slug"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"NULL"),n("span",{class:"token punctuation"},","),s(` 
        `),n("span",{class:"token string"},'"Title"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"NULL"),n("span",{class:"token punctuation"},","),s(` 
        `),n("span",{class:"token string"},'"Content"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"NULL"),n("span",{class:"token punctuation"},","),s(` 
        `),n("span",{class:"token string"},'"Created"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"NOT"),s(),n("span",{class:"token variable"},"NULL"),n("span",{class:"token punctuation"},","),s(` 
        `),n("span",{class:"token string"},'"CreatedBy"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"NOT"),s(),n("span",{class:"token variable"},"NULL"),n("span",{class:"token punctuation"},","),s(` 
        `),n("span",{class:"token string"},'"Modified"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"NOT"),s(),n("span",{class:"token variable"},"NULL"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},'"ModifiedBy"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"NOT"),s(),n("span",{class:"token variable"},"NULL"),s(` 
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    
    `),n("span",{class:"token variable"},"CREATE"),s(),n("span",{class:"token variable"},"TABLE"),s(),n("span",{class:"token variable"},"IF"),s(),n("span",{class:"token variable"},"NOT"),s(),n("span",{class:"token variable"},"EXISTS"),s(),n("span",{class:"token string"},'"UserInfo"'),s(` 
    `),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token string"},'"UserName"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"PRIMARY"),s(),n("span",{class:"token variable"},"KEY"),n("span",{class:"token punctuation"},","),s(` 
        `),n("span",{class:"token string"},'"DisplayName"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"NULL"),n("span",{class:"token punctuation"},","),s(` 
        `),n("span",{class:"token string"},'"AvatarUrl"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"NULL"),n("span",{class:"token punctuation"},","),s(` 
        `),n("span",{class:"token string"},'"AvatarUrlLarge"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"NULL"),n("span",{class:"token punctuation"},","),s(` 
        `),n("span",{class:"token string"},'"Created"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"NOT"),s(),n("span",{class:"token variable"},"NULL"),n("span",{class:"token punctuation"},","),s(`
        `),n("span",{class:"token string"},'"Modified"'),s(),n("span",{class:"token variable"},"VARCHAR"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"8000"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"NOT"),s(),n("span",{class:"token variable"},"NULL"),s(`
    `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),n("span",{class:"token punctuation"},"`"),s(` 
    
    `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbExec"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token variable"},"dbScalar"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"SELECT"),s(),n("span",{class:"token variable"},"COUNT"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"*"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token variable"},"FROM"),s(),n("span",{class:"token variable"},"Post"),n("span",{class:"token punctuation"},"`"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"to"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"postsCount"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"#"),n("span",{class:"token variable"},"if"),s(),n("span",{class:"token variable"},"postsCount"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"datetime"),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"CURRENT_TIMESTAMP"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'localtime'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"`"),s(),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"to"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"sqlNow"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"ServiceStack"),n("span",{class:"token punctuation"},"`"),s("                            "),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"to"),s(),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},">"),s(),n("span",{class:"token variable"},"user"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),s(`
    `),n("span",{class:"token variable"},"Create"),s(),n("span",{class:"token variable"},"ServiceStack"),s(),n("span",{class:"token variable"},"User"),s(),n("span",{class:"token variable"},"-"),s(),n("span",{class:"token variable"},"Contains"),s(),n("span",{class:"token variable"},"same"),s(),n("span",{class:"token variable"},"info"),s(),n("span",{class:"token variable"},"as"),s(),n("span",{class:"token variable"},"if"),s(),n("span",{class:"token variable"},"was"),s(),n("span",{class:"token punctuation"},"@"),n("span",{class:"token variable"},"ServiceStack"),s(),n("span",{class:"token variable"},"authenticated"),s(),n("span",{class:"token variable"},"via"),s(),n("span",{class:"token variable"},"Twitter"),s(`
    `),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),n("span",{class:"token punctuation"},"="),s(`

    `),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"`"),n("span",{class:"token variable"},"INSERT"),s(),n("span",{class:"token variable"},"INTO"),s(),n("span",{class:"token variable"},"UserInfo"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token variable"},"UserName"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"DisplayName"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"AvatarUrl"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"AvatarUrlLarge"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Created"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"Modified"),n("span",{class:"token punctuation"},")"),s(` 
                      `),n("span",{class:"token variable"},"VALUES"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"@"),n("span",{class:"token variable"},"user"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"@"),n("span",{class:"token variable"},"user"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"@"),n("span",{class:"token variable"},"avatarUrl"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"@"),n("span",{class:"token variable"},"avatarUrlLarge"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"sqlNow"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token variable"},"$"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token variable"},"sqlNow"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"`"),s(`
        `),n("span",{class:"token punctuation"},"|"),s(),n("span",{class:"token variable"},"dbExec"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(` 
            `),n("span",{class:"token variable"},"user"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'ServiceStack'"),n("span",{class:"token punctuation"},","),s(` 
            `),n("span",{class:"token variable"},"avatarUrl"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'https://pbs.twimg.com/profile_images/876249730078056448/JuTVEkWX_normal.jpg'"),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token variable"},"avatarUrlLarge"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token string"},"'https://pbs.twimg.com/profile_images/876249730078056448/JuTVEkWX.jpg'"),s(`
          `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(` 
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),s(`
    
`),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"/"),n("span",{class:"token variable"},"if"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
`)])])])],-1),gn=a(`<p>The next time the <code>blog</code> App is run it uses the existing <code>$HOME\\.sharp-apps\\blog\\blog.sqlite</code> and skips populating the database above.</p><h4 id="rockwind" tabindex="-1">rockwind <a class="header-anchor" href="#rockwind" aria-hidden="true">#</a></h4><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/app/app-rockwind.png" alt=""><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/app/app-rockwind2.png" alt=""></p><p>Open with:</p><pre><code>$ app open rockwind
</code></pre><p>Rockwind is an example of a larger (60+ files) multi-versatile App of a hybrid Content, Data driven App with a UI and Web API over northwind tables that also combines multiple different Layouts in a single App.</p><p>Its data-driven Web UI and Web API requires the northwind database which is included in the gist as <code>northwind.readonly.sqlite</code> then in the init script it saves a copy to <strong>northwind.sqlite</strong> if it doesn&#39;t already exist:</p><h4 id="init-html-1" tabindex="-1"><a href="https://gist.github.com/gistlyn/0148c87e154fb4731c7fa6219375d989#file-_init-html" target="_blank" rel="noopener noreferrer">_init.html</a> <a class="header-anchor" href="#init-html-1" aria-hidden="true">#</a></h4><div class="language-js"><pre><code><span class="token function">vfsFileSystem</span><span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> fs

#<span class="token keyword">if</span> <span class="token operator">!</span>fs<span class="token punctuation">.</span><span class="token function">fileExists</span><span class="token punctuation">(</span><span class="token string">&#39;northwind.sqlite&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> fs<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&#39;northwind.sqlite&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Length <span class="token operator">==</span> <span class="token number">0</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&#39;northwind.sqlite&#39;</span><span class="token punctuation">,</span> <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&#39;northwind.readonly.sqlite&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">/</span><span class="token keyword">if</span>
</code></pre></div><p>rockwind contains a number of other hidden useful gems like how easy it is to create multi-linked query reports:</p><h4 id="northwind-order-report-id-html" tabindex="-1"><a href="https://gist.github.com/gistlyn/0148c87e154fb4731c7fa6219375d989#file-northwind-order-report-_id-html" target="_blank" rel="noopener noreferrer">northwind\\order-report_id.html</a> <a class="header-anchor" href="#northwind-order-report-id-html" aria-hidden="true">#</a></h4><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/app/app-rockwind3.png" alt=""></p><p>As well as a dynamic SQL Studio UI that re-queries as-you-type:</p><h4 id="northwind-sql-index-html" tabindex="-1"><a href="https://gist.github.com/gistlyn/0148c87e154fb4731c7fa6219375d989#file-northwind-sql-api-html" target="_blank" rel="noopener noreferrer">northwind\\sql\\index.html</a> <a class="header-anchor" href="#northwind-sql-index-html" aria-hidden="true">#</a></h4><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/app/app-rockwind4.png" alt=""></p><h3 id="github-sharp-apps" tabindex="-1">GitHub Sharp Apps <a class="header-anchor" href="#github-sharp-apps" aria-hidden="true">#</a></h3><p>Up to this point we&#39;ve only seen running Sharp Apps from Gists, but they can also be run from traditional GitHub repos as we can see from the <strong>chat</strong> App which links to its repo:</p><div class="language-"><pre><code> - [chat](https://github.com/sharp-apps/chat)
</code></pre></div><p>The difference between Gist an GitHub Repo Apps is that GitHub repo&#39;s need to be installed before they&#39;re run. When you run a GitHub Repo App with <code>open</code>, e.g:</p><pre><code>$ app open chat
</code></pre><p>It downloads the repo archive (either the last released version or current master archive), extracts its contents to the App&#39;s <code>$HOME\\.sharp-apps\\chat</code> folder then runs it as a traditional Web App where its files are maintained on disk.</p><p>As this process takes a little longer to start than Gist Apps you may prefer to use <code>run</code> for subsequent App runs:</p><pre><code>$ app run chat
</code></pre><p>Where it will run it from disk, whereas <code>open</code> will nuke the existing install, re-downloads the archive and extracts it again before launching.</p><p>For GitHub Repo apps, <code>open</code> is equivalent to re-running <code>install</code> and <code>run</code> each time:</p><pre><code>$ app install chat
$ app run chat
</code></pre><h3 id="github-sharp-app-commands" tabindex="-1">GitHub Sharp App Commands <a class="header-anchor" href="#github-sharp-app-commands" aria-hidden="true">#</a></h3><p>Whilst they work differently, <code>open</code>, <code>install</code>, <code>run</code> and <code>uninstall</code> have the same behavior for both Gist and GitHub Repo Apps, i.e:</p><ul><li><code>open</code> - Always run the latest version of the App</li><li><code>install</code> - Download the App only so it can be run offline</li><li><code>run</code> - Run the locally downloaded App</li><li><code>uninstall</code> - Remove all traces of previously installed or opened Apps</li></ul><h4 id="chat" tabindex="-1">chat <a class="header-anchor" href="#chat" aria-hidden="true">#</a></h4><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/app/app-chat.png" alt=""></p><p>Open with:</p><pre><code>$ app open chat
</code></pre><p><strong><a href="https://sharpscript.net/docs/sharp-apps#chat" target="_blank" rel="noopener noreferrer">chat</a></strong> is an example of the ultimate form of extensibility where instead of just being able to add Services, Filters and Plugins, etc. You can add your entire AppHost which Sharp Apps will use instead of its own. This vastly expands the use-cases that can be built with Sharp Apps as it gives you complete fine-grained control over exactly how your App is configured.</p><h4 id="plugins" tabindex="-1">plugins <a class="header-anchor" href="#plugins" aria-hidden="true">#</a></h4><p>The last packaging option supported for running Sharp Apps is being able to link to a specific GitHub Release version of your App, e.g:</p><div class="language-"><pre><code> - [plugins](https://github.com/sharp-apps/plugins/archive/v5.zip)
</code></pre></div><p>Which will ensure you&#39;re always running the same version of the App which is useful in being able to easily run and compare different App versions or be able to support beta releases of your App that you don&#39;t want everyone to use yet.</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/app/app-plugins.png" alt=""></p><p>Open with:</p><pre><code>$ app open plugins
</code></pre><p><strong><a href="https://sharpscript.net/docs/sharp-apps#plugins" target="_blank" rel="noopener noreferrer">plugins</a></strong> showcases the easy extensibility of Sharp Apps which allow &quot;no touch&quot; sharing of <a href="/plugins.html">ServiceStack Plugins</a>, <a href="https://docs.servicestack.net/create-your-first-webservice" target="_blank" rel="noopener noreferrer">Services</a>, <a href="http://sharpscript.net/docs/methods" target="_blank" rel="noopener noreferrer">Script Methods</a>, <a href="http://sharpscript.net/docs/code-pages" target="_blank" rel="noopener noreferrer">Sharp Code Pages</a> and <a href="https://docs.servicestack.net/validation" target="_blank" rel="noopener noreferrer">Validators</a> contained within <strong>.dll&#39;s</strong> or <strong>.exe&#39;s</strong> dropped in a Sharp App&#39;s <a href="https://github.com/ServiceStack/dotnet-app/tree/master/src/apps/plugins/plugins" target="_blank" rel="noopener noreferrer">/plugins</a> folder which are auto-registered on startup. The source code for all plugins used in this App were built from the .NET Core 2.1 projects in the <a href="https://github.com/ServiceStack/dotnet-app/tree/master/src/example-plugins" target="_blank" rel="noopener noreferrer">example-plugins</a> folder.</p><h3 id="run-apps-from-urls" tabindex="-1">Run Apps from URLs <a class="header-anchor" href="#run-apps-from-urls" aria-hidden="true">#</a></h3><p>Publishing your App to the global <a href="https://gist.github.com/gistlyn/802daba52b6fe6e2ed1430348dc596cb" target="_blank" rel="noopener noreferrer">app.md</a> registry makes it more accessible via a friendly name and discoverable, but if you don&#39;t want your App shared publicly or want to test it before publishing, it can also be run directly from a <strong>Gist URL</strong>, <strong>Gist Id</strong>, <strong>GitHub Repo</strong> or <strong>Release .zip Archive</strong>, e.g:</p><pre><code>$ app open https://gist.github.com/gistlyn/6de7993333b457445793f51f6f520ea8
$ app open 189cd72bfaf480526e4b34814c80f2c0
$ app open https://github.com/sharp-apps/redis
$ app open https://github.com/sharp-apps/plugins/archive/v5.zip
</code></pre><blockquote><p>Every <code>app</code> command is substitutable with <code>web</code> to run it within your preferred browser in Windows, macOS or Linux</p></blockquote><h3 id="gist-or-github-app-server-deployments" tabindex="-1">Gist or GitHub App Server Deployments <a class="header-anchor" href="#gist-or-github-app-server-deployments" aria-hidden="true">#</a></h3><p>As Sharp Apps are just .NET Core Web Apps, the same App can be run within a Chromium Desktop App with <a href="https://docs.servicestack.net/netcore-windows-desktop" target="_blank" rel="noopener noreferrer">app</a>, cross-platform on Windows, macOS or Linux with <a href="/dotnet-tool.html">x</a> in the preferred browser or hosted on a server where it&#39;s accessible to everyone with an internet connection.</p><p>Not only does not needing to compile Sharp Apps dramatically simplify App development but it also dramatically simplifies App deployment where you can completely skip all CI and build steps as there&#39;s nothing to build or deploy with the built-in support for Gist publishing.</p><p>All that&#39;s required is to run the App on your server with:</p><pre><code>$ web open redis
</code></pre><h4 id="configure-nginx" tabindex="-1">Configure Nginx <a class="header-anchor" href="#configure-nginx" aria-hidden="true">#</a></h4><p>Which runs on port <code>5000</code> by default, which you can make available under your preferred domain by adding an nginx virtual host by changing to:</p><pre><code>$ cd /etc/nginx/sites-available/
</code></pre><p>Then creating a Virtual Host configuration for your App, which you can start from using the mix <code>nginx</code> config template:</p><pre><code>$ web mix nginx
</code></pre><p>Then renaming the <code>my-app.web-app.io</code> file to the domain you want it hosted on instead, e.g:</p><pre><code>$ mv my-app.web-app.io redis.your-domain.com
</code></pre><p>You&#39;ll also need to rename the virtual host in the config file, which in vi you can do with:</p><pre><code>:%s/my-app.web-app.io/redis.your-domain.com/g
</code></pre><p>Now to enable the site in nginx, link it with:</p><pre><code>$ ln -s /etc/nginx/sites-available/redis.your-domain.com /etc/nginx/sites-enabled/redis.your-domain.com
</code></pre><p>Then reload nginx to pick up changes:</p><pre><code>$ /etc/init.d/nginx reload
</code></pre><p>And voila! your Gist Sharp App is now being served at <strong><a href="http://redis.your-domain.com" target="_blank" rel="noopener noreferrer">redis.your-domain.com</a></strong></p><h4 id="configure-supervisor" tabindex="-1">Configure Supervisor <a class="header-anchor" href="#configure-supervisor" aria-hidden="true">#</a></h4><p>We can further harden the .NET Core App process by having it run under a managed <a href="http://supervisord.org/index.html" target="_blank" rel="noopener noreferrer">supervisord</a> process.</p><p>To do this <a href="https://sharpscript.net/docs/deploying-sharp-apps#setup-the-deploy-user-account" target="_blank" rel="noopener noreferrer">create a deploy User Account</a> and give it permission to run the <code>supervisorctl</code> and <code>web</code> programs, then change directory to:</p><pre><code>$ cd /etc/supervisor/conf.d
</code></pre><p>Then generate a supervisor configuration template with:</p><pre><code>$ web mix supervisor
</code></pre><p>Rename it to your Web App&#39;s folder name:</p><pre><code>$ mv app.my-app.conf app.redis.conf
</code></pre><p>Then change all references of <code>my-app</code> to <code>redis</code>, which in vi you can do with:</p><pre><code>:%s/my-app/spirals/g
</code></pre><p>Which will change it to:</p><div class="language-"><pre><code>[program:app-redis]
command=/home/deploy/.dotnet/tools/web run redis --release
directory=/home/deploy/.sharp-apps/redis
autostart=true
autorestart=true
stderr_logfile=/var/log/app-redis.err.log
stdout_logfile=/var/log/app-redis.out.log
environment=ASPNETCORE_ENVIRONMENT=Production,ASPNETCORE_URLS=&quot;http://*:5000/&quot;
user=deploy
stopsignal=INT
</code></pre></div><blockquote><p>The --release flag overrides debug in app.settings so it&#39;s always run in release mode.</p></blockquote><p>After reviewing the changes, tell supervisor to register and start the supervisor process with:</p><pre><code>$ supervisorctl update
</code></pre><p>Where your website will now be up and running under a managed process at: <strong><a href="http://redis.your-domain.com" target="_blank" rel="noopener noreferrer">redis.your-domain.com</a></strong></p><h4 id="deploy-updates" tabindex="-1">Deploy Updates <a class="header-anchor" href="#deploy-updates" aria-hidden="true">#</a></h4><p>Now that&#39;s everything&#39;s configured, deploying app updates are easily done by installing the app again (which downloads the latest version), then restarting the supervisor managed process, in these 2 commands:</p><pre><code>$ web install redis
$ supervisorctl restart app-redis 
</code></pre><h3 id="customized-app-settings" tabindex="-1">Customized App Settings <a class="header-anchor" href="#customized-app-settings" aria-hidden="true">#</a></h3><p>If you need to customize the App&#39;s settings, like we&#39;ve needed to do with <a href="http://blog.web-app.io" target="_blank" rel="noopener noreferrer">blog.web-app.io</a> <strong>app.settings</strong> to replace its OAuth keys, you can add a modified copy in its App folder which will take precedence over the read-only gist version:</p><pre><code>$HOME/.sharp-apps/blog/app.settings
</code></pre><h3 id="hosted-gist-apps" tabindex="-1">Hosted Gist Apps <a class="header-anchor" href="#hosted-gist-apps" aria-hidden="true">#</a></h3><p>All our Gist Apps are now hosted this way, by running a locally downloaded Gist App that&#39;s hosted at the following URLs:</p><ul><li><a href="http://redis.web-app.io" target="_blank" rel="noopener noreferrer">redis.web-app.io</a></li><li><a href="http://blog.web-app.io" target="_blank" rel="noopener noreferrer">blog.web-app.io</a></li><li><a href="http://plugins.web-app.io" target="_blank" rel="noopener noreferrer">plugins.web-app.io</a></li><li><a href="http://spirals.web-app.io" target="_blank" rel="noopener noreferrer">spirals.web-app.io</a></li><li><a href="http://bare.web-app.io" target="_blank" rel="noopener noreferrer">bare.web-app.io</a></li></ul><h2 id="servicestack-updates" tabindex="-1">ServiceStack Updates <a class="header-anchor" href="#servicestack-updates" aria-hidden="true">#</a></h2><p>This covers all major feature items in this release, there were a number of other minor features an enhancements including:</p><h3 id="fluent-validation-upgraded" tabindex="-1">Fluent Validation Upgraded <a class="header-anchor" href="#fluent-validation-upgraded" aria-hidden="true">#</a></h3><p>The internalized version of <code>ServiceStack.FluentValidation</code> was upgraded to Fluent Validation v8.2.3.</p><h3 id="enums-displayed-in-metadata-pages" tabindex="-1">Enums displayed in Metadata pages <a class="header-anchor" href="#enums-displayed-in-metadata-pages" aria-hidden="true">#</a></h3><p>Enum&#39;s are now included in metadata pages definition of Service Contract Types, e.g:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/docs/master/docs/images/metadata/metadata-enums.png" alt=""></p><h3 id="auth-enhancements" tabindex="-1">Auth Enhancements <a class="header-anchor" href="#auth-enhancements" aria-hidden="true">#</a></h3><ul><li>The <code>FacebookAuthProvider</code> was upgraded to use v3.2 of Facebook API</li><li><code>AuthenticateResponse</code> now returns Roles/Permissions for authenticated users <ul><li>can be disabled with <code>AuthFeature.IncludeRolesInAuthenticateResponse</code></li></ul></li><li>The JWT Auth Provider added support for <code>FallbackPrivateKeys</code> when using JWE Tokens <ul><li>The new <code>GetVerifiedJwePayload()</code> and <code>VerifyJwePayload()</code> API&#39;s lets you verify JWE Tokens</li><li>The existing <code>GetVerifiedJwtPayload()</code> continues to validate both JWT and JWE Tokens</li></ul></li></ul><h3 id="auth-repository-features" tabindex="-1">Auth Repository Features <a class="header-anchor" href="#auth-repository-features" aria-hidden="true">#</a></h3><ul><li>Custom UserAuth Tables support added to <code>InMemoryAuthRepository</code></li><li>New <code>GetUserAuths()</code> and <code>SearchUserAuths()</code> API&#39;s on <code>IAuthRepository</code> lets you search and page through registered users</li><li>New <code>IManageRoles.GetRolesAndPermissions()</code> API allows for more efficient API to fetch both roles &amp; permissions in single API call in <code>IManageRoles</code> Auth Repositories that are configured with <code>UseDistinctRoleTables</code></li><li><code>MongoDbAuthRepository</code> upgraded to latest <strong>v2.8.1</strong> and now includes supports for .NET Core</li><li><code>RavenDbUserAuthRepository</code> upgraded to use <strong>v4.2</strong> and now includes supports for .NET Core</li></ul><h4 id="ravendb-breaking-change" tabindex="-1">RavenDB Breaking Change <a class="header-anchor" href="#ravendb-breaking-change" aria-hidden="true">#</a></h4><p>In v4.2 RavenDB fails when using an <code>int</code> Primary Key so <code>RavenDbUserAuthRepository</code> has been changed to use use new <code>RavenUserAuth</code> and <code>RavenUserAuthDetails</code> tables by default which have a <code>string Key</code> identifier field. If you&#39;re using RavenDB you&#39;ll need to migrate your <code>UserAuth</code> and <code>UserAuthDetails</code> tables to move to use a <code>Key</code> string identifier field, alternatively you can use your own custom UserAuth table and use the <code>[Index]</code> attribute to specify which <code>string</code> field should be for the identifier, e.g:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Index</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>Key<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RavenUserAuth</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">UserAuth</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Key <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="servereventsclient-allrequestfilters" tabindex="-1">ServerEventsClient AllRequestFilters <a class="header-anchor" href="#servereventsclient-allrequestfilters" aria-hidden="true">#</a></h3><p>The .NET <code>ServerEventsClient</code> makes a number of different request types during the life-cycle of a Server Events Connection which all have different RequestFilters on <code>ServerEventsClient</code> if you want to customize each request differently, or you can use the new <code>AllRequestFilters</code> to register a request filter to be used in all connections.</p><p>With this we can easily use an SSL Client Certificate in all Server Event Connections:</p><div class="language-csharp"><pre><code><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AddClientCertificate</span><span class="token punctuation">(</span><span class="token class-name">WebRequest</span> req<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">(</span><span class="token punctuation">(</span>HttpWebRequest<span class="token punctuation">)</span>req<span class="token punctuation">)</span><span class="token punctuation">.</span>ClientCertificates<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> sseClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServerEventsClient</span><span class="token punctuation">(</span>baseUrl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    AllRequestFilters <span class="token operator">=</span> AddClientCertificate<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="return-refresh-tokens-in-token-cookies" tabindex="-1">Return Refresh Tokens in Token Cookies <a class="header-anchor" href="#return-refresh-tokens-in-token-cookies" aria-hidden="true">#</a></h3><p>The new <code>UseTokenCookie</code> added to C# and TypeScript Service Clients configures the Service Client to request Refresh Tokens be returned in a <strong>JWT Token Cookie</strong>:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonServiceClient</span><span class="token punctuation">(</span>BaseUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span>UseTokenCookie <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="service-clients-async-webproxy" tabindex="-1">Service Clients Async WebProxy <a class="header-anchor" href="#service-clients-async-webproxy" aria-hidden="true">#</a></h3><p><code>IWebProxy Proxy</code> was added to <code>AsyncServiceClient</code> which is now also used in all async C# ServiceClient requests.</p><h3 id="extensible-client-dtos" tabindex="-1">Extensible Client DTOs <a class="header-anchor" href="#extensible-client-dtos" aria-hidden="true">#</a></h3><p>All <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Client/AuthDtos.cs" target="_blank" rel="noopener noreferrer">built-in Client Request and Response DTOs</a> implement the extensible <code>IMeta</code> string dictionaries allowing clients to attach additional metadata in all Requests to built-in Services.</p><h3 id="native-types" tabindex="-1">Native Types <a class="header-anchor" href="#native-types" aria-hidden="true">#</a></h3><p>All Native Types have a <code>TypeFilter</code> which can be used to override the return custom Type returned name based on .NET Type name and generic args, e.g:</p><div class="language-csharp"><pre><code>TypeScriptGenerator<span class="token punctuation">.</span>TypeFilter <span class="token operator">=</span> <span class="token punctuation">(</span>type<span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">&quot;ResponseBase\`1&quot;</span> <span class="token operator">&amp;&amp;</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">&quot;Dictionary&lt;String,List\`1&gt;&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string">&quot;ResponseBase&lt;Map&lt;string,Array&lt;any&gt;&gt;&gt;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Further customizations are available with the <code>InsertCodeFilter</code> and <code>AddCodeFilter</code> to be able to add custom code to the top and bottom of each languages generated DTOs:</p><ul><li><code>InsertCodeFilter</code> - add custom code to top of generated dtos</li><li><code>AddCodeFilter</code> - add custom code to bottom of generated dtos</li></ul><h3 id="servicestack-dart" tabindex="-1">ServiceStack Dart <a class="header-anchor" href="#servicestack-dart" aria-hidden="true">#</a></h3><p><a href="/dart-add-servicestack-reference.html">Dart Add ServiceStack Reference</a> received major compatibility improvements to its generic types support and support for the latest version of Dart which now supports for Enum&#39;s inside generic collections among other things.</p><h3 id="rabbitmq" tabindex="-1">RabbitMQ <a class="header-anchor" href="#rabbitmq" aria-hidden="true">#</a></h3><p>The new <code>MqQueueClientFilter</code> and <code>MqProducerFilter</code> Filters lets you customize the <code>RabbitMqProducer</code> and <code>RabbitMqQueueClient</code> clients used to publish and receive MQ messages.</p><h3 id="logging" tabindex="-1">Logging <a class="header-anchor" href="#logging" aria-hidden="true">#</a></h3><p><a href="https://blog.jetbrains.com/dotnet/2018/05/03/what-are-jetbrains-annotations/" target="_blank" rel="noopener noreferrer">JetBrains.Annotations</a> were added to ServiceStack.Interfaces and used to annotate the <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Logging/ILog.cs" target="_blank" rel="noopener noreferrer">ILog</a> APIs having the effect of lighting up <strong>string.Format()</strong> methods in JetBrains static analyzers.</p><h3 id="autoquery" tabindex="-1">AutoQuery <a class="header-anchor" href="#autoquery" aria-hidden="true">#</a></h3><p>The new <code>GlobalQueryFilter</code> on <code>AutoQueryFeature</code> and <code>AutoQueryDataFeature</code> can be used to intercept every AutoQuery Request.</p><h2 id="ormlite" tabindex="-1">OrmLite <a class="header-anchor" href="#ormlite" aria-hidden="true">#</a></h2><h3 id="enum-char-values" tabindex="-1">Enum Char Values <a class="header-anchor" href="#enum-char-values" aria-hidden="true">#</a></h3><p>By default OrmLite will store the string value of enums, if you wanted to instead store the Enum&#39;s integer value you can annotate it with <code>[Flags]</code> or <code>[EnumAsInt]</code> attribute:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Flags</span></span><span class="token punctuation">]</span> <span class="token comment">//or [EnumAsInt]</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">IntEnumExample</span>
<span class="token punctuation">{</span>
    None <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    Value1 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0</span><span class="token punctuation">,</span> 
    Value2 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> 
    Value3 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span> 
    Value4 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Similarly you can use the <code>[EnumAsChar]</code> attribute to store the <code>char</code> value of the Enum instead, e.g:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">EnumAsChar</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">CharEnumExample</span>
<span class="token punctuation">{</span>
    Value1 <span class="token operator">=</span> <span class="token string character">&#39;A&#39;</span><span class="token punctuation">,</span> 
    Value2 <span class="token operator">=</span> <span class="token string character">&#39;B&#39;</span><span class="token punctuation">,</span> 
    Value3 <span class="token operator">=</span> <span class="token string character">&#39;C&#39;</span><span class="token punctuation">,</span> 
    Value4 <span class="token operator">=</span> <span class="token string character">&#39;D&#39;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If you instead wanted to use different Enum Values in serialization and Service responses than what OrmLite persists in your Database you can use <code>[EnumMember]</code> to change the value that&#39;s serialized, e.g:</p><div class="language-csharp"><pre><code><span class="token comment">//Different serialized value than DB value</span>
<span class="token punctuation">[</span>DataContract<span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">SomeEnum</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">EnumMember</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Value <span class="token operator">=</span> <span class="token string">&quot;VALUE 1&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    Value1<span class="token punctuation">,</span> 
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">EnumMember</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Value <span class="token operator">=</span> <span class="token string">&quot;VALUE 2&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    Value2<span class="token punctuation">,</span> 
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">EnumMember</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Value <span class="token operator">=</span> <span class="token string">&quot;VALUE 3&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    Value3<span class="token punctuation">,</span> 
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">EnumMember</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Value <span class="token operator">=</span> <span class="token string">&quot;VALUE 4&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    Value4<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="multi-table-typed-orderby-expressions" tabindex="-1">Multi Table Typed OrderBy Expressions <a class="header-anchor" href="#multi-table-typed-orderby-expressions" aria-hidden="true">#</a></h3><p>Support for Multi Table Typed Expressions were added to <code>OrderBy</code>, <code>OrderByDescending</code>, <code>ThenBy</code> and <code>ThenByDescending</code> supporting ORDER BY expressions of up to 5 tables, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> q <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">From</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MainTable<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Join</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SubTable<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">OrderBy</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MainTable<span class="token punctuation">,</span> SubTable<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> s<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Weight <span class="token operator">&gt;</span> s<span class="token punctuation">.</span>Weight <span class="token punctuation">?</span> m<span class="token punctuation">.</span>Score <span class="token punctuation">:</span> s<span class="token punctuation">.</span>Score<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> results <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="consistent-string-param-lengths" tabindex="-1">Consistent String Param Lengths <a class="header-anchor" href="#consistent-string-param-lengths" aria-hidden="true">#</a></h3><p>To assist RDBMS&#39;s in being able to re-use query plans, all string DB Parameters are configured to use the registered <code>StringConverter</code> Default String Length when it&#39;s larger than the string param value otherwise uses the param value length.</p><h3 id="populatedobjectfilter" tabindex="-1">PopulatedObjectFilter <a class="header-anchor" href="#populatedobjectfilter" aria-hidden="true">#</a></h3><p>The new <code>PopulatedObjectFilter</code> can be used to apply custom logic after OrmLite populates an object instance which you can use to modify the instance before it&#39;s returned by OrmLite&#39;s APIs, e.g:</p><div class="language-csharp"><pre><code>OrmLiteConfig<span class="token punctuation">.</span>PopulatedObjectFilter <span class="token operator">=</span> obj <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">is</span> <span class="token class-name">MyType</span> myType<span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
        myType<span class="token punctuation">.</span><span class="token function">UpdateCalculatedFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="firebird-4-support" tabindex="-1">Firebird 4 Support <a class="header-anchor" href="#firebird-4-support" aria-hidden="true">#</a></h3><p>Support for Firebird 4 was added by <a href="https://github.com/madaleno" target="_blank" rel="noopener noreferrer">Luis Madaleno</a> contained within the new <code>Firebird4OrmLiteDialectProvider</code> class that you can utilize with:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> dbFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteConnectionFactory</span><span class="token punctuation">(</span>
    connectionString<span class="token punctuation">,</span>  
    Firebird4Dialect<span class="token punctuation">.</span>Provider<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="servicestack-redis" tabindex="-1">ServiceStack.Redis <a class="header-anchor" href="#servicestack-redis" aria-hidden="true">#</a></h2><h3 id="send-binary-pub-sub-messages" tabindex="-1">Send Binary Pub/Sub Messages <a class="header-anchor" href="#send-binary-pub-sub-messages" aria-hidden="true">#</a></h3><p>You can now send/receive binary messages over a <code>RedisPubServer</code> and <code>RedisSubscription</code> Redis Pub/Sub connection with the new <code>OnMessageBytes</code> filter, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> redisPubSub <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisPubSubServer</span><span class="token punctuation">(</span>clientsManager<span class="token punctuation">,</span> chan1<span class="token punctuation">,</span> chan2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        OnMessageBytes <span class="token operator">=</span> <span class="token punctuation">(</span>channel<span class="token punctuation">,</span> msgBytes<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token range operator">..</span><span class="token range operator">..</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="change-sslprotocols" tabindex="-1">Change SslProtocols <a class="header-anchor" href="#change-sslprotocols" aria-hidden="true">#</a></h3><p>Support for changing the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.security.authentication.sslprotocols?view=netframework-4.8" target="_blank" rel="noopener noreferrer">SslProtocols</a> used for encrypted SSL connections was added by <a href="https://github.com/amohtashami12307" target="_blank" rel="noopener noreferrer">@amohtashami12307</a> which can be set on the connection string using the <code>sslprotocols</code> modifier, e.g:</p><div class="language-csharp"><pre><code>
<span class="token class-name"><span class="token keyword">var</span></span> connString <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">$&quot;redis://</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Host</span><span class="token punctuation">}</span></span><span class="token string">?ssl=true&amp;sslprotocols=Tls12&amp;password=</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Password<span class="token punctuation">.</span><span class="token function">UrlEncode</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> redisManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisManagerPool</span><span class="token punctuation">(</span>connString<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> redisManager<span class="token punctuation">.</span><span class="token function">GetClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="servicestack-text" tabindex="-1">ServiceStack.Text <a class="header-anchor" href="#servicestack-text" aria-hidden="true">#</a></h2><h3 id="intercept-automapping-conversions" tabindex="-1">Intercept AutoMapping Conversions <a class="header-anchor" href="#intercept-automapping-conversions" aria-hidden="true">#</a></h3><p>The new <code>RegisterPopulator</code> AutoMapping API can be used to run custom logic after an Auto Mapping Conversion, e.g. after a <code>T.ConvertTo&lt;T&gt;()</code> or <code>T.PopulateWith(obj)</code> is performed.</p><p>This is useful when you need to intercept Auto Mapping conversions in external libraries, e.g. you can use this to populate the UserSession&#39;s <code>UserAuthId</code> with a different field from your Custom UserAuth:</p><div class="language-csharp"><pre><code>AutoMapping<span class="token punctuation">.</span><span class="token function">RegisterPopulator</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">IAuthSession</span> session<span class="token punctuation">,</span> <span class="token class-name">IUserAuth</span> userAuth<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>userAuth <span class="token keyword">is</span> <span class="token class-name">RavenUserAuth</span> ravenUserAuth<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        session<span class="token punctuation">.</span>UserAuthId <span class="token operator">=</span> ravenUserAuth<span class="token punctuation">.</span>Key<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>`,159),mn=[c,i,l,r,u,k,d,h,g,m,b,f,v,y,w,S,A,q,x,C,T,I,_,P,R,N,M,G,U,E,H,F,O,V,D,j,L,B,$,W,z,Q,J,Y,K,X,Z,nn,sn,an,tn,en,on,pn,cn,ln,rn,un,kn,dn,hn,gn];function bn(fn,vn,yn,wn,Sn,An){return o(),e("div",null,mn)}var Cn=t(p,[["render",bn]]);export{xn as __pageData,Cn as default};
