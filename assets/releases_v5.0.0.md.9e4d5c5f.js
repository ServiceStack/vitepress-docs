import{_ as e,c as t,o,a as s,b as n,e as a}from"./app.14440598.js";const S='{"title":"v5 Release Notes","description":"","frontmatter":{"title":"v5 Release Notes","slug":"v5-0-0"},"headers":[{"level":2,"title":"v5.0.2 Update","slug":"v5-0-2-update"},{"level":2,"title":"Future Versioning Scheme","slug":"future-versioning-scheme"},{"level":3,"title":"Enhancement Releases","slug":"enhancement-releases"},{"level":2,"title":"Run ASP.NET Core Apps on the .NET Framework","slug":"run-asp-net-core-apps-on-the-net-framework"},{"level":2,"title":"ServiceStack Mobile and Desktop Apps","slug":"servicestack-mobile-and-desktop-apps"},{"level":3,"title":"ServiceStack Server App","slug":"servicestack-server-app"},{"level":3,"title":"Server.NetCore","slug":"server-netcore"},{"level":3,"title":"Server.NetCoreFx","slug":"server-netcorefx"},{"level":3,"title":"Server.AspNet","slug":"server-aspnet"},{"level":3,"title":"Server.HttpListener","slug":"server-httplistener"},{"level":3,"title":"Shared ServiceStack Services","slug":"shared-servicestack-services"},{"level":2,"title":"Client Apps","slug":"client-apps"},{"level":3,"title":"WPF","slug":"wpf"},{"level":3,"title":"UWP","slug":"uwp"},{"level":3,"title":"Xamarin.Android","slug":"xamarin-android"},{"level":3,"title":"Xamarin.iOS","slug":"xamarin-ios"},{"level":3,"title":"OSX","slug":"osx"},{"level":3,"title":"Xamarin.Forms","slug":"xamarin-forms"},{"level":3,"title":"XamarinForms iOS","slug":"xamarinforms-ios"},{"level":3,"title":"XamarinForms UWP","slug":"xamarinforms-uwp"},{"level":3,"title":"XamarinForms Android","slug":"xamarinforms-android"},{"level":2,"title":".NET Standard 2.0 Logging Providers","slug":"net-standard-2-0-logging-providers"},{"level":2,"title":"Async Error Handling","slug":"async-error-handling"},{"level":2,"title":"AutoQuery DISTINCT","slug":"autoquery-distinct"},{"level":3,"title":"OrmLite commandFilter","slug":"ormlite-commandfilter"},{"level":3,"title":"ServiceStack.Text","slug":"servicestack-text"},{"level":2,"title":"One ServiceStack","slug":"one-servicestack"},{"level":2,"title":"New .NET Core 2.0 and .NET Framework Project Templates!","slug":"new-net-core-2-0-and-net-framework-project-templates"},{"level":3,"title":"ServiceStackVS VS.NET Templates Updated","slug":"servicestackvs-vs-net-templates-updated"},{"level":3,"title":".NET Core 2.0 TypeScript Webpack Templates","slug":"net-core-2-0-typescript-webpack-templates"},{"level":3,"title":"TypeScript","slug":"typescript"},{"level":3,"title":"Optimal Dev Workflow with Hot Reloading","slug":"optimal-dev-workflow-with-hot-reloading"},{"level":3,"title":"Configured with #Script","slug":"configured-with-script"},{"level":3,"title":"Deployments","slug":"deployments"},{"level":3,"title":"/wwwroot WebRoot Path for .NET Framework Templates","slug":"wwwroot-webroot-path-for-net-framework-templates"},{"level":3,"title":"Website Templates","slug":"website-templates"},{"level":3,"title":"Empty Web and SelfHost Templates","slug":"empty-web-and-selfhost-templates"},{"level":3,"title":".NET Core 2.0 ServiceStack WebApp Template","slug":"net-core-2-0-servicestack-webapp-template"},{"level":3,"title":".NET Framework Templates","slug":"net-framework-templates"},{"level":3,"title":"Windows Service Template","slug":"windows-service-template"},{"level":2,"title":".NET Core Apps Upgraded","slug":"net-core-apps-upgraded"},{"level":3,"title":"Multi-stage Docker Builds","slug":"multi-stage-docker-builds"},{"level":3,"title":"ServiceStack WebApps Updated","slug":"servicestack-webapps-updated"},{"level":3,"title":".NET Core IAppSettings Adapter","slug":"net-core-iappsettings-adapter"},{"level":3,"title":"PBKDF2 Password Hashing implementation","slug":"pbkdf2-password-hashing-implementation"},{"level":3,"title":"JWT AuthProvider","slug":"jwt-authprovider"},{"level":3,"title":"Registration","slug":"registration"},{"level":3,"title":"Routes with Custom Rules","slug":"routes-with-custom-rules"},{"level":3,"title":"#Script Pages","slug":"script-pages"},{"level":3,"title":"Logging with Context","slug":"logging-with-context"},{"level":2,"title":"V5 Changes and Migration Notes","slug":"v5-changes-and-migration-notes"},{"level":3,"title":"Strong Naming Notes","slug":"strong-naming-notes"},{"level":3,"title":"PCL Client Library Notes","slug":"pcl-client-library-notes"},{"level":3,"title":".NET Standard Client packages for .NET Framework Projects","slug":"net-standard-client-packages-for-net-framework-projects"},{"level":3,"title":".NET Framework specific features","slug":"net-framework-specific-features"},{"level":3,"title":"ServiceStack.Razor","slug":"servicestack-razor-1"},{"level":3,"title":"ServiceStack.NetFramework","slug":"servicestack-netframework"},{"level":3,"title":"Validation","slug":"validation"},{"level":3,"title":"Expanded Async Support","slug":"expanded-async-support"},{"level":3,"title":".NET Reflection APIs","slug":"net-reflection-apis"},{"level":3,"title":"Minor Features","slug":"minor-features"},{"level":2,"title":"@servicestack npm packages","slug":"servicestack-npm-packages"},{"level":2,"title":"ServiceStack.OrmLite","slug":"servicestack-ormlite"},{"level":3,"title":"Support for MySqlConnector ADO.NET Provider","slug":"support-for-mysqlconnector-ado-net-provider"},{"level":3,"title":"Parametrized IN Values","slug":"parametrized-in-values"},{"level":3,"title":"RowVersion Byte Array","slug":"rowversion-byte-array"},{"level":3,"title":"OnOpenConnection Filter","slug":"onopenconnection-filter"},{"level":3,"title":"OpenAsync APIs","slug":"openasync-apis"},{"level":2,"title":"ServiceStack.Aws","slug":"servicestack-aws"}],"relativePath":"releases/v5.0.0.md","lastUpdated":1634495308438}',p={},c=s(`<h2 id="v5-0-2-update" tabindex="-1">v5.0.2 Update <a class="header-anchor" href="#v5-0-2-update" aria-hidden="true">#</a></h2><p>Happy New 2018 All! We hope you&#39;ve all had a long, relaxing break over the holidays and are re-energized for a productive start to the new year. As we expect most Customers will have held off upgrading to v5 until the start of the new year we wanted to get the latest release out before then so Customers can immediately upgrade to the best release available.</p><h2 id="future-versioning-scheme" tabindex="-1">Future Versioning Scheme <a class="header-anchor" href="#future-versioning-scheme" aria-hidden="true">#</a></h2><p>Historically ServiceStack releases are focused around &quot;Major release schedules&quot; published along with detailed Release Notes describing new features and changes added in each release. All packages are published together in &quot;lockstep&quot; with the same version number so the effort to upgrade ServiceStack projects can be done all at same time, with low frequency.</p><p>Whilst we want to minimize the effort for Customers to upgrade we also want to make any fixes or enhancements to the previous release available sooner as there are often fixes reported and resolved immediately after each release and made available in our <a href="https://docs.servicestack.net/myget" target="_blank" rel="noopener noreferrer">pre-release packages on MyGet</a> that most Customers wont get until the next major Release on NuGet.</p><h3 id="enhancement-releases" tabindex="-1">Enhancement Releases <a class="header-anchor" href="#enhancement-releases" aria-hidden="true">#</a></h3><p>To deliver updates sooner we&#39;re going to dedicate time immediately after each release to resolving issues and adding enhancements to existing features so we can publish update releases before starting work on new major features. Update releases will be primarily additive and minimally disruptive so they&#39;re safe to upgrade.</p><p>To distinguish updates from normal releases we&#39;ll use the <code>{PATCH}</code> version to indicate an Enhancement Release and use the <code>{MINOR}</code> version for normal major releases:</p><pre><code>{MAJOR}.{MINOR}.{PATCH}
</code></pre><p>The <code>{MAJOR}</code> is reserved for Major releases like <strong>v5</strong> containing structural changes that may require changes to environment and/or project configurations. For <strong>v5</strong> these included:</p><ul><li>Merge <code>.Core</code> packages into main NuGet packages and upgrade to NuGet v3 nuspec</li><li>Sign all <code>net45</code> .dll&#39;s and merge <code>.Signed</code> packages into main NuGet packages</li><li>Upgrading to .NET Standard 2.0 and dropping PCL support</li><li>Upgrading minimum .NET Framework version requirements for <code>ServiceStack.RabbitMq</code> and <code>ServiceStack.Azure</code></li></ul><blockquote><p>Major structural releases should be few and far between with currently no plans for any in the immediate future.</p></blockquote><p>A new <code>{MINOR}</code> version will be used for normal &quot;Major&quot; releases which will have a <code>{PATCH}</code> version of <strong>0</strong>. An <strong>even</strong> <code>{PATCH}</code> version number indicates an &quot;Update&quot; release published to <strong>NuGet</strong> whilst an <strong>odd</strong> version number indicates a &quot;pre-release&quot; version that&#39;s only <a href="https://docs.servicestack.net/myget" target="_blank" rel="noopener noreferrer">available on MyGet</a>, e.g:</p><ul><li><strong>v5.0.0</strong> - Current Major Release with structural changes <ul><li>v5.0.2 - Enhancement of Major v5.0.0 Release</li><li>v5.0.3 - Pre-release packages published to MyGet only</li><li>v5.0.4? - Enhancement of Major v5.0.0 Release (if any)</li></ul></li><li><strong>v5.1.0</strong> - Next Major Release <ul><li>v5.1.1 - Pre-release packages published to MyGet only</li><li>v5.1.2? - Enhancement of Major v5.1.0 Release (if any)</li></ul></li><li>...</li><li><strong>v6.0.0</strong> - Next Major Release with structural changes</li></ul><h2 id="run-asp-net-core-apps-on-the-net-framework" tabindex="-1">Run <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps on the .NET Framework <a class="header-anchor" href="#run-asp-net-core-apps-on-the-net-framework" aria-hidden="true">#</a></h2><p>A primary use-case affected from unifying the <code>.Core</code> packages into the main NuGet packages was being able to run <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps on the <strong>.NET Framework</strong> which stems from the 2 different builds contained in ServiceStack NuGet packages:</p><ul><li><code>net45</code> - Contains support for running <strong><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a></strong> Web or Self-Hosting <strong>HttpListener</strong> App Hosts</li><li><code>netstandard2.0</code> - Contains support for only running on <strong><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core</strong> App Hosts</li></ul><p>Where the <code>net45</code> builds always get used when they&#39;re added to any <strong>.NET Framework</strong> project. To allow <strong>.NET v4.6.1+</strong> Clients to share .NET Standard 2.0 assemblies with .NET Core Servers we continued to publish <a href="#net-standard-client-packages-for-net-framework-projects">.Core Client packages</a> but we were also quickly made aware there&#39;s several Customers who prefer to create <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps running on the .NET Framework in order to be able to use existing .NET Framework assemblies at the expense of not being able to run on the faster and multi platform <strong>.NET Core 2.0</strong> runtime.</p><p>To support this use-case we&#39;re re-publishing <code>.Core</code> NuGet packages which contains only the <strong>.NET Standard 2.0</strong> builds in order to force .NET Framework projects to use <strong>.NET Standard 2.0</strong> builds which contains support for running <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps. Currently the complete list of <code>.Core</code> packages which contains <strong>.NET Standard 2.0</strong> builds include:</p><ul><li>ServiceStack.Text.Core</li><li>ServiceStack.Interfaces.Core</li><li>ServiceStack.Client.Core</li><li>ServiceStack.HttpClient.Core</li><li>ServiceStack.Core</li><li>ServiceStack.Common.Core</li><li>ServiceStack.Mvc.Core</li><li>ServiceStack.Server.Core</li><li>ServiceStack.Redis.Core</li><li>ServiceStack.OrmLite.Core</li><li>ServiceStack.OrmLite.Sqlite.Core</li><li>ServiceStack.OrmLite.SqlServer.Core</li><li>ServiceStack.OrmLite.PostgreSQL.Core</li><li>ServiceStack.OrmLite.MySql.Core</li><li>ServiceStack.OrmLite.MySqlConnector.Core</li><li>ServiceStack.Aws.Core</li><li>ServiceStack.Azure.Core</li><li>ServiceStack.RabbitMq.Core</li><li>ServiceStack.Api.OpenApi.Core</li><li>ServiceStack.Admin.Core</li><li>ServiceStack.Stripe.Core</li><li>ServiceStack.Kestrel</li></ul><p>Ultimately support for whether a <strong>.NET Standard 2.0</strong> library will run on the .NET Framework depends on whether external dependencies also support this scenario which as it&#39;s a more niche use-case, will be a less tested scenario.</p><p>There are also other inconsistencies like not being able to reference the <a href="https://www.nuget.org/packages/Microsoft.AspNetCore.All" target="_blank" rel="noopener noreferrer">Microsoft.AspNetCore.All</a> meta package which only supports .NET Core 2.0 projects, instead you would need to reference the packages individually. To make it as easy as possible to get started we&#39;ve created a new <a href="https://github.com/NetFrameworkCoreTemplates" target="_blank" rel="noopener noreferrer">NetFrameworkCoreTemplates</a> GitHub Organization containing popular starting templates for running <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps on .NET Framework (default v4.7) which as a convention all have the <code>-corefx</code> suffix:</p><ul><li><a href="https://github.com/NetFrameworkCoreTemplates/web-corefx" target="_blank" rel="noopener noreferrer">web-corefx</a> - .NET Framework <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Website</li><li><a href="https://github.com/NetFrameworkCoreTemplates/empty-corefx" target="_blank" rel="noopener noreferrer">empty-corefx</a> - .NET Framework <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Single Project Website</li><li><a href="https://github.com/NetFrameworkCoreTemplates/selfhost-corefx" target="_blank" rel="noopener noreferrer">selfhost-corefx</a> - .NET Framework <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core self-hosting Console App</li><li><a href="https://github.com/NetFrameworkCoreTemplates/mvc-corefx" target="_blank" rel="noopener noreferrer">mvc-corefx</a> - .NET Framework <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core MVC Website</li><li><a href="https://github.com/NetFrameworkCoreTemplates/razor-corefx" target="_blank" rel="noopener noreferrer">razor-corefx</a> - .NET Framework <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Website with ServiceStack.Razor</li><li><a href="https://github.com/NetFrameworkCoreTemplates/templates-corefx" target="_blank" rel="noopener noreferrer">templates-corefx</a> - .NET Framework <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Templates Bootstrap Website</li></ul><p>The latest <code>@servicestack/cli</code> <strong>v1.0.2</strong> has been updated to include this additional config source, including them in the list of available templates:</p><pre><code>$ dotnet-new
</code></pre><p><img src="https://docs.servicestack.net/images/ssvs/dotnet-new-list.png" alt=""></p><p>Which will let you create an <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core App running on the .NET Framework v4.7 with:</p><pre><code>$ npm install -g @servicestack/cli

$ dotnet-new web-corefx AcmeNetFx
</code></pre><p>Which can then be opened in your preferred <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a> or Project Rider C# IDE.</p><h2 id="servicestack-mobile-and-desktop-apps" tabindex="-1">ServiceStack Mobile and Desktop Apps <a class="header-anchor" href="#servicestack-mobile-and-desktop-apps" aria-hidden="true">#</a></h2><p><a href="https://github.com/ServiceStackApps/HelloMobile" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStackApps/HelloMobile/master/screenshots/splash-900.png" alt=""></a></p><p>The <a href="https://github.com/ServiceStackApps/HelloMobile" target="_blank" rel="noopener noreferrer">HelloMobile</a> project has been rewritten to use the latest v5 .NET Standard 2.0 and .NET Framework clients and contains multiple versions of the same App demonstrating a number of different calling conventions, service integrations and reuse possibilities for each of the following platforms:</p><ul><li>WPF</li><li>UWP</li><li>Xamarin.Android</li><li>Xamarin.iOS</li><li>Xamarin.OSX</li><li>Xamarin.Forms <ul><li>iOS</li><li>Android</li><li>UWP</li></ul></li></ul><h3 id="servicestack-server-app" tabindex="-1">ServiceStack Server App <a class="header-anchor" href="#servicestack-server-app" aria-hidden="true">#</a></h3><p>Each App calls the same simple ServiceStack Server <a href="https://github.com/ServiceStackApps/HelloMobile/blob/master/src/Server.Common/WebServices.cs" target="_blank" rel="noopener noreferrer">WebServices.cs</a> implementation that thanks to ServiceStack&#39;s versatility, can be hosted on any of .NET&#39;s popular HTTP Server hosting configurations:</p><h3 id="server-netcore" tabindex="-1"><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Server.NetCore" target="_blank" rel="noopener noreferrer">Server.NetCore</a> <a class="header-anchor" href="#server-netcore" aria-hidden="true">#</a></h3><p>The AppHost for hosting the ServiceStack Services in a <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core 2.0 App:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppHost</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AppHostBase</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">AppHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Server<span class="token punctuation">.</span>NetCore<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">WebServices</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Assembly<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> SharedAppHost<span class="token punctuation">.</span><span class="token function">Configure</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="server-netcorefx" tabindex="-1"><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Server.NetCoreFx" target="_blank" rel="noopener noreferrer">Server.NetCoreFx</a> <a class="header-anchor" href="#server-netcorefx" aria-hidden="true">#</a></h3><p>The same source code can be used to run a ServiceStack <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core App on the <strong>.NET Framework</strong>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppHost</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AppHostBase</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">AppHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Server<span class="token punctuation">.</span>NetCoreFx<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">WebServices</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Assembly<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> SharedAppHost<span class="token punctuation">.</span><span class="token function">Configure</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The difference between a <strong>.NET Framework v4.7</strong> and a <strong>.NET Core 2.0</strong> <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core App is in <a href="https://github.com/ServiceStackApps/HelloMobile/blob/master/src/Server.NetCoreFx/Server.NetCoreFx.csproj" target="_blank" rel="noopener noreferrer">Server.NetCoreFx.csproj</a> where it references <strong>ServiceStack.Core</strong> NuGet package to force using the <strong>.NET Standard 2.0</strong> version of ServiceStack that contains the support for hosting <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core Apps.</p><h3 id="server-aspnet" tabindex="-1"><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Server.AspNet" target="_blank" rel="noopener noreferrer">Server.AspNet</a> <a class="header-anchor" href="#server-aspnet" aria-hidden="true">#</a></h3><p>The same source code is also used for hosting classic <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Web Applications:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppHost</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AppHostBase</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">AppHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Server<span class="token punctuation">.</span>AspNet<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">WebServices</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Assembly<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> SharedAppHost<span class="token punctuation">.</span><span class="token function">Configure</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="server-httplistener" tabindex="-1"><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Server.HttpListener" target="_blank" rel="noopener noreferrer">Server.HttpListener</a> <a class="header-anchor" href="#server-httplistener" aria-hidden="true">#</a></h3><p>Alternatively to host in a .NET Framework Self-Hosting HttpListener, the AppHost needs to inherit from <code>AppSelfHostBase</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppHost</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AppSelfHostBase</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">AppHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token keyword">nameof</span><span class="token punctuation">(</span>Server<span class="token punctuation">.</span>HttpListener<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">WebServices</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Assembly<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> SharedAppHost<span class="token punctuation">.</span><span class="token function">Configure</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="shared-servicestack-services" tabindex="-1">Shared ServiceStack Services <a class="header-anchor" href="#shared-servicestack-services" aria-hidden="true">#</a></h3><p>All AppHost&#39;s above are configured to run the same Web Services implementation below:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SharedAppHost</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IAppHost</span> appHost<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        appHost<span class="token punctuation">.</span>Config<span class="token punctuation">.</span>DefaultRedirectPath <span class="token operator">=</span> <span class="token string">&quot;/metadata&quot;</span><span class="token punctuation">;</span>

        appHost<span class="token punctuation">.</span>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">CorsFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        appHost<span class="token punctuation">.</span>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthUserSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IAuthProvider<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span>
                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomCredentialsAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JwtAuthProvider</span>
                <span class="token punctuation">{</span>
                    AuthKeyBase64 <span class="token operator">=</span> Config<span class="token punctuation">.</span>JwtAuthKeyBase64<span class="token punctuation">,</span>
                    RequireSecureConnection <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        appHost<span class="token punctuation">.</span>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">EncryptedMessagesFeature</span>
        <span class="token punctuation">{</span>
            PrivateKeyXml <span class="token operator">=</span> Config<span class="token punctuation">.</span>PrivateKeyXml
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomCredentialsAuthProvider</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">CredentialsAuthProvider</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">TryAuthenticate</span><span class="token punctuation">(</span><span class="token class-name">IServiceBase</span> authService<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> userName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> userName <span class="token operator">==</span> <span class="token string">&quot;user&quot;</span> <span class="token operator">&amp;&amp;</span> password <span class="token operator">==</span> <span class="token string">&quot;pass&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">Hello</span> request<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HelloResponse</span> <span class="token punctuation">{</span> Result <span class="token operator">=</span> <span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span>Name <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Authenticate</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthServices</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">HelloAuth</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HelloResponse</span> <span class="token punctuation">{</span> Result <span class="token operator">=</span> <span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span>Name <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which are all configured to listen on the same <strong><a href="http://localhost:5000" target="_blank" rel="noopener noreferrer">http://localhost:5000</a></strong> address.</p><h2 id="client-apps" tabindex="-1">Client Apps <a class="header-anchor" href="#client-apps" aria-hidden="true">#</a></h2><p>Once the server is running you can run any of the included Client Apps by selecting it as the <strong>StartUp Project</strong> in the context menu and running it with <code>Ctrl+F5</code>.</p><p>Each of the Client Apps have the same functionality demonstrating a number of popular use-cases scenarios for accessing ServiceStack Services. Whilst the event handler registrations in each App can vary, the source code used to call ServiceStack Services remains the same with all calls following the same approach to call Services by sending a populated Request DTOs in the <strong>ServiceModel.dll</strong>, sent utilizing different APIs and features built into ServiceStack&#39;s Service Clients.</p><h3 id="wpf" tabindex="-1"><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.Wpf" target="_blank" rel="noopener noreferrer">WPF</a> <a class="header-anchor" href="#wpf" aria-hidden="true">#</a></h3><p><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.Wpf" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStackApps/HelloMobile/master/screenshots/wpf.png" alt=""></a></p><p>Here is WPF&#39;s complete <a href="https://github.com/ServiceStackApps/HelloMobile/blob/master/src/Client.Wpf/MainWindow.xaml.cs" target="_blank" rel="noopener noreferrer">MainWindow.xaml.cs</a> implementation below:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">MainWindow</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Window</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> BaseUrl <span class="token operator">=</span> Config<span class="token punctuation">.</span>BaseUrl<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IServiceClient</span> <span class="token function">CreateClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonServiceClient</span><span class="token punctuation">(</span>BaseUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">btnSync_Click</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token function">CreateClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Hello</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;Sync&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            lblResults<span class="token punctuation">.</span>Text <span class="token operator">=</span> response<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            lblResults<span class="token punctuation">.</span>Text <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">btnAsync_Click</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token function">CreateClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Hello</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;Async&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            lblResults<span class="token punctuation">.</span>Text <span class="token operator">=</span> response<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            lblResults<span class="token punctuation">.</span>Text <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">btnGateway_Click</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> gateway <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SharedGateway</span><span class="token punctuation">(</span>BaseUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> greeting <span class="token operator">=</span> <span class="token keyword">await</span> gateway<span class="token punctuation">.</span><span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token string">&quot;Gateway&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            lblResults<span class="token punctuation">.</span>Text <span class="token operator">=</span> greeting<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            lblResults<span class="token punctuation">.</span>Text <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">btnAuth_Click</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token function">CreateClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">PostAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Authenticate</span>
            <span class="token punctuation">{</span>
                provider <span class="token operator">=</span> <span class="token string">&quot;credentials&quot;</span><span class="token punctuation">,</span>
                UserName <span class="token operator">=</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span>
                Password <span class="token operator">=</span> <span class="token string">&quot;pass&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HelloAuth</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;Auth&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            lblResults<span class="token punctuation">.</span>Text <span class="token operator">=</span> response<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            lblResults<span class="token punctuation">.</span>Text <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">btnJwt_Click</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> authClient <span class="token operator">=</span> <span class="token function">CreateClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> authResponse <span class="token operator">=</span> <span class="token keyword">await</span> authClient<span class="token punctuation">.</span><span class="token function">PostAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Authenticate</span>
            <span class="token punctuation">{</span>
                provider <span class="token operator">=</span> <span class="token string">&quot;credentials&quot;</span><span class="token punctuation">,</span>
                UserName <span class="token operator">=</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span>
                Password <span class="token operator">=</span> <span class="token string">&quot;pass&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonServiceClient</span><span class="token punctuation">(</span>BaseUrl<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                BearerToken <span class="token operator">=</span> authResponse<span class="token punctuation">.</span>BearerToken <span class="token comment">//JWT</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">GetAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HelloAuth</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;JWT Auth&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            lblResults<span class="token punctuation">.</span>Text <span class="token operator">=</span> response<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            lblResults<span class="token punctuation">.</span>Text <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">btnEncrypted_Click</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token punctuation">(</span>IJsonServiceClient<span class="token punctuation">)</span><span class="token function">CreateClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> encryptedClient <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">GetEncryptedClient</span><span class="token punctuation">(</span>Config<span class="token punctuation">.</span>PublicKeyXml<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> encryptedClient<span class="token punctuation">.</span><span class="token function">SendAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Hello</span> <span class="token punctuation">{</span> Name <span class="token operator">=</span> <span class="token string">&quot;Encrypted Client&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            lblResults<span class="token punctuation">.</span>Text <span class="token operator">=</span> response<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            lblResults<span class="token punctuation">.</span>Text <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="uwp" tabindex="-1"><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.UWP" target="_blank" rel="noopener noreferrer">UWP</a> <a class="header-anchor" href="#uwp" aria-hidden="true">#</a></h3><p><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.UWP" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStackApps/HelloMobile/master/screenshots/uwp.png" alt=""></a></p><h3 id="xamarin-android" tabindex="-1"><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.Android" target="_blank" rel="noopener noreferrer">Xamarin.Android</a> <a class="header-anchor" href="#xamarin-android" aria-hidden="true">#</a></h3><p><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.Android" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStackApps/HelloMobile/master/screenshots/android.png" alt=""></a></p><h3 id="xamarin-ios" tabindex="-1"><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.iOS" target="_blank" rel="noopener noreferrer">Xamarin.iOS</a> <a class="header-anchor" href="#xamarin-ios" aria-hidden="true">#</a></h3><p><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.iOS" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStackApps/HelloMobile/master/screenshots/ios.png" alt=""></a></p><h3 id="osx" tabindex="-1"><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.OSX" target="_blank" rel="noopener noreferrer">OSX</a> <a class="header-anchor" href="#osx" aria-hidden="true">#</a></h3><p><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.OSX" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStackApps/HelloMobile/master/screenshots/osx.png" alt=""></a></p><h3 id="xamarin-forms" tabindex="-1">Xamarin.Forms <a class="header-anchor" href="#xamarin-forms" aria-hidden="true">#</a></h3><p>Xamarin.Forms enables maximum reuse possible in C# Apps by letting you develop and share a Single UI across all your Apps.</p><p><img src="https://raw.githubusercontent.com/ServiceStackApps/HelloMobile/master/screenshots/xamarin.forms-reuse.png" alt=""></p><p>For Basic Apps with Simple UI&#39;s like this no specialization was needed as you can define both the UI and its complete implementation in a shared <a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.XamarinForms/Client.XamarinForms" target="_blank" rel="noopener noreferrer">Client.XamarinForms</a> project using an Xamarin.Forms <a href="https://github.com/ServiceStackApps/HelloMobile/blob/master/src/Client.XamarinForms/Client.XamarinForms/MainPage.xaml" target="_blank" rel="noopener noreferrer">MainPage.xaml</a> markup to develop its UI using an XAML dialect that closely resembles the XAML used in UWP and WPF Apps:</p><div class="language-xml"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Grid</span> <span class="token attr-name">Margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10,20,0,100<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Grid.ColumnDefinitions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ColumnDefinition</span> <span class="token attr-name">Width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Grid.ColumnDefinitions</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Grid.RowDefinitions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RowDefinition</span> <span class="token attr-name">Height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RowDefinition</span> <span class="token attr-name">Height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Grid.RowDefinitions</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>StackLayout</span> <span class="token attr-name">Grid.Row</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Horizontal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name"><span class="token namespace">x:</span>Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnSync<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Sync<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name"><span class="token namespace">x:</span>Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnAsync<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Async<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name"><span class="token namespace">x:</span>Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnGateway<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Gateway<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name"><span class="token namespace">x:</span>Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnAuth<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Auth<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name"><span class="token namespace">x:</span>Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnJwt<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JWT<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name"><span class="token namespace">x:</span>Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnEncrypted<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Encrypted<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>StackLayout</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Label</span> <span class="token attr-name">Grid.Row</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">x:</span>Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lblResults<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">FontSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>36<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name">HorizontalTextAlignment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Center<span class="token punctuation">&quot;</span></span> <span class="token attr-name">VerticalTextAlignment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Center<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Grid</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="xamarinforms-ios" tabindex="-1"><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.XamarinForms/Client.XamarinForms.iOS" target="_blank" rel="noopener noreferrer">XamarinForms iOS</a> <a class="header-anchor" href="#xamarinforms-ios" aria-hidden="true">#</a></h3><p><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.XamarinForms/Client.XamarinForms.iOS" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStackApps/HelloMobile/master/screenshots/xamarinforms.ios.png" alt=""></a></p><h3 id="xamarinforms-uwp" tabindex="-1"><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.XamarinForms/Client.XamarinForms.UWP" target="_blank" rel="noopener noreferrer">XamarinForms UWP</a> <a class="header-anchor" href="#xamarinforms-uwp" aria-hidden="true">#</a></h3><p><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.XamarinForms/Client.XamarinForms.UWP" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStackApps/HelloMobile/master/screenshots/xamarinforms.uwp.png" alt=""></a></p><h3 id="xamarinforms-android" tabindex="-1"><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.XamarinForms/Client.XamarinForms.Android" target="_blank" rel="noopener noreferrer">XamarinForms Android</a> <a class="header-anchor" href="#xamarinforms-android" aria-hidden="true">#</a></h3><p><a href="https://github.com/ServiceStackApps/HelloMobile/tree/master/src/Client.XamarinForms/Client.XamarinForms.Android" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/ServiceStackApps/HelloMobile/master/screenshots/xamarinforms.android.png" alt=""></a></p><h2 id="net-standard-2-0-logging-providers" tabindex="-1">.NET Standard 2.0 Logging Providers <a class="header-anchor" href="#net-standard-2-0-logging-providers" aria-hidden="true">#</a></h2><p>Whilst our recommendation is to use <a href="/netcore.html#servicestacklogging-adapters">.NET Core&#39;s Logging Abstraction</a> some Customers prefer to avoid this abstraction and configure logging directly with ServiceStack. To support this we&#39;ve included <strong>.NET Standard 2.0</strong> builds to the following logging providers:</p><ul><li>ServiceStack.Logging.Serilog</li><li>ServiceStack.Logging.Slack</li></ul><h2 id="async-error-handling" tabindex="-1">Async Error Handling <a class="header-anchor" href="#async-error-handling" aria-hidden="true">#</a></h2><p>This is an enhancement to our <a href="#expanded-async-support">Expanded Async Support</a> where there&#39;s now the option to register async exception handlers, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">this</span><span class="token punctuation">.</span>ServiceExceptionHandlersAsync<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>httpReq<span class="token punctuation">,</span> request<span class="token punctuation">,</span> ex<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">LogServiceExceptionAsync</span><span class="token punctuation">(</span>httpReq<span class="token punctuation">,</span> request<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>ex <span class="token keyword">is</span> <span class="token class-name">UnhandledException</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> ex<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>request <span class="token keyword">is</span> <span class="token class-name">IQueryDb</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> DtoUtils<span class="token punctuation">.</span><span class="token function">CreateErrorResponse</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;AutoQuery request failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>UncaughtExceptionHandlersAsync<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> operationName<span class="token punctuation">,</span> ex<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">WriteAsync</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;UncaughtException &#39;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">ex<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">&#39; at &#39;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">req<span class="token punctuation">.</span>PathInfo</span><span class="token punctuation">}</span></span><span class="token string">&#39;&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">EndRequest</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">skipHeaders</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If you were instead inheriting <code>OnServiceException</code> or <code>OnUncaughtException</code> in your AppHost they now return a <code>Task</code> type.</p><h2 id="autoquery-distinct" tabindex="-1">AutoQuery DISTINCT <a class="header-anchor" href="#autoquery-distinct" aria-hidden="true">#</a></h2><p>AutoQuery added support querying DISTINCT fields by prefixing the custom fields list with <code>DISTINCT </code>, example using QueryString:</p><pre><code>?Fields=DISTINCT Field1,Field2
</code></pre><p>Examle using C# Client:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">QueryCustomers</span> <span class="token punctuation">{</span> 
    Fields <span class="token operator">=</span> <span class="token string">&quot;DISTINCT Country&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>We can use this feature with Northwinds existing <a href="https://github.com/NetCoreApps/Northwind/blob/master/src/Northwind.ServiceModel/AutoQuery.cs" target="_blank" rel="noopener noreferrer">AutoQuery Request DTOs</a>:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/query/customers&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryCustomers</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">QueryDb<span class="token punctuation">&lt;</span>Customer<span class="token punctuation">&gt;</span></span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><p>To return all unique City and Countries of Northwind Customers with:</p><ul><li><a href="http://northwind.netcore.io/query/customers?Fields=DISTINCT%20City,Country" target="_blank" rel="noopener noreferrer">northwind.netcore.io/query/customers?Fields=DISTINCT City,Country</a></li></ul><p>Or to just return their unique Countries they&#39;re in:</p><ul><li><a href="http://northwind.netcore.io/query/customers?Fields=DISTINCT%20Country" target="_blank" rel="noopener noreferrer">northwind.netcore.io/query/customers?Fields=DISTINCT Country</a></li></ul><h3 id="ormlite-commandfilter" tabindex="-1">OrmLite commandFilter <a class="header-anchor" href="#ormlite-commandfilter" aria-hidden="true">#</a></h3><p>An optional <code>Func&lt;IDbCommand&gt; commandFilter</code> has been added to OrmLite&#39;s <code>INSERT</code> and <code>UPDATE</code> APIs to allow customization and inspection of the populated <code>IDbCommand</code> before it&#39;s run. This feature is utilized in the new <a href="https://github.com/ServiceStack/ServiceStack.OrmLite/blob/master/src/ServiceStack.OrmLite/OrmLiteConflictResolutions.cs" target="_blank" rel="noopener noreferrer">Conflict Resolution Extension methods</a> where you can specify the conflict resolution strategy when a Primary Key or Unique constraint violation occurs:</p><div class="language-csharp"><pre><code>db<span class="token punctuation">.</span><span class="token function">InsertAll</span><span class="token punctuation">(</span>rows<span class="token punctuation">,</span> dbCmd <span class="token operator">=&gt;</span> dbCmd<span class="token punctuation">.</span><span class="token function">OnConflictIgnore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Equivalent to: </span>
db<span class="token punctuation">.</span><span class="token function">InsertAll</span><span class="token punctuation">(</span>rows<span class="token punctuation">,</span> dbCmd <span class="token operator">=&gt;</span> dbCmd<span class="token punctuation">.</span><span class="token function">OnConflict</span><span class="token punctuation">(</span>ConflictResolution<span class="token punctuation">.</span>Ignore<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In this case it will ignore any conflicts that occurs and continue inserting the remaining rows in SQLite, MySql and PostgreSQL, whilst in SQL Server it&#39;s a NOOP.</p><p>SQLite offers <a href="https://sqlite.org/lang_conflict.html" target="_blank" rel="noopener noreferrer">additional fine-grained behavior</a> that can be specified for when a conflict occurs:</p><ul><li>ROLLBACK</li><li>ABORT</li><li>FAIL</li><li>IGNORE</li><li>REPLACE</li></ul><h3 id="servicestack-text" tabindex="-1">ServiceStack.Text <a class="header-anchor" href="#servicestack-text" aria-hidden="true">#</a></h3><p>The <code>XmlSerializer.XmlWriterSettings</code> and <code>XmlSerializer.XmlReaderSettings</code> for controlling the default XML behavior is now publicly accessible with <a href="https://msdn.microsoft.com/en-us/magazine/ee335713.aspx" target="_blank" rel="noopener noreferrer">DTD Processing now disabled by default</a>.</p><p>Support for leading zeros in integers was restored.</p><h1 id="v5-release-notes" tabindex="-1">v5 Release Notes <a class="header-anchor" href="#v5-release-notes" aria-hidden="true">#</a></h1><p>The theme of this major v5 release is integration and unification with the newly released .NET Standard 2.0 which offers the broadest compatibility and stabilized API surface for .NET Core and the version we&#39;ve chosen to standardize around.</p><p>To this end we&#39;ve upgraded all existing .NET Standard builds to <strong>.NET Standard 2.0</strong>, all .NET Core Apps and Test projects to <strong>.NET Core 2.0</strong> and merged our .NET Standard <code>.Core</code> NuGet packages into the main ServiceStack NuGet packages - unifying them into a single suite of NuGet packages and release cadence.</p><p>If you were waiting for .NET Core to stabilize before migrating or depending on it for new green field projects, we believe .NET Core 2.0 and .NET Standard 2.0 is the best time to jump in! It offers a leap in compatibiilty over its predecessors, simplified package versioning with a stable and simplified MSBuild project format that&#39;s well supported by most C# IDEs.</p><p>This release also unifies the <code>.Signed</code> NuGet package variants where now all <strong>.NET 4.5 builds are Strong Named</strong> by default using the <code>servicestack.snk</code> signing key that&#39;s in the <a href="https://github.com/ServiceStack/ServiceStack/tree/master/src" target="_blank" rel="noopener noreferrer">/src</a> folder of each Project. The .NET Standard builds continue to remain unsigned so they can be built on each platform with .NET Core&#39;s <code>dotnet build</code> command.</p><p>Consolidating all NuGet package variants into the main NuGet packages simplifies the development experience for Customers using <strong>.Signed</strong> packages who now have access to a first-class experience utilizing the Project Templates and IDE Integration available in ServiceStackVS&#39;s <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a> Extension.</p><p>As this is a major version upgrade please review the <a href="#v5-changes-and-migration-notes">v5 Changes and Migration Notes</a> before upgrading. Whilst the user-facing source code impact is minimal, we&#39;ve taken the opportunity of a major version window to perform some logical re-structuring.</p><h2 id="one-servicestack" tabindex="-1">One ServiceStack <a class="header-anchor" href="#one-servicestack" aria-hidden="true">#</a></h2><p>An unfortunate side-effect of the multi-year development churn and multiple breaking versions being done in the open for what we now know as .NET Core is the trail of outdated blog posts and invalid documentation which has resulted in a lot of confusion and poor messaging about .NET Core 2.0&#39;s current polished and capable form and how it differentiates to the classic ASP .NET Framework.</p><p>With the amount of accumulated misinformation one could be forgiven for thinking they&#39;re 2 completely different fragmented worlds shrouded in a myriad of incompatible dependencies. Whilst that may be true of some libraries and frameworks it&#39;s not reflective of ServiceStack which maintains a single code base implementation, a single set of NuGet packages, single collection of documentation that&#39;s relevant for all supported <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a>, HttpListener and .NET Core hosts.</p><p>This is possible due to ServiceStack&#39;s high-level host agnostic API and our approach to decouple from concrete HTTP abstractions behind lightweight <code>IRequest</code> interfaces, which is what allows the same ServiceStack Services to be able to run on <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a>, HttpListener SelfHosts, SOAP Endpoints, multiple MQ Hosts and .NET Core Apps.</p><p>The primary advantage of this is simplicity, in both effort and cognitive overhead for creating Services that target multiple platforms, reuse of existing knowledge and investments in using ServiceStack libraries and features as well as significantly reduced migration efforts for porting existing .NET Framework code-bases to run on .NET Core where it enjoys near perfect source code compatibility.</p><p>ServiceStack&#39;s exceptional source compatibility is visible in our new .NET Core 2.0 and .NET Framework project templates where all templates utilize the same recommended <a href="/physical-project-structure.html">Physical Project Structure</a>, reference the same NuGet packages, share the same source code for its Server and Client App implementations as well as Client and Server Unit and Integration Tests.</p><p>The primary difference between the .NET Core and .NET Framework project templates is how ServiceStack&#39;s <code>AppHost</code> is initialized, in <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> it&#39;s done in <code>Global.asax</code> whilst for .NET Core it&#39;s registered in .NET Core&#39;s pipeline as standard. The <code>.csproj</code> are also different with .NET Core using MSBuild&#39;s new and minimal human-friendly format and the <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Framework templates continuing to use <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a>&#39;s classic project format for compatibility with older VS .NET versions.</p><h2 id="new-net-core-2-0-and-net-framework-project-templates" tabindex="-1">New .NET Core 2.0 and .NET Framework Project Templates! <a class="header-anchor" href="#new-net-core-2-0-and-net-framework-project-templates" aria-hidden="true">#</a></h2><p>Now that ServiceStack v5 has merged into a single unified set of NuGet packages that&#39;s consolidated around .NET Standard 2.0, we&#39;ve developed <strong>11 new .NET Core 2.0 project templates</strong> for each of ServiceStack&#39;s most popular starting templates. Each .NET Core 2.0 template has an equivalent .NET Framework template except for <a href="https://sharpscript.net/docs/sharp-apps" target="_blank" rel="noopener noreferrer">ServiceStack&#39;s Sharp Apps</a> which is itself a pre-built .NET Core 2.0 App that lets you develop Web Applications and HTTP APIs on-the-fly without any compilation.</p><p>All .NET Core 2.0 Templates can be developed using your preferred choice of either VS Code, <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a> or JetBrains Project Rider on your preferred Desktop OS. Given the diverse ecosystem used to develop .NET Core Applications, the new Project Templates are being maintained on GitHub and made available via our new <a href="/dotnet-new.html">dotnet-new</a> command-line utility, installable from npm with:</p><pre><code>$ npm install -g @servicestack/cli
</code></pre><p>This makes the <code>dotnet-new</code> command globally available which can be run without arguments to view all templates available:</p><p><img src="https://docs.servicestack.net/images/ssvs/dotnet-new-list.png" alt=""></p><p>That can be used to create new projects with:</p><pre><code>$ dotnet-new &lt;template-name&gt; &lt;project-name&gt;
</code></pre><p>Example of creating a new Vue SPA project called <strong>Acme</strong>:</p><pre><code>$ dotnet-new vue-spa Acme
</code></pre><p>The resulting <code>Acme.sln</code> can be opened in VS 2017 which will automatically restore and install both the .NET and npm packages upon first load and build. This can take a while to install all client and server dependencies, once finished the <code>wwwroot</code> folder will be populated with your generated Webpack App contained within a <code>/dist</code> folder alongside a generated <code>index.html</code> page. After these are generated you can run your App with <strong>F5</strong> to run your project as normal:</p><p><img src="https://docs.servicestack.net/images/ssvs/dotnet-new-spa-files.png" alt=""></p><p>If using JetBrains Rider the npm packages can be installed by opening <code>package.json</code> and clicking on the <strong>&quot;npm install&quot;</strong> tooltip on the <strong>bottom right</strong>. In VS Code you&#39;ll need to run <code>npm install</code> manually from the command-line.</p><h3 id="servicestackvs-vs-net-templates-updated" tabindex="-1">ServiceStackVS <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a> Templates Updated <a class="header-anchor" href="#servicestackvs-vs-net-templates-updated" aria-hidden="true">#</a></h3><p>The <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a> Templates inside <a href="https://github.com/ServiceStack/ServiceStackVS" target="_blank" rel="noopener noreferrer">ServiceStackVS</a> have also been updated to use the latest .NET Framework templates which you can continue to use to <a href="/create-your-first-webservice.html">create new projects within VS.NET</a>. For all other IDEs and non-Windows Operating Systems you can use the cross-platform <code>dotnet-new</code> tooling to create new .NET Core 2.0 Projects.</p><p>In future we&#39;ll also be looking to make these templates available in .NET Core&#39;s <code>dotnet new</code> template system.</p><h3 id="net-core-2-0-typescript-webpack-templates" tabindex="-1">.NET Core 2.0 TypeScript Webpack Templates <a class="header-anchor" href="#net-core-2-0-typescript-webpack-templates" aria-hidden="true">#</a></h3><p>There&#39;s a project template for each of the most popular Single Page Application JavaScript frameworks, including a new <a href="https://angular.io" target="_blank" rel="noopener noreferrer">Angular 5.1</a> template built and managed using Angular&#39;s new <a href="https://cli.angular.io" target="_blank" rel="noopener noreferrer">angular-spa</a> tooling. All other SPA Templates (inc. Angular 4) utilize a modernized Webpack build system, pre-configured with npm scripts to perform all necessary debug, production and live watched builds and testing. The included <a href="https://github.com/NetCoreTemplates/vue-spa/blob/master/MyApp/gulpfile.js" target="_blank" rel="noopener noreferrer">gulpfile.js</a> provides a Gulp script around each npm script so they can be run without the command-line, by running them using <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a>&#39;s built-in Task Runner Explorer GUI.</p><h3 id="typescript" tabindex="-1">TypeScript <a class="header-anchor" href="#typescript" aria-hidden="true">#</a></h3><p>All Templates are configured to use TypeScript to provide both compile-time safety, productivity and maintainability as well as access to JavaScript&#39;s latest ES6/7 features without additional configuration. They&#39;re also configured to use Typed DTOs from ServiceStack&#39;s <a href="/typescript-add-servicestack-reference.html">TypeScript Add Reference</a> and generic <a href="https://github.com/ServiceStack/servicestack-client" target="_blank" rel="noopener noreferrer">@servicestack/client</a> to provide an end-to-end Typed API to call your Services that can be synced with your Server DTOs by running the npm (or Gulp) <code>dtos</code> script.</p><p>All templates are configured to use a <code>JsonServiceClient</code> with concrete Type Definitions except for the Angular 5 template which uses Angular&#39;s built-in Rx-enabled HTTP Client with ServiceStack&#39;s ambient TypeScript declarations, as it&#39;s often preferable to utilize Angular&#39;s built-in dependencies when available.</p><h4 id="angular-5-http-client" tabindex="-1">Angular 5 HTTP Client <a class="header-anchor" href="#angular-5-http-client" aria-hidden="true">#</a></h4><p>ServiceStack&#39;s ambient TypeScript interfaces are leveraged to enable a Typed API, whilst the <code>createUrl(route,args)</code> helper lets you reuse your APIs Route definitions (emitted in comments above each Request DTO) to provide a pleasant UX for making API calls using Angular&#39;s HTTP Client:</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createUrl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@servicestack/client&#39;</span><span class="token punctuation">;</span>
<span class="token operator">...</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>HelloResponse<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">createUrl</span><span class="token punctuation">(</span><span class="token string">&#39;/hello/{Name}&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">=</span> r<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>All Single Page App Templates are available for both .NET Core 2.0 and <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Framework projects which can be live-previewed and used to create new projects using the template names below:</p><table class="table"><tr><th>.NET Core 2.0</th><th>.NET Framework</th><th>Single Page App Templates</th></tr><tr><td><a href="https://github.com/NetCoreTemplates/angular-spa">angular-spa</a></td><td><a href="https://github.com/NetFrameworkTemplates/angular-spa-netfx">angular-spa-netfx</a></td><td align="center"><h3>Angular 5 CLI Bootstrap Template</h3><a href="http://angular-spa.web-templates.io"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/angular-spa.png" width="500"></a><p><a href="http://angular-spa.web-templates.io">angular-spa.web-templates.io</a></p></td></tr><tr><td><a href="https://github.com/NetCoreTemplates/angular-lite-spa">angular-lite-spa</a></td><td><a href="https://github.com/NetFrameworkTemplates/angular-lite-spa-netfx">angular-lite-spa-netfx</a></td><td align="center"><h3>Angular 4 Material Design Lite Template</h3><a href="http://angular-lite-spa.web-templates.io"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/angular-lite-spa.png" width="500"></a><p><a href="http://angular-lite-spa.web-templates.io">angular-lite-spa.web-templates.io</a></p></td></tr><tr><td><a href="https://github.com/NetCoreTemplates/react-spa">react-spa</a></td><td><a href="https://github.com/NetFrameworkTemplates/react-spa-netfx">react-spa-netfx</a></td><td align="center"><h3>React 16 Webpack Bootstrap Template</h3><a href="http://react-spa.web-templates.io"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/react-spa.png" width="500"></a><p><a href="http://react-spa.web-templates.io">react-spa.web-templates.io</a></p></td></tr><tr><td><a href="https://github.com/NetCoreTemplates/vue-spa">vue-spa</a></td><td><a href="https://github.com/NetFrameworkTemplates/vue-spa-netfx">vue-spa-netfx</a></td><td align="center"><h3>Vue 2.5 Webpack Bootstrap Template</h3><a href="http://vue-spa.web-templates.io"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/vue-spa.png" width="500"></a><p><a href="http://vue-spa.web-templates.io">vue-spa.web-templates.io</a></p></td></tr><tr><td><a href="https://github.com/NetCoreTemplates/aurelia-spa">aurelia-spa</a></td><td><a href="https://github.com/NetFrameworkTemplates/aurelia-spa-netfx">aurelia-spa-netfx</a></td><td align="center"><h3>Aurelia Webpack Bootstrap Template</h3><a href="http://aurelia-spa.web-templates.io"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/aurelia-spa.png" width="500"></a><p><a href="http://aurelia-spa.web-templates.io">aurelia-spa.web-templates.io</a></p></td></tr></table><h3 id="optimal-dev-workflow-with-hot-reloading" tabindex="-1">Optimal Dev Workflow with Hot Reloading <a class="header-anchor" href="#optimal-dev-workflow-with-hot-reloading" aria-hidden="true">#</a></h3><p>The Webpack templates have been updated to utilize <a href="https://robertknight.github.io/posts/webpack-dll-plugins/" target="_blank" rel="noopener noreferrer">Webpack&#39;s DllPlugin</a> which splits your App&#39;s TypeScript source code from its vendor dependencies for faster incremental build times. With the improved iteration times our recommendation for development is to run a normal Webpack watched build using the <code>dev</code> npm (or Gulp) script:</p><pre><code>$ npm run dev
</code></pre><p>Which will watch and re-compile your App for any changes. These new templates also include a new hot-reload feature which works similar to <a href="https://sharpscript.net/docs/hot-reloading" target="_blank" rel="noopener noreferrer">#Script Pages hot-reloading</a> where in <strong>DebugMode</strong> it will long poll the server to watch for any modified files in <code>/wwwroot</code> and automatically refresh the page. This provides a hot-reload alternative to <code>npm run dev-server</code> to run a Webpack Dev Server proxy on port <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">http://localhost:3000</a></p><h3 id="configured-with-script" tabindex="-1">Configured with <code>#Script</code> <a class="header-anchor" href="#configured-with-script" aria-hidden="true">#</a></h3><p>Hot Reloading works by leveraging <a href="https://sharpscript.net" target="_blank" rel="noopener noreferrer">#Script</a> which works seamlessly with Webpack&#39;s generated <code>index.html</code> where it evaluates server Template Expressions when returning the SPA home page. This is leveraged to enable Hot Reloading support by <a href="https://github.com/NetCoreTemplates/vue-spa/blob/0c13183b6a5ae20564f650e50d29b9d4e36cbd0c/MyApp/index.template.ejs#L8" target="_blank" rel="noopener noreferrer">including the expression</a>:</p>`,151),r=n("div",null,[n("div",{class:"language-html"},[n("pre",{"v-pre":""},[n("code",null,[a("{{ ifDebug | select: "),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),a("script")]),n("span",{class:"token punctuation"},">")]),n("span",{class:"token script"},[n("span",{class:"token language-javascript"},[n("span",{class:"token punctuation"},"{"),a(),n("span",{class:"token string"},"'/js/hot-fileloader.js'"),a(),n("span",{class:"token operator"},"|"),a(" includeFile "),n("span",{class:"token punctuation"},"}")])]),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),a("script")]),n("span",{class:"token punctuation"},">")]),a(` }}
`)])])])],-1),i=n("p",null,[a("Which renders the contents of "),n("a",{href:"https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/js/hot-fileloader.js",target:"_blank",rel:"noopener noreferrer"},"/js/hot-fileloader.js"),a(" when running the Web App during development.")],-1),l=n("p",null,[a("Although optional, "),n("code",null,"#Script"),a(" is useful whenever you need to render any server logic in the SPA home page, e.g:")],-1),u=n("div",null,[n("div",{class:"language-html"},[n("pre",{"v-pre":""},[n("code",null,[n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),a("div")]),n("span",{class:"token punctuation"},">")]),a("Copyright "),n("span",{class:"token entity named-entity",title:"\xA9"},"&copy;"),a(" {{ now | dateFormat('yyyy') }}"),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),a("div")]),n("span",{class:"token punctuation"},">")]),a(`
`)])])])],-1),k=s(`<p>Will be evaluated on the server and render the expected:</p><pre><code>Copyright \xA9 2017
</code></pre><h3 id="deployments" tabindex="-1">Deployments <a class="header-anchor" href="#deployments" aria-hidden="true">#</a></h3><p>When your App is ready to deploy, run the <code>publish</code> npm (or Gulp) script to package your App for deployment:</p><pre><code>npm run publish
</code></pre><p>Which generates a production Webpack client build and <code>dotnet publish</code> release Server build to package your App ready for an XCOPY, rsync or MSDeploy deployment. We used <a href="https://sharpscript.net/docs/deploying-sharp-apps" target="_blank" rel="noopener noreferrer">rsync and supervisord to deploy</a> each packaged Web template to our Ubuntu Server at the following URL:</p><pre><code>http://&lt;template-name&gt;.web-templates.io
</code></pre><h3 id="wwwroot-webroot-path-for-net-framework-templates" tabindex="-1">/wwwroot WebRoot Path for .NET Framework Templates <a class="header-anchor" href="#wwwroot-webroot-path-for-net-framework-templates" aria-hidden="true">#</a></h3><p>To simplify migration efforts of ServiceStack projects between .NET Core and .NET Framework, all SPA and Website Templates are configured to use .NET Core&#39;s convention of <code>/wwwroot</code> for its public WebRoot Path. The 2 adjustments needed to support this was configuring ServiceStack to use the <code>/wwwroot</code> path in AppHost:</p><div class="language-csharp"><pre><code><span class="token function">SetConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HostConfig</span> <span class="token punctuation">{</span>
    WebHostPhysicalPath <span class="token operator">=</span> <span class="token function">MapProjectPath</span><span class="token punctuation">(</span><span class="token string">&quot;~/wwwroot&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then instructing MSBuild to include all <code>wwwroot\\**\\*</code> files when publishing the project using MS WebDeploy which is contained in the <a href="https://github.com/NetFrameworkTemplates/vue-spa-netfx/blob/master/MyApp/Properties/PublishProfiles/PublishToIIS.pubxml" target="_blank" rel="noopener noreferrer">Properties/PublishProfiles/PublishToIIS.pubxml</a> of each project:</p><div class="language-xml"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CopyAllFilesToSingleFolderForMSDeployDependsOn</span><span class="token punctuation">&gt;</span></span>
    IncludeFiles;
    $(CopyAllFilesToSingleFolderForMSDeployDependsOn);
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CopyAllFilesToSingleFolderForMSDeployDependsOn</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Target</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IncludeFiles<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemGroup</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PublishFiles</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wwwroot\\**\\*<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FilesForPackagingFromProject</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@(PublishFiles)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DestinationRelativePath</span><span class="token punctuation">&gt;</span></span>wwwroot\\%(RecursiveDir)%(Filename)%(Extension)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DestinationRelativePath</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FilesForPackagingFromProject</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemGroup</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Target</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="website-templates" tabindex="-1">Website Templates <a class="header-anchor" href="#website-templates" aria-hidden="true">#</a></h3><p>There are 3 templates for each of the different technologies that can be used with ServiceStack to develop Server HTML Generated Websites and HTTP APIs:</p><h4 id="asp-net-mvc" tabindex="-1"><a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> MVC <a class="header-anchor" href="#asp-net-mvc" aria-hidden="true">#</a></h4><p>The <code>mvc</code> template differentiates the most between .NET Core and <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> versions as <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core MVC and <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> MVC 5 are completely different implementations. With <code>mvc</code> ServiceStack is configured within the same .NET Core pipeline and shares the same request pipeline and &quot;route namespace&quot; but in <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> MVC 5, ServiceStack is hosted at the <code>/api</code> Custom Path. Use MVC if you prefer to create different Controllers and View Models for your Website UI independently from your HTTP APIs or if you prefer to generate <strong>server HTML validation errors</strong> within MVC Controllers.</p><h4 id="servicestack-razor" tabindex="-1">ServiceStack.Razor <a class="header-anchor" href="#servicestack-razor" aria-hidden="true">#</a></h4><p>The <code>razor</code> Template is configured to develop Websites using <a href="http://razor.servicestack.net" target="_blank" rel="noopener noreferrer">ServiceStack.Razor</a> for developing server-generated Websites using Razor without MVC Controllers which lets you create Content Razor Pages that can be called directly or View Pages for generating HTML Views for existing Services. The source code for .NET Core and <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Framework projects are nearly identical despite being completely different implementations with the .NET Core version being retrofitted on top of .NET Core MVC Views. Use <code>razor</code> templates if you like Razor and prefer the <a href="/releases/v4.5.14.html#end-user-language-with-low-roi">API First Development model</a> or plan on developing Websites for both .NET Core and <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> and would like to be easily able to migrate between them.</p><h4 id="script" tabindex="-1"><code>#Script</code> <a class="header-anchor" href="#script" aria-hidden="true">#</a></h4><p>The <code>sharp</code> Project Template is configured to develop Websites using <a href="https://sharpscript.net" target="_blank" rel="noopener noreferrer">#Script</a>, a simpler and cleaner alternative to Razor that lets you utilize simple Template Expressions for evaluating Server logic in <code>.html</code> pages. Templates doesn&#39;t require any precompilation, is easier to learn and more intuitive for non-programmers that&#39;s more suitable for a <a href="https://sharpscript.net/usecases/" target="_blank" rel="noopener noreferrer">number of use-cases</a>. Use templates if you want an <a href="/releases/v4.5.14.html#why-templates">alternative to Razor</a> syntax and the heavy machinery required to support it.</p><h4 id="hot-reloading" tabindex="-1">Hot Reloading <a class="header-anchor" href="#hot-reloading" aria-hidden="true">#</a></h4><p>Both <code>razor</code> and <code>templates</code> project enjoy Hot Reloading where in development a long poll is used to detect and reload changes in the current Template Page or static files in <code>/wwwroot</code>.</p><table class="table"><tr><th>.NET Core 2.0</th><th>.NET Framework</th><th>Single Page App Templates</th></tr><tr><td><a href="https://github.com/NetCoreTemplates/mvc">mvc</a></td><td><a href="https://github.com/NetFrameworkTemplates/mvc-netfx">mvc-netfx</a></td><td align="center"><h3>MVC Bootstrap Template</h3><a href="http://mvc.web-templates.io"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/mvc.png" width="500"></a><p><a href="http://mvc.web-templates.io">mvc.web-templates.io</a></p></td></tr><tr><td><a href="https://github.com/NetCoreTemplates/razor">razor</a></td><td><a href="https://github.com/NetFrameworkTemplates/razor-netfx">razor-netfx</a></td><td align="center"><h3>ServiceStack.Razor Bootstrap Template</h3><a href="http://razor.web-templates.io"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/razor.png" width="500"></a><p><a href="http://razor.web-templates.io">razor.web-templates.io</a></p></td></tr><tr><td><a href="https://github.com/NetCoreTemplates/script">script</a></td><td><a href="https://github.com/NetFrameworkTemplates/script-netfx">script-netfx</a></td><td align="center"><h3>#Script Pages Bootstrap Template</h3><a href="http://script.web-templates.io"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/script.png" width="500"></a><p><a href="http://script.web-templates.io">script.web-templates.io</a></p></td></tr></table><h3 id="empty-web-and-selfhost-templates" tabindex="-1">Empty Web and SelfHost Templates <a class="header-anchor" href="#empty-web-and-selfhost-templates" aria-hidden="true">#</a></h3><p>Those who prefer starting from an Empty slate can use the <code>web</code> template to create the minimal configuration for a Web Application whilst the <code>selfhost</code> template can be used to develop Self-Hosting Console Apps. Both templates still follow our recommended physical project layout but are configured with the minimum number of dependencies, e.g. the <code>selfhost</code> Console App just has a dependency on <a href="https://github.com/NetCoreTemplates/selfhost/blob/f11b25e80752d1fee96ac904a8df07fb150ee746/MyApp/MyApp.csproj#L11-L12" target="_blank" rel="noopener noreferrer">Microsoft.AspNetCore.Server.Kestrel and ServiceStack</a>, in contrast most templates have a dependency on the all-encompassing <code>Microsoft.AspNetCore.All</code> meta package.</p><table class="table"><tr><th>.NET Core 2.0</th><th>.NET Framework</th><th>Empty Project Templates</th></tr><tr><td><a href="https://github.com/NetCoreTemplates/web">web</a></td><td><a href="https://github.com/NetFrameworkTemplates/web-netfx">web-netfx</a></td><td align="center"><h3>Empty Web Template</h3><a href="http://web.web-templates.io"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/web.png" width="500"></a><p><a href="http://web.web-templates.io">web.web-templates.io</a></p></td></tr><tr><td><a href="https://github.com/NetCoreTemplates/selfhost">selfhost</a></td><td><a href="https://github.com/NetFrameworkTemplates/selfhost-netfx">selfhost-netfx</a></td><td align="center"><h3>Empty SelfHost Console App Template</h3><a href="http://selfhost.web-templates.io"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/selfhost.png" width="500"></a><p><a href="http://selfhost.web-templates.io">selfhost.web-templates.io</a></p></td></tr></table><h3 id="net-core-2-0-servicestack-webapp-template" tabindex="-1">.NET Core 2.0 ServiceStack WebApp Template <a class="header-anchor" href="#net-core-2-0-servicestack-webapp-template" aria-hidden="true">#</a></h3><p>The only .NET Core 2.0 project template not to have a .NET Framework equivalent is <a href="https://github.com/NetCoreTemplates/bare-app" target="_blank" rel="noopener noreferrer">bare-app</a> as it&#39;s a pre-built .NET Core 2.0 App that dramatically simplifies .NET Wep App development by enabling Websites and APIs to be developed instantly without compilation.</p><table class="table"><tr><th>.NET Core 2.0</th><th>Sharp Apps</th></tr><tr><td><a href="https://github.com/NetCoreTemplates/bare-app">bare-app</a></td><td align="center"><a href="http://rockwind-app.web-templates.io/"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/bare-app.png" width="500"></a><p><a href="http://rockwind-app.web-templates.io/">bare-app.web-templates.io</a></p></td></tr></table><p>See <a href="https://sharpscript.net/docs/sharp-apps" target="_blank" rel="noopener noreferrer">sharpscript.net/docs/sharp-apps</a> to learn the different use-cases made possible with Web Apps.</p><h3 id="net-framework-templates" tabindex="-1">.NET Framework Templates <a class="header-anchor" href="#net-framework-templates" aria-hidden="true">#</a></h3><p>Likewise there are 2 .NET Framework Templates without .NET Core 2.0 equivalents as they contain Windows-only .NET Framework dependencies. This includes our React Desktop Template which supports packaging your Web App into 4 different <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a>, Winforms, OSX Cocoa and cross-platform Console App Hosts:</p><table class="table"><tr><th>.NET Framework</th><th>React Desktop Apps Template</th></tr><tr><td><a href="https://github.com/NetFrameworkTemplates/react-desktop-apps-netfx">react-desktop-apps-netfx</a></td><td align="center"><a href="http://react-desktop-apps-netfx.web-templates.io"><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/csharp-templates/react-desktop-apps-netfx.png" width="500"></a><p><a href="http://react-desktop-apps-netfx.web-templates.io">react-desktop-apps-netfx.web-templates.io</a></p></td></tr></table><p>In future we also intend on developing a Desktop Apps template for .NET Core 2.0 based on Electron.</p><h3 id="windows-service-template" tabindex="-1">Windows Service Template <a class="header-anchor" href="#windows-service-template" aria-hidden="true">#</a></h3><p>You can use <a href="https://github.com/NetFrameworkTemplates/winservice-netfx" target="_blank" rel="noopener noreferrer">winservice-netfx</a> to create a Windows Service but as this requires Visual Studio it&#39;s faster to continue creating new Windows Service projects within <a href="http://VS.NET" target="_blank" rel="noopener noreferrer">VS.NET</a> using the <strong>ServiceStack Windows Service Empty</strong> Project Template.</p><h2 id="net-core-apps-upgraded" tabindex="-1">.NET Core Apps Upgraded <a class="header-anchor" href="#net-core-apps-upgraded" aria-hidden="true">#</a></h2><p>As we&#39;ve stabilized on .NET Core 2.0 and .NET Standard 2.0 as our long-term supported .NET Core platform, we&#39;ve upgraded all our existing .NET Core 1.x projects to .NET Core 2.0 and ServiceStack v5, including all <a href="https://github.com/NetCoreApps/LiveDemos" target="_blank" rel="noopener noreferrer">.NET Core Live Demos</a>.</p><h3 id="multi-stage-docker-builds" tabindex="-1">Multi-stage Docker Builds <a class="header-anchor" href="#multi-stage-docker-builds" aria-hidden="true">#</a></h3><p>We&#39;ve also updated the <a href="/deploy-netcore-docker-aws-ecs.html">.NET Core Apps deployed using Docker</a> to use the <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Team&#39;s <a href="https://docs.microsoft.com/en-us/dotnet/core/docker/building-net-docker-images#your-first-aspnet-core-docker-app" target="_blank" rel="noopener noreferrer">recommended multi-stage Docker Builds</a> where the App is built inside an <code>aspnetcore-build</code> Docker container with its published output copied inside a new <code>aspnetcore</code> runtime Docker container:</p><div class="language-docker"><pre><code><span class="token instruction"><span class="token keyword">FROM</span> microsoft/dotnet:2.1-sdk <span class="token keyword">AS</span> build-env</span>
<span class="token instruction"><span class="token keyword">COPY</span> src /app</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>

<span class="token instruction"><span class="token keyword">RUN</span> dotnet restore --configfile NuGet.Config</span>
<span class="token instruction"><span class="token keyword">RUN</span> dotnet publish -c Release -o out</span>

<span class="token comment"># Build runtime image</span>
<span class="token instruction"><span class="token keyword">FROM</span> microsoft/dotnet:2.1-aspnetcore-runtime</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
<span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">build-env</span></span> /app/Chat/out .</span>
<span class="token instruction"><span class="token keyword">ENV</span> ASPNETCORE_URLS http://*:5000</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;dotnet&quot;</span>, <span class="token string">&quot;Chat.dll&quot;</span>]</span>
</code></pre></div><p>The smaller footprint required by the <code>aspnetcore</code> runtime reduced the footprint of <a href="https://github.com/NetCoreApps/Chat" target="_blank" rel="noopener noreferrer">.NET Core Chat</a> from <strong>567MB</strong> to <strong>126MB</strong> whilst continuing to run flawlessly in AWS ECS at <a href="http://chat.netcore.io" target="_blank" rel="noopener noreferrer">chat.netcore.io</a>.</p><h3 id="servicestack-webapps-updated" tabindex="-1">ServiceStack WebApps Updated <a class="header-anchor" href="#servicestack-webapps-updated" aria-hidden="true">#</a></h3><p>Likewise all <a href="https://github.com/sharp-apps" target="_blank" rel="noopener noreferrer">.NET Core ServiceStack WebApps</a> including the pre-built <a href="https://github.com/ServiceStack/Web" target="_blank" rel="noopener noreferrer">/web</a> binaries have been updated to use ServiceStack v5.</p><p>Changes from the previous version includes switching to use the default <code>WebHost.CreateDefaultBuilder()</code> builder to bootstrap WebApp&#39;s letting you use <code>ASPNETCORE_URLS</code> to specify which URL and port to bind on, simplifying deployment configurations.</p><p>The <code>ASPNETCORE_ENVIRONMENT</code> Environment variable can also be used to configure WebApp&#39;s to run in <code>Production</code> mode. If preferred you can continue using the existing <code>bind</code>, <code>port</code> and <code>debug</code> options in your <code>app.settings</code> to override the default configuration.</p><h3 id="net-core-iappsettings-adapter" tabindex="-1">.NET Core IAppSettings Adapter <a class="header-anchor" href="#net-core-iappsettings-adapter" aria-hidden="true">#</a></h3><p>Most .NET Core Templates are also configured to use the new <code>NetCoreAppSettings</code> adapter to utilize .NET Core&#39;s new <code>IConfiguration</code> config model in ServiceStack by initializing the <code>AppHost</code> with .NET Core&#39;s pre-configured <code>IConfiguration</code> that&#39;s injected into the <a href="https://github.com/NetCoreTemplates/vue-spa/blob/master/MyApp/Startup.cs" target="_blank" rel="noopener noreferrer">Startup.cs</a> constructor, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Startup</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IConfiguration</span> Configuration <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IHostingEnvironment</span> env<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        app<span class="token punctuation">.</span><span class="token function">UseServiceStack</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AppHost</span> <span class="token punctuation">{</span>
            AppSettings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NetCoreAppSettings</span><span class="token punctuation">(</span>Configuration<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This lets you use <strong>appsettings.json</strong> and .NET Core&#39;s other Configuration Sources from ServiceStack&#39;s <code>IAppSettings</code> API where it continues to resolve both primitive values and complex Types, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">bool</span></span> debug <span class="token operator">=</span> AppSettings<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">bool</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;DebugMode&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MyConfig</span> myConfig <span class="token operator">=</span> AppSettings<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyConfig<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span>  ghScopes <span class="token operator">=</span> AppSettings<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;oauth.github.Scopes&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">IList<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> fbScopes <span class="token operator">=</span> AppSettings<span class="token punctuation">.</span><span class="token function">GetList</span><span class="token punctuation">(</span><span class="token string">&quot;oauth.facebook.Permissions&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>But instead of a single JSV string value, you&#39;ll need to use the appropriate JSON data type, e.g:</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
    <span class="token property">&quot;DebugMode&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;MyConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Kurt&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;Age&quot;</span><span class="token operator">:</span> <span class="token number">27</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;oauth.facebook.Permissions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;oauth.github.Scopes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="pbkdf2-password-hashing-implementation" tabindex="-1">PBKDF2 Password Hashing implementation <a class="header-anchor" href="#pbkdf2-password-hashing-implementation" aria-hidden="true">#</a></h3><p>ServiceStack now uses the same <a href="https://en.wikipedia.org/wiki/PBKDF2" target="_blank" rel="noopener noreferrer">PBKDF2</a> password hashing algorithm <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Identity v3 uses to hash passwords by default for both new users and successful authentication logins where their password will automatically be re-hashed with the new implementation.</p><p>This also means if you wanted to switch, you&#39;ll be able to import <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Identity v3 User Accounts and their Password Hashes into ServiceStack.Auth&#39;s <code>UserAuth</code> tables and vice-versa.</p><h4 id="retain-previous-password-hashing-implementation" tabindex="-1">Retain previous Password Hashing implementation <a class="header-anchor" href="#retain-previous-password-hashing-implementation" aria-hidden="true">#</a></h4><p>If preferred you can revert to using the existing <code>SaltedHash</code> implementation with:</p><div class="language-csharp"><pre><code><span class="token function">SetConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HostConfig</span> <span class="token punctuation">{</span> 
    UseSaltedHash <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This also supports &quot;downgrading&quot; passwords that were hashed with the new <code>IPasswordHasher</code> provider where it will revert to using the older/weaker <code>SaltedHash</code> implementation on successful authentication.</p><h4 id="override-password-hashing-strength" tabindex="-1">Override Password Hashing Strength <a class="header-anchor" href="#override-password-hashing-strength" aria-hidden="true">#</a></h4><p>The new <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Auth/PasswordHasher.cs" target="_blank" rel="noopener noreferrer">PasswordHasher</a> implementation can also be made to be computationally stronger or weaker by adjusting the iteration count (default 10000), e.g:</p><div class="language-csharp"><pre><code>container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IPasswordHasher<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PasswordHasher</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="versionable-password-hashing" tabindex="-1">Versionable Password Hashing <a class="header-anchor" href="#versionable-password-hashing" aria-hidden="true">#</a></h4><p>The new <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Auth/IPasswordHasher.cs" target="_blank" rel="noopener noreferrer">IPasswordHasher</a> interface includes support for versioning future Password Hashing algorithms and rehsashing:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IPasswordHasher</span>
<span class="token punctuation">{</span>
    <span class="token comment">// First byte marker used to specify the format used. The default implementation uses format:</span>
    <span class="token comment">// { 0x01, prf (UInt32), iter count (UInt32), salt length (UInt32), salt, subkey }</span>
    <span class="token return-type class-name"><span class="token keyword">byte</span></span> Version <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// Returns a boolean indicating whether the providedPassword matches the hashedPassword</span>
    <span class="token comment">// The needsRehash out parameter indicates whether the password should be re-hashed.</span>
    <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">VerifyPassword</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> hashedPassword<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> providedPassword<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">bool</span></span> needsRehash<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Returns a hashed representation of the supplied password</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">HashPassword</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which is implemented in all ServiceStack Auth Repositories where it will rehash passwords that used a different version or weaker strength, by utilizing the new API for verifying passwords:</p><div class="language-csharp"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>userAuth<span class="token punctuation">.</span><span class="token function">VerifyPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> needsRehash<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">RecordSuccessfulLogin</span><span class="token punctuation">(</span>userAuth<span class="token punctuation">,</span> needsRehash<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If you&#39;re using a Custom Auth Repository it will also need to be updated to use the new password verification APIs, please refer to <a href="https://github.com/ServiceStack/ServiceStack/blob/bed1d900de93f889cca05299df4c33a04b7ad7a7/src/ServiceStack.Server/Auth/OrmLiteAuthRepository.cs#L325-L359" target="_blank" rel="noopener noreferrer">OrmLiteAuthRepository</a> for a complete concrete example.</p><h4 id="fallback-passwordhashers" tabindex="-1">Fallback PasswordHashers <a class="header-anchor" href="#fallback-passwordhashers" aria-hidden="true">#</a></h4><p>The list of <code>Config.FallbackPasswordHashers</code> can be used for migrating to a new Password Hashing algorithm by registering older Password Hashing implementations that were previously used to hash Users passwords. Failed password verifications will fallback to see if the password was hashed with any of the registered <code>FallbackPasswordHashers</code>, if any are valid the password attempt will succeed and the password re-hashed with the registered <code>IPasswordHasher</code> implementation.</p><h4 id="digest-auth-hashes-only-created-when-needed" tabindex="-1">Digest Auth Hashes only created when needed <a class="header-anchor" href="#digest-auth-hashes-only-created-when-needed" aria-hidden="true">#</a></h4><p>Digest Auth Hashes are now only populated if the <code>DigestAuthProvider</code> is registered. If you ever intend to support Digest access authentication in future but don&#39;t want to register the DigestAuthProvider just yet, you can force ServiceStack to continue to maintain Digest Auth Hashes with:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span> <span class="token punctuation">{</span>
    CreateDigestAuthHashes <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Users that don&#39;t have Digest Auth Hashes will require logging in again in order to have it populated. If you don&#39;t intend to use Digest Auth you can clear the <code>DigestHa1Hash</code> column in your <code>UserAuth</code> table which is otherwise unused.</p><h3 id="jwt-authprovider" tabindex="-1">JWT AuthProvider <a class="header-anchor" href="#jwt-authprovider" aria-hidden="true">#</a></h3><p>Previously in order to be able to utilize RefreshToken&#39;s you would need to be also be using an <a href="/authentication-and-authorization.html#user-auth-repository">Auth Repository</a> as it&#39;s the source used to populate the JWT Token.</p><p>Now Users who are not using an <code>IAuthRepository</code> can instead implement the <code>IUserSessionSource</code> interface:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserSessionSource</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">IAuthSession</span> <span class="token function">GetUserSession</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>On either their Custom AuthProvider, or if preferred register it as a dependency in the IOC as an alternative source for populating Sessions in new JWT Tokens created using RefreshToken&#39;s. The implementation should only return a populated <code>IAuthSession</code> if the User is allowed to sign-in, e.g. if their account is locked or suspended it should throw an Exception:</p><div class="language-csharp"><pre><code><span class="token keyword">throw</span> HttpError<span class="token punctuation">.</span><span class="token function">Forbidden</span><span class="token punctuation">(</span><span class="token string">&quot;User is suspended&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="send-jwts-in-http-params" tabindex="-1">Send JWTs in HTTP Params <a class="header-anchor" href="#send-jwts-in-http-params" aria-hidden="true">#</a></h4><p>The JWT Auth Provider can <strong>opt-in</strong> to accept JWT&#39;s via the Query String or HTML POST FormData with:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">JwtAuthProvider</span> <span class="token punctuation">{</span>
    AllowInQueryString <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    AllowInFormData <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is useful for situations where it&#39;s not possible to attach the JWT in the HTTP Request Headers or <code>ss-tok</code> Cookie.</p><p>For example if you wanted to authenticate via JWT to a real-time <a href="/server-events.html">Server Events stream</a> from a token retrieved from a remote auth server (i.e. so the JWT Cookie isn&#39;t already configured with the SSE server) you can <a href="/jwt-authprovider.html#ajax-clients">call the /session-to-token API</a> to convert the JWT Bearer Token into a JWT Cookie which will configure it with that domain so the subsequent HTTP Requests to the SSE event stream contains the JWT cookie and establishes an authenticated session:</p><div class="language-ts"><pre><code><span class="token keyword">var</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonServiceClient</span><span class="token punctuation">(</span>BaseUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">setBearerToken</span><span class="token punctuation">(</span><span class="token constant">JWT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConvertSessionToToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> sseClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerEventsClient</span><span class="token punctuation">(</span>BaseUrl<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    handlers<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">onConnect</span><span class="token operator">:</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>isAuthenticated <span class="token comment">/*true*/</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>userId<span class="token punctuation">,</span> e<span class="token punctuation">.</span>displayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Unfortunately this wont work in <code>node.exe</code> Server Apps (or in integration tests) which doesn&#39;t support a central location for configuring domain cookies. One solution that works everywhere is to add the JWT to the <code>?ss-tok</code> query string that&#39;s used to connect to the <code>/event-stream</code> URL, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> sseClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServerEventsClient</span><span class="token punctuation">(</span>BaseUrl<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    resolveStreamUrl<span class="token punctuation">:</span> url <span class="token operator">=&gt;</span> <span class="token function">appendQueryString</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">&quot;ss-tok&quot;</span><span class="token punctuation">:</span> JWT <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token named-parameter punctuation">handlers</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        onConnect<span class="token punctuation">:</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>isAuthenticated <span class="token comment">/*true*/</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>userId<span class="token punctuation">,</span> e<span class="token punctuation">.</span>displayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="jwt-formdata-post" tabindex="-1">JWT FormData POST <a class="header-anchor" href="#jwt-formdata-post" aria-hidden="true">#</a></h4><p>The stateless nature of JWTs makes it highly versatile to be able to use in a number of difference scenarios, e.g. it could be used to make stateless authenticated requests across different domains without JavaScript (HTTP Headers or Cookies), by embedding it in a HTML Form POST:</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://remote.org/secure<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ss-tok<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{JWT}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Although as this enables cross-domain posts it should be enabled with great care.</p><h4 id="runtime-jwt-configuration" tabindex="-1">Runtime JWT Configuration <a class="header-anchor" href="#runtime-jwt-configuration" aria-hidden="true">#</a></h4><p>To allow for dynamic per request configuration as needed in Multi Tenant applications we&#39;ve added a new <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Configuration/IAppSettings.cs" target="_blank" rel="noopener noreferrer">IRuntimeAppSettings</a> API which can be registered in your <code>AppHost</code> to return custom per request configuration.</p><p>E.g. this can be used to return a custom <code>AuthKey</code> that should be used to sign JWT Tokens for that request:</p><div class="language-csharp"><pre><code>container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRuntimeAppSettings<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RuntimeAppSettings</span> <span class="token punctuation">{</span> 
    Settings <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>JwtAuthProvider<span class="token punctuation">.</span>AuthKey<span class="token punctuation">)</span><span class="token punctuation">,</span> req <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">GetAuthKey</span><span class="token punctuation">(</span><span class="token function">GetTenantId</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The following <code>JwtAuthProvider</code> properties can be overridden by <code>IRuntimeAppSettings</code>:</p><ul><li><code>byte[]</code> AuthKey</li><li><code>RSAParameters</code> PrivateKey</li><li><code>RSAParameters</code> PublicKey</li><li><code>List&lt;byte[]&gt;</code> FallbackAuthKeys</li><li><code>List&lt;RSAParameters&gt;</code> FallbackPublicKeys</li></ul><h3 id="registration" tabindex="-1">Registration <a class="header-anchor" href="#registration" aria-hidden="true">#</a></h3><p>The JWT <code>BearerToken</code> and <code>RefreshToken</code> properties added to <code>RegisterResponse</code> are now populated on Registrations configured to <code>AutoLogin=true</code>.</p><p>Previously users could update their info after they&#39;ve registered using the same built-in <code>/register</code> Service used at registration. This feature is now disabled by default as it&#39;s not an expected capability for a Registration Service, if needed it can be re-enabled with:</p><div class="language-csharp"><pre><code>ServiceStack<span class="token punctuation">.</span>Auth<span class="token punctuation">.</span>RegisterService<span class="token punctuation">.</span>AllowUpdates <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="routes-with-custom-rules" tabindex="-1">Routes with Custom Rules <a class="header-anchor" href="#routes-with-custom-rules" aria-hidden="true">#</a></h3><p>The new <code>Matches</code> property on <code>[Route]</code> and <code>[FallbackRoute]</code> attributes lets you specify an additional custom Rule that requests need to match. This feature is used in all SPA projects to specify that the <code>[FallbackRoute]</code> should only return the SPA <code>index.html</code> for unmatched requests which explicitly requests HTML, i.e:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FallbackRoute</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/{PathInfo*}&quot;</span><span class="token punctuation">,</span> Matches<span class="token operator">=</span><span class="token string">&quot;AcceptsHtml&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FallbackForClientRoutes</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> PathInfo <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This works by matching the <code>AcceptsHtml</code> built-in <code>RequestRules</code> below where the Route will only match the Request if it includes the explicit <code>text/html</code> MimeType in the HTTP Request <code>Accept</code> Header. The <code>AcceptsHtml</code> rule prevents the home page from being returned for missing resource requests like <strong>favicon</strong> which returns a <code>404</code> instead.</p><p>The implementation of all built-in Request Rules:</p><div class="language-csharp"><pre><code><span class="token function">SetConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HostConfig</span> <span class="token punctuation">{</span>
  RequestRules <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span><span class="token string">&quot;AcceptsHtml&quot;</span><span class="token punctuation">,</span> req <span class="token operator">=&gt;</span> req<span class="token punctuation">.</span>Accept<span class="token punctuation">?.</span><span class="token function">IndexOf</span><span class="token punctuation">(</span>MimeTypes<span class="token punctuation">.</span>Html<span class="token punctuation">,</span> StringComparison<span class="token punctuation">.</span>Ordinal<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;AcceptsJson&quot;</span><span class="token punctuation">,</span> req <span class="token operator">=&gt;</span> req<span class="token punctuation">.</span>Accept<span class="token punctuation">?.</span><span class="token function">IndexOf</span><span class="token punctuation">(</span>MimeTypes<span class="token punctuation">.</span>Json<span class="token punctuation">,</span> StringComparison<span class="token punctuation">.</span>Ordinal<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;AcceptsXml&quot;</span><span class="token punctuation">,</span> req <span class="token operator">=&gt;</span> req<span class="token punctuation">.</span>Accept<span class="token punctuation">?.</span><span class="token function">IndexOf</span><span class="token punctuation">(</span>MimeTypes<span class="token punctuation">.</span>Xml<span class="token punctuation">,</span> StringComparison<span class="token punctuation">.</span>Ordinal<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;AcceptsJsv&quot;</span><span class="token punctuation">,</span> req <span class="token operator">=&gt;</span> req<span class="token punctuation">.</span>Accept<span class="token punctuation">?.</span><span class="token function">IndexOf</span><span class="token punctuation">(</span>MimeTypes<span class="token punctuation">.</span>Jsv<span class="token punctuation">,</span> StringComparison<span class="token punctuation">.</span>Ordinal<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;AcceptsCsv&quot;</span><span class="token punctuation">,</span> req <span class="token operator">=&gt;</span> req<span class="token punctuation">.</span>Accept<span class="token punctuation">?.</span><span class="token function">IndexOf</span><span class="token punctuation">(</span>MimeTypes<span class="token punctuation">.</span>Csv<span class="token punctuation">,</span> StringComparison<span class="token punctuation">.</span>Ordinal<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;IsAuthenticated&quot;</span><span class="token punctuation">,</span> req <span class="token operator">=&gt;</span> req<span class="token punctuation">.</span><span class="token function">IsAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;IsMobile&quot;</span><span class="token punctuation">,</span> req <span class="token operator">=&gt;</span> Instance<span class="token punctuation">.</span>IsMobileRegex<span class="token punctuation">.</span><span class="token function">IsMatch</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>UserAgent<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;{int}/**&quot;</span><span class="token punctuation">,</span> req <span class="token operator">=&gt;</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>PathInfo<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">LeftPart</span><span class="token punctuation">(</span><span class="token string character">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">out</span> _<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;path/{int}/**&quot;</span><span class="token punctuation">,</span> req <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> afterFirst <span class="token operator">=</span> req<span class="token punctuation">.</span>PathInfo<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RightPart</span><span class="token punctuation">(</span><span class="token string character">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>afterFirst<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>afterFirst<span class="token punctuation">.</span><span class="token function">LeftPart</span><span class="token punctuation">(</span><span class="token string character">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">out</span> _<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;**/{int}&quot;</span><span class="token punctuation">,</span> req <span class="token operator">=&gt;</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>PathInfo<span class="token punctuation">.</span><span class="token function">LastRightPart</span><span class="token punctuation">(</span><span class="token string character">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">out</span> _<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;**/{int}/path&quot;</span><span class="token punctuation">,</span> req <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> beforeLast <span class="token operator">=</span> req<span class="token punctuation">.</span>PathInfo<span class="token punctuation">.</span><span class="token function">LastLeftPart</span><span class="token punctuation">(</span><span class="token string character">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> beforeLast <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>beforeLast<span class="token punctuation">.</span><span class="token function">LastRightPart</span><span class="token punctuation">(</span><span class="token string character">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">out</span> _<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Routes that contain a <code>Matches</code> rule have a higher precedence then Routes without. We can use this to define multiple idential matching routes to call different Service depending on whether the Path Segment is an integer or not, e.g:</p><div class="language-csharp"><pre><code><span class="token comment">// matches /users/1</span>
<span class="token punctuation">[</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token string">&quot;/users/{Id}&quot;</span><span class="token punctuation">,</span> Matches <span class="token operator">=</span> <span class="token string">&quot;**/{int}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetUser</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// matches /users/username</span>
<span class="token punctuation">[</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token string">&quot;/users/{Slug}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetUserBySlug</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Slug <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Other examples utilizing <code>{int}</code> Request Rules:</p><div class="language-csharp"><pre><code><span class="token comment">// matches /1/profile</span>
<span class="token punctuation">[</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token string">&quot;/{UserId}/profile&quot;</span><span class="token punctuation">,</span> Matches <span class="token operator">=</span> <span class="token string">@&quot;{int}/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetProfile</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

<span class="token comment">// matches /username/profile</span>
<span class="token punctuation">[</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token string">&quot;/{Slug}/profile&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetProfileBySlug</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

<span class="token comment">// matches /users/1/profile/avatar</span>
<span class="token punctuation">[</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token string">&quot;/users/{UserId}/profile/avatar&quot;</span><span class="token punctuation">,</span> Matches <span class="token operator">=</span> <span class="token string">@&quot;path/{int}/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetProfileAvatar</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

<span class="token comment">// matches /users/username/profile/avatar</span>
<span class="token punctuation">[</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token string">&quot;/users/{Slug}/profile/avatar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetProfileAvatarBySlug</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre></div><p>Another popular use-case is to call different services depending on whether a Request is from an Authenticated User or not:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/feed&quot;</span><span class="token punctuation">,</span> Matches <span class="token operator">=</span> <span class="token string">&quot;IsAuthenticated&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ViewCustomizedUserFeed</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/feed&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ViewPublicFeed</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre></div><p>This can also be used to call different Services depending if the Request is from a Mobile browser or not:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/search&quot;</span><span class="token punctuation">,</span> Matches <span class="token operator">=</span> <span class="token string">&quot;IsMobile&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MobileSearch</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/search&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DesktopSearch</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre></div><p>Instead of matching on a pre-configured RequestRule you can instead specify a Regular Expression using the format:</p><pre><code>{Property} =~ {RegEx}
</code></pre><p>Where <code>{Property}</code> is an <code>IHttpRequest</code> property, e.g:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/users/{Id}&quot;</span><span class="token punctuation">,</span> Matches <span class="token operator">=</span> <span class="token string">@&quot;PathInfo =~ \\/[0-9]+$&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetUser</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre></div><p>An exact match takes the format:</p><pre><code>{Property} = {Value}
</code></pre><p>Which you could use to provide a tailored feed for specific clients:</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/feed&quot;</span><span class="token punctuation">,</span> Matches <span class="token operator">=</span> <span class="token string">@&quot;UserAgent = specific-client&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomFeedView</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="script-pages" tabindex="-1">#Script Pages <a class="header-anchor" href="#script-pages" aria-hidden="true">#</a></h3><p><a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">#Script Pages</a> gains support for the last missing feature from ServiceStack.Razor with its new <strong>View Pages</strong> support which lets you use <code>.html</code> Template Pages to render the HTML for Services Responses.</p><p>It works similarly to Razor ViewPages where it uses first matching View Page with the Response DTO is injected as the <code>Model</code> property. The View Pages can be in any folder within the <code>/Views</code> folder using the format <code>{PageName}.html</code> where <code>PageName</code> can be either the <strong>Request DTO</strong> or <strong>Response DTO</strong> Name, but all page names within the <code>/Views</code> folder need to be unique.</p><p>Just like ServiceStack.Razor you can also specify to use different Views or Layouts by returning a custom <code>HttpResult</code>, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">MyRequest</span> request<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpResult</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        View <span class="token operator">=</span> <span class="token string">&quot;CustomPage&quot;</span><span class="token punctuation">,</span>
        Template <span class="token operator">=</span> <span class="token string">&quot;_custom-layout&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Or add the <code>[ClientCanSwapTemplates]</code> Request Filter attribute to allow clients to specify which View and Template to use via the query string, e.g: <code>?View=CustomPage&amp;Template=_custom-layout</code>.</p><p>Additional examples of dynamically specifying the View and Template are available in <a href="https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.Endpoints.Tests/TemplateTests/TemplateViewPagesTests.cs" target="_blank" rel="noopener noreferrer">TemplateViewPagesTests</a>.</p><h4 id="cascading-layouts" tabindex="-1">Cascading Layouts <a class="header-anchor" href="#cascading-layouts" aria-hidden="true">#</a></h4><p>One difference from Razor is that it uses a cascading <code>_layout.html</code> instead of <code>/Views/Shared/_Layout.cshtml</code>.</p><p>So if your view page was in:</p><pre><code>/Views/dir/MyRequest.html
</code></pre><p>It will use the closest <code>_layout.html</code> it can find starting from:</p><pre><code>/Views/dir/_layout.html
/Views/_layout.html
/_layout.html
</code></pre><h3 id="logging-with-context" tabindex="-1">Logging with Context <a class="header-anchor" href="#logging-with-context" aria-hidden="true">#</a></h3><p><a href="https://github.com/snakefoot" target="_blank" rel="noopener noreferrer">Rolf Kristensen</a> added support for contextual logging with the new <code>ILogWithContext</code> interface and <code>PushProperty</code> extension method which lets you attach additional data to log messages, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">using</span> <span class="token punctuation">(</span>log<span class="token punctuation">.</span><span class="token function">PushProperty</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">InfoFormat</span><span class="token punctuation">(</span><span class="token string">&quot;Message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Support for the additional context was added to <code>Log4net</code>, <code>NLog</code> and <code>Serilog</code> logging providers.</p><p>The new <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Logging/ILogWithException.cs" target="_blank" rel="noopener noreferrer">ILogWithException</a> interface and extension methods provides additional overloads for logging Exceptions with separate message format and args.</p><h2 id="v5-changes-and-migration-notes" tabindex="-1">V5 Changes and Migration Notes <a class="header-anchor" href="#v5-changes-and-migration-notes" aria-hidden="true">#</a></h2><p>Most ServiceStack releases are in-place upgrades containing new features and enhancements with very minimal disruption to existing code-bases. Our major versions are very few and far between which we use to implement any structural changes that were held off due to requiring external project or server configuration changes, e.g. the last v4.5.0 major version was for upgrading all packages from .NET v4.0 to .NET v4.5.</p><p>The theme for ServiceStack v5 was to restructure the code-base to lay the groundwork for parallel first-class support for .NET Core. Whilst some .NET Framework only implementations have moved to different projects there should still be minimal user-facing source code changes other than most deprecated APIs and dead-code having been removed, as such the primary task before upgrading to V5 will be to <strong>move off deprecated APIs</strong>. Most <code>[Obsolete]</code> APIs specify which APIs to move to in their deprecated messages which you can find in your build warning messages.</p><p>Other major structural changes include:</p><ul><li>Upgraded all NuGet packages to a <strong>5.0.0</strong> major version</li><li>Removed all PCL builds and upgraded all client libraries and .NET Standard builds to target <strong>.NET Standard 2.0</strong></li><li>Merged <code>.Core</code> packages into main ServiceStack packages which now contain <code>net45</code> and <code>netstandard2.0</code> builds</li><li>Strong-named all .NET v4.5 builds which also only have Strong named dependencies</li><li>Upgrade <strong>ServiceStack.RabbitMQ</strong> to use the latest <strong>RabbitMQ.Client</strong> v5.0.1 NuGet dependency which requires a <strong>.NET v4.5.1</strong> minimum</li><li>Upgrade <strong>ServiceStack.Azure</strong> to use the latest NuGet dependencies which requires a <strong>.NET v4.5.2</strong> minimum</li><li>Upgraded to the latest Fluent Validation 7.2</li></ul><p>Migration notes:</p><ul><li>Move off deprecated APIs before upgrading to v5</li><li>If you&#39;re using an outdated NuGet v2 client you&#39;ll need to upgrade to NuGet v3</li><li>If you were using <code>.Core</code> or <code>.Signed</code> NuGet packages you&#39;ll need to strip the suffixes to use the main NuGet packages</li></ul><p>If using the new MSBuild project format, using a <code>5.*</code> wildcard version enables upgrading to the latest release of ServiceStack with a NuGet restore.</p><h3 id="strong-naming-notes" tabindex="-1">Strong Naming Notes <a class="header-anchor" href="#strong-naming-notes" aria-hidden="true">#</a></h3><p>All .NET 4.5 builds are now strong named with the <code>servicestack.snk</code> key that&#39;s in the <a href="https://github.com/ServiceStack/ServiceStack/tree/master/src" target="_blank" rel="noopener noreferrer">/src</a> of each repo. <strong>ServiceStack.Logging.Elmah</strong> is the only .NET 4.5 dll left unsigned as it&#39;s elmah.corelibrary dependency is unsigned. .NET Standard builds remain unsigned as it would&#39;ve impeded building ServiceStack libraries on non Windows platforms which require msbuild.</p><h3 id="pcl-client-library-notes" tabindex="-1">PCL Client Library Notes <a class="header-anchor" href="#pcl-client-library-notes" aria-hidden="true">#</a></h3><p>The PCL client builds have been rewritten to use <strong>.NET Standard 2.0</strong> APIs. We&#39;ve added new test suites for <strong>Xamarin.IOS</strong> and <strong>Xamarin.Android</strong> to ensure the new clients run smoothly. We&#39;ve also included UWP in our .NET Standard 2.0 client test suites but this does require upgrading to Windows 10 Fall Creators Update.</p><p>There&#39;s no longer any Silverlight or Windows8 App builds which end at v4.5.14 on NuGet. v5 remains wire-compatible with existing versions so if you&#39;re still maintaining legacy Silverlight or Windows8 Apps your v4.5.14 clients will be able to consume v5 Services as before.</p><p>The new .NET Standard 2.0 clients are much nicer to use then the previous PCL clients which needed to utilize the <a href="https://log.paulbetts.org/the-bait-and-switch-pcl-trick/" target="_blank" rel="noopener noreferrer">PCL Bait and Switch trick</a> to overcome limitations in PCL&#39;s limited API Surface by delegating to platform specific implementations - required for each supported platform. The PCL limitations also meant you couldn&#39;t reference <code>ServiceStack.Text</code> package on its own as it needed the platform specific implementations in <code>ServiceStack.Client</code> which you would need to manually wire-up in iOS by hard-coding <code>IosPclExportClient.Configure();</code>.</p><p>By contrast .NET Standard 2.0 builds can be treated like regular .dlls. The existing PCL hacks, implementation-specific builds, polyfills and wrappers have all been removed. API and Code-reuse is also much broader as previously only the PCL compatible surface area could be shared amongst multiple projects, now the entire API surface is available.</p><h3 id="net-standard-client-packages-for-net-framework-projects" tabindex="-1">.NET Standard Client packages for .NET Framework Projects <a class="header-anchor" href="#net-standard-client-packages-for-net-framework-projects" aria-hidden="true">#</a></h3><p>One difference from before was previously <code>ServiceStack.Interfaces.dll</code> was a single PCL .dll referenced by all .NET v4.5, .NET Core and PCL projects. It now contains .NET 4.5 and .NET Standard 2.0 build like all other packages. One consequence of this is that you wont be able to have binary coupling of your Server .NET Core <code>ServiceModel.dll</code> inside .NET Framework clients despite both referencing the same <code>ServiceStack.Client</code> NuGet package. For this reason we&#39;re continuing to publish <code>.Core</code> versions of the client packages:</p><ul><li>ServiceStack.Text.Core</li><li>ServiceStack.Interfaces.Core</li><li>ServiceStack.Client.Core</li><li>ServiceStack.HttpClient.Core</li></ul><p>These contain the <strong>exact same</strong> .NET Standard 2.0 builds included in the main <strong>ServiceStack.Client</strong> packages but by having them in separate packages, you can force <strong>.NET v4.6.1+</strong> Framework projects to use .NET Standard versions which will let you share your server .NET Standard 2.0 <code>ServiceModel.dll</code> in <strong>.NET v4.6.1+</strong> clients. Alternatively you can avoid any binary coupling by using <a href="/add-servicestack-reference.html">Add ServiceStack Reference</a> to import the source code of your Typed DTOs.</p><p>This doesn&#39;t work the other way around where ServiceStack .NET Framework projects still cannot reference .NET Standard only projects. In order to create projects that can be shared from both .NET Core and <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Framework projects they&#39;ll need to target both frameworks, e.g:</p><div class="language-xml"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TargetFrameworks</span><span class="token punctuation">&gt;</span></span>netstandard2.0;net46<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TargetFrameworks</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="net-framework-specific-features" tabindex="-1">.NET Framework specific features <a class="header-anchor" href="#net-framework-specific-features" aria-hidden="true">#</a></h3><p>A goal for the v5 restructure was to restrict the primary <code>ServiceStack.dll</code> and NuGet Package to contain core functionality that&#39;s applicable to all <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a>, HttpListener and .NET Core Hosts. To this end we&#39;ve moved <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> and HttpListener specific features to different packages, but they remain source-compatible and continue to use the same Type names and namespaces.</p><p>In addition both .NET Framework and .NET Core ServiceStack AppHost&#39;s are initialized with the same minimal feature set. The .NET Framework SOAP Support, Mini Profiler and Markdown Razor format features are now opt-in, if needed they&#39;ll need to be explicitly added with:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SoapFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">MarkdownFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// In ServiceStack.Razor</span>
Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">MiniProfilerFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// In ServiceStack.NetFramework</span>
</code></pre></div><p>The <code>MiniProfilerFeature</code> plugin needs to be registered before <code>ProfiledDbConnection</code> if it&#39;s used on Startup, e.g:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">MiniProfilerFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>
    c <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteConnectionFactory</span><span class="token punctuation">(</span><span class="token string">&quot;~/db.sqlite&quot;</span><span class="token punctuation">.</span><span class="token function">MapHostAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SqliteDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">)</span><span class="token punctuation">{</span>
        ConnectionFilter <span class="token operator">=</span> x <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ProfiledDbConnection</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> Profiler<span class="token punctuation">.</span>Current<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> db <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="servicestack-razor-1" tabindex="-1">ServiceStack.Razor <a class="header-anchor" href="#servicestack-razor-1" aria-hidden="true">#</a></h3><p>The MVC HTML Helpers for <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> ServiceStack.Razor has been moved to the <strong>ServiceStack.Razor</strong> project. This should be a transparent change as it needed ServiceStack.Razor to make use of them.</p><p><a href="/markdown-razor.html">Markdown Razor</a> and its <code>MarkdownFormat</code> was also moved to ServiceStack.Razor as they were built on older Code DOM technology which isn&#39;t available on .NET Core and saw its feature-set stripped down to bare Markdown functionality.</p><h4 id="script-pages-1" tabindex="-1">#Script Pages <a class="header-anchor" href="#script-pages-1" aria-hidden="true">#</a></h4><p>If you were using Markdown Razor we recommend using the superior, cleaner, faster and more flexible alternative in <a href="https://sharpscript.net/docs/sharp-pages" target="_blank" rel="noopener noreferrer">#Script Pages</a> which easily supports Markdown Razor&#39;s most redeeming feature of being able to mix .NET in Markdown by utilizing its <a href="https://sharpscript.net/docs/transformers" target="_blank" rel="noopener noreferrer">Transformers</a> feature.</p><h4 id="markdown-config" tabindex="-1">Markdown Config <a class="header-anchor" href="#markdown-config" aria-hidden="true">#</a></h4><p>The new <code>MarkdownConfig</code> API lets you specify which Markdown implementation to use in Razor and ServiceStack Template Markdown partials. By default it uses the built-in fast and lightweight MarkdownDeep implementation:</p><div class="language-csharp"><pre><code>MarkdownConfig<span class="token punctuation">.</span>Transformer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MarkdownDeep<span class="token punctuation">.</span>Markdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Providing a static API that can be used to transform Markdown to HTML with:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> markdown <span class="token operator">=</span> MarkdownConfig<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Alternative Markdown implementations can be used by providing an adapter for the <code>IMarkdownTransformer</code> interface:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IMarkdownTransformer</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Transform</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> markdown<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="servicestack-netframework" tabindex="-1">ServiceStack.NetFramework <a class="header-anchor" href="#servicestack-netframework" aria-hidden="true">#</a></h3><p>The remaining .NET Framework and HttpListener specific features that were previously in <code>ServiceStack.dll</code> have moved to <code>ServiceStack.NetFramework</code> - a new project and NuGet package for maintaining .NET Framework only features.</p><pre><code>PM&gt; Install-Package ServiceStack.NetFramework
</code></pre><p>It currently contains <code>MiniProfiler</code> and <code>SmartThreadPool</code> which is an internal ThreadPool originally imported to provide a faster alternative to .NET&#39;s built-in ThreadPool. The fastest self-hosting option is now to use a .NET Core App instead of .NET&#39;s HttpListener which also benefits from running flawlessly cross-platform so it&#39;s our recommended option for new projects when you don&#39;t have requirements that need the .NET Framework.</p><p>The primary result of this is that now <code>AppSelfHostBase</code> is implemented on top of <code>AppHostHttpListenerPoolBase</code>. To have your HttpListener AppHost go back to utilizing a SmartThreadPool implementation, change your <code>AppHost</code> to inherit either <code>SmartThreadPool.AppSelfHostBase</code> or <code>AppHostHttpListenerSmartPoolBase</code>, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppHost</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">SmartThreadPool<span class="token punctuation">.</span>AppSelfHostBase</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppHost</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AppHostHttpListenerSmartPoolBase</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="validation" tabindex="-1">Validation <a class="header-anchor" href="#validation" aria-hidden="true">#</a></h3><p>Our internal implementation of <a href="https://github.com/JeremySkinner/FluentValidation" target="_blank" rel="noopener noreferrer">FluentValidation</a> has been upgraded to the latest 7.2 version which will let you take advantage of new features like implementing <a href="https://github.com/JeremySkinner/FluentValidation/wiki/e.-Custom-Validators#using-a-custom-validator" target="_blank" rel="noopener noreferrer">Custom Validators</a>, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomValidationValidator</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AbstractValidator<span class="token punctuation">&lt;</span>CustomValidation<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">CustomValidationValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>request <span class="token operator">=&gt;</span> request<span class="token punctuation">.</span>Code<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">NotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">RuleFor</span><span class="token punctuation">(</span>request <span class="token operator">=&gt;</span> request<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Custom</span><span class="token punctuation">(</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>Code<span class="token punctuation">?.</span><span class="token function">StartsWith</span><span class="token punctuation">(</span><span class="token string">&quot;X-&quot;</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token class-name"><span class="token keyword">var</span></span> propName <span class="token operator">=</span> context<span class="token punctuation">.</span>ParentContext<span class="token punctuation">.</span>PropertyChain<span class="token punctuation">.</span><span class="token function">BuildPropertyName</span><span class="token punctuation">(</span><span class="token string">&quot;Code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    context<span class="token punctuation">.</span><span class="token function">AddFailure</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationFailure</span><span class="token punctuation">(</span>propName<span class="token punctuation">,</span> <span class="token named-parameter punctuation">error</span><span class="token punctuation">:</span><span class="token string">&quot;Incorrect prefix&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        ErrorCode <span class="token operator">=</span> <span class="token string">&quot;NotFound&quot;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="validators-in-serviceassemblies-auto-wired-by-default" tabindex="-1">Validators in ServiceAssemblies auto-wired by default <a class="header-anchor" href="#validators-in-serviceassemblies-auto-wired-by-default" aria-hidden="true">#</a></h4><p>The <code>ValidationFeature</code> plugin now scans and auto-wires all validators in the <code>AppHost.ServiceAssemblies</code> that&#39;s injected in the AppHost constructor so you&#39;ll no longer need to manually register validators maintained in your <code>ServiceInterface.dll</code> project:</p><div class="language-csharp"><pre><code><span class="token comment">//container.RegisterValidators(typeof(UserValidator).Assembly);</span>
</code></pre></div><p>This default behavior can be <strong>disabled</strong> with:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationFeature</span> <span class="token punctuation">{</span>
    ScanAppHostAssemblies <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="expanded-async-support" tabindex="-1">Expanded Async Support <a class="header-anchor" href="#expanded-async-support" aria-hidden="true">#</a></h3><p>To pre-emptively support .NET Core when they <a href="https://github.com/aspnet/Announcements/issues/252" target="_blank" rel="noopener noreferrer">disable Sync Response writes by default</a> in a future version, we&#39;ve rewritten our internal implementations to write to Responses asynchronously.</p><p>New Async filters are now available to match existing sync filters. It&#39;s very unlikely the classic <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Framework will ever disable sync writes, but if you&#39;re on .NET Core you may want to consider switching to use the newer async API equivalents on <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/IAppHost.cs" target="_blank" rel="noopener noreferrer">IAppHost</a> below:</p><pre><code>GlobalRequestFiltersAsync
GlobalResponseFiltersAsync
GatewayRequestFiltersAsync
GatewayResponseFiltersAsync
GlobalMessageRequestFiltersAsync
GlobalMessageResponseFiltersAsync
</code></pre><h4 id="async-attribute-filters" tabindex="-1">Async Attribute Filters <a class="header-anchor" href="#async-attribute-filters" aria-hidden="true">#</a></h4><p>Async Filter Attributes are available by inheriting the new <code>RequestFilterAsyncAttribute</code> or <code>ResponseFilterAsyncAttribute</code> base classes if you need to call async APIs within Filter Attributes.</p><p>All async equivalents follow the same <a href="/order-of-operations.html">Order of Operations</a> and are executed immediately after any registered sync filters with the same priority.</p><h4 id="async-request-and-response-converters" tabindex="-1">Async Request and Response Converters <a class="header-anchor" href="#async-request-and-response-converters" aria-hidden="true">#</a></h4><p>As they&#39;re not commonly used, the <code>RequestConverters</code> and <code>ResponseConverters</code> were just converted to utilize an Async API.</p><h4 id="async-contenttypes-formats" tabindex="-1">Async ContentTypes Formats <a class="header-anchor" href="#async-contenttypes-formats" aria-hidden="true">#</a></h4><p>There&#39;s also new async registration APIs for Content-Type Formats which perform Async I/O, most serialization formats don&#39;t except for HTML View Engines which can perform Async I/O when rendering views, so they were changed to use the new <code>RegisterAsync</code> APIs:</p><div class="language-csharp"><pre><code>appHost<span class="token punctuation">.</span>ContentTypes<span class="token punctuation">.</span><span class="token function">RegisterAsync</span><span class="token punctuation">(</span>MimeTypes<span class="token punctuation">.</span>Html<span class="token punctuation">,</span> SerializeToStreamAsync<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
appHost<span class="token punctuation">.</span>ContentTypes<span class="token punctuation">.</span><span class="token function">RegisterAsync</span><span class="token punctuation">(</span>MimeTypes<span class="token punctuation">.</span>JsonReport<span class="token punctuation">,</span> SerializeToStreamAsync<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
appHost<span class="token punctuation">.</span>ContentTypes<span class="token punctuation">.</span><span class="token function">RegisterAsync</span><span class="token punctuation">(</span>MimeTypes<span class="token punctuation">.</span>MarkdownText<span class="token punctuation">,</span> SerializeToStreamAsync<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="async-httpwebrequest-service-clients" tabindex="-1">Async HttpWebRequest Service Clients <a class="header-anchor" href="#async-httpwebrequest-service-clients" aria-hidden="true">#</a></h4><p>The Async implementation of the <code>HttpWebRequest</code> based Service Clients was rewritten to use the newer .NET 4.5 Async APIs as the older APM APIs were found to have some async request hanging issues in the .NET Standard 2.0 version of Xamarin.iOS.</p><h3 id="net-reflection-apis" tabindex="-1">.NET Reflection APIs <a class="header-anchor" href="#net-reflection-apis" aria-hidden="true">#</a></h3><p>One of the primary areas where .NET Standard and .NET Framework source code differed was in Reflection APIs. To work around this the most popular Reflection APIs were abstracted behind wrapper extension methods. These wrappers have now all been deprecated as they&#39;re no longer needed now that .NET Standard 2.0 added back support of .NET&#39;s standard Reflection APIs.</p><h3 id="minor-features" tabindex="-1">Minor Features <a class="header-anchor" href="#minor-features" aria-hidden="true">#</a></h3><ul><li><code>ToOptimizedResult()</code> now supports <code>HttpResult</code> responses</li><li><code>Config.DebugMode</code> is being initialized with <code>env.IsDevelopment()</code> in .NET Core</li><li><code>MapProjectPath()</code> uses <code>env.ContentRoot</code> in .NET Core</li><li><code>MetadataDebugTemplate</code> no longer has dependencies on <code>jquip</code> and <code>ss-utils.js</code></li><li><code>IMeta</code>, <code>IHasSessionId</code> and <code>IHasVersion</code> interfaces are now exported in Add ServiceStack Reference</li><li><code>Html.IncludeFile()</code> API for embedding file contents in Razor views</li><li><code>VirtualFiles</code> and <code>VirtualFileSources</code> properties added to base Razor View</li></ul><h2 id="servicestack-npm-packages" tabindex="-1">@servicestack npm packages <a class="header-anchor" href="#servicestack-npm-packages" aria-hidden="true">#</a></h2><p>ServiceStack&#39;s npm packages are now being maintained in npm organization scoped <code>@servicestack</code> packages, if you were using the previous packages you should uninstall them and use the new scoped packages instead:</p><pre><code>$ npm uninstall servicestack-client
$ npm install @servicestack/client

$ npm uninstall -g servicestack-cli
$ npm install -g @servicestack/cli
</code></pre><p>You&#39;ll also need to update your source code references to use the new packages:</p><div class="language-ts"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> JsonServiceClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@servicestack/client&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="servicestack-ormlite" tabindex="-1">ServiceStack.OrmLite <a class="header-anchor" href="#servicestack-ormlite" aria-hidden="true">#</a></h2><h3 id="support-for-mysqlconnector-ado-net-provider" tabindex="-1">Support for MySqlConnector <a href="http://ADO.NET" target="_blank" rel="noopener noreferrer">ADO.NET</a> Provider <a class="header-anchor" href="#support-for-mysqlconnector-ado-net-provider" aria-hidden="true">#</a></h3><p><a href="https://github.com/Naragato" target="_blank" rel="noopener noreferrer">@Naragato</a> from the ServiceStack Community contributed a <a href="https://github.com/mysql-net/MySqlConnector" target="_blank" rel="noopener noreferrer">MySqlConnector</a> for OrmLite providing a true async <a href="http://ADO.NET" target="_blank" rel="noopener noreferrer">ADO.NET</a> Provider option for MySql, from their website:</p><blockquote><p>This is a clean-room reimplementation of the MySQL Protocol and is not based on the official connector. It&#39;s fully async, supporting the async <a href="http://ADO.NET" target="_blank" rel="noopener noreferrer">ADO.NET</a> methods added in .NET 4.5 without blocking (or using Task.Run to run synchronous methods on a background thread). It&#39;s also 100% compatible with .NET Core.</p></blockquote><p>To use it, install:</p><pre><code>PM&gt; Install-Package ServiceStack.Ormlite.MySqlConnector
</code></pre><p>Then initialize your DB Factory with:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> dbFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteConnectionFactory</span><span class="token punctuation">(</span>connectionString<span class="token punctuation">,</span> MySqlConnectorDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> db <span class="token operator">=</span> dbFactory<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="parametrized-in-values" tabindex="-1">Parametrized IN Values <a class="header-anchor" href="#parametrized-in-values" aria-hidden="true">#</a></h3><p>You can now provide a collection of values and OrmLite will automatically modify the SQL statement and split the values into multiple DB parameters to simplify executing parameterized SQL with multiple IN Values, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> ids <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> results <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;Id in (@ids)&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> ids <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> names <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;qux&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> results <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">SqlList</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Table<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM Table WHERE Name IN (@names)&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> names <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="rowversion-byte-array" tabindex="-1">RowVersion Byte Array <a class="header-anchor" href="#rowversion-byte-array" aria-hidden="true">#</a></h3><p>To improve reuse of OrmLite&#39;s Data Models in Dapper, <a href="https://github.com/daleholborow" target="_blank" rel="noopener noreferrer">@daleholborow</a> added support for allowing <code>byte[] RowVersion</code> as an alternative to OrmLite&#39;s <code>ulong RowVersion</code> which lets you use OrmLite Data Models with <code>byte[] RowVersion</code> properties in Dapper queries.</p><h3 id="onopenconnection-filter" tabindex="-1">OnOpenConnection Filter <a class="header-anchor" href="#onopenconnection-filter" aria-hidden="true">#</a></h3><p>The <code>OnOpenConnection</code> filter lets you run custom commands after opening a new DB Connection. This feature can be used to easily enable <a href="https://www.sqlite.org/wal.html" target="_blank" rel="noopener noreferrer">Write-Ahead Logging in SQLite</a>:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> dbFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteConnectionFactory</span><span class="token punctuation">(</span><span class="token string">&quot;sqlite.db&quot;</span><span class="token punctuation">,</span> SqliteDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">)</span><span class="token punctuation">;</span>
SqliteDialect<span class="token punctuation">.</span>Provider<span class="token punctuation">.</span>OnOpenConnection <span class="token operator">=</span> db <span class="token operator">=&gt;</span> db<span class="token punctuation">.</span><span class="token function">ExecuteSql</span><span class="token punctuation">(</span><span class="token string">&quot;PRAGMA journal_mode=WAL;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> db <span class="token operator">=</span> dbFactory<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="openasync-apis" tabindex="-1">OpenAsync APIs <a class="header-anchor" href="#openasync-apis" aria-hidden="true">#</a></h3><p>The new <code>OpenDbConnectionAsync()</code> and <code>OpenAsync()</code> alias APIs can be used to Open DB connections asynchronously.</p><h2 id="servicestack-aws" tabindex="-1">ServiceStack.Aws <a class="header-anchor" href="#servicestack-aws" aria-hidden="true">#</a></h2><p>PocoDynamo was updated to utilize <a href="https://aws.amazon.com/blogs/architecture/exponential-backoff-and-jitter/" target="_blank" rel="noopener noreferrer">AWS&#39;s recommended Exponential Backoff And Jitter algorithm</a>.</p><p>This is also available to be used independently with:</p><div class="language-csharp"><pre><code>Thread<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>ExecUtils<span class="token punctuation">.</span><span class="token function">CalculateFullJitterBackOffDelay</span><span class="token punctuation">(</span>retriesAttempted<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> Task<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span>ExecUtils<span class="token punctuation">.</span><span class="token function">CalculateFullJitterBackOffDelay</span><span class="token punctuation">(</span>retriesAttempted<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="v4-5-14-release-notes" tabindex="-1"><a href="/releases/v4.5.14.html">v4.5.14 Release Notes</a> <a class="header-anchor" href="#v4-5-14-release-notes" aria-hidden="true">#</a></h1>`,242),d=[c,r,i,l,u,k];function h(g,m,f,w,b,v){return o(),t("div",null,d)}var T=e(p,[["render",h]]);export{S as __pageData,T as default};
