import{_ as s,c as a,o as e,b as n,e as t,a as o}from"./app.14440598.js";const b='{"title":"v4.0.36 Release Notes","description":"","frontmatter":{"title":"v4.0.36 Release Notes","slug":"v4-0-36"},"headers":[{"level":2,"title":"Xamarin Unified API Support","slug":"xamarin-unified-api-support"},{"level":2,"title":"Add ServiceStack Reference meets Xamarin Studio!","slug":"add-servicestack-reference-meets-xamarin-studio"},{"level":3,"title":"Installing ServiceStackXS","slug":"installing-servicestackxs"},{"level":3,"title":"Adding a ServiceStack Reference","slug":"adding-a-servicestack-reference"},{"level":3,"title":"Updating the ServiceStack Reference","slug":"updating-the-servicestack-reference"},{"level":3,"title":"Developing with pleasure on Linux!","slug":"developing-with-pleasure-on-linux"},{"level":2,"title":"Sitemap Feature","slug":"sitemap-feature"},{"level":3,"title":"Multiple Sitemap Indexes","slug":"multiple-sitemap-indexes"},{"level":2,"title":"Razor","slug":"razor"},{"level":2,"title":"Techstacks","slug":"techstacks"},{"level":3,"title":"Server Generated HTML Pages","slug":"server-generated-html-pages"},{"level":3,"title":"Twitter Updates","slug":"twitter-updates"},{"level":2,"title":"ServiceStack.Text","slug":"servicestack-text"},{"level":2,"title":"ServiceStackVS Updated","slug":"servicestackvs-updated"},{"level":2,"title":"Breaking Changes","slug":"breaking-changes"},{"level":3,"title":"AuthProvider Validation moved to AuthFeature","slug":"authprovider-validation-moved-to-authfeature"},{"level":3,"title":"PooledRedisClientsManager Db is nullable","slug":"pooledredisclientsmanager-db-is-nullable"}],"relativePath":"releases/v4.0.36.md","lastUpdated":1634495308430}',p={},c=n("h2",{id:"xamarin-unified-api-support",tabindex:"-1"},[t("Xamarin Unified API Support "),n("a",{class:"header-anchor",href:"#xamarin-unified-api-support","aria-hidden":"true"},"#")],-1),l=n("img",{src:"https://raw.githubusercontent.com/ServiceStack/Assets/master/img/release-notes/xamarin-unifiedapi.png",align:"right",vspace:"10",width:"300"},null,-1),i=o(`<p>We have a short release cycle this release to be able to release the <a href="https://github.com/ServiceStackApps/HelloMobile" target="_blank" rel="noopener noreferrer">ServiceStack PCL ServiceClients</a> support for <a href="http://developer.xamarin.com/guides/cross-platform/macios/unified/" target="_blank" rel="noopener noreferrer">Xamarin&#39;s Unified API</a> to everyone as quickly as possible. As <a href="http://blog.xamarin.com/xamarin.ios-unified-api-with-64-bit-support/" target="_blank" rel="noopener noreferrer">announced on their blog</a>, Xamarin has released the stable build of Xamarin.iOS Unified API with 64-bit support. As per <a href="https://developer.apple.com/news/?id=12172014b" target="_blank" rel="noopener noreferrer">Apple&#39;s deadlines</a> <strong>new iOS Apps</strong> published after <strong>February 1st</strong> must include 64-bit support, this deadline extends to updates of <strong>existing Apps</strong> on <strong>June 1st</strong>. One of the benefits of upgrading is being able to share code between iOS and OSX Apps with Xamarin.Mac.</p><p>Support for Unified API was added in addition to the existing 32bit monotouch.dll which used the <strong>MonoTouch</strong> NuGet profile. Xamarin Unified API instead uses the new <strong>Xamarin.iOS10</strong> NuGet profile. For new Apps this works transparently where you can add a NuGet package reference and it will automatically reference the appropriate build.</p><pre><code>PM&gt; Install-Package ServiceStack.Client
</code></pre><p>Existing iOS proejcts should follow Xamarin&#39;s <a href="http://developer.xamarin.com/guides/cross-platform/macios/updating_ios_apps/" target="_blank" rel="noopener noreferrer">Updating Existing iOS Apps</a> docs, whilst the HelloMobile project has docs on using <a href="https://github.com/ServiceStackApps/HelloMobile#xamarinios-client" target="_blank" rel="noopener noreferrer">ServiceStack&#39;s ServiceClients with iOS</a>.</p><h2 id="add-servicestack-reference-meets-xamarin-studio" tabindex="-1">Add ServiceStack Reference meets Xamarin Studio! <a class="header-anchor" href="#add-servicestack-reference-meets-xamarin-studio" aria-hidden="true">#</a></h2><p>Our enhancements to <a href="/add-servicestack-reference.html">Add ServiceStack Reference</a> continue, this time extended to support <a href="http://xamarin.com/studio" target="_blank" rel="noopener noreferrer">Xamarin Studio!</a></p><p>With the new <a href="http://addins.monodevelop.com/Project/Index/154" target="_blank" rel="noopener noreferrer">ServiceStackXS Add-In</a> your Service Consumers can now generate typed DTO&#39;s of your remote ServiceStack Services directly from within Xamarin Studio, which together with the <strong>ServiceStack.Client</strong> NuGet package provides an effortless way to enable an end-to-end Typed API from within Xamarin C# projects.</p><h3 id="installing-servicestackxs" tabindex="-1">Installing ServiceStackXS <a class="header-anchor" href="#installing-servicestackxs" aria-hidden="true">#</a></h3><p>Installation is straightforward if you&#39;ve installed Xamarin Add-ins before, just go to <code>Xamarin Studio -&gt; Add-In Manager...</code> from the Menu and then search for <code>ServiceStack</code> from the <strong>Gallery</strong>:</p><p><img src="https://github.com/ServiceStack/Assets/blob/master/img/servicestackvs/servicestack%20reference/ssxs-mac-install.gif" alt=""></p><h3 id="adding-a-servicestack-reference" tabindex="-1">Adding a ServiceStack Reference <a class="header-anchor" href="#adding-a-servicestack-reference" aria-hidden="true">#</a></h3><p>Once installed, adding a ServiceStack Reference is very similar to <a href="/csharp-add-servicestack-reference.html#add-servicestack-reference">ServiceStackVS in VS.NET</a> where you can just click on <code>Add -&gt; Add ServiceStack Reference...</code> on the project&#39;s context menu to bring up the familiar Add Reference dialog. After adding the <code>BaseUrl</code> of the remote ServiceStack instance, click OK to add the generated DTO&#39;s to your project using the name specified:</p><p><img src="https://github.com/ServiceStack/Assets/blob/master/img/servicestackvs/servicestack%20reference/ssxs-mac-add-reference.gif" alt=""></p><h3 id="updating-the-servicestack-reference" tabindex="-1">Updating the ServiceStack Reference <a class="header-anchor" href="#updating-the-servicestack-reference" aria-hidden="true">#</a></h3><p>As file watching isn&#39;t supported yet, to refresh the generated DTO&#39;s you&#39;ll need to click on its <code>Update ServiceStack Reference</code> from the items context menu.</p><h3 id="developing-with-pleasure-on-linux" tabindex="-1">Developing with pleasure on Linux! <a class="header-anchor" href="#developing-with-pleasure-on-linux" aria-hidden="true">#</a></h3><p>One of the nice benefits of creating an Xamarin Studio Add-in is that we&#39;re also able to bring the same experience to .NET Developers on Linux! Which works similar to OSX where you can install ServiceStackXS from the Add-in Gallery - Here&#39;s an example using Ubuntu:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/img/servicestackvs/servicestack%20reference/ssxs-ubuntu-install.gif" alt=""></p><p>Then <strong>Add ServiceStack Reference</strong> is accessible in the same way:</p><p><img src="https://raw.githubusercontent.com/ServiceStack/Assets/master/img/servicestackvs/servicestack%20reference/ssxs-ubuntu-add-ref.gif" alt=""></p><h2 id="sitemap-feature" tabindex="-1">Sitemap Feature <a class="header-anchor" href="#sitemap-feature" aria-hidden="true">#</a></h2><p>A good SEO technique for helping Search Engines index your website is to tell them where the can find all your content using <a href="https://support.google.com/webmasters/answer/156184?hl=en" target="_blank" rel="noopener noreferrer">Sitemaps</a>. Sitemaps are basic xml documents but they can be tedious to maintain manually, more so for database-driven dynamic websites.</p><p>The <code>SitemapFeature</code> reduces the effort required by letting you add Site Urls to a .NET collection of <code>SitemapUrl</code> POCO&#39;s. In its most basic usage you can populate a single Sitemap with urls of your Website Routes, e.g:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SitemapFeature</span>
<span class="token punctuation">{</span>
    UrlSet <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TechnologyStack<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">ConvertAll</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SitemapUrl</span> <span class="token punctuation">{</span>
            Location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ClientTechnologyStack</span> <span class="token punctuation">{</span> Slug <span class="token operator">=</span> x<span class="token punctuation">.</span>Slug <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">ToAbsoluteUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            LastModified <span class="token operator">=</span> x<span class="token punctuation">.</span>LastModified<span class="token punctuation">,</span>
            ChangeFrequency <span class="token operator">=</span> SitemapFrequency<span class="token punctuation">.</span>Weekly<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The above example uses <a href="https://github.com/ServiceStack/ServiceStack.OrmLite" target="_blank" rel="noopener noreferrer">OrmLite</a> to generate a collection of <code>SitemapUrl</code> entries containing Absolute Urls for all <a href="https://techstacks.io/tech" target="_blank" rel="noopener noreferrer">techstacks.io Technology Pages</a>. This is another good showcase for the <a href="/routing.html#reverse-routing">Reverse Routing available on Request DTO&#39;s</a> which provides a Typed API for generating Urls without any additional effort.</p><p>Once populated your sitemap will be available at <code>/sitemap.xml</code> which looks like:</p><div class="language-xml"><pre><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>urlset</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.sitemaps.org/schemas/sitemap/0.9<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>loc</span><span class="token punctuation">&gt;</span></span>https://techstacks.io/the-guardian<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>loc</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lastmod</span><span class="token punctuation">&gt;</span></span>2015-01-14<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lastmod</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>changefreq</span><span class="token punctuation">&gt;</span></span>weekly<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>changefreq</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>urlset</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Which you can checkout in this <a href="https://techstacks.io/sitemap-techstacks.xml" target="_blank" rel="noopener noreferrer">live Sitemap example</a>.</p><h3 id="multiple-sitemap-indexes" tabindex="-1">Multiple Sitemap Indexes <a class="header-anchor" href="#multiple-sitemap-indexes" aria-hidden="true">#</a></h3><p>For larger websites, Sitemaps also support multiple <a href="https://support.google.com/webmasters/answer/75712?hl=en" target="_blank" rel="noopener noreferrer">Sitemap indexes</a> which lets you split sitemap urls across multiple files. To take advantage of this in <code>SitemapFeature</code> you would instead populate the <code>SitemapIndex</code> collection with multiple <code>Sitemap</code> entries. An example of this is in the full <a href="https://github.com/ServiceStackApps/TechStacks/blob/a114348e905b4334e93a5408c2fb76c5fb589501/src/TechStacks/TechStacks/AppHost.cs#L90-L128" target="_blank" rel="noopener noreferrer">Sitemap used by techstacks.io</a>:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SitemapFeature</span>
<span class="token punctuation">{</span>
    SitemapIndex <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Sitemap</span> <span class="token punctuation">{</span>
            AtPath <span class="token operator">=</span> <span class="token string">&quot;/sitemap-techstacks.xml&quot;</span><span class="token punctuation">,</span>
            LastModified <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">,</span>
            UrlSet <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TechnologyStack<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>q <span class="token operator">=&gt;</span> q<span class="token punctuation">.</span><span class="token function">OrderByDescending</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>LastModified<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SitemapUrl</span>
                <span class="token punctuation">{</span>
                    Location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ClientTechnologyStack</span> <span class="token punctuation">{</span> Slug <span class="token operator">=</span> x<span class="token punctuation">.</span>Slug <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">ToAbsoluteUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    LastModified <span class="token operator">=</span> x<span class="token punctuation">.</span>LastModified<span class="token punctuation">,</span>
                    ChangeFrequency <span class="token operator">=</span> SitemapFrequency<span class="token punctuation">.</span>Weekly<span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Sitemap</span> <span class="token punctuation">{</span>
            AtPath <span class="token operator">=</span> <span class="token string">&quot;/sitemap-technologies.xml&quot;</span><span class="token punctuation">,</span>
            LastModified <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">,</span>
            UrlSet <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Technology<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>q <span class="token operator">=&gt;</span> q<span class="token punctuation">.</span><span class="token function">OrderByDescending</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>LastModified<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SitemapUrl</span>
                <span class="token punctuation">{</span>
                    Location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ClientTechnology</span> <span class="token punctuation">{</span> Slug <span class="token operator">=</span> x<span class="token punctuation">.</span>Slug <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">ToAbsoluteUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    LastModified <span class="token operator">=</span> x<span class="token punctuation">.</span>LastModified<span class="token punctuation">,</span>
                    ChangeFrequency <span class="token operator">=</span> SitemapFrequency<span class="token punctuation">.</span>Weekly<span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Sitemap</span>
        <span class="token punctuation">{</span>
            AtPath <span class="token operator">=</span> <span class="token string">&quot;/sitemap-users.xml&quot;</span><span class="token punctuation">,</span>
            LastModified <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">,</span>
            UrlSet <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Select</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>CustomUserAuth<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>q <span class="token operator">=&gt;</span> q<span class="token punctuation">.</span><span class="token function">OrderByDescending</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>ModifiedDate<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SitemapUrl</span>
                <span class="token punctuation">{</span>
                    Location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ClientUser</span> <span class="token punctuation">{</span> UserName <span class="token operator">=</span> x<span class="token punctuation">.</span>UserName <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">ToAbsoluteUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    LastModified <span class="token operator">=</span> x<span class="token punctuation">.</span>ModifiedDate<span class="token punctuation">,</span>
                    ChangeFrequency <span class="token operator">=</span> SitemapFrequency<span class="token punctuation">.</span>Weekly<span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Which now generates the following <code>&lt;sitemapindex/&gt;</code> at <a href="https://techstacks.io/sitemap.xml" target="_blank" rel="noopener noreferrer">/sitemap.xml</a>:</p><div class="language-xml"><pre><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sitemapindex</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.sitemaps.org/schemas/sitemap/0.9<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sitemap</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>loc</span><span class="token punctuation">&gt;</span></span>https://techstacks.io/sitemap-techstacks.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>loc</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lastmod</span><span class="token punctuation">&gt;</span></span>2015-01-15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lastmod</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sitemap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sitemap</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>loc</span><span class="token punctuation">&gt;</span></span>https://techstacks.io/sitemap-technologies.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>loc</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lastmod</span><span class="token punctuation">&gt;</span></span>2015-01-15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lastmod</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sitemap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sitemap</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>loc</span><span class="token punctuation">&gt;</span></span>https://techstacks.io/sitemap-users.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>loc</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lastmod</span><span class="token punctuation">&gt;</span></span>2015-01-15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lastmod</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sitemap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sitemapindex</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>With each entry linking to the urlset for each Sitemap:</p><ul><li><a href="https://techstacks.io/sitemap-techstacks.xml" target="_blank" rel="noopener noreferrer">techstacks.io/sitemap-techstacks.xml</a></li><li><a href="https://techstacks.io/sitemap-technologies.xml" target="_blank" rel="noopener noreferrer">techstacks.io/sitemap-technologies.xml</a></li><li><a href="https://techstacks.io/sitemap-users.xml" target="_blank" rel="noopener noreferrer">techstacks.io/sitemap-users.xml</a></li></ul><h2 id="razor" tabindex="-1">Razor <a class="header-anchor" href="#razor" aria-hidden="true">#</a></h2><p>Services can now specify to return Content Pages for HTML clients (i.e. browsers) by providing the <code>/path/info</code> to the Razor Page:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpResult</span><span class="token punctuation">(</span>responseDto<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        View <span class="token operator">=</span> <span class="token string">&quot;/content-page.cshtml&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>HttpResult.View</code> was previously limited to names of Razor Views in the <code>/Views</code> folder.</p><h2 id="techstacks" tabindex="-1"><a href="https://techstacks.io" target="_blank" rel="noopener noreferrer">Techstacks</a> <a class="header-anchor" href="#techstacks" aria-hidden="true">#</a></h2><p>Whilst not specifically Framework features, we&#39;ve added some features to <a href="https://techstacks.io" target="_blank" rel="noopener noreferrer">techstacks.io</a> that may be interesting for ServiceStack Single Page App developers:</p><h3 id="server-generated-html-pages" tabindex="-1">Server Generated HTML Pages <a class="header-anchor" href="#server-generated-html-pages" aria-hidden="true">#</a></h3><p>Whilst we believe Single Page Apps offer the more responsive UI, we&#39;ve also added a server html version of <a href="https://techstacks.io" target="_blank" rel="noopener noreferrer">techstacks.io</a> which we serve to WebCrawlers like <strong>Googlebot</strong> so they&#39;re better able to properly index content in the AngularJS SPA website. It also provides a good insight into the UX difference between a Single Page App vs Server HTML generated websites. Since <a href="https://techstacks.io" target="_blank" rel="noopener noreferrer">techstacks.io</a> is running on modest hardware (i.e. IIS on shared <strong>m1.small</strong> EC2 instance with a shared <strong>micro</strong> RDS PostgreSQL backend) the differences are more visible with the AngularJS version still being able to yield a snappy App-like experience whilst the full-page reloads of the Server HTML version is clearly visible on each request.</p><p>The code to enable this is in <a href="https://github.com/ServiceStackApps/TechStacks/blob/master/src/TechStacks/TechStacks.ServiceInterface/ClientRoutesService.cs" target="_blank" rel="noopener noreferrer">ClientRoutesService.cs</a> which illustrates a simple technique used to show different versions of your website which by default is enabled implicitly for <code>Googlebot</code> User Agents, or can be toggled explicitly between by visiting the routes below:</p><ul><li><a href="https://techstacks.io?html=client" target="_blank" rel="noopener noreferrer">techstacks.io?html=client</a></li><li><a href="https://techstacks.io?html=server" target="_blank" rel="noopener noreferrer">techstacks.io?html=server</a></li></ul><p>These links determine whether you&#39;ll be shown the AngularJS version or the Server HTML Generated version of the Website. We can see how this works by exploring how the technology pages are implemented which handle both the technology index:</p><ul><li><a href="https://techstacks.io/tech" target="_blank" rel="noopener noreferrer">https://techstacks.io/tech</a></li></ul><p>as well as individual technology pages, e.g:</p><ul><li><a href="https://techstacks.io/tech/redis" target="_blank" rel="noopener noreferrer">https://techstacks.io/tech/redis</a></li><li><a href="https://techstacks.io/tech/servicestack" target="_blank" rel="noopener noreferrer">https://techstacks.io/tech/servicestack</a></li></ul><p>First we need to create empty Request DTO&#39;s to capture the client routes (as they were only previously configured in AngularJS routes):</p><div class="language-csharp"><pre><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/tech&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClientAllTechnologies</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/tech/{Slug}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClientTechnology</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Slug <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then we implement ServiceStack Services for these routes. The <code>ShowServerHtml()</code> helper method is used to determine whether to show the AngularJS or Server HTML version of the website which it does by setting a permanent cookie when <code>techstacks.io?html=server</code> is requested (or if the UserAgent is <code>Googlebot</code>). Every subsequent request then contains the <code>html=server</code> Cookie and so will show the Server HTML version. Users can then go to <code>techstacks.io?html=client</code> to delete the cookie and resume viewing the default AngularJS version:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClientRoutesService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ShowServerHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Request<span class="token punctuation">.</span><span class="token function">GetParam</span><span class="token punctuation">(</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;client&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Response<span class="token punctuation">.</span><span class="token function">DeleteCookie</span><span class="token punctuation">(</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name"><span class="token keyword">var</span></span> serverHtml <span class="token operator">=</span> Request<span class="token punctuation">.</span>UserAgent<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span><span class="token string">&quot;Googlebot&quot;</span><span class="token punctuation">)</span>
            <span class="token operator">||</span> Request<span class="token punctuation">.</span><span class="token function">GetParam</span><span class="token punctuation">(</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;server&quot;</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>serverHtml<span class="token punctuation">)</span>
            Response<span class="token punctuation">.</span><span class="token function">SetPermanentCookie</span><span class="token punctuation">(</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;server&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> serverHtml<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">AngularJsApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpResult</span> <span class="token punctuation">{</span>
            View <span class="token operator">=</span> <span class="token string">&quot;/default.cshtml&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">ClientAllTechnologies</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token function">ShowServerHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">?</span> <span class="token function">AngularJsApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpResult</span><span class="token punctuation">(</span><span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">ExecuteRequest</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">GetAllTechnologies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                View <span class="token operator">=</span> <span class="token string">&quot;AllTech&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">ClientTechnology</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">!</span><span class="token function">ShowServerHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">?</span> <span class="token function">AngularJsApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpResult</span><span class="token punctuation">(</span><span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">ExecuteRequest</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">GetTechnology</span> <span class="token punctuation">{</span> Reload <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> Slug <span class="token operator">=</span> request<span class="token punctuation">.</span>Slug <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                View <span class="token operator">=</span> <span class="token string">&quot;Tech&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The difference between which Website to display boils down to which Razor page to render, where for AngularJS we return the <code>/default.cshtml</code> Home Page where the client routes then get handled by AngularJS. Whereas for the Server HTML version, it just renders the appropriate Razor View for that request.</p><p>The <code>base.ExecuteRequest(new GetAllTechnologies())</code> API lets you execute a ServiceStack Service internally by just passing the <code>GetAllTechnologies</code> Request DTO. The Resposne DTO returned by the Service is then passed as a view model to the <code>/Views/AllTech.cshtml</code> Razor View.</p><p>AngularJS declarative HTML pages holds an advantage when maintaining multiple versions of a websites as porting AngularJS views to Razor is relatively straight-forward process, basically consisting of converting Angular <code>ng-attributes</code> to <code>@Razor</code> statements, as can be seen in the client vs server versions of <a href="https://techstacks.io/tech" target="_blank" rel="noopener noreferrer">techstacks.io/tech</a> index page:</p><ul><li><a href="https://github.com/ServiceStackApps/TechStacks/blob/master/src/TechStacks/TechStacks/partials/tech/latest.html" target="_blank" rel="noopener noreferrer">/partials/tech/latest.html</a></li><li><a href="https://github.com/ServiceStackApps/TechStacks/blob/master/src/TechStacks/TechStacks/Views/Tech/AllTech.cshtml" target="_blank" rel="noopener noreferrer">/Views/Tech/AllTech.cshtml</a></li></ul><h3 id="twitter-updates" tabindex="-1">Twitter Updates <a class="header-anchor" href="#twitter-updates" aria-hidden="true">#</a></h3><p>Another way to increase user engagement of your website is by posting Twitter Updates, <a href="https://techstacks.io" target="_blank" rel="noopener noreferrer">techstacks.io</a> does this whenever anyone adds a new Technology or Technology Stack by posting a status update to <a href="https://twitter.com/webstacks" target="_blank" rel="noopener noreferrer">@webstacks</a>. The <a href="https://github.com/ServiceStackApps/TechStacks/blob/master/src/TechStacks/TechStacks.ServiceInterface/TwitterUpdates.cs" target="_blank" rel="noopener noreferrer">code to make authorized Twitter API requests</a> ends up being fairly lightweight as it can take advantage of ServiceStack&#39;s built-in support for Twitter OAuth.</p><blockquote><p>We&#39;d also love for others to Sign In and add their Company&#39;s Technology Stack on <a href="https://techstacks.io" target="_blank" rel="noopener noreferrer">techstacks.io</a> so everyone can get a better idea what technologies everyone&#39;s using.</p></blockquote><h2 id="servicestack-text" tabindex="-1">ServiceStack.Text <a class="header-anchor" href="#servicestack-text" aria-hidden="true">#</a></h2><p>CSV Serializer now supports serializing <code>List&lt;dynamic&gt;</code>:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">dynamic</span><span class="token punctuation">&gt;</span></span> rows <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bar&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">object</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> Id <span class="token operator">=</span> i<span class="token operator">++</span><span class="token punctuation">,</span> Name <span class="token operator">=</span> x <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rows<span class="token punctuation">.</span><span class="token function">ToCsv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Or <code>List&lt;object&gt;</code>:</p><div class="language-csharp"><pre><code><span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> rows <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;Foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Bar&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">object</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> Id <span class="token operator">=</span> i<span class="token operator">++</span><span class="token punctuation">,</span> Name <span class="token operator">=</span> x <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rows<span class="token punctuation">.</span><span class="token function">ToCsv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Both will Print:</p><pre><code>Id,Name
0,Foo
1,Bar
</code></pre><h2 id="servicestackvs-updated" tabindex="-1">ServiceStackVS Updated <a class="header-anchor" href="#servicestackvs-updated" aria-hidden="true">#</a></h2><p><a href="https://github.com/ServiceStack/ServiceStackVS" target="_blank" rel="noopener noreferrer">ServiceStackVS</a> received another minor bump, the latest version can be <a href="https://visualstudiogallery.msdn.microsoft.com/5bd40817-0986-444d-a77d-482e43a48da7" target="_blank" rel="noopener noreferrer">downloaded from the Visual Studio Gallery</a>.</p><h2 id="breaking-changes" tabindex="-1">Breaking Changes <a class="header-anchor" href="#breaking-changes" aria-hidden="true">#</a></h2><h3 id="authprovider-validation-moved-to-authfeature" tabindex="-1">AuthProvider Validation moved to AuthFeature <a class="header-anchor" href="#authprovider-validation-moved-to-authfeature" aria-hidden="true">#</a></h3><p>Like other Plugin options the configuration of validating unique Emails as been moved from <code>AuthProvider.ValidateUniqueEmails</code> to:</p><div class="language-csharp"><pre><code>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ValidateUniqueEmails <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    ValidateUniqueUserNames <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This includes the new <code>ValidateUniqueUserNames</code> option to specify whether or not the UserNames from different OAuth Providers should be unique (validation is disabled by default).</p><h3 id="pooledredisclientsmanager-db-is-nullable" tabindex="-1">PooledRedisClientsManager Db is nullable <a class="header-anchor" href="#pooledredisclientsmanager-db-is-nullable" aria-hidden="true">#</a></h3><p>In order to be able to specify what redis <strong>DB</strong> the <code>PooledRedisClientsManager</code> should use on the connection string (e.g: <code>localhost?db=1</code>) we&#39;ve changed <code>PooledRedisClientsManager.Db</code> to be an optional <code>long?</code>. If you&#39;re switching between multiple Redis DB&#39;s in your Redis Clients you should explicitly specify what Db should be the default so that Redis Clients retrieved from the pool are automatically reset to that DB, with either:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PooledRedisClientsManager</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">initialDb</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>or via the connection string:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PooledRedisClientsManager</span><span class="token punctuation">(</span><span class="token string">&quot;localhost?db=1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>`,79),r=[c,l,i];function u(k,d,h,g,m,f){return e(),a("div",null,r)}var w=s(p,[["render",u]]);export{b as __pageData,w as default};
